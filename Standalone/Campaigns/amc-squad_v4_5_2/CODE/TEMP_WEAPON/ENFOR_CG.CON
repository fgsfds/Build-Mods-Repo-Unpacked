/*
-------------------------------------------------------------------------------
===============================================================================

         -ooo:             +oo-            `+oo.       ./+oooooooooo+/:
        /NMMMN+            NMMNo`         -dMMM/      .mMMNmmmmmmmmmMMNo
       /NMd:mMMo           NMMNMd:      `oNMNMM/      :MMM/.........mMMh
      oNMd. -mMMy`         NMN:mMNs`   -hMm/mMM/      :MMM:         ::-.
    `sMMh`   .dMMh`        NMN .sNMd:`oNMh. mMM/      :MMM:
   `yMMMdhhhhhmMMMd.       NMN   /mMNdMm+`  mMM/      :MMM:         ss+:
  `hMMdhhhhhhhhhmMMm-      NMN    .yMMh.    mMM/      :MMM/.........mMMh
 .dMMs`         .hMMm:     NMN      :/`     mMM/      .mMMNmmmmmmmmmMMNo
 :oo+            `+oo+     +o+              +oo.       ./++ooooooooo+/:

###############################################################################
+ The AMC Squad
+ CON code by James Stanfield, Cedric "Sangman" Haegeman, Dino Bollinger,
+              Mikko Sandt, Cedric "Zaxtor" Lutes and Dan "Danarama" Gaskill
-------------------------------------------------------------------------------
* See AMC_MAIN.CON for a full list of script authors.

Feel free to use any code in the game for your own uses; just make
sure to mention the authors and/or "The AMC Squad" in your credits.
--------------------------------------------------------------------------------
NOTES:
This file contains code for the Enforcer Chaingun temp weapons.
--------------------------------------------------------------------------------
*/

appendevent EVENT_LOOKLEFT // Alt Fire
    ife cur_weap 0 ife player[].weapon_pos 0 ife allow_fire YES
    {
        ife temp_weap 5
          ife WEAPONS_RESEARCH[11] 2
        {
            ife player[].kickback_pic 0
            {
                sound MINIGUN3_START
                setp[].kickback_pic 1
            }
            ifg player[].kickback_pic 2
                setp[].kickback_pic 1
        }
        ife temp_weap 24
          ife WEAPONS_RESEARCH[11] 2
        {
            ife player[].kickback_pic 0
            {
                sound MINIGUN3_START
                setp[].kickback_pic 1
            }
            ifg player[].kickback_pic 2
                setp[].kickback_pic 1
        }
    }
endevent

// both are in the same CON file since they're duplicates
defstate tw_enforcer_chaingun_code
    setarray WEAPON_TILE[0] LIZMANGUNSPRITE
	ife WEAPONS_RESEARCH[11] 2 setarray weap_special[0] 16384
    else setarray weap_special[0] 0
    set weapon_type 2

    set gun_mag -1
    set GUN_SIZE 1
    set GUN_HANDS 2
    set GUN_VOLUME 16
    set GUN_ACCURACY 12
    set GUN_MAX_SPREAD 64
    set GUN_AMMO_TYPES 0

    set WEAPON0_FLAGS 4
    set WEAPON0_WORKSLIKE 0
    set WEAPON0_TOTALTIME 4
    set WEAPON0_HOLDDELAY 3
    set WEAPON0_FIREDELAY 2
    set WEAPON0_FIRESOUND 4
    set WEAPON0_INITIALSOUND MINIGUN3_START
    set WEAPON0_SHOTSPERBURST 1
    set WEAPON0_SHOOTS ZRIFLESHOT
    set WEAPON0_SELECTSOUND SELECT_BIG_WEAPON

    ife kickbackpic 2
    {
        espawn SOUND_SPRITE
        state SPAWN_IN_PLAYER_FRONT
        setactorvar[RETURN].temp LIZM_GUNF
        set gun_recoil 5
        add gun_spread 8
    }
    else ife kickbackpic 3
    {
        shoot RIFLESHELL
        set gunsmoke_angle 64
        state spawn_gunsmoke
    }
ends

defstate tw_enforcer_laser_code
    setarray WEAPON_TILE[0] LIZMANFGUNSPRITE
	ife WEAPONS_RESEARCH[11] 2 setarray weap_special[0] 16384
    else setarray weap_special[0] 0
    set weapon_type 8

    set gun_mag -1
    set GUN_SIZE 1
    set GUN_HANDS 2
    set GUN_VOLUME 15
    set GUN_ACCURACY 32
    set GUN_MAX_SPREAD 0
    set GUN_AMMO_TYPES 0

    set WEAPON0_FLAGS 6
    set WEAPON0_WORKSLIKE 0
    set WEAPON0_TOTALTIME 4
    set WEAPON0_HOLDDELAY 3
    set WEAPON0_FIREDELAY 2
    set WEAPON0_FIRESOUND 4
    set WEAPON0_INITIALSOUND MINIGUN3_START
    set WEAPON0_SHOTSPERBURST 1
    set WEAPON0_SHOOTS FIRELASER
    set WEAPON0_SELECTSOUND SELECT_BIG_WEAPON

    ife kickbackpic 1
        set gun_recoil 5
    else ife kickbackpic 2
    {
        espawn SOUND_SPRITE
        state SPAWN_IN_PLAYER_FRONT
        setactorvar[RETURN].temp PRED_ATTACK
        set gunsmoke_angle 64
        state spawn_gunsmoke
    }
ends
