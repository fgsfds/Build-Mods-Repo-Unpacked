/*
-------------------------------------------------------------------------------
===============================================================================

         -ooo:             +oo-            `+oo.       ./+oooooooooo+/:
        /NMMMN+            NMMNo`         -dMMM/      .mMMNmmmmmmmmmMMNo
       /NMd:mMMo           NMMNMd:      `oNMNMM/      :MMM/.........mMMh
      oNMd. -mMMy`         NMN:mMNs`   -hMm/mMM/      :MMM:         ::-.
    `sMMh`   .dMMh`        NMN .sNMd:`oNMh. mMM/      :MMM:
   `yMMMdhhhhhmMMMd.       NMN   /mMNdMm+`  mMM/      :MMM:         ss+:
  `hMMdhhhhhhhhhmMMm-      NMN    .yMMh.    mMM/      :MMM/.........mMMh
 .dMMs`         .hMMm:     NMN      :/`     mMM/      .mMMNmmmmmmmmmMMNo
 :oo+            `+oo+     +o+              +oo.       ./++ooooooooo+/:

###############################################################################
+ The AMC Squad
+ CON code by James Stanfield, Cedric "Sangman" Haegeman, Dino Bollinger,
+              Mikko Sandt, Cedric "Zaxtor" Lutes and Dan "Danarama" Gaskill
-------------------------------------------------------------------------------
* See AMC_MAIN.CON for a full list of script authors.

Feel free to use any code in the game for your own uses; just make
sure to mention the authors and/or "The AMC Squad" in your credits.
--------------------------------------------------------------------------------
NOTES:
This file is for Mikko to add the necessary CON code to his levels.
--------------------------------------------------------------------------------
*/


var MIKKOSWITCH 0 0
define PROGRAMSWITCH 13032

appendevent EVENT_ENTERLEVEL

setvar SLO_MO_SHOWOFF 1

endevent

//Switch

useractor notenemy PROGRAMSWITCH

cstator 257

ifaction 0
    {
    geta[].pal temp
    spritepal 0
    action ZERO
    }

ifn MIKKOSWITCH 0 lockplayer 30

ifp palive ifpdistl 1024 ifp pfacing ifcansee
{
set player_use 0
ife MIKKOSWITCH 0
    {
    ifhitspace
     ifcount 13
       {
       set hit_key 30
        ife CHAR 7 {  set MIKKOSWITCH temp globalsound INTERFACE_3 } else { set MIKKOSWITCH 5 globalsound COMP_INVALID }
        resetcount
       }
    }
else
    {
    ifhitspace
     ifcount 13
       {
       set hit_key 30
       globalsound INTERFACE_1
       set MIKKOSWITCH 0
       lockplayer 0
       resetcount
       }
      ifp pjumping
       {
       globalsound INTERFACE_1
       set MIKKOSWITCH 0
       lockplayer 0
       resetcount
       }
    }
 }
    /*else { set MIKKOSWITCH 0 }*/

enda

//Events

appendevent EVENT_DISPLAYREST

switch MIKKOSWITCH
 case 1 // Sang
  myospal 200 100 3827 0 1 0
  rotatespritea 130 26 HALFSIZE 0 3826 0 0 0 -255 0 0 xdim ydim
  minitext 105 23 2056 0 4 ; minitext 106 23 2056 0 2
  rotatesprite 60 80 49152 0 24011 0 21 0 windowx1 windowy1 windowx2 windowy2

  gametextz 2822 360 28 2075 0 2 0 0 0 xdim ydim 42767

  gametextz 2822 210 44 2038 0 1 0 0 0 xdim ydim 32767
  gametextz 2822 210 50 2060 0 2 0 0 0 xdim ydim 32767

  gametextz 2822 210 58 2039 0 1 0 0 0 xdim ydim 32767
  gametextz 2822 210 64 2061 0 2 0 0 0 xdim ydim 32767

  gametextz 2822 210 72 2040 0 1 0 0 0 xdim ydim 32767
  gametextz 2822 210 78 2066 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 84 2067 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 90 2068 0 2 0 0 0 xdim ydim 32767
  break
 case 2 // Zaxtor
  myospal 200 100 3827 0 1 0
  rotatespritea 130 26 HALFSIZE 0 3826 0 0 0 -255 0 0 xdim ydim
  minitext 105 23 2026 0 4 ; minitext 106 23 2026 0 2
  rotatesprite 60 90 49152 0 5611 0 21 0 windowx1 windowy1 windowx2 windowy2

  gametextz 2822 360 28 2075 0 2 0 0 0 xdim ydim 42767

  gametextz 2822 210 44 2027 0 1 0 0 0 xdim ydim 32767
  gametextz 2822 210 50 2057 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 56 2028 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 62 2029 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 68 2030 0 2 0 0 0 xdim ydim 32767

  gametextz 2822 210 76 2031 0 1 0 0 0 xdim ydim 32767
  gametextz 2822 210 82 2058 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 88 2032 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 94 2033 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 100 2034 0 2 0 0 0 xdim ydim 32767

  gametextz 2822 210 108 2035 0 1 0 0 0 xdim ydim 32767
  gametextz 2822 210 114 2059 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 120 2036 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 126 2037 0 2 0 0 0 xdim ydim 32767
  break
 case 3 // James
  myospal 200 100 3827 0 1 0
  rotatespritea 130 26 HALFSIZE 0 3826 0 0 0 -255 0 0 xdim ydim
  minitext 105 23 2054 0 4 ; minitext 106 23 2054 0 2
  rotatesprite 60 80 49152 0 25635 0 0 0 windowx1 windowy1 windowx2 windowy2

  gametextz 2822 360 28 2075 0 2 0 0 0 xdim ydim 42767

  gametextz 2822 210 44 2041 0 1 0 0 0 xdim ydim 32767
  gametextz 2822 210 50 2063 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 56 2042 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 62 2043 0 2 0 0 0 xdim ydim 32767

  gametextz 2822 210 70 2044 0 1 0 0 0 xdim ydim 32767
  gametextz 2822 210 76 2045 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 82 2046 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 88 2047 0 2 0 0 0 xdim ydim 32767

  gametextz 2822 210 96 2048 0 1 0 0 0 xdim ydim 32767
  gametextz 2822 210 102 2064 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 108 2049 0 2 0 0 0 xdim ydim 32767
  break
 case 4 // Micky
  myospal 200 100 3827 0 1 0
  rotatespritea 130 26 HALFSIZE 0 3826 0 0 0 -255 0 0 xdim ydim
  minitext 105 23 2055 0 4 ; minitext 106 23 2055 0 2
  rotatesprite 60 80 49152 0 16580 0 0 0 windowx1 windowy1 windowx2 windowy2

  gametextz 2822 360 28 2075 0 2 0 0 0 xdim ydim 42767

  gametextz 2822 210 44 2050 0 1 0 0 0 xdim ydim 32767
  gametextz 2822 210 50 2069 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 56 2070 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 62 2071 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 68 2072 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 74 2073 0 2 0 0 0 xdim ydim 32767

  gametextz 2822 210 82 2074 0 1 0 0 0 xdim ydim 32767
  gametextz 2822 210 88 2051 0 2 0 0 0 xdim ydim 32767
  gametextz 2822 210 94 2052 0 2 0 0 0 xdim ydim 32767
  break
 case 5
  rotatespritea 150 102 65536 0 3826 0 2 0 -255 0 0 xdim ydim
  gametextz 2822 210 103 2053 0 2 0 0 0 xdim ydim 49152
  break
endswitch

endevent
