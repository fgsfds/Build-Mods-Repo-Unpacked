/*
-------------------------------------------------------------------------------
===============================================================================

         -ooo:             +oo-            `+oo.       ./+oooooooooo+/:
        /NMMMN+            NMMNo`         -dMMM/      .mMMNmmmmmmmmmMMNo
       /NMd:mMMo           NMMNMd:      `oNMNMM/      :MMM/.........mMMh
      oNMd. -mMMy`         NMN:mMNs`   -hMm/mMM/      :MMM:         ::-.
    `sMMh`   .dMMh`        NMN .sNMd:`oNMh. mMM/      :MMM:
   `yMMMdhhhhhmMMMd.       NMN   /mMNdMm+`  mMM/      :MMM:         ss+:
  `hMMdhhhhhhhhhmMMm-      NMN    .yMMh.    mMM/      :MMM/.........mMMh
 .dMMs`         .hMMm:     NMN      :/`     mMM/      .mMMNmmmmmmmmmMMNo
 :oo+            `+oo+     +o+              +oo.       ./++ooooooooo+/:

###############################################################################
+ The AMC Squad
+ CON code by James Stanfield, Cedric "Sangman" Haegeman, Dino Bollinger,
+              Mikko Sandt, Cedric "Zaxtor" Lutes and Dan "Danarama" Gaskill
-------------------------------------------------------------------------------
* See AMC_MAIN.CON for a full list of script authors.

Feel free to use any code in the game for your own uses; just make
sure to mention the authors and/or "The AMC Squad" in your credits.
--------------------------------------------------------------------------------
NOTES:
This file defines the display code for Micky's weapons.
--------------------------------------------------------------------------------
*/

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 1 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// Micky's Pistol===============================================================================================================

defstate draw_auto9_pistol

  set x 209
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 235
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 33
        sub y 40
        rotatespritea x y 28000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 33
        add y 40
        guniqhudid 0
        }

guniqhudid 0
ifg kickbackpic_2 0
	switch kickbackpic_2
		case 1 
		case 2 
			guniqhudid 10
			rotatesprite x y 40960 0 19949 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
			break
		case 3
		case 4 
			guniqhudid 10
			rotatesprite x y 40960 0 19950 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
			break
		case 5
		case 6
			guniqhudid 10
			rotatesprite x y 40960 0 19951 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
			break
		case 7
		case 8
			guniqhudid 10
			rotatesprite x y 40960 0 19952 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
			break
		case 9
		case 10
			guniqhudid 10
			rotatesprite x y 40960 0 19953 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
			break
	endswitch
else
switch weaponcount
case 0
case 1
  set weap_disp_temp2 player[].weapon_pos
  ife weap_disp_temp2 8 soundonce SELECT_PISTOL
  state wep_drawup
  state gunpushback_display
  ife PISTOLMAG 0 set tilenum 16480 else set tilenum 16478
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 40
  add x 8
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
displayrandvar gun_pushb_disp 15
add x gun_pushb_disp
add y gun_pushb_disp
  state gun_smoke_display
  displayrandvar rot_flash 2048
  sub y 40
  sub x 33
  guniqhudid 10
  state random_AR_horzflash
  rotatespritea x y 20000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 40
  add x 33
  set tilenum 16479
  guniqhudid 11
  rotatesprite x y 40960 0 tilenum 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 40
  add x 8
  guniqhudid 12
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
case 4
  state gunpushback_display
  set tilenum 16480
  guniqhudid 10
  rotatesprite x y 40960 8 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 40
  add x 8
  guniqhudid 11
  rotatesprite x y 40960 8 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
case 6
case 7
case 8
case 9
case 10
  add y 5
  ife PISTOLMAG 0 set tilenum 16480 else set tilenum 16478
  guniqhudid 10
  rotatesprite x y 40960 16 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 40
  add x 8
  guniqhudid 11
  rotatesprite x y 40960 16 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
  add y 7
  ife PISTOLMAG 0 set tilenum 16481 else set tilenum 16482
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 36
  sub x 8
  guniqhudid 11
  rotatesprite x y 48960 128 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 14
case 15
case 16
  add y 7
  ife weaponcount 16 add y 5
  ife PISTOLMAG 0 set tilenum 16481 else set tilenum 16482
  guniqhudid 10
    rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 36
  sub x 8
  guniqhudid 11
  rotatesprite x y 48960 128 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
  ife PISTOLMAG 0 set tilenum 16481 else set tilenum 16482
  guniqhudid 10
  rotatesprite x y 40960 32 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 36
  sub x 8
  guniqhudid 11
  rotatesprite x y 48960 128 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 24
case 25
case 26
case 27
case 28
case 29
case 30
  add y 5
  ife PISTOLMAG 0 set tilenum 16483 else set tilenum 16484
  guniqhudid 10
    rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 28
  sub x 8
  guniqhudid 11
  rotatesprite x y 48960 192 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 31
case 32
case 33
case 34
    ife weaponcount 32 add y 5
  ife PISTOLMAG 0 set tilenum 16483 else set tilenum 16484
  guniqhudid 10
    rotatesprite x y 40960 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 28
  sub x 8
  guniqhudid 11
  rotatesprite x y 48960 256 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 35
case 36
case 37
case 38
  guniqhudid 10
  set tilenum 16484
    rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 28
  sub x 8
  guniqhudid 11
  rotatesprite x y 48960 192 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 39
case 40
case 41
case 42
case 43
  add y 5
  ife weaponcount 40 sound MC_PISTOL_SLIDE
  set tilenum 16482
  guniqhudid 10
  rotatesprite x y 40960 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 36
  sub x 8
  guniqhudid 11
  rotatesprite x y 48960 192 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// Micky's Gold Pistol===============================================================================================================

defstate draw_gold_metalstorm_pistol

  set x 199
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 33
        sub y 40
        rotatespritea x y 22000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 33
        add y 40
        guniqhudid 0
        }

guniqhudid 0
switch weaponcount
case 0
case 1
  set weap_disp_temp2 player[].weapon_pos
  ife weap_disp_temp2 8 soundonce SELECT_PISTOL
  state wep_drawup
  state gunpushback_display
 ife PISTOLMAG 0 set tilenum 16556 else set tilenum 16554
 guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 8
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
displayrandvar gun_pushb_disp 15
add x gun_pushb_disp
add y gun_pushb_disp
  state gun_smoke_display
  displayrandvar rot_flash 2048
  sub y 40
  sub x 33
  guniqhudid 10
  rotatespritea x y 16000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 40
  add x 33
  guniqhudid 11
  rotatesprite x y 40960 0 16555 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 8
  guniqhudid 12
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
case 4
  state gunpushback_display
 set tilenum 16556
 guniqhudid 10
  rotatesprite x y 40960 8 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 8
  guniqhudid 11
  rotatesprite x y 40960 8 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
case 6
case 7
case 8
case 9
case 10
  add y 5
  ife PISTOLMAG 0 set tilenum 16556 else set tilenum 16554
  guniqhudid 10
  rotatesprite x y 40960 16 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 8
  guniqhudid 11
  rotatesprite x y 40960 16 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
  add y 7
  ife PISTOLMAG 0 set tilenum 16556 else set tilenum 16554
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 8
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 14
case 15
case 16
  add y 7
  ife weaponcount 16 add y 5
  ife PISTOLMAG 0 set tilenum 16557 else set tilenum 16558
  guniqhudid 10
    rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 22
  sub x 6
  guniqhudid 11
  rotatesprite x y 40960 64 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
  ife PISTOLMAG 0 set tilenum 16557 else set tilenum 16558
  guniqhudid 10
  rotatesprite x y 40960 32 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 20
  sub x 6
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 24
case 25
case 26
case 27
case 28
case 29
case 30
  add y 5
  ife PISTOLMAG 0 set tilenum 16557 else set tilenum 16558
  guniqhudid 10
    rotatesprite x y 40960 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 18
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 128 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 31
case 32
case 33
case 34
    ife weaponcount 32 add y 5
  ife PISTOLMAG 0 set tilenum2 16557 else set tilenum2 16558
  guniqhudid 10
    rotatesprite x y 40960 96 tilenum2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 14
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 160 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 35
case 36
case 37
case 38
  guniqhudid 10
  rotatesprite x y 40960 98 tilenum2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 14
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 162 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 39
case 40
case 41
case 42
case 43
  add y 5
  ife tilenum2 16557 ife weaponcount 40 sound MC_PISTOL_SLIDE
  ife tilenum2 16486 ife weaponcount 40 sound MC_PISTOL_SLIDE
  set tilenum 16558
  guniqhudid 10
  rotatesprite x y 40960 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 18
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 128 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// Micky's Longslide===============================================================================================================

defstate draw_longside

   set x 199
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 33
        sub y 40
        rotatespritea x y 26000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 33
        add y 40
        guniqhudid 0
        }

guniqhudid 0
switch weaponcount
case 0
case 1
  set weap_disp_temp2 player[].weapon_pos
  ife weap_disp_temp2 8 soundonce SELECT_PISTOL
  state wep_drawup
  state gunpushback_display
 ife PISTOLMAG 0 set tilenum 17985 else set tilenum 17983
 guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 20
  add x 8
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
displayrandvar gun_pushb_disp 15
add x gun_pushb_disp
add y gun_pushb_disp
  state gun_smoke_display
  displayrandvar rot_flash 2048
  sub y 40
  sub x 33
  guniqhudid 10
  rotatespritea x y 16000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 40
  add x 33
  guniqhudid 11
  rotatesprite x y 40960 0 17984 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 20
  add x 8
  guniqhudid 12
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
case 4
  state gunpushback_display
 set tilenum 17985
  guniqhudid 10
  rotatesprite x y 40960 8 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 20
  add x 8
  guniqhudid 11
  rotatesprite x y 40960 8 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
case 6
case 7
case 8
case 9
case 10
  add y 5
  ife PISTOLMAG 0 set tilenum 17985 else set tilenum 17983
  guniqhudid 10
  rotatesprite x y 40960 16 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 20
  add x 8
  guniqhudid 11
  rotatesprite x y 40960 16 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
  add y 7
  ife PISTOLMAG 0 set tilenum 17985 else set tilenum 17983
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 20
  add x 8
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 14
case 15
case 16
  add y 7
  ife weaponcount 16 add y 5
  ife PISTOLMAG 0 set tilenum 17986 else set tilenum 17987
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 22
  sub x 6
  guniqhudid 11
  rotatesprite x y 40960 64 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
  ife PISTOLMAG 0 set tilenum 17986 else set tilenum 17987
  guniqhudid 10
    rotatesprite x y 40960 32 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 20
  sub x 6
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 24
case 25
case 26
case 27
case 28
case 29
case 30
  add y 5
  ife PISTOLMAG 0 set tilenum 17986 else set tilenum 17987
  guniqhudid 10
    rotatesprite x y 40960 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 18
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 128 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 31
case 32
case 33
case 34
    ife weaponcount 32 add y 5
  ife PISTOLMAG 0 set tilenum2 17986 else set tilenum2 17987
  guniqhudid 10
    rotatesprite x y 40960 96 tilenum2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 14
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 160 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 35
case 36
case 37
case 38
  guniqhudid 10
    rotatesprite x y 40960 98 tilenum2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 14
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 162 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 39
case 40
case 41
case 42
case 43
  add y 5
  ife tilenum2 17986 ife weaponcount 40 sound S1911_SLIDE
  set tilenum 17987
  guniqhudid 10
    rotatesprite x y 40960 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 18
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 128 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// Micky's tec-smg===============================================================================================================

defstate TECSMG_SCANNER
  guniqhudid 0
  sub y 50
  sub x 23
  digitalnumber 3010 x y PISTOLMAG 0 125 4096 windowx1 windowy1 windowx2 windowy2

  ifn hitsprite -1
    {
    geta[hitsprite].extra weap_disp_temp
    ifg weap_disp_temp 0
        {
        add y 10
        add x 5
        digitalnumber 3010 x y weap_disp_temp 0 124 4096 windowx1 windowy1 windowx2 windowy2
        }
    }
ends

defstate draw_tecsmg

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  clamp y 143 320

 ifand gun_firemode 16384
    {
    add x 15
    add y 15
    }

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 40
        sub y 15
        rotatespritea x y 28000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 40
        add y 15
        guniqhudid 0
        }

guniqhudid 0
switch weaponcount
case 0
case 1
case 35
case 4
case 5
  ifand gun_firemode 16384 // Ironsight?
      {
      set rot_flash 0
          set x 160
          set weap_disp_temp2 wepsway_x
          divvar weap_disp_temp2 2
          sub x weap_disp_temp2
          set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
          divvar weap_disp_temp4 2 // divide it by 2
          add x weap_disp_temp4 // add it to x
          sub x 5 // offset it by 5
          set y 135
          set weap_disp_temp3 wepsway_y
          divvar weap_disp_temp3 2
          sub y weap_disp_temp3
          state gunpushback_sight_display
          // rotatesprite x y weap_disp_temp8 0 19852 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // barrel part of ironsight
          sub y 35
          guniqhudid 10
          rotatespritea x y 4096 0 11047 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // holotech dot
          set x 160
          sub x wepsway_x
          add x weapon_xoffset // add weaponxsway to position
          sub x 10 // offset it by 10
          set y 132
          sub y wepsway_y
          guniqhudid 11
          rotatesprite x y weap_disp_temp8 0 19851 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // holotech sight
          ifl player_shade_diff -5
                {
                set weap_disp_temp3 player_shade_diff
                mulvar weap_disp_temp3 2
                sub y 30
                guniqhudid 12
                rotatespritea x y 12192 0 2587 player_shade_diff wall_pal 33 weap_disp_temp3 windowx1 windowy1 windowx2 windowy2 // Glass in holosight
                }
      }
  else
   {
    ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_PISTOL state sound_lower_weapon }
    state wep_drawup
    guniqhudid 10
    rotatesprite x y 49152 weap_disp_temp2 19879 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 11
    rotatespritea x y 49152 weap_disp_temp2 19863 0 8 4096 -255 windowx1 windowy1 windowx2 windowy2
    state TECSMG_SCANNER
    }
    break
case 2
    ife rot_flash 0 displayrandvar rot_flash 2048
     ifand gun_firemode 16384
        {
        set x 160
        set weap_disp_temp2 wepsway_x
        divvar weap_disp_temp2 2
        sub x weap_disp_temp2
        set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
        divvar weap_disp_temp4 2 // divide it by 2
        add x weap_disp_temp4 // add it to x
        sub x 5 // offset it by 5
        set y 135
        set weap_disp_temp3 wepsway_y
        divvar weap_disp_temp3 2
        sub y weap_disp_temp3
        guniqhudid 10
        rotatespritea 160 120 26000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        set gun_pushb_disp 10
        state gunpushback_sight_display
        guniqhudid 11
        rotatesprite x y weap_disp_temp8 0 19851 0 108 4096 windowx1 windowy1 windowx2 windowy2
        sub y 35
        guniqhudid 12
        rotatespritea x y 4096 0 11047 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // holotech dot
        }
    else
        {
        add x 2
        add y 2
        sub y 15
        sub x 40
		state gun_smoke_display
        guniqhudid 10
        rotatespritea x y 22000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        add y 15
        add x 40
        guniqhudid 11
        rotatesprite x y 49152 0 19875 0 107 4096 windowx1 windowy1 windowx2 windowy2
        guniqhudid 12
        rotatesprite x y 49152 0 19863 shade 107 9 windowx1 windowy1 windowx2 windowy2
        }
    break
case 3
    add x 4
    add y 4
      guniqhudid 10
      rotatesprite x y 49152 0 19875 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 49152 0 19863 shade 0 9 windowx1 windowy1 windowx2 windowy2
    break
case 6
    guniqhudid 10
    rotatesprite x y 49152 16 19879 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 7
    guniqhudid 10
    rotatesprite x y 49152 32 19879 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 8
case 9
    guniqhudid 10
    rotatesprite x y 49152 0 19876 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 10
case 11
    sub y 10
    guniqhudid 10
    rotatesprite x y 49152 0 19876 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 12
case 13
    sub y 15
    ife weaponcount 13 add y 10
    guniqhudid 10
    rotatesprite x y 49152 0 19876 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 14
case 15
    sub y 20
    guniqhudid 10
    rotatesprite x y 49152 0 19876 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 16
case 17
    sub y 20
    guniqhudid 10
    rotatesprite x y 49152 0 19877 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 18
case 19
    sub y 20
    guniqhudid 10
    rotatesprite x y 49152 0 19877 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 20
case 21
    sub y 20
    guniqhudid 10
    rotatesprite x y 49152 0 19877 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 22
case 23
case 24
case 28
case 29
case 30
    ife weaponcount 28 sub y 10
    guniqhudid 10
    rotatesprite x y 49152 0 19876 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 25
case 26
case 27
    add y 5
    guniqhudid 10
    rotatesprite x y 49152 0 19876 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 31
case 32
    guniqhudid 10
    rotatesprite x y 49152 32 19876 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 33
case 34
    guniqhudid 10
    rotatesprite x y 49152 16 19879 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 11
    rotatesprite x y 49152 16 19863 shade wep_pal 9 windowx1 windowy1 windowx2 windowy2
    break
endswitch
guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 2 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// MICKY'S Pulsegun ===============================================================================================================

defstate draw_mc_shotgun

  set x 207
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 245
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  	ifl gunsmoke_disp2 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp2 1
        guniqhudid 18
        sub x 35
        sub y 35
        rotatespritea x y 36000 0 29952 gunsmoke_disp2 2 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 35
        add y 35
        guniqhudid 0
        }

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 19
        sub x 35
        sub y 35
        rotatespritea x y 36000 0 29952 gunsmoke_disp 8 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 35
        add y 35
        guniqhudid 0
        }

  ife scope 2 { add x 60 add y 60 set weap_disp_temp9 65056 }
else set weap_disp_temp9 49151



guniqhudid 0
ifg kickbackpic_2 0
switch kickbackpic_2
case 3
case 4
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 0 28120 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
   ifand MICKY_UPGRADE 2 rotatesprite x y weap_disp_temp9 0 16473 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
 displayrandvar weap_disp_temp 5
  add x weap_disp_temp
  add y weap_disp_temp
  state gun_smoke2_display
  sub x 35
  sub y 35
 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 18000 rot_flash 16113 0 21 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 35
  add y 35
  guniqhudid 11
  rotatesprite x y weap_disp_temp9 0 28121 0 106 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  ifand MICKY_UPGRADE 2 rotatesprite x y weap_disp_temp9 0 16517 0 106 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
case 6
case 31
case 32
    guniqhudid 10
  rotatesprite x y 49151 0 28122 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 0 16474 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
case 29
case 30
    guniqhudid 10
  rotatesprite x y 49151 25 28122 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 25 16474 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
case 10
case 27
case 28
    guniqhudid 10
  rotatesprite x y 49151 0 28123 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 0 16475 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 25
case 26
  guniqhudid 10
  rotatesprite x y 49151 -15 28123 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 -15 16475 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 13
case 14
case 23
case 24
    guniqhudid 10
  rotatesprite x y 49151 0 28124 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 0 16475 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 15
case 16
case 21
case 22
    guniqhudid 10
  rotatesprite x y 49151 -15 28124 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 -15 16475 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
  sub x 5
  sub y 10
  guniqhudid 10
  rotatesprite x y 49151 -25 28124 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 -25 16475 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
else
switch weaponcount
case 0
case 3
case 4
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
  state wep_drawup
  guniqhudid 10
  ifand MAGIC_UPGRADE[13] 1 set tilenum 28120 else set tilenum 16468
  rotatesprite x y weap_disp_temp9 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
   ifand MICKY_UPGRADE 2 rotatesprite x y weap_disp_temp9 weap_disp_temp2 16473 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   ifand MAGIC_UPGRADE[13] 1 
	{
	state reverse_shade
	guniqhudid 12
	rotatespritea x y weap_disp_temp9 weap_disp_temp2 28125 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
	}
  break
case 1
case 2
 displayrandvar weap_disp_temp 5
  add x weap_disp_temp
  add y weap_disp_temp
  state gun_smoke_display
  sub x 35
  sub y 35
 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 18000 rot_flash 16113 0 11 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 35
  add y 35
  guniqhudid 11
  ifand MAGIC_UPGRADE[13] 1 set tilenum 28121 else set tilenum 16469
  rotatesprite x y weap_disp_temp9 0 tilenum 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  ifand MICKY_UPGRADE 2 rotatesprite x y weap_disp_temp9 0 16517 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   ifand MAGIC_UPGRADE[13] 1 
	{
	state reverse_shade
	guniqhudid 13
	rotatespritea x y weap_disp_temp9 0 28125 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
	}
  break
case 5
case 6
case 31
case 32
    guniqhudid 10
	ifand MAGIC_UPGRADE[13] 1 set tilenum 28122 else set tilenum 16470
  rotatesprite x y 49151 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 0 16474 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     ifand MAGIC_UPGRADE[13] 1 
		{
		state reverse_shade
		guniqhudid 12
		rotatespritea x y 49151 0 28126 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
		}
  break
case 7
case 8
case 29
case 30
    guniqhudid 10
	ifand MAGIC_UPGRADE[13] 1 set tilenum 28122 else set tilenum 16470
  rotatesprite x y 49151 25 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 25 16474 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   ifand MAGIC_UPGRADE[13] 1 
		{
		state reverse_shade
		guniqhudid 12
		rotatespritea x y 49151 25 28126 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
		}
  break
case 9
case 10
case 27
case 28
    guniqhudid 10
	ifand MAGIC_UPGRADE[13] 1 set tilenum 28123 else set tilenum 16471
  rotatesprite x y 49151 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 0 16475 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   ifand MAGIC_UPGRADE[13] 1 
		{
		state reverse_shade
		guniqhudid 12
		rotatespritea x y 49151 0 28127 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
		}
  break
case 11
case 12
case 25
case 26
  guniqhudid 10
  ifand MAGIC_UPGRADE[13] 1 set tilenum 28123 else set tilenum 16471
  rotatesprite x y 49151 -15 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 -15 16475 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   ifand MAGIC_UPGRADE[13] 1 
		{
		state reverse_shade
		guniqhudid 12
		rotatespritea x y 49151 -15 28127 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
		}
  break
case 13
case 14
case 23
case 24
    guniqhudid 10
	ifand MAGIC_UPGRADE[13] 1 set tilenum 28124 else set tilenum 16472
  rotatesprite x y 49151 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 0 16475 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   ifand MAGIC_UPGRADE[13] 1 
		{
		state reverse_shade
		guniqhudid 12
		rotatespritea x y 49151 0 28127 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
		}
  break
case 15
case 16
case 21
case 22
    guniqhudid 10
	ifand MAGIC_UPGRADE[13] 1 set tilenum 28124 else set tilenum 16472
  rotatesprite x y 49151 -15 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 -15 16475 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    ifand MAGIC_UPGRADE[13] 1 
		{
		state reverse_shade
		guniqhudid 12
		rotatespritea x y 49151 -15 28127 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
		}
  break
case 17
case 18
case 19
case 20
  sub x 5
  sub y 10
  guniqhudid 10
  ifand MAGIC_UPGRADE[13] 1 set tilenum 28124 else set tilenum 16472
  rotatesprite x y 49151 -25 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifand MICKY_UPGRADE 2 rotatesprite x y 49151 -25 16475 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   ifand MAGIC_UPGRADE[13] 1 
		{
		state reverse_shade
		guniqhudid 12
		rotatespritea x y 49151 -25 28127 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
		}
  break
endswitch
guniqhudid 0
ends

// MICKY'S Gold shotgun ===============================================================================================================

defstate draw_mc_gold_shotgun

  set x 247
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

   state gunpushback_display
   
   clamp y 153 320

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 46
        sub y 30
        rotatespritea x y 28000 0 29952 gunsmoke_disp 7 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 46
        add y 30
        guniqhudid 0
        }

switch weaponcount
case 0
case 1
case 4
case 5
case 6
case 31
case 32
  state wep_drawup
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
  guniqhudid 10
  rotatesprite x y 45056 weap_disp_temp2 19831 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 82
  add y 20
  guniqhudid 11
  rotatesprite x y 32768 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2

    add x 35
  sub y 25
  state do_gold_sparkle
  break
case 2
case 3
    displayrandvar gun_pushb_disp 15
    add x gun_pushb_disp
    add y gun_pushb_disp
	state gun_smoke_display
    sub x 46
    sub y 30
    displayrandvar rot_flash 2048
    guniqhudid 10
    rotatespritea x y 26000 rot_flash 16115 0 2 4096 -255 windowx1 windowy1 windowx2 windowy2
    add x 46
    add y 30
    guniqhudid 11
    rotatesprite x y 45056 0 19832 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 82
    add y 20
    guniqhudid 12
    rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
case 29
case 30
    guniqhudid 10
    rotatesprite x y 45056 25 19831 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 82
    add y 20
    guniqhudid 11
    rotatesprite x y 32768 10 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
case 10
case 27
case 28
    guniqhudid 10
    rotatesprite x y 45056 0 19833 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 82
    add y 20
    guniqhudid 11
    rotatesprite x y 34768 10 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 25
case 26
    guniqhudid 10
    rotatesprite x y 45056 -15 19833 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 82
    add y 20
    guniqhudid 11
    rotatesprite x y 34768 -15 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 13
case 14
case 23
case 24
    add y 10
    guniqhudid 10
    rotatesprite x y 45056 0 19834 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 80
    add y 24
    guniqhudid 11
    rotatesprite x y 39152 -15 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 15
case 16
case 21
case 22
    add y 20
    guniqhudid 10
    rotatesprite x y 45056 -15 19835 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 75
    add y 34
    guniqhudid 11
    rotatesprite x y 39152 -15 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
    sub x 5
    add y 30
    guniqhudid 10
    rotatesprite x y 45056 -15 19835 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 72
    add y 47
    guniqhudid 11
    rotatesprite x y 42152 -15 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// MICKY'S WHIPLASH SHOTGUNS ==================================================================================================

defstate draw_mc_whiplash_2

  set  x2 97
  sub  x2 wepsway_x
  sub  x2 weapon_xoffset
  add  x2 looking_angSR1

  set y2 245
  sub y2 wepsway_y
  add y2 looking_arc
  sub y2 gun_pos

	ifl gunsmoke_disp2 40 ife INVINC 0
     ifn kickbackpic_2 2
        {
        add gunsmoke_disp2 1
        guniqhudid 19
		add x2 42
		sub y2 40
        rotatespritea x2 y2 33000 0 29952 gunsmoke_disp2 wep_pal 4100 -255 windowx1 windowy1 windowx2 windowy2
		sub x2 42
		add y2 40
        guniqhudid 0
        }

guniqhudid 0
switch kickbackpic_2
case 0
case 1
case 21
  state wep_drawup_rev
  guniqhudid 20
  rotatesprite  x2 y2 32672 weap_disp_temp2 18020 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
    sub x2 5
    add y2 20
    add weap_disp_temp2 96
    guniqhudid 21
    rotatesprite  x2 y2 40960 weap_disp_temp2 C_PISTOL_R shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 3
 displayrandvar weap_disp_temp 5
  add  x2 weap_disp_temp
  add y2 weap_disp_temp
  state gun_smoke2_display
  add x2 42
  sub y2 40
 displayrandvar rot_flash 2048
 guniqhudid 20
  rotatespritea  x2 y2 26638 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  sub x2 42
  add y2 40
  guniqhudid 21
  rotatesprite  x2 y2 32672 1024 18021 0 wep_pal 4100 windowx1 windowy1 windowx2 windowy2
    sub  x2 5
    add y2 20
    guniqhudid 22
    rotatesprite  x2 y2 40960 1120 C_PISTOL_R 0 107 4100 windowx1 windowy1 windowx2 windowy2
  break
case 4
guniqhudid 20
  rotatesprite  x2 y2 32672 1024 18022 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 5
case 6
guniqhudid 20
  rotatesprite  x2 100 32672 1024 18023 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
    sub  x2 30
    guniqhudid 21
    rotatesprite  x2 170 40960 1024 CHOLDING_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
  guniqhudid 20
  rotatesprite 22 137 32672 1024 18024 shade wep_pal 260 windowx1 windowy1 windowx2 windowy2
  break
case 9
case 10
case 11
  guniqhudid 20
  rotatesprite x2 y2 32672 1024 18025 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 12
case 13
case 14
  guniqhudid 20
  rotatesprite x2 y2 32672 1024 18026 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 15
case 16
case 17
  guniqhudid 20
  rotatesprite x2 y2 32672 1024 18027 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 18
case 19
case 20
  guniqhudid 20
  rotatesprite x2 y2 32672 1024 18028 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
 endswitch
guniqhudid 0
ends

defstate draw_mc_whiplash

  set x 227
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 245
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 42
        sub y 40
        rotatespritea x y 33000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 42
        add y 40
        guniqhudid 0
        }

guniqhudid 0
switch weaponcount
case 0
case 1
case 21
  ife player[].weapon_pos 8 sound WHIPLASH_LOAD1
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 32672 weap_disp_temp2 18020 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add x 5
    add y 20
    guniqhudid 11
    rotatesprite x y 40960 -96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 3
 displayrandvar weap_disp_temp 5
  add x weap_disp_temp
  add y weap_disp_temp
  state gun_smoke_display
  sub x 42
  sub y 40
 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 26638 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 42
  add y 40
  guniqhudid 11
  rotatesprite x y 32672 0 18021 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add x 5
    add y 20
    guniqhudid 12
    rotatesprite x y 40960 -96 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 4
  guniqhudid 10
  rotatesprite x y 32672 0 18022 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
case 6
  guniqhudid 10
  rotatesprite x 100 32672 0 18023 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add x 30
    guniqhudid 11
    rotatesprite x 170 40960 0 CHOLDING_L shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
  guniqhudid 10
  rotatesprite 298 137 32672 0 18024 shade wep_pal 512 windowx1 windowy1 windowx2 windowy2
  break
case 9
case 10
case 11
  guniqhudid 10
  rotatesprite x y 32672 0 18025 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
case 13
case 14
  guniqhudid 10
  rotatesprite x y 32672 0 18026 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 15
case 16
case 17
  guniqhudid 10
  rotatesprite x y 32672 0 18027 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 18
case 19
case 20
  guniqhudid 10
  rotatesprite x y 32672 0 18028 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
 endswitch
ifand gun_firemode_two 64 state draw_mc_whiplash_2
guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 3 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// ####################################################################################################################################################################################
// Micky's AR73
// ####################################################################################################################################################################################

defstate draw_ar73

  set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 234
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  ife currentweapon 11
  ife wep_pal 0
        {
        set wep_pal 21
        }

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 60
        sub y 38
        rotatespritea x y 34000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 60
        add y 38
        guniqhudid 0
        }

  set weap_disp_temp5 60
  sub weap_disp_temp5 GUN_HEAT[cur_weap]
guniqhudid 0
switch weaponcount
case 0
case 1
case 3
case 4
case 5
case 6
  ifand gun_firemode 16384 state default_gun_scope
  else
        {
        state wep_drawup
        state gunpushback_display
        guniqhudid 10
        rotatesprite x y 40960 weap_disp_temp2 16566 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        guniqhudid 11
        ifl weap_disp_temp5 30 rotatespritea x y 40960 weap_disp_temp2 16568 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        sub x 75
        add y 20
        guniqhudid 12
        rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        }
    guniqhudid 0
  break
case 2 // firing frame
  ifand gun_firemode 16384 // Using the scope?
          {
              set x 160
              set disp_temp2 wepsway_x
              divvar disp_temp2 2
              sub x disp_temp2
              set y 100
              set disp_temp3 wepsway_y
              divvar disp_temp3 2
              sub y disp_temp3

            state random_AR_flash
            add y 40
            guniqhudid 10
            rotatespritea x y 40000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
            sub y 40
            state default_gun_scope
          }
  else
 {
    add x 5
    add y 5
    set gun_pushb_disp 6
	state gun_smoke_display

      sub y 38
      sub x 60
      displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 72000 rot_flash 16510 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 38
      add x 60
      guniqhudid 11
      rotatesprite x y 40960 0 16567 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      ifl weap_disp_temp5 30 rotatespritea x y 40960 0 16568 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        sub x 75
        add y 20
        guniqhudid 13
        rotatesprite x y 32768 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  }
  break
case 7
case 8
case 9
case 10
case 19
case 20
case 21
case 22
    state gunpushback_display
    guniqhudid 10
    rotatesprite x y 40960 16 16566 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 11
    ifl weap_disp_temp5 30 rotatespritea x y 40960 16 16568 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    sub x 75
    add y 20
    guniqhudid 12
    rotatesprite x y 32768 16 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
case 16
case 17
case 18
add x 10
add y 10
  guniqhudid 10
  rotatesprite x y 40960 16 16569 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatespritea x y 40960 16 16570 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
case 14
add x 10
add y 10
  guniqhudid 10
  rotatesprite x y 40960 24 16569 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatespritea x y 40960 24 16570 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
case 15
add x 10
add y 10
  guniqhudid 10
  rotatesprite x y 40960 32 16569 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatespritea x y 40960 32 16570 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// MICKY'S ASSAULT RIFLE ===============================================================================================================

defstate draw_mc_ar

  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 257
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 55
        sub y 50
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 55
        add y 50
        guniqhudid 0
        }
		
ifvarn pal 1
ifvarn pal 2
ifvarn pal 4
ifvarn pal 7
ifvarn pal 8
ifvarn pal 18
	{
	set cosm_col_id 48
	state cus_gun_colour
	set wep_pal cosm_col
	}

  ifand gun_firemode 16384 { add y 15 add x 15 }
guniqhudid 0
ifand gun_firemode 32768 // Using the AR's GL?
switch gl_countd
case 0
case 43
case 42
case 41
 state wep_drawup
 guniqhudid 10
 rotatesprite x y 45152 weap_disp_temp2 16489 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 1
case 2
case 3
case 4
  guniqhudid 10
 rotatesprite x y 45152 0 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 5
case 6
case 7
case 8
 guniqhudid 10
 rotatesprite x y 45152 32 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 9
case 10
case 11
case 12
case 13
 guniqhudid 10
 rotatesprite x y 45152 32 16508 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 guniqhudid 11
    ifand AMMO_TYPES[cur_weap] 32 rotatesprite x y 45152 32 16509 shade 2 4096 windowx1 windowy1 windowx2 windowy2
    else ifand AMMO_TYPES[cur_weap] 128 rotatesprite x y 45152 32 16509 shade 7 4096 windowx1 windowy1 windowx2 windowy2
    else ifand AMMO_TYPES[cur_weap] 256 rotatesprite x y 45152 32 16509 shade 54 4096 windowx1 windowy1 windowx2 windowy2
    else rotatesprite x y 45152 32 16509 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 14
case 15
case 16
    guniqhudid 10
    rotatesprite x y 45152 0 16508 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 65
    add y 30
    guniqhudid 11
    rotatesprite x y 40960 1024 C_HAND_2 shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
 break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
case 27
case 28
case 29
    guniqhudid 10
    rotatesprite x y 45152 64 16508 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    set weap_disp_temp7 gl_countd
    mulvar weap_disp_temp7 2
    sub weap_disp_temp7 20
    add y weap_disp_temp7
    sub x 105
    state fortymm_case_disp
 break
case 30
case 31
case 32
 guniqhudid 10
 rotatesprite x y 45152 0 16508 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 sub x 128
 add y 33
 guniqhudid 11
 rotatesprite x y 36864 -96 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 33
case 34
case 35
case 36
 guniqhudid 10
 rotatesprite x y 45152 32 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 78
  guniqhudid 11
 rotatesprite x y 32768 32 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 37
case 38
case 39
case 40
 guniqhudid 10
 rotatesprite x y 45152 0 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 sub x 80
 guniqhudid 11
 rotatesprite x y 32768 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 44
case 45
case 46
case 47
case 48
        set weap_disp_temp6 x
        sub weap_disp_temp6 58
        set weap_disp_temp7 y
        sub weap_disp_temp7 52
        displayrandvar rot_flash 2048
        guniqhudid 10
        rotatespritea weap_disp_temp6 weap_disp_temp7 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        guniqhudid 11
        rotatesprite x y 45152 weap_disp_temp2 16490 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
endswitch
else // using AR's mainfiring mode
    {
    switch weaponcount
    case 0
    case 1
    case 3
    case 4
        ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
      ifand gun_firemode 16384 // ironsighting?
            {
              set x 160
              set weap_disp_temp2 wepsway_x
              divvar weap_disp_temp2 2
              sub x weap_disp_temp2
              set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
              divvar weap_disp_temp4 2 // divide it by 2
              add x weap_disp_temp4 // add it to x
              sub x 5 // offset it by 5
              set y 135
              set weap_disp_temp3 wepsway_y
              divvar weap_disp_temp3 2
              sub y weap_disp_temp3
              state gunpushback_sight_display
              guniqhudid 10
              rotatesprite x y weap_disp_temp8 0 19852 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // barrel part of ironsight
              sub y 35
              guniqhudid 11
              rotatespritea x y 4096 0 11047 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // holotech dot
              set x 160
              sub x wepsway_x
              add x weapon_xoffset // add weaponxsway to position
              sub x 10 // offset it by 10
              set y 132
              sub y wepsway_y
              guniqhudid 12
              rotatesprite x y weap_disp_temp8 0 19851 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // holotech sight
              ifl player_shade_diff -5
                    {
                    set weap_disp_temp3 player_shade_diff
                    mulvar weap_disp_temp3 2
                    sub y 30
                    guniqhudid 13
                    rotatespritea x y 12192 0 2587 player_shade_diff wall_pal 33 weap_disp_temp3 windowx1 windowy1 windowx2 windowy2 // Glass in holosight
                    }
            }
          else
                  {
                state wep_drawup
                state gunpushback_display
                guniqhudid 10
                rotatesprite x y 45152 weap_disp_temp2 16489 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
                sub x 85
                add y 10
                guniqhudid 11
                rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
                }
      break
    case 2
      ifand gun_firemode 16384
          {
              set x 160
              set weap_disp_temp2 wepsway_x
              divvar weap_disp_temp2 2
              sub x weap_disp_temp2
              set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
              divvar weap_disp_temp4 2 // divide it by 2
              add x weap_disp_temp4 // add it to x
              sub x 5 // offset it by 5
              set y 135
              set weap_disp_temp3 wepsway_y
              divvar weap_disp_temp3 2
              sub y weap_disp_temp3
          ifand gun_firemode 65536 nullop else
              {
              state random_AR_flash
              guniqhudid 10
              rotatespritea 160 120 20000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
              }
            set gun_pushb_disp 10
             state gunpushback_sight_display
             guniqhudid 11
          rotatesprite x y weap_disp_temp8 0 19852 0 106 0 windowx1 windowy1 windowx2 windowy2
          guniqhudid 12
          rotatesprite x y weap_disp_temp8 0 19851 0 108 0 windowx1 windowy1 windowx2 windowy2
          sub y 35
          guniqhudid 13
          rotatespritea x y 4096 0 11047 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // holotech dot
          }
     else
          {
          displayrandvar gun_pushb_disp 5
          add gun_pushb_disp 5
          state gunpushback_display
		  state gun_smoke_display
          sub x 55
          sub y 50
          state random_AR_flash
          guniqhudid 10
          rotatespritea x y 20000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          add x 55
          add y 50
          guniqhudid 11
          rotatesprite x y 45152 0 16490 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            sub x 85
            add y 10
            guniqhudid 12
            rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
          }
      break
    case 5
    case 6
    case 7
    case 8
    case 9
    case 10
    case 11
    case 36
    case 37
    case 38
    case 39
    case 40
    case 41
    case 42
      guniqhudid 10
      state gunpushback_display
      rotatesprite x y 40960 0 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 14
    case 15
    case 16
    case 17
    case 30
    case 31
    case 32
    case 33
    case 34
    case 35
      sub y 15
      ife kickbackpic 31 sub y 10
      guniqhudid 10
      rotatesprite x y 40960 0 16492 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 60
      add y 40
      guniqhudid 11
      rotatesprite x y 32768 96 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 18
    case 19
    case 20
    case 27
    case 28
    case 29
      sub y 15
      ife kickbackpic 19 add y 10
      guniqhudid 10
      rotatesprite x y 40960 0 16493 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
      sub y 15
      guniqhudid 10
      rotatesprite x y 40960 0 16494 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    // PRESS BOLT CATCH RELOAD
    case 43
    case 61
      guniqhudid 10
      rotatesprite x y 40960 0 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 44
    case 60
      guniqhudid 10
      rotatesprite x y 40960 16 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 45
    case 59
      guniqhudid 10
      rotatesprite x y 40960 32 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 46
    case 58
      guniqhudid 10
      rotatesprite x y 40960 32 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 50
      add y 20
      break
    case 47
    case 57
      guniqhudid 10
      rotatesprite x y 40960 32 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 55
      add y 20
      break
    case 48
    case 56
      add y 5
      guniqhudid 10
      rotatesprite x y 40960 48 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 49
    case 55
      add y 10
      guniqhudid 10
      rotatesprite x y 40960 64 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 50
    case 54
      add y 15
      guniqhudid 10
      rotatesprite x y 40960 76 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 51
    case 53
      add y 20
      guniqhudid 10
      rotatesprite x y 40960 96 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 40
      add y 30
      guniqhudid 11
      rotatesprite x y 32768 0 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 52
      add y 35
      guniqhudid 10
      rotatesprite x y 40960 104 16491 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 40
      add y 30
      guniqhudid 11
      rotatesprite x y 32768 8 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
    }
guniqhudid 0
ends

defstate draw_mc_ar_gl

  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 257
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 55
        sub y 50
        rotatespritea x y 34000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 55
        add y 50
        guniqhudid 0
        }
		
ifvarn pal 1
ifvarn pal 2
ifvarn pal 4
ifvarn pal 7
ifvarn pal 8
ifvarn pal 18
	{
	set cosm_col_id 48
	state cus_gun_colour
	set wep_pal cosm_col
	}

  ifand gun_firemode 16384 { add y 15 add x 15 }
guniqhudid 0
ifand gun_firemode 32768 // Using the M16's GL?
switch gl_countd
case 0
case 43
case 42
case 41
 state wep_drawup
 guniqhudid 10
 rotatesprite x y 45152 weap_disp_temp2 17990 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 1
case 2
case 3
case 4
 guniqhudid 10
 rotatesprite x y 45152 0 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 5
case 6
case 7
case 8
 guniqhudid 10
 rotatesprite x y 45152 32 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 9
case 10
case 11
case 12
case 13
 guniqhudid 10
 rotatesprite x y 45152 32 17996 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 14
case 15
case 16
    guniqhudid 10
    rotatesprite x y 45152 0 17996 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 70
    add y 25
    guniqhudid 11
    rotatesprite x y 40960 1024 C_HAND_2 shade arm_pal 12 windowx1 windowy1 windowx2 windowy2
    add x 70
    sub y 25
    guniqhudid 12
    rotatesprite x y 45152 0 17997 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
case 27
case 28
case 29
    guniqhudid 10
    rotatesprite x y 45152 64 17996 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    set weap_disp_temp7 gl_countd
    mulvar weap_disp_temp7 2
    sub weap_disp_temp7 20
    add y weap_disp_temp7
    sub x 105
    guniqhudid 11
    rotatesprite x y 45152 0 17997 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 30
case 31
case 32
 guniqhudid 10
 rotatesprite x y 45152 0 17995 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 sub x 117
 add y 35
 guniqhudid 11
 rotatesprite x y 40960 -96 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 add x 117
 sub y 35
 guniqhudid 12
 rotatesprite x y 45152 0 17997 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 33
case 34
case 35
case 36
 guniqhudid 10
 rotatesprite x y 45152 32 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 sub x 87
 add y 8
 guniqhudid 11
 rotatesprite x y 40960 32 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 add x 87
 sub y 8
 guniqhudid 12
 rotatesprite x y 45152 32 17998 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 37
case 38
case 39
case 40
 guniqhudid 10
 rotatesprite x y 45152 0 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 sub x 85
 add y 10
 guniqhudid 11
 rotatesprite x y 40960 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 add x 85
 sub y 10
 guniqhudid 12
 rotatesprite x y 45152 0 17998 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 44
case 45
case 46
case 47
case 48
        set weap_disp_temp6 x
        sub weap_disp_temp6 58
        set weap_disp_temp7 y
        sub weap_disp_temp7 52
        displayrandvar rot_flash 2048
        guniqhudid 10
        rotatespritea weap_disp_temp6 weap_disp_temp7 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        guniqhudid 11
        rotatesprite x y 45152 weap_disp_temp2 17991 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
endswitch
else // using AR's mainfiring mode
    {
    guniqhudid 0
    switch weaponcount
    case 0
    case 1
    case 3
    case 4
        ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
        ifand gun_firemode 16384 // Ironsight?
            {
              set x 160
              set weap_disp_temp2 wepsway_x
              divvar weap_disp_temp2 2
              sub x weap_disp_temp2
              set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
              divvar weap_disp_temp4 2 // divide it by 2
              add x weap_disp_temp4 // add it to x
              sub x 5 // offset it by 5
              set y 135
              set weap_disp_temp3 wepsway_y
              divvar weap_disp_temp3 2
              sub y weap_disp_temp3
              state gunpushback_sight_display
              guniqhudid 10
              rotatesprite x y weap_disp_temp8 0 19852 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // barrel part of ironsight
              sub y 35
              guniqhudid 11
              rotatespritea x y 4096 0 11047 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // holotech dot
              set x 160
              sub x wepsway_x
              add x weapon_xoffset // add weaponxsway to position
              sub x 10 // offset it by 10
              set y 132
              sub y wepsway_y
              guniqhudid 12
              rotatesprite x y weap_disp_temp8 0 19851 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // holotech sight
              ifl player_shade_diff -5
                    {
                    set weap_disp_temp3 player_shade_diff
                    mulvar weap_disp_temp3 2
                    sub y 30
                    guniqhudid 13
                    rotatespritea x y 12192 0 2587 player_shade_diff wall_pal 33 weap_disp_temp3 windowx1 windowy1 windowx2 windowy2 // Glass in holosight
                    }
            }
         else
              {
            state wep_drawup
            state gunpushback_display
            guniqhudid 10
            rotatesprite x y 45152 weap_disp_temp2 17990 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            sub x 95
            add y 10
            guniqhudid 11
            rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
            add x 95
            sub y 10
            guniqhudid 12
            rotatesprite x y 45152 weap_disp_temp2 17989 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            }
      break
    case 2
          ifand gun_firemode 16384
          {
              set x 160
              set weap_disp_temp2 wepsway_x
              divvar weap_disp_temp2 2
              sub x weap_disp_temp2
              set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
              divvar weap_disp_temp4 2 // divide it by 2
              add x weap_disp_temp4 // add it to x
              sub x 5 // offset it by 5
              set y 135
              set weap_disp_temp3 wepsway_y
              divvar weap_disp_temp3 2
              sub y weap_disp_temp3
          ifand gun_firemode 65536 nullop else
              {
              state random_AR_flash
              guniqhudid 10
              rotatespritea 160 120 20000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
              }
            set gun_pushb_disp 10
             state gunpushback_sight_display
             guniqhudid 11
          rotatesprite x y weap_disp_temp8 0 19852 0 106 0 windowx1 windowy1 windowx2 windowy2
          guniqhudid 12
          rotatesprite x y weap_disp_temp8 0 19851 0 108 0 windowx1 windowy1 windowx2 windowy2
          sub y 35
          guniqhudid 13
          rotatespritea x y 4096 0 11047 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // holotech dot
          }
          else
              {
              displayrandvar gun_pushb_disp 5
              add gun_pushb_disp 5
              state gunpushback_display
			  state gun_smoke_display
          sub x 55
          sub y 50
          state random_AR_flash
          guniqhudid 10
          rotatespritea x y 20000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          add x 55
          add y 50
            guniqhudid 11
            rotatesprite x y 45152 0 17991 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            sub x 95
            add y 10
            guniqhudid 12
            rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
            add x 95
            sub y 10
            guniqhudid 13
            rotatesprite x y 45152 0 17988 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            }
      break
    case 5
    case 6
    case 7
    case 8
    case 9
    case 10
    case 11
    case 36
    case 37
    case 38
    case 39
    case 40
    case 41
    case 42
       state gunpushback_display
        guniqhudid 10
         rotatesprite x y 45152 0 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
         sub x 85
         add y 10
         guniqhudid 11
         rotatesprite x y 40960 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
         add x 85
         sub y 10
         guniqhudid 12
         rotatesprite x y 45152 0 17998 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 14
    case 15
    case 16
    case 17
    case 30
    case 31
    case 32
    case 33
    case 34
    case 35
        sub y 15
        ife kickbackpic 31 sub y 10
        guniqhudid 10
        rotatesprite x y 40960 0 17993 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 85
        add y 10
        guniqhudid 11
        rotatesprite x y 32768 weap_disp_temp2 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 18
    case 19
    case 20
    case 27
    case 28
    case 29
      sub y 15
      ife kickbackpic 19 add y 10
      guniqhudid 10
      rotatesprite x y 40960 0 17994 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 95
        add y 40
        guniqhudid 11
        rotatesprite x y 32768 weap_disp_temp2 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
      sub y 15
      ife kickbackpic 18 add y 5
      guniqhudid 10
      rotatesprite x y 40960 0 16494 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    // PRESS BOLT CATCH RELOAD
    case 43
    case 61
    guniqhudid 10
      rotatesprite x y 40960 0 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 44
    case 60
    guniqhudid 10
      rotatesprite x y 40960 16 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 45
    case 59
    guniqhudid 10
      rotatesprite x y 40960 32 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 46
    case 58
    guniqhudid 10
      rotatesprite x y 40960 32 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 50
      add y 20
      break
    case 47
    case 57
    guniqhudid 10
      rotatesprite x y 40960 32 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 55
      add y 20
      break
    case 48
    case 56
      add y 5
      guniqhudid 10
      rotatesprite x y 40960 48 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 49
    case 55
      add y 10
      guniqhudid 10
      rotatesprite x y 40960 64 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 50
    case 54
      add y 15
      guniqhudid 10
      rotatesprite x y 40960 76 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 51
    case 53
      add y 20
      guniqhudid 10
      rotatesprite x y 40960 96 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 52
      add y 35
      guniqhudid 10
      rotatesprite x y 40960 104 17992 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
    }
guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 4 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// MICKY'S ROCKET LAUNCHER ===============================================================================================================

defstate draw_mc_rocket

  set x 260
  set weap_disp_temp4 wepsway_x
  divvar weap_disp_temp4 2
  sub x weap_disp_temp4
  add x weapon_xoffset
  sub x looking_angSR1

  clamp x 261 340

  set y 225
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 68
        sub y 55
        rotatespritea x y 38000 0 29952 gunsmoke_disp wep_pal 4608 -255 windowx1 windowy1 windowx2 windowy2
        add x 68
        add y 55
        guniqhudid 0
        }

guniqhudid 0
switch weaponcount
case 0
case 3
case 35
  guniqhudid 10
  rotatesprite x y 49152 0 16497 shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
  sub x 70
  add y 90
  guniqhudid 11
  rotatesprite x y 40960 0 16501 shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
  add x 70
  sub y 90
       ifvarand gun_firemode 2048
          {
          guniqhudid 12
          rotatesprite x y 49152 0 16499 0 0 4608 windowx1 windowy1 windowx2 windowy2
          state reverse_shade
          guniqhudid 13
          ife opt_weapon_glow YES rotatespritea x y 49152 0 16500 weap_disp_temp5 0 4608 -255 windowx1 windowy1 windowx2 windowy2
          }

  break
case 1
case 2
  state gun_smoke_display
  sub x 68
  sub y 55
 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 20000 rot_flash 16114 0 0 4608 -255 windowx1 windowy1 windowx2 windowy2
  add x 68
  add y 55
  guniqhudid 11
  rotatesprite x y 49152 0 16498 0 0 4608 windowx1 windowy1 windowx2 windowy2
  sub x 70
  add y 90
  guniqhudid 12
  rotatesprite x y 40960 0 16501 0 107 4608 windowx1 windowy1 windowx2 windowy2
  break
case 4
case 5
case 6
case 7
  add x kickbackpic
  add y kickbackpic
  guniqhudid 10
  rotatesprite x y 49152 0 16497 shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
  sub x 70
  add y 90
  guniqhudid 11
  rotatesprite x y 40960 0 16501 shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
  add x 70
  sub y 90

       ifvarand gun_firemode 2048
          {
          guniqhudid 12
          rotatesprite x y 49152 0 16499 0 0 4608 windowx1 windowy1 windowx2 windowy2
          state reverse_shade
          guniqhudid 13
          ife opt_weapon_glow YES rotatespritea x y 49152 0 16500 weap_disp_temp5 0 4608 -255 windowx1 windowy1 windowx2 windowy2
          }

  break
endswitch
guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 5 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 6 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// MICKY'S AUTO PULSE GUN ===============================================================================================================

defstate draw_mc_auto_pulsegun

  set x 230
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 202
  sub y wepsway_y
  add y looking_arc
  divvar gun_pos 2
  sub y gun_pos

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 60
        sub y 30
        rotatespritea x y 36000 0 29952 gunsmoke_disp 8 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 60
        add y 30
        guniqhudid 0
        }

guniqhudid 0
    switch weaponcount
    case 0
      state wep_drawup
      guniqhudid 10
      rotatesprite x y 45056 weap_disp_temp2 16523 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 1
    case 4
    case 7
    case 10
    case 13
    case 16
    case 19
    case 22
    case 24
    case 29
    case 32
    case 35
    case 38
    case 41
    case 42
    case 48
    case 49
    case 50
      guniqhudid 10
      rotatesprite x y 45056 0 16520 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 2
    case 5
    case 8
    case 11
    case 14
    case 17
    case 20
    case 25
    case 30
    case 33
    case 36
    case 39
    case 43
    case 44
    case 51
    case 52
    case 53
      guniqhudid 10
      rotatesprite x y 45056 0 16521 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 3
    case 6
    case 9
    case 12
    case 15
    case 18
    case 21
    case 23
    case 31
    case 34
    case 37
    case 40
    case 45
    case 46
    case 47
    case 54
    case 55
    case 56
    case 57
        guniqhudid 10
        rotatesprite x y 45056 0 16522 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 26
      sub x 60
      sub y 30
      displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 55000 rot_flash 6197 0 11 1 -255 windowx1 windowy1 windowx2 windowy2
      add x 60
      add y 30
      guniqhudid 11
      rotatesprite x y 45056 0 16522 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 27
      sub x 60
      sub y 30
      displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 52000 rot_flash 6197 0 8 1 -255 windowx1 windowy1 windowx2 windowy2
      add x 60
      add y 30
      guniqhudid 11
      rotatesprite x y 45056 0 16521 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 28
      sub x 60
      sub y 30
      displayrandvar rot_flash 2048
	  state gun_smoke_display
      guniqhudid 10
      rotatespritea x y 55000 rot_flash 6197 0 8 1 -255 windowx1 windowy1 windowx2 windowy2
      add x 60
      add y 30
      guniqhudid 11
      rotatesprite x y 45056 0 16520 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 7 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// MICKY'S EXPLOSIVE SHOTGUN ===========================================

defstate draw_mc_exp_shot_strap
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      set weap_disp_temp4 weapon_xoffset
      mulvar weap_disp_temp4 3
      add weap_disp_temp3 weap_disp_temp4
      add weap_disp_temp3 weap_disp_temp2
      sub y 5
      sub x 49
      ifg kickbackpic 5 ifl kickbackpic 16 sub y 8
      guniqhudid 16
      rotatesprite x y 58000 weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      guniqhudid 0
      ifg kickbackpic 5 ifl kickbackpic 16 add y 8
      add y 5
      add x 49
ends

defstate draw_mc_explosive_shotgun

   set x 235
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 44
        sub y 48
        rotatespritea x y 34000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 44
        add y 48
        guniqhudid 0
        }

guniqhudid 0
switch weaponcount
case 0
case 1
case 25
case 26
case 27
case 28
case 29
case 30
case 31
  ife player[].weapon_pos 8 sound SELECT_WEAPON
  state wep_drawup
  state gunpushback_display
  state draw_mc_exp_shot_strap
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 16503 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 70
    add y 20
    guniqhudid 11
    rotatesprite x y 32768 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
  ife rot_flash 0 displayrandvar rot_flash 2048
  sub x 44
  sub y 48
  state gun_smoke_display
  guniqhudid 10
  rotatespritea x y 34000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 44
  add y 48
  guniqhudid 11
  rotatesprite x y 40960 0 16504 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 70
    add y 20
    guniqhudid 12
    rotatesprite x y 32768 0 C_ARM_2 0 106 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
  set gun_pushb_disp 6
  sub x 44
  sub y 48
  guniqhudid 10
  rotatespritea x y 40000 rot_flash 16114 15 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 44
  add y 48
  guniqhudid 11
  rotatesprite x y 40960 0 16504 shade 107 4096 windowx1 windowy1 windowx2 windowy2
    sub x 70
    add y 20
    guniqhudid 12
    rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 22
case 23
case 24
  sub y 7
  set rot_flash 0
  guniqhudid 10
  rotatesprite x y 40960 16 16503 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 70
    add y 20
    guniqhudid 11
    rotatesprite x y 32768 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 4
case 21
case 20
  sub y 7
  guniqhudid 10
  rotatesprite x y 40960 32 16505 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 65
    add y 15
    guniqhudid 11
    rotatesprite x y 32768 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
case 18
case 19
  sub y 9
  guniqhudid 10
  rotatesprite x y 40960 48 16505 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 65
    add y 15
    guniqhudid 11
    rotatesprite x y 32768 16 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
case 17
case 16
  sub y 9
  guniqhudid 10
  rotatesprite x y 40960 0 16506 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 65
    add y 25
    guniqhudid 11
    rotatesprite x y 36865 16 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
case 14
case 15
  sub y 15
 guniqhudid 10
  rotatesprite x y 40960 16 16506 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 62
    add y 28
    guniqhudid 11
    rotatesprite x y 36865 24 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
case 10
case 11
case 12
case 13
  sub y 18
  guniqhudid 10
  rotatesprite x y 40960 0 16507 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 55
    add y 58
    guniqhudid 11
    rotatesprite x y 40961 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
 ends

 // MICKY'S MESON CANNON ===========================================

defstate draw_mc_meson_cannon

  set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 245
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 44
        sub y 48
        rotatespritea x y 34000 0 29952 gunsmoke_disp 2 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 44
        add y 48
        guniqhudid 0
        }

guniqhudid 0
switch weaponcount
case 0
case 1
case 25
case 26
case 27
case 28
case 29
case 30
case 31
  ife player[].weapon_pos 8 sound SELECT_WEAPON
  state wep_drawup
  state gunpushback_display
    guniqhudid 10
    rotatesprite x y 40960 weap_disp_temp2 16574 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 87
    add y 18
    guniqhudid 11
    rotatesprite x y 32768 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 0
  break
case 2
  ife rot_flash 0 displayrandvar rot_flash 2048
  state gun_smoke_display
  sub x 44
  sub y 48
  guniqhudid 10
  rotatespritea x y 34000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 44
  add y 48
    guniqhudid 11
    rotatesprite x y 40960 weap_disp_temp2 16575 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 87
    add y 18
    guniqhudid 12
    rotatesprite x y 32768 0 C_ARM_2 0 106 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
  set gun_pushb_disp 6
  sub x 44
  sub y 48
  guniqhudid 10
  rotatespritea x y 40000 rot_flash 16114 15 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 44
  add y 48
    guniqhudid 11
    rotatesprite x y 40960 weap_disp_temp2 16575 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 87
    add y 18
    guniqhudid 12
    rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 22
case 23
case 24
  sub y 7
  set rot_flash 0
    guniqhudid 10
    rotatesprite x y 40960 16 16574 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 87
    add y 18
    guniqhudid 11
    rotatesprite x y 32768 16 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 4
case 21
case 20
  sub y 7
  guniqhudid 10
  rotatesprite x y 40960 32 16576 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 75
    add y 18
    guniqhudid 11
    rotatesprite x y 32768 32 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
case 18
case 19
  sub y 9
  guniqhudid 10
  rotatesprite x y 40960 48 16576 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 73
    add y 16
    guniqhudid 11
    rotatesprite x y 32768 48 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
case 17
case 16
  sub y 9
  guniqhudid 10
  rotatesprite x y 40960 0 16577 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 72
    add y 18
    guniqhudid 11
    rotatesprite x y 32768 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
case 14
case 15
  sub y 15
  guniqhudid 10
  rotatesprite x y 40960 16 16577 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 70
    add y 16
    guniqhudid 11
    rotatesprite x y 32768 16 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
case 10
case 11
case 12
case 13
  sub y 18
  guniqhudid 10
  rotatesprite x y 40960 0 16578 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 57
    add y 55
    guniqhudid 11
    rotatesprite x y 36864 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 8 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 // Micky's Ice trap ===============================================================================================================

defstate draw_mc_icebomb
guniqhudid 0
  switch weaponcount
   case 0
      set weap_disp_temp 235
      set x 175
      sub x wepsway_x
      add x weapon_xoffset
      sub x looking_angSR1
      set y weap_disp_temp
      sub y wepsway_y
      add y looking_arc
      sub y gun_pos
      state wep_drawup
    getp[].ammo_amount 8 weap_disp_temp
      ifg weap_disp_temp 0
        {
         set weap_disp_temp3 player[].weapon_pos
         guniqhudid 10
        rotatesprite x y 49152 weap_disp_temp2 16512 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2

      getp[].random_club_frame weap_disp_temp
       sin weap_disp_temp weap_disp_temp
       divvar weap_disp_temp 1024 // 2^10
       add weap_disp_temp 10
       guniqhudid 11
      rotatesprite x y 49152 weap_disp_temp2 16511 weap_disp_temp 0 4096 windowx1 windowy1 windowx2 windowy2

        }
   break
   case 1
   case 2
   case 3
      set x 175
      add x weapon_xoffset
      sub x looking_angSR1
      set y 235
      set weap_disp_temp2 kickbackpic
      mulvar weap_disp_temp2 5
      add y weap_disp_temp2
      guniqhudid 10
      rotatesprite x y 49152 0 16512 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 4
   case 5
   case 6
   case 7
   case 8
   case 9
   case 10
      set x 175
      add x weapon_xoffset
      sub x looking_angSR1
      set y 240
      set weap_disp_temp2 kickbackpic
      mulvar weap_disp_temp2 5
      sub y weap_disp_temp2
      guniqhudid 10
      rotatesprite x y 49152 -128 16512 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 11
   case 12
   case 13
   case 14
   case 15
   case 16
      set x 175
      add x weapon_xoffset
      sub x looking_angSR1
      set y 100
      set weap_disp_temp2 kickbackpic
      mulvar weap_disp_temp2 8
      add y weap_disp_temp2
      guniqhudid 10
      rotatesprite x y 49152 0 16537 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
  endswitch
  guniqhudid 0
ends

// Micky ice beam

defstate drawmicky_icebeam

      set x 215
      sub x wepsway_x
      add x weapon_xoffset
      sub x looking_angSR1
      set y 240
      sub y wepsway_y
      add y looking_arc
      sub y gun_pos

	  state gunpushback_display

          ifl gunsmoke_disp 40 ife INVINC 0
         ifn weaponcount 2
            {
            add gunsmoke_disp 1
            guniqhudid 18
		    sub y 20
		    sub x 32
            rotatespritea x y 40000 0 29952 gunsmoke_disp 1 4096 -255 windowx1 windowy1 windowx2 windowy2
            add y 20
            add x 32
            guniqhudid 0
            }

      clamp y 156 320
guniqhudid 0
  switch weaponcount
   case 0
   case 1
   case 16
      state wep_drawup
      guniqhudid 10
      rotatesprite x y 40960 weap_disp_temp2 29894 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 2
   case 3
   state gun_smoke_display
  sub y 20
  sub x 32
 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 20000 rot_flash 16114 0 1 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 20
  add x 32
  guniqhudid 11
        rotatesprite x y 40960 0 29895 0 102 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 4
   case 5
   case 14
   case 15
	  set gun_pushb_disp 10
	  guniqhudid 10
	  rotatesprite x y 40960 0 29893 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 6
   case 7
   case 12
   case 13
	  guniqhudid 10
	  rotatesprite x y 40960 0 29892 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
	break
   case 8
   case 9
   case 10
   case 11
	  guniqhudid 10
	  rotatesprite x y 40960 0 29891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   endswitch

ends				 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 9 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// ==========================================================================================
// Micky's particle beam
// ==========================================================================================

defstate pb_hand
    sub x 80
    add y 27
    guniqhudid 16
    ife weaponcount 2 rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade 103 4096 windowx1 windowy1 windowx2 windowy2
    else rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 0
ends


defstate draw_mc_pbeam
  set x 220
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 150 320

  ifand gun_firemode 16384
    {
    add y 10
    add x 10
    }

	ifl gunsmoke_disp 40 ife INVINC 0
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 40
        sub y 35
        rotatespritea x y 28000 0 29952 gunsmoke_disp 1 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 40
        add y 35
        guniqhudid 0
        }

  set weap_disp_temp5 60
  sub weap_disp_temp5 GUN_HEAT[cur_weap]
guniqhudid 0
switch weaponcount
case 0
case 1
case 4
case 5
case 6
  state wep_drawup
    state gunpushback_display
    set rot_flash 0
    guniqhudid 10
    rotatesprite x y 40960 weap_disp_temp2 22529 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 11
    ifl weap_disp_temp5 30 rotatespritea x y 40960 weap_disp_temp2 22531 weap_disp_temp5 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
    state pb_hand
  break
case 2
add x 5
add y 5
set gun_pushb_disp 6
state gun_smoke_display
   sub y 35
  sub x 40
 ife rot_flash 0 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 82000 rot_flash 16510 0 1 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 35
  add x 40
  guniqhudid 11
  rotatesprite x y 40960 0 22530 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  rotatespritea x y 40960 weap_disp_temp2 22531 weap_disp_temp5 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
  state pb_hand
  break
case 3
add x 5
add y 5
set gun_pushb_disp 6

   sub y 40
  sub x 35
  guniqhudid 10
  rotatespritea x y 92000 rot_flash 16510 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 40
  add x 35
  guniqhudid 11
  rotatesprite x y 40960 0 22530 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  rotatespritea x y 40960 weap_disp_temp2 22531 weap_disp_temp5 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
  state pb_hand
  break
case 7
case 8
case 9
case 10
case 19
case 20
case 21
case 22
  state gunpushback_display
  guniqhudid 10
  rotatesprite x y 40960 16 22530 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatespritea x y 40960 16 22531 weap_disp_temp5 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 10
  state pb_hand
  break
case 11
case 12
case 13
case 14
case 15
case 16
case 17
case 18
add x 10
add y 10
  guniqhudid 10
  rotatesprite x y 40960 32 22532 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatespritea x y 40960 32 22533 weap_disp_temp5 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
    sub x 68
    add y 13
    guniqhudid 12
    rotatesprite x y 36864 32 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// MICKY'S FLAMETHROWER

defstate draw_mc_flamethrower

  set x 230
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  	ifl gunsmoke_disp 40 ife INVINC 0
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 45
        sub y 38
        rotatespritea x y 36000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 45
        add y 38
        guniqhudid 0
        }

guniqhudid 0
switch weaponcount
case 0
    state wep_drawup
    sub x 60
    sub y 40
    guniqhudid 10
	ife weap_disp_temp2 -5 soundonce PILOTL
    ife weap_disp_temp2 0 rotatespritea x y QUARTERSIZE 0 16547 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    add x 60
    add y 40
    guniqhudid 11
    rotatesprite x y 40962 weap_disp_temp2 16543 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    ife HANDS_DRAW 2
        {
        sub x 75
        add y 17
        guniqhudid 12
        rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        }
  break
case 1
case 2
case 3
 displayrandvar weap_disp_temp2 8
  add x weap_disp_temp2
 displayrandvar weap_disp_temp2 8
  add y weap_disp_temp2
 displayrandvar weap_disp_temp3 2048
 state gun_smoke_display
  sub y 38
  sub x 45
  guniqhudid 10
  rotatespritea x y HALFSIZE weap_disp_temp3 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 38
  add x 45
  guniqhudid 11
  rotatesprite x y 40962 0 16544 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    ife HANDS_DRAW 2
        {
        sub x 75
        add y 17
        guniqhudid 12
        rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
        }
  break
endswitch
guniqhudid 0
ends
