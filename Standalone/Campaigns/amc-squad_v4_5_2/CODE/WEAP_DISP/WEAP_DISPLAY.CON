/*
-------------------------------------------------------------------------------
===============================================================================

         -ooo:             +oo-            `+oo.       ./+oooooooooo+/:
        /NMMMN+            NMMNo`         -dMMM/      .mMMNmmmmmmmmmMMNo
       /NMd:mMMo           NMMNMd:      `oNMNMM/      :MMM/.........mMMh
      oNMd. -mMMy`         NMN:mMNs`   -hMm/mMM/      :MMM:         ::-.
    `sMMh`   .dMMh`        NMN .sNMd:`oNMh. mMM/      :MMM:
   `yMMMdhhhhhmMMMd.       NMN   /mMNdMm+`  mMM/      :MMM:         ss+:
  `hMMdhhhhhhhhhmMMm-      NMN    .yMMh.    mMM/      :MMM/.........mMMh
 .dMMs`         .hMMm:     NMN      :/`     mMM/      .mMMNmmmmmmmmmMMNo
 :oo+            `+oo+     +o+              +oo.       ./++ooooooooo+/:

###############################################################################
+ The AMC Squad
+ CON code by James Stanfield, Cedric "Sangman" Haegeman, Dino Bollinger,
+              Mikko Sandt, Cedric "Zaxtor" Lutes and Dan "Danarama" Gaskill
-------------------------------------------------------------------------------
* See AMC_MAIN.CON for a full list of script authors.

Feel free to use any code in the game for your own uses; just make
sure to mention the authors and/or "The AMC Squad" in your credits.
--------------------------------------------------------------------------------
NOTES:
This file is the central inclusion point for all weapon display code files,
and defines several states such as glow code for individual weapons.
--------------------------------------------------------------------------------
*/

/*
===============================
---- DOCUMENTATION
===============================
AKIMBO BIT LIST

Chaingun = 2
Pistols = 4
Shotguns = 8

***************************************************************************************************************
ALTERNATE AMMO BIT LIST
***************************************************************************************************************

Explosive shells = 1
Tommy Gun silver bullets = 2
Flechete Shells = 4
Tesla ammo = 8
Silver bolts = 16

***************************************************************************************************************
ALERNATE FIRE BIT LIST
***************************************************************************************************************

Plasma gun (Bouncing projectiles) = 8
Riotgun Full-auto = 16
Prox alternate mode = 32
pistol double = 64
Sawn off double fire = 256
deployed = 512
Chaingun double = 1024
Laser sight = 2048
Semi-auto = 8192
Small zoom = 16384
Grenade firing mode = 32768
Suppressor = 65536

Gunsight = 131072
Vehicle missile mode = 262144

Stygian warcannon = 524288

***************************************************************************************************************
ALTERNATE FIRE BIT LIST 2
***************************************************************************************************************

Zilla Inc Heat mode = 1
Zilla Inc Nuke mode = 2
Zilla Inc DUP mode = 4
Shotgun duel tube mode = 8
RG-warm up = 16
Sword block = 32
Shotgun double = 64
Super galil rocket = 128

***************************************************************************************************************
UPGRADE BIT LIST - Outdated and some bits wrong but eh
***************************************************************************************************************

James' Glock (Extended Magazine) = 1
James' Glock (Rate of Fire) = 2
James' Glock (Power) = 8
James' TMP (Magazine) = 16
James' M16 (Drum magazine) = 32
James' TMP (Suppressor) = 128
James' Aug (Magazine) = 4
James' Aug (handle) = 256
James' M16 (autoshotgun) = 512
James' Protecta (extended Mag) = 1024
James' XM8 (blue mana) = 2048

Zaxtor's Rifle (Grenade Launcher) = 1
Zaxtor's Rifle (Power) = 2
Zaxtor's Rifle (Accuracy) = 4
Zaxtor's Super Shotgun (Red mana) = 8

Merlijn's Blunderbuss (Speed + One handed) = 1
Merlijn's Blunderbuss (Power) = 2
Merlijn's Blunderbuss (Accuracy) = 4
Merlijn's Blunderbuss (Red Mana) = 8
Merlijn's battleaxe (Green Mana) = 16
Merlijn's dragonslayer (Purple mana) = 32

Highwire's AKM (Drum magazine) = 1
Highwire's Tokarov (Extended Magazine) = 2
Highwire's Tokarov (Automatic) = 4
Highwire's Tokarov (Accuracy) = 8
Highwire's AKM (Grenade Launcher) = 16
Highwire's 870 (Box Magazine) = 32
Highwire's AKM (Red Dot Sight) = 64

Sang's Uzi (Accuracy) = 1
Sang's Uzi (Extended Magazine) = 2
Sang's Uzi (Suppressor) = 4
Sang's Crystal spell (blue mana) = 8
Sang's spellbook (green mana) = 16
Sang's hell staff (red mana) = 32
Sang's Unmaker (purple mana) = 64
Sang's Oblivion Staff (purple mana) = 128

Rusty's FG42 (Accuracy) = 1
Rusty's FG42 (chain) = 2
Rusty's Revolver (Accuracy) = 4
Rusty's FG42 (Rate of Fire) = 8
Rusty's Revolver (scope) = 16
Rusty's Nailgun (Magazine) = 32
Rusty's Shotgun (Drum magazine) = 64
Rusty's Shotgun (Green mana) = 128
Rusty's pulse gun (red mana) = 256

Geoffrey's Pistol (Laser Power) = 1
Geoffrey's Pistol (Faster burst fire) = 2
Geoffrey's GL (ROF) = 4
Geoffrey's SMG (magazine) = 8
Geoffrey's Shotgun (Tesla fire) = 16
Geoffrey's Meltagun (Red mana) = 32

Mikko's pistol (Extended Magazine) = 1
Mikko's pistol (Faster reload) = 2
Mikko's pistol (ROF) = 4
Mikko's Assault Rifle (Drum Magazine) = 8
Mikko's Assault Rifle (HP mode) = 16
Mikko's shotgun (double-shot Accuracy) = 32
Mikko's red materia gun (charge holder) = 64
Mikko's green materia gun (Green mana) = 128
Mikko's red materia gun (Purple mana) = 256
Mikko's plasma gun (Blue mana) = 512
Mikko's MDF Pistol (Red Mana) = 1024

Micky's Pistol (AP bullets) = 1
Micky's Pistol (Stabiliser clamp) = 16
Micky's Pulse rifle (scope) = 2
Micky's AR (Extended magazine) = 4
Micky's AR (Accuracy) = 8
Micky's AR (Grenade launcher) = 32
Micky's Exp shotgun (green mana) = 64
Micky's flamethrower (blue mana) = 128

Snowfall's AR (Extended Magazine) = 1
Snowfall's AR (spread reducer) = 2
Snowfall's AR (something something) = 4
Snowfall's Shotgun (Dual ability) = 8
Snowfall's Shotgun (Double ammo cap) = 16

weap_disp_temp WEAPON

MINISHRINKERSPRITE 1
BARRETTRIFLESPRITE 2
SMGSPRITE 3
BLOODSTAFFSPRITE 4
LIZMANGUNSPRITE 5
PIGCOPGUNSPRITE 6
SKULLDUSTERSPRITE 7
FLESHSQUIRTERSPRITE 8
STYGIANGUNSPRITE 9
SAWNOFFSPRITE 10
TOMMYGUNSPRITE 11
RIOTGUNSPRITE 12
CROSSBOWSPRITE 13
MIAGUNSPRITE 14
LASERGUNSPRITE 15
TMISSILESPRITE 16
CHAINSAWSPRITE 17
FLAMETHROWERSPRITE 18
SWORDSPRITE 19
MOPSPRITE 20
FNFALSPRITE 21
MP40SPRITE 22
JPLASMASPRITE 23
LIZMANFGUNSPRITE 24

*/

define M4A1_SIZE 52500

define FNFAL_SIZE 52500

defstate long_arm_tilenum
  ife CHAR 0
	{
	set tilenum 17424
	}
  else ife CHAR 1 set tilenum 17430
  else ife CHAR 2
	{
	ifand CHAR_APP 4 set tilenum 17436
	else set tilenum 17432
	}
  else ife CHAR 3 ifand CHAR_APP 16 set tilenum 17428
  else ife CHAR 4 ifand CHAR_APP 2 set tilenum 23869
  else ife CHAR 5 set tilenum 17433
  else ife CHAR 6 set tilenum 17427
  else ife CHAR 7 set tilenum 17426
  else ife CHAR 10 set tilenum 17425
  else ife CHAR 11 set tilenum 17432
  else ife CHAR 12 set tilenum 12183
  else ife CHAR 13 set tilenum 17428
  else ife CHAR 14 set tilenum 20881
  else ife CHAR 17 set tilenum 12184
  else set tilenum 17429
ends

defstate default_gun_scope
          set x 160
          set disp_temp2 wepsway_x
          divvar disp_temp2 2
          sub x disp_temp2
          set y 100
          set disp_temp3 wepsway_y
          divvar disp_temp3 2
          sub y disp_temp3
        guniqhudid 150
        rotatesprite x y NORMALSIZE 0 4962 shade pal 4096 0 0 xdim ydim // farthest part of scope
        guniqhudid 151
        rotatespritea x y 67150 0 4969 0 121 4097 -253 0 0 xdim ydim // 'blur'
        guniqhudid 152
        rotatespritea 160 100 8192 0 23731 0 2 4096 -255 0 0 xdim ydim // Crosshair

        set x 160
        sub x wepsway_x
        set y 100
        sub y wepsway_y
        guniqhudid 153
        rotatesprite x y 96638 0 4962 shade 0 4096 0 0 xdim ydim // closest part of scope
        guniqhudid 154
        rotatespritea x y 96638 0 4969 25 0 4129 -253 0 0 xdim ydim // closest part of scope

        ifl player_shade_diff -5
            {
            set weap_disp_temp3 player_shade_diff
            mulvar weap_disp_temp3 2
            guniqhudid 155
            rotatespritea x y 43000 0 2587 player_shade_diff wall_pal 33 weap_disp_temp3 0 0 xdim ydim // Glass in holosight
            }
ends

defstate gun_smoke_display
set gunsmoke_disp -20
state getfactornormalizedframerate
mul gunsmoke_disp NORMALIZED_FACTOR
ends

defstate gun_smoke2_display
set gunsmoke_disp2 -20
state getfactornormalizedframerate
mul gunsmoke_disp NORMALIZED_FACTOR
ends

defstate weapon_shake
  ifg gun_pushb_disp 0
      {
      displayrandvar weap_disp_temp 16
      displayrandvar weap_disp_temp2 16
      add x weap_disp_temp
      add y weap_disp_temp2
      }
ends

defstate wep_drawup
  set weap_disp_temp2 player[].weapon_pos
  mulvar weap_disp_temp2 -5
  ifg weap_disp_temp2 0 mul weap_disp_temp2 -1
  add x weap_disp_temp2
ends

defstate wep_drawup_rev
  set weap_disp_temp2 player[].weapon_pos
  mulvar weap_disp_temp2 -5
  ifg weap_disp_temp2 0 mul weap_disp_temp2 -1
  add x2 weap_disp_temp2
  add weap_disp_temp2 1024
ends

defstate gunpushback_display
   ifg gun_pushb_disp 0
    {
    add x gun_pushb_disp
    add y gun_pushb_disp
    sub gun_pushb_disp 1
    }
ends

defstate gunpushback_xy2_display // for x2, y2 values
   ifg gun_pushb_disp 0
    {
    add x2 gun_pushb_disp
    add y2 gun_pushb_disp
    }
ends

defstate gunpushback2_display // for guns on left hand side of screen
   ifg gun_pushb_disp2 0
    {
    sub x2 gun_pushb_disp2
    add y2 gun_pushb_disp2
    sub gun_pushb_disp2 1
    }
ends

defstate gunpushback_sight_display
set weap_disp_temp8 52500
   ifg gun_pushb_disp 0
    {
    set weap_disp_temp7 32 // base value
    mul weap_disp_temp7 gun_spread // weapon shake affected by gun spread too
    mul weap_disp_temp7 gun_pushb_disp // countdown
    add weap_disp_temp8 weap_disp_temp7 // add to zoom value
    sub gun_pushb_disp 2
    }
ends


defstate do_gold_sparkle
ife opt_gold_sparkle YES
    {
    set weap_disp_temp7 4096
    sub weap_disp_temp7 128
    set weap_disp_temp9 player[].player_par
    set weap_disp_temp8 THISACTOR
    ifand weap_disp_temp8 1 add weap_disp_temp8 256
    add weap_disp_temp9 weap_disp_temp8
    shiftvarl weap_disp_temp9 4
    sin weap_disp_temp8 weap_disp_temp9
    shiftvarr weap_disp_temp8 2
    sub weap_disp_temp7 weap_disp_temp8
    guniqhudid 29
    rotatespritea x y weap_disp_temp7 0 3605 shade 12 4096 -255 windowx1 windowy1 windowx2 windowy2
    guniqhudid 0
    }
ends

defstate do_gold_sparkle2
ife opt_gold_sparkle YES
    {
    set weap_disp_temp7 4096
    sub weap_disp_temp7 128
    set weap_disp_temp9 player[].player_par
    set weap_disp_temp8 THISACTOR
    ifand weap_disp_temp8 1 add weap_disp_temp8 256
    add weap_disp_temp9 weap_disp_temp8
    shiftvarl weap_disp_temp9 4
    sin weap_disp_temp8 weap_disp_temp9
    shiftvarr weap_disp_temp8 2
    sub weap_disp_temp7 weap_disp_temp8
    guniqhudid 29
    rotatespritea x2 y weap_disp_temp7 0 3605 shade 12 4096 -255 windowx1 windowy1 windowx2 windowy2
    guniqhudid 0
    }
ends

defstate GLOWCODE
 getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 4
   ife opt_photosensitivity_mode 1 set weap_disp_temp4 4
ends


defstate crystal_glow
 getp[].random_club_frame crystal_shade
               sin crystal_shade crystal_shade
               divvar crystal_shade 1024 // 2^10
               add crystal_shade 40
               sub crystal_shade shade
               ife opt_photosensitivity_mode 1 set crystal_shade 0
ends

defstate tempm16_arm
      sub x 95
      add y 16
      ife weaponcount 2 myospal x y C_ARM_2 0 0 107
      else myospal x y C_ARM_2 shade 0 arm_pal
      sub y 16
      add x 95
ends

defstate sword_hands
ife CHAR 0
    {
    ifand CHAR_APP 1 set tilenum 19888 else
    set tilenum 12034
    }
else ife CHAR 1 set tilenum 12038
else ife CHAR 2
	{
	ifand CHAR_APP 4 set tilenum 32279 else
	set tilenum 12044
	}
else ife CHAR 3
	{
	ifand CHAR_APP 16 set tilenum 16441
	else set tilenum 12133
	}
else ife CHAR 4
    {
    ifand CHAR_APP 2 set tilenum 23878
    else set tilenum 12042
    }
else ife CHAR 5 set tilenum 6723
else ife CHAR 6 set tilenum 12046
else ife CHAR 7 set tilenum 12036
else ife CHAR 9 set tilenum 12032
else ife CHAR 10 set tilenum 12040
else ife CHAR 11 set tilenum 12044
else ife CHAR 12 set tilenum 12048
else ife CHAR 13 set tilenum 16441
else ife CHAR 14 set tilenum 20967
else ife CHAR 17 set tilenum 27287
else set tilenum 12032
ends

defstate fortymm_case_disp
guniqhudid 30
ifand AMMO_TYPES[cur_weap] 32 rotatesprite x y HALFSIZE 0 16124 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
else ifand AMMO_TYPES[cur_weap] 128 rotatesprite x y HALFSIZE 0 16125 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
else ifand AMMO_TYPES[cur_weap] 256 rotatesprite x y HALFSIZE 0 16126 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
else rotatesprite x y HALFSIZE 0 16123 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
guniqhudid 31
rotatesprite x y 40960 0 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
guniqhudid 0
ends

defstate fortymm_caseless_disp
guniqhudid 30
ifand AMMO_TYPES[cur_weap] 512 rotatesprite x y HALFSIZE 0 16122 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
else ifand AMMO_TYPES[cur_weap] 2048 rotatesprite x y HALFSIZE 0 6132 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
else ifand AMMO_TYPES[cur_weap] 4096 rotatesprite x y HALFSIZE 0 6133 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
else rotatesprite x y HALFSIZE 0 16127 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
guniqhudid 31
rotatesprite x y 40960 0 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
guniqhudid 0
ends

// WEAPON ICONS===============================================================================================================

defstate weaponicons
      set RETURN 1
        ife currentweapon 0
            nullop
        else ife currentweapon 1 set weap_disp_temp2 WEAPON_TILE[1]
        else ife currentweapon 2 set weap_disp_temp2 WEAPON_TILE[2]
        else ife currentweapon 3 set weap_disp_temp2 WEAPON_TILE[3]
        else ife currentweapon 4 set weap_disp_temp2 WEAPON_TILE[4]
        else ife currentweapon 5 set weap_disp_temp2 WEAPON_TILE[5]
        else ife currentweapon 6 set weap_disp_temp2 WEAPON_TILE[6]
        else ife currentweapon 7 set weap_disp_temp2 WEAPON_TILE[7]
        else ife currentweapon 8 set weap_disp_temp2 WEAPON_TILE[8]
        else ife currentweapon 9 set weap_disp_temp2 WEAPON_TILE[9]
        else ife currentweapon 11 set weap_disp_temp2 WEAPON_TILE[6]

        rotatesprite 160 180 QUARTERSIZE 0 weap_disp_temp2 0 0 4096 windowx1 windowy1 windowx2 windowy2
        rotatesprite 161 181 QUARTERSIZE 0 weap_disp_temp2 0 4 33 windowx1 windowy1 windowx2 windowy2

ends

// Random big AR muzzle flash

defstate random_shotg_flash
  ife rot_flash 0 displayrandvar rot_flash 5
  add rot_flash 9283
  clamp rot_flash 9284 9288
  ife opt_photosensitivity_mode 1 set rot_flash 3587
  ife rot_flash2 0 randvar rot_flash2 2048
ends

defstate random_AR_flash
  displayrandvar rot_flash 5
  add rot_flash 16116
  ife opt_photosensitivity_mode 1 set rot_flash 3587
ends

defstate random_AR_horzflash
  displayrandvar rot_flash 5
  add rot_flash 16102
  ife opt_photosensitivity_mode 1 set rot_flash 3587
ends

define M16_SIZE 58500

defstate sg_heat_digit
    ife heat_seek_card 10 set tilenum 5620
    ife heat_seek_card 9 set tilenum 5619
    ife heat_seek_card 8 set tilenum 5618
    ife heat_seek_card 7 set tilenum 5617
    ife heat_seek_card 6 set tilenum 5616
    ife heat_seek_card 5 set tilenum 16020
    ife heat_seek_card 4 set tilenum 16021
    ife heat_seek_card 3 set tilenum 16022
    ife heat_seek_card 2 set tilenum 16023
    ife heat_seek_card 1 set tilenum 16024
ends

defstate sg_dup_digit
    ife DUP_missile_ammo 10 set tilenum 5620
    ife DUP_missile_ammo 9 set tilenum 5619
    ife DUP_missile_ammo 8 set tilenum 5618
    ife DUP_missile_ammo 7 set tilenum 5617
    ife DUP_missile_ammo 6 set tilenum 5616
    ife DUP_missile_ammo 5 set tilenum 16020
    ife DUP_missile_ammo 4 set tilenum 16021
    ife DUP_missile_ammo 3 set tilenum 16022
    ife DUP_missile_ammo 2 set tilenum 16023
    ife DUP_missile_ammo 1 set tilenum 16024
ends

include CODE/WEAP_DISP/WEP_JAMES.CON
include CODE/WEAP_DISP/WEP_ZAXTOR.CON
include CODE/WEAP_DISP/WEP_MERLIJN.CON
include CODE/WEAP_DISP/WEP_HIGHWIRE.CON
include CODE/WEAP_DISP/WEP_SANG.CON
include CODE/WEAP_DISP/WEP_RUSTY.CON
include CODE/WEAP_DISP/WEP_GEOFFREY.CON
include CODE/WEAP_DISP/WEP_MIKKO.CON
include CODE/WEAP_DISP/WEP_MICKY.CON
include CODE/WEAP_DISP/WEP_SNOWFALL.CON
include CODE/WEAP_DISP/WEP_KAGURA.CON
include CODE/WEAP_DISP/WEP_CULTIST.CON
include CODE/WEAP_DISP/WEP_BOMBSHELL.CON
include CODE/WEAP_DISP/WEP_JANE.CON
include CODE/WEAP_DISP/WEP_MAARTN.CON


// TRIPBOMB===============================================================================================================

defstate displaytripbomb
guniqhudid 0
 add weapon_xoffset 8
 sub gun_pos 10
 ifg weaponcount 6
 {
  divvar weaponcount 8
  add looking_arc weaponcount
 }
 else
 {
  ifl weaponcount 4
   {
    set x 142
    add x weapon_xoffset
    getp[].look_ang weap_disp_temp
    divvar weap_disp_temp 2
    sub x weap_disp_temp
    set y 234
    add y looking_arc
    sub y gun_pos
    ife weaponcount 0
        {
        guniqhudid 10
        ife CHAR 1 rotatesprite x y 70000 0 5449 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        else rotatesprite x y 21000 0 2569 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        }
    sub x 12
    add y 15
    ife weaponcount 0 set tilenum CTRIPBOMB else
    ife weaponcount 1 set tilenum CKEYCARDTILE2 else
    ife weaponcount 2 set tilenum CKEYCARDTILE3
    sub x 70
    guniqhudid 11
    rotatesprite x y 40960 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
    add x 165
    guniqhudid 12
    rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
   }
 }
 guniqhudid 0
ends

//DETONATER===============================================================================================================

defstate drawdetonator

  set x 105
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 250
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

switch weaponcount
case 0
case 3
case 4
case 5
case 6
case 7
case 8
case 9
case 10
set tilenum CDETON
state wep_drawup
guniqhudid 10
rotatesprite x y 40960 weap_disp_temp2 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 1
set tilenum CDETON
ifn CHAR 1 add tilenum 1
 ife CHAR 4 sound CLICK_FINGER
 ife CHAR 13 sound MC_GREN_DETONATE
 guniqhudid 10
rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
break
case 2
set tilenum CDETON
add tilenum 1
guniqhudid 10
rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
endswitch
guniqhudid 0
ends

// PIPEBOMB===============================================================================================================

defstate displaypipe
   switch weaponcount
   case 0
      set x 175
      sub x wepsway_x
      add x weapon_xoffset
      sub x looking_angSR1
      set y 255
      sub y wepsway_y
      add y looking_arc
      sub y gun_pos
      ifl y 180 set y 180
      set tilenum CPIPEBOMB
    getp[].ammo_amount 5 weap_disp_temp2
      ifg weap_disp_temp2 0
        {
        state wep_drawup
        guniqhudid 10
        rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
        guniqhudid 11
        }
   break
   case 1
   case 2
   case 3
   case 4
   case 5
   case 6
      set x 175
      add x weapon_xoffset
      sub x looking_angSR1
      set y 265
      add y looking_arc
      sub y gun_pos
      set tilenum CPIPEBOMB
      set weap_disp_temp kickbackpic
      mulvar weap_disp_temp 12
      add y weap_disp_temp
      guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 7
   case 8
   case 9
   case 10
   case 11
      set x 175
      add x weapon_xoffset
      sub x looking_angSR1
      set y 330
      add y looking_arc
      sub y gun_pos
      set tilenum CPIPEBOMB
      add tilenum 1
          ife CHAR 4
        {
        ifand CHAR_APP 2 set tilenum 6177 else
        ife SPECIALIST_EQUIPMENT[40] 2 set tilenum 6270
        else set tilenum 6153
        }
      set weap_disp_temp kickbackpic
      mulvar weap_disp_temp 8
      sub y weap_disp_temp
      guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 12
   case 13
   case 14
   case 15
   case 16
   case 17
   case 18
   case 19
      set x 175
      add x weapon_xoffset
      sub x looking_angSR1
      set y 115
      add y looking_arc
      sub y gun_pos
      set tilenum CPIPEBOMB
      add tilenum 2
      ife CHAR 4
        {
        ifand CHAR_APP 2 set tilenum 6178 else
        ife SPECIALIST_EQUIPMENT[40] 2 set tilenum 6271
        else set tilenum 6154
        }
      set weap_disp_temp kickbackpic
      mulvar weap_disp_temp 8
      add y weap_disp_temp
      ifl y 163 set y 163
      guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
  endswitch
guniqhudid 0
ends

// PUNCH===============================================================================================================

defstate JSPUNCH
ife CHAR 0 set tilenum 5186
ife CHAR 1 set tilenum 5965
ife CHAR 2 set tilenum 4971
ife CHAR 3
	{
	ifand CHAR_APP 16 set tilenum 16445 else
	set tilenum 12246
	}
ife CHAR 4
    {
    ifand CHAR_APP 2 set tilenum 23895 else
    set tilenum 12237
    }
ife CHAR 5 set tilenum 6725
ife CHAR 6 set tilenum 12234
ife CHAR 7 set tilenum 12240
ife CHAR 9 set tilenum 12237
ife CHAR 10 set tilenum 12243
ife CHAR 11 set tilenum 4971
ife CHAR 12 set tilenum 15089
ife CHAR 13 set tilenum 16445
ife CHAR 14
    {
    ife TIMEZONE 6 set tilenum 12237 else
    set tilenum 20872
    }
ife CHAR 15 set tilenum 16485
ife CHAR 17 set tilenum 27294

  set x 220
  add x weapon_xoffset
  sub x looking_angSR1

  set y 254
  add y looking_arc
  sub y gun_pos

  set x2 60
  add x2 weapon_xoffset
  sub x2 looking_angSR1
  set y2 264
  add y2 looking_arc
  sub y2 gun_pos

switch weaponcount
case 0
ifn MELEE_LOCKED_ON -1
    {
  guniqhudid 100
  ife CHAR 0 ifand CHAR_APP 1 ifn TIMEZONE 2 rotatesprite x y 40960 0 19866 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 103
  rotatesprite x2 y2 40960 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
    }
  break
case 1
case 2
sub y 5
  guniqhudid 100
  ife CHAR 0 ifand CHAR_APP 1 ifn TIMEZONE 2 rotatesprite x y 40960 0 19866 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // right hook
 break
case 3
case 4
case 5
  add tilenum 1
  sub y 10
  guniqhudid 101
  ife CHAR 0 ifand CHAR_APP 1 ifn TIMEZONE 2 rotatesprite x y 40960 0 19867 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // right hook
break
case 6
case 7
case 8
  add tilenum 2
  sub y 10
  guniqhudid 102
  ife CHAR 0 ifand CHAR_APP 1 ifn TIMEZONE 2 rotatesprite x y 40960 0 19868 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // right hook
break
case 9
case 10
case 11
  sub y2 5
  guniqhudid 103
  rotatesprite x2 y2 40960 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2 // left hook
  guniqhudid 101
  add tilenum 1
  ife CHAR 0 ifand CHAR_APP 1 ifn TIMEZONE 2 rotatesprite x y 40960 0 19867 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // right hook
 break
case 12
case 13
  sub y2 10
  add tilenum 1
  guniqhudid 104
  rotatesprite x2 y2 40960 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2 // left hook
  sub tilenum 1
  guniqhudid 100
  ife CHAR 0 ifand CHAR_APP 1 ifn TIMEZONE 2 rotatesprite x y 40960 0 19866 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // right hook
break
case 14
case 15
  add tilenum 2
   sub y2 10
  guniqhudid 105
  rotatesprite x2 y2 40960 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2 // left hook
  break
case 16
case 17
  add tilenum 1
  guniqhudid 104
  rotatesprite x2 y2 40960 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2 // left hook
break

endswitch
guniqhudid 0
ends

// RIOT SHIELD ===============================================================================================================

defstate drawriotshield

  set x 70
  sub x wepsway_x
  sub x weapon_xoffset
  add x looking_angSR1

  set y 225
  sub y wepsway_y
  add y looking_arc


    ifg shield_shake 0
    {
    displayrandvarvar shake_rand shield_shake
    add x shake_rand
    add y shake_rand
    sub shield_shake 1
    }

  ife GUN_HANDS 1
    {
    set weap_disp_temp shield_up
    mulvar weap_disp_temp 6
    sub y weap_disp_temp
    }
    else
    {
    set weap_disp_temp2 225
    set weap_disp_temp shield_up
    mulvar weap_disp_temp 6
    sub weap_disp_temp2 weap_disp_temp
    set y weap_disp_temp2
    }

  ifand gun_firemode 16384
    {
    sub x 15
    add y 15
    }

  ifg shield_bash 0
    {
    sub x shield_bash
    set weap_disp_temp shield_bash
    mul weap_disp_temp 256
    set weap_disp_temp2 HALFSIZE
    sub weap_disp_temp2 weap_disp_temp
    }
    else
    set weap_disp_temp2 HALFSIZE
  guniqhudid 20
  rotatesprite x y weap_disp_temp2 0 22751 shade wep_pal 4352 windowx1 windowy1 windowx2 windowy2
  ifg riot_shield 120 set tilenum 22752
  else ifg riot_shield 90 set tilenum 22753
  else ifg riot_shield 60 set tilenum 22754
  else ifg riot_shield 30 set tilenum 22755
  else set tilenum 22756
  guniqhudid 21
  rotatespritea x y weap_disp_temp2 0 tilenum shade arm_pal 4352 64 windowx1 windowy1 windowx2 windowy2
  guniqhudid 0
ends

// WOOD SHIELD ===============================================================================================================

defstate draw_wood_shield

  set x 70
  sub x wepsway_x
  sub x weapon_xoffset
  add x looking_angSR1

  set y 225
  sub y wepsway_y
  add y looking_arc


    ifg shield_shake 0
    {
    displayrandvarvar shake_rand shield_shake
    add x shake_rand
    add y shake_rand
    sub shield_shake 1
    }

  ife GUN_HANDS 1
    {
    set weap_disp_temp shield_up
    mulvar weap_disp_temp 6
    sub y weap_disp_temp
    }
    else
    {
    set weap_disp_temp2 225
    set weap_disp_temp shield_up
    mulvar weap_disp_temp 6
    sub weap_disp_temp2 weap_disp_temp
    set y weap_disp_temp2
    }

  ifand gun_firemode 16384
    {
    sub x 15
    add y 15
    }

  ifg shield_bash 0
    {
    sub x shield_bash
    set weap_disp_temp shield_bash
    mul weap_disp_temp 256
    set weap_disp_temp2 HALFSIZE
    sub weap_disp_temp2 weap_disp_temp
    }
    else
    set weap_disp_temp2 HALFSIZE
  guniqhudid 20
  ifg riot_shield 110 set tilenum 23910
  else ifg riot_shield 90 set tilenum 23911
  else ifg riot_shield 60 set tilenum 23912
  else ifg riot_shield 30 set tilenum 23913
  else set tilenum 23914
  rotatesprite x y weap_disp_temp2 0 tilenum shade arm_pal 4352 windowx1 windowy1 windowx2 windowy2
  guniqhudid 0
ends

// ENGINEER SHIELD ===============================================================================================================

defstate draw_engineer_shield

  set x 70
  sub x wepsway_x
  sub x weapon_xoffset
  add x looking_angSR1

  set y 205
  sub y wepsway_y
  add y looking_arc


    ifg shield_shake 0
    {
    displayrandvarvar shake_rand shield_shake
    add x shake_rand
    add y shake_rand
    sub shield_shake 1
    }

  ife GUN_HANDS 1
    {
    set weap_disp_temp shield_up
    mulvar weap_disp_temp 6
    sub y weap_disp_temp
    }
    else
    {
    set weap_disp_temp2 225
    set weap_disp_temp shield_up
    mulvar weap_disp_temp 6
    sub weap_disp_temp2 weap_disp_temp
    set y weap_disp_temp2
    }

  ifand gun_firemode 16384
    {
    sub x 15
    add y 15
    }

  ifg shield_bash 0
    {
    sub x shield_bash
    set weap_disp_temp shield_bash
    mul weap_disp_temp 256
    set weap_disp_temp2 HALFSIZE
    sub weap_disp_temp2 weap_disp_temp
    }
    else
    set weap_disp_temp2 HALFSIZE
  guniqhudid 20
  rotatesprite x y weap_disp_temp2 0 23915 shade wep_pal 4352 windowx1 windowy1 windowx2 windowy2
  set weap_disp_temp4 riot_shield
  div weap_disp_temp4 2
  set weap_disp_temp5 30
  sub weap_disp_temp5 weap_disp_temp4
  guniqhudid 21
  rotatespritea x y weap_disp_temp2 0 23916 weap_disp_temp5 0 4352 -255 windowx1 windowy1 windowx2 windowy2
  guniqhudid 0
ends

//GRENADE===============================================================================================================

defstate displaygrenade

      set x 235
      set y 255
      sub x wepsway_x
      add x weapon_xoffset
      sub x looking_angSR1
      sub y wepsway_y
      add y looking_arc
      sub y gun_pos

  switch weaponcount
   case 0
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1506 else
      set tilenum CPIPEBOMB
getp[].ammo_amount 5 weap_disp_temp
      guniqhudid 10
      ifg weap_disp_temp 0 rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 1
   case 2
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1506 else
      set tilenum CPIPEBOMB
      guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum CPIPEBOMB
    sub x 140
    add tilenum 1
    guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 3
   case 4
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1506 else
      set tilenum CPIPEBOMB
      guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum CPIPEBOMB
    sub x 120
    add tilenum 1
    guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 5
   case 6
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1506 else
      set tilenum CPIPEBOMB
      guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum CPIPEBOMB
    sub x 100
    add tilenum 1
    guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 7
   case 8
   case 9
   case 10
   ife weaponcount 10 sub x 10
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1506 else
      set tilenum CPIPEBOMB
      guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum CPIPEBOMB
    sub x 100
    add tilenum 2
    guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 11
   case 12
   ife weaponcount 11 sub x 5
      ife CHAR 0 soundonce JG_FLIP
      else soundonce 650
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1507 else
          {
          set tilenum CPIPEBOMB
          add tilenum 4
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 120
    set tilenum CPIPEBOMB
    add tilenum 3
    guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 13
   case 14
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1507 else
          {
          set tilenum CPIPEBOMB
          add tilenum 4
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 140
    set tilenum CPIPEBOMB
    add tilenum 3
    guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 15
   case 16
   case 17
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1507 else
          {
          set tilenum CPIPEBOMB
          add tilenum 4
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 18
   case 19
    sub x 150
          set tilenum CPIPEBOMB
          add tilenum 1
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 20
   case 21
    sub x 40
      sub y 10
      set tilenum CPIPEBOMB
    add tilenum 5
    guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 22
    sub x 60
      sub y 20
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1509 else
          {
          set tilenum CPIPEBOMB
          add tilenum 6
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 23
   case 24
    sub x 60
      sub y 10
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1509 else
          {
          set tilenum CPIPEBOMB
          add tilenum 6
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 25
   case 26
   case 27
    sub x 60
    sub y 10
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1510 else
          {
          set tilenum CPIPEBOMB
          add tilenum 7
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 28
   case 29
    sub x 60
    sub y 20
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1510 else
          {
          set tilenum CPIPEBOMB
          add tilenum 7
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
  endswitch
guniqhudid 0
ends

// DYNAMITE STICK===============================================================================================================

defstate displaystick
getp[].ammo_amount 5 weap_disp_temp
   ifg weap_disp_temp 0
    {
    ife CHAR 5
        {
        ife weaponcount 0 set tilenum 6838 else
          set tilenum CPIPEBOMB
        }
    ife CHAR 9
        {
        ife weaponcount 0 set tilenum 8618 else
          set tilenum CPIPEBOMB
        }
    guniqhudid 10
    rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 11
    ifg weaponcount 0 rotatesprite x y 49152 0 6829 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // FUSE
    ifg weaponcount 8
        {
        sub x 97
        sub y 47
        guniqhudid 12
        rotatesprite x y NNORMALSIZE 0 6830 0 0 4096 windowx1 windowy1 windowx2 windowy2
        }
    }
ends

defstate displaylighter
    getp[].weapon_pos weap_disp_temp
	ife CHAR 9
	{
		ife ARTIFACTS_LOADOUT[CHAR] 5 // Golden lighter artifact?
		{
		ifn weap_disp_temp 0 set tilenum 11363 else set tilenum 11364
		}
	else
		{
		ifn weap_disp_temp 0 set tilenum 12180 else set tilenum 12181
		}
	}
	else
	{
	ife ARTIFACTS_LOADOUT[CHAR] 5 // Golden lighter artifact?
		{
		ifn weap_disp_temp 0 set tilenum 9409 else set tilenum 9410
		}
	else
		{
		ifn weap_disp_temp 0 set tilenum 6833 else set tilenum 6834
		}
	}
    ife weap_disp_temp 1 soundonce ZIPPOLIGHT
    ife weap_disp_temp -2 soundonce ZIPPOCLOSE
    guniqhudid 13
    rotatesprite x2 y2 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 0
ends

defstate displaylighter2
    ife CHAR 9
	{
	ife ARTIFACTS_LOADOUT[CHAR] 5 // Golden lighter artifact?
		set tilenum 11365
	else
		set tilenum 12182
	}
    else
		{
		ife ARTIFACTS_LOADOUT[CHAR] 5 // Golden lighter artifact?
		set tilenum 9411
		else
		set tilenum 6835
		}
    sub y2 5
    guniqhudid 13
    rotatesprite x2 y2 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    add x2 36
    sub y2 50
    ifinwater set tilenum 6827 else set tilenum 18168
    guniqhudid 14
    rotatespritea x2 y2 12288 0 tilenum 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    guniqhudid 0
ends

defstate displaydynastick

      set x 235
      set y 255
      sub x wepsway_x
      add x weapon_xoffset
      sub x looking_angSR1
      sub y wepsway_y
      add y looking_arc
      sub y gun_pos

      set x2 85
      set y2 255
      sub x2 wepsway_x
    sub x2 weapon_xoffset
    add x2 looking_angSR1

    sub y2 wepsway_y
    add y2 looking_arc
    sub y2 gun_pos


  switch weaponcount
   case 0
        state displaystick
        state displaylighter
   break
   case 1
   case 2
        sub x 5
        state displaystick
        add x2 5
        state displaylighter
   break
   case 3
   case 4
   case 13
   case 14
        sub x 10
        state displaystick
        add x2 10
        state displaylighter
   break
   case 5
   case 6
   case 11
   case 12
        sub x 15
        state displaystick
        add x2 15
        state displaylighter2
   break
   case 7
   case 8
        sub x 20
        state displaystick
        add x2 20
        state displaylighter2
   break
   case 9
   case 10
        soundonce LIGHT_FUSE
        sub x 20
        state displaystick
        add x2 20
        state displaylighter2
   break
   case 15
        add x 10
        add y 10
        state displaystick
        state displaylighter
   break
   case 16
        add x 20
        add y 20
        state displaystick
        state displaylighter
   break
   case 17
        add x 30
        add y 30
        state displaystick
        state displaylighter
   break
   case 18
        add x 40
        add y 40
        state displaystick
        state displaylighter
   break
   case 19
   case 20
   case 21
    state displaylighter
   break
  endswitch
ends

// *************************************************
// weap_disp_temp WEAPS
// *************************************************

defstate displaytemp_shrinker

  set x 235
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  clamp y 161 320

switch weaponcount
case 0
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 8408 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 10
   guniqhudid 11
  rotatespritea x y 40960 weap_disp_temp2 8395 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
case 14
case 15
case 16
case 17
case 18

set weap_disp_temp5 kickbackpic
  mulvar weap_disp_temp5 4096
  set weap_disp_temp6 131072
  sub weap_disp_temp6 weap_disp_temp5
  sub x 25
  guniqhudid 10
  rotatespritea x y weap_disp_temp6 0 6240 0 8 4097 -255 windowx1 windowy1 windowx2 windowy2
  add x 25
guniqhudid 11
  ifg weaponcount 14 rotatesprite x y 40960 0 8366 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 40960 0 8410 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 10
   guniqhudid 12
  rotatespritea x y 40960 0 8395 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
case 3
case 4
case 5
case 6
 displayrandvar weap_disp_temp 10
  add x weap_disp_temp
  add y weap_disp_temp
  guniqhudid 10
  rotatesprite x y 40960 0 8366 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatespritea x y 40960 0 8395 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
case 9
case 10
 displayrandvar weap_disp_temp 10
  add x weap_disp_temp
  add y weap_disp_temp


  set weap_disp_temp5 kickbackpic
  mulvar weap_disp_temp5 4096
  set weap_disp_temp6 131072
  sub weap_disp_temp6 weap_disp_temp5
  sub x 25
  guniqhudid 10
  rotatespritea x y weap_disp_temp6 0 6240 0 8 4097 -255 windowx1 windowy1 windowx2 windowy2
  add x 25
  guniqhudid 11
  rotatesprite x y 40960 0 8410 0 104 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  rotatespritea x y 40960 0 8395 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_expander

  set x 235
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  state gunpushback_display
  clamp y 161 320

switch weaponcount
case 0
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 8408 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_BIG_WEAPON state sound_lower_weapon }
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_BIG_WEAPON state sound_lower_weapon }
  getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 10
   guniqhudid 11
  rotatespritea x y 40960 weap_disp_temp2 8395 weap_disp_temp 2 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
case 3
case 4
case 5
 displayrandvar gun_pushb_disp 10
  add x gun_pushb_disp
  add y gun_pushb_disp
  guniqhudid 10
  rotatesprite x y 40960 0 8410 0 25 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatespritea x y 40960 0 8395 0 2 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_shrinker2

  set x 230
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 245
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

switch weaponcount
case 0
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 22666 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 10
  ifvarg near_crystal 0
      {
      guniqhudid 11
      rotatespritea x y 40960 weap_disp_temp2 22667 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
       ife opt_weapon_glow YES
          {
          state crystal_glow
          guniqhudid 12
          rotatespritea x y 40960 weap_disp_temp2 22668 crystal_shade 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          }
      }
  break
case 11
case 12
case 13
case 14
case 15
case 16
case 17
case 18

set weap_disp_temp5 kickbackpic
  mulvar weap_disp_temp5 4096
  set weap_disp_temp6 131072
  sub weap_disp_temp6 weap_disp_temp5
  sub x 25
  guniqhudid 10
  rotatespritea x y weap_disp_temp6 0 6240 0 8 4097 -255 windowx1 windowy1 windowx2 windowy2
  add x 25
  guniqhudid 11
  rotatesprite x y 40960 0 22666 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 10
  ifvarg near_crystal 0
      {
      guniqhudid 12
      rotatespritea x y 40960 0 22667 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
       ife opt_weapon_glow YES
          {
          state crystal_glow
          guniqhudid 13
          rotatespritea x y 40960 0 22668 crystal_shade 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          }
      }
  break
case 1
case 2
case 3
case 4
case 5
case 6
 displayrandvar weap_disp_temp 10
  add x weap_disp_temp
  add y weap_disp_temp
  guniqhudid 10
  rotatesprite x y 40960 0 22666 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatespritea x y 40960 0 22667 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  ifvarg near_crystal 0
      {
      guniqhudid 12
      rotatespritea x y 40960 0 22667 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
       ife opt_weapon_glow YES
          {
          state crystal_glow
          guniqhudid 13
          rotatespritea x y 40960 0 22668 crystal_shade 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          }
      }
  break
case 7
case 8
case 9
case 10
 displayrandvar weap_disp_temp 10
  add x weap_disp_temp
  add y weap_disp_temp


  set weap_disp_temp5 kickbackpic
  mulvar weap_disp_temp5 4096
  set weap_disp_temp6 131072
  sub weap_disp_temp6 weap_disp_temp5
  sub x 25
  guniqhudid 10
  rotatespritea x y weap_disp_temp6 0 6240 0 8 4097 -255 windowx1 windowy1 windowx2 windowy2
  add x 25
  guniqhudid 11
  rotatesprite x y 40960 0 22669 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  rotatespritea x y 40960 0 22667 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  ifvarg near_crystal 0
      {
      guniqhudid 13
      rotatespritea x y 40960 0 22667 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
       ife opt_weapon_glow YES
          {
          state crystal_glow
          guniqhudid 14
          rotatespritea x y 40960 0 22668 crystal_shade 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          }
      }
  break
endswitch
guniqhudid 0
ends


defstate displaytemp_barrett

  set x 220
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 225
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  clamp y 130 320

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
		sub x 60
		sub y 30
        rotatespritea x y 45000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 60
        add y 30
        guniqhudid 0
        }

  ifg scope 0 { add x 80 add y 80 set weap_disp_temp9 NORMALSIZE }
else set weap_disp_temp9 36864

switch weaponcount
case 0
case 1
case 4
case 5
case 6
case 7
case 8
case 9
case 10
case 11
case 12
case 13
case 14
case 15
case 16
case 17
case 18
  state wep_drawup
  state gunpushback_display
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 weap_disp_temp2 8411 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 80
  add y 34
  guniqhudid 11
  rotatesprite x y weap_disp_temp9 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 3
	state gun_smoke_display
   displayrandvar gun_pushb_disp 5
   ife weaponcount 3
       {
       add gun_pushb_disp 10
      add x gun_pushb_disp
      add y gun_pushb_disp
       }

    sub x 60
    sub y 30
    state random_AR_horzflash
    guniqhudid 10
    rotatespritea x y 28638 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    add x 60
    add y 30
    guniqhudid 11
  rotatesprite x y weap_disp_temp9 0 8412 0 0 4096 windowx1 windowy1 windowx2 windowy2
    sub x 80
  add y 34
  guniqhudid 12
  rotatesprite x y weap_disp_temp9 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// MAC-10s

defstate displaytemp_MAC10
  set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 235
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 145 320

  set x2 90
  sub x2 wepsway_x
  sub x2 weapon_xoffset
  sub x2 looking_angSR1

    ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        guniqhudid 28
        add x2 20
        sub y 50
        rotatespritea x2 y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        sub x2 20
        add y 50
        guniqhudid 0
        }

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 20
        sub y 50
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 20
        add y 50
        guniqhudid 0
        }

switch weaponcount
case 0
case 3
case 4
  state gunpushback_display
  state wep_drawup

  add x 27
  add y 30
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 C_PISTOL_R shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // Right hand
  sub x 27
  sub y 30
  guniqhudid 11
  rotatesprite x y 45056 weap_disp_temp2 8415 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Right gun
  ifg gun_pushb_disp 0 sub x2 gun_pushb_disp
  state wep_drawup_rev
  sub x2 27
  add y 30
  guniqhudid 12
  rotatesprite x2 y 40960 weap_disp_temp2 C_PISTOL_L shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2 // Left hand
  add x2 27
  sub y 30
  guniqhudid 13
  rotatesprite x2 y 45056 weap_disp_temp2 8415 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Left gun
  break
case 1
case 2
  state gun_smoke_display
 displayrandvar gun_pushb_disp 10
  add x gun_pushb_disp
  sub x2 gun_pushb_disp
  add y gun_pushb_disp
  set weap_disp_temp3 x
  set weap_disp_temp4 y
  sub weap_disp_temp3 20
  sub weap_disp_temp4 50
  displayrandvar rot_flash 2048
  guniqhudid 10
  rotatespritea weap_disp_temp3 weap_disp_temp4 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // right muzzleflash
  set weap_disp_temp3 x2
  add weap_disp_temp3 25
  guniqhudid 11
  rotatespritea weap_disp_temp3 weap_disp_temp4 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // left muzzleflash
  add x 27
  add y 30
  guniqhudid 12
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // Right hand
  sub x 27
  sub y 30
  guniqhudid 13
  rotatesprite x y 45056 0 8416 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // right gun
  sub x2 27
  add y 30
  guniqhudid 14
  rotatesprite x2 y 40960 1024 C_PISTOL_L 0 107 4 windowx1 windowy1 windowx2 windowy2 // Left hand
  add x2 27
  sub y 30
  guniqhudid 15
  rotatesprite x2 y 45056 1024 8416 0 wep_pal 4 windowx1 windowy1 windowx2 windowy2 // left gun
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_hell_nailer
  set x 150
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 242
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 175 320

  state gunpushback_display

switch weaponcount
case 0
case 1
  state wep_drawup
  rotatesprite x y NORMALSIZE weap_disp_temp2 22624 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 3
  rotatesprite x y NORMALSIZE 0 22625 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 4
case 5
  displayrandvar gun_pushb_disp 5
  add y gun_pushb_disp
  rotatesprite x y NORMALSIZE 0 22626 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
case 7
  rotatesprite x y NORMALSIZE 0 22627 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 8
case 9
  displayrandvar gun_pushb_disp 5
  add y gun_pushb_disp
  rotatesprite x y NORMALSIZE 0 22628 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
ends

defstate displaytemp_bloodstaff

  set x 210
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 232
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 158 320

  state gunpushback_display

switch weaponcount
case 0
case 6
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND UNMAKERF state sound_lower_weapon }
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 49152 weap_disp_temp2 8426 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 5
 guniqhudid 10
  rotatesprite x y 49152 0 8427 gs wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 4
  add gun_pushb_disp 2
  guniqhudid 10
  rotatesprite x y 49152 0 8428 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 40
  add y 34
  guniqhudid 11
  rotatesprite x y 32768 0 C_ARM_2 0 arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
  guniqhudid 10
  rotatesprite x y 49152 0 8428 gs 107 4096 windowx1 windowy1 windowx2 windowy2
  sub x 40
  add y 34
  guniqhudid 11
  rotatesprite x y 32768 0 C_ARM_2 gs 107 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_ogre_staff

  set x 210
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 232
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 158 320

  state gunpushback_display
  clamp gun_pushb_disp 0 8

ifg kickbackpic_2 0
switch kickbackpic_2
case 0
case 6
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 49152 weap_disp_temp2 12653 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 5
  guniqhudid 10
  rotatesprite x y 49152 0 12654 0 102 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 4
  add gun_pushb_disp 4
  guniqhudid 10
  rotatesprite x y 49152 0 12654 0 103 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
  guniqhudid 10
  rotatesprite x y 49152 0 12653 0 102 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
else
switch weaponcount
case 0
case 6
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 49152 weap_disp_temp2 12653 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 5
  guniqhudid 10
  rotatesprite x y 49152 0 12654 gs wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 4
  add gun_pushb_disp 2
  guniqhudid 10
  rotatesprite x y 49152 0 12654 0 103 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
  guniqhudid 10
  rotatesprite x y 49152 0 12653 gs 60 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_rot_xbow

  set x 200
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 202
  divvar wepsway_y 2
  sub y wepsway_y
  add y looking_arc
  divvar gun_pos 2
  sub y gun_pos

ifg kickbackpic_2 0
    switch kickbackpic_2
    case 9
    case 10
      state wep_drawup
      guniqhudid 10
      rotatesprite x y 49152 weap_disp_temp2 28153 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 1
    case 2
      sub y 20
      displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 17000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 20

      add x 5
      add y 5
      guniqhudid 11
      rotatesprite x y 49152 0 28154 0 106 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 3
    case 4

      sub x 60
      sub y 20
      displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 14000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 60
      add y 20

      add x 10
      add y 10
      guniqhudid 11
      rotatesprite x y 49152 0 28154 0 107 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 5
    case 6
      guniqhudid 10
      rotatesprite x y 49152 0 28155 shade 106 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 7
    case 8
      guniqhudid 10
      rotatesprite x y 49152 0 28156 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
    else
    switch weaponcount
    case 0
	case 1
      ife player[].weapon_pos 8 soundonce RIOTGUN_BOLT
      state wep_drawup
      guniqhudid 10
      rotatesprite x y 49152 weap_disp_temp2 28153 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 2
      sub y 20
      displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 17000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 20

      add x 5
      add y 5
      guniqhudid 11
      rotatesprite x y 49152 0 28154 0 106 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 3
    case 4

      sub y 20
      displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 14000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 20

      add x 10
      add y 10
      guniqhudid 11
      rotatesprite x y 49152 0 28154 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 5
    case 6
      guniqhudid 10
      rotatesprite x y 49152 0 28155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 7
    case 8
      guniqhudid 10
      rotatesprite x y 49152 0 28156 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 9
    case 10
      guniqhudid 10
      rotatesprite x y 49152 0 28153 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
guniqhudid 0
ends

defstate displaytemp_lizmangun

  set x 210
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 157 320

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 45
        sub y 20
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 45
        add y 20
        guniqhudid 0
        }

switch weaponcount
case 0
 state wep_drawup
  state gunpushback_display
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 8971 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  state crystal_glow
  guniqhudid 11
  ife WEAPONS_RESEARCH[11] 2 rotatespritea x y 40960 weap_disp_temp2 9022 crystal_shade 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
case 1
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp

  displayrandvar rot_flash 2048
  sub x 45
  sub y 20
  guniqhudid 10
  rotatespritea x y 26000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 45
  add y 20
  guniqhudid 11
  rotatesprite x y 40960 0 8979 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
  state gun_smoke_display
  displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp

  displayrandvar rot_flash 2048
  sub x 45
  sub y 20
  guniqhudid 10
  rotatespritea x y 28000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 45
  add y 20
  guniqhudid 11
  rotatesprite x y 40960 0 8980 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp

  displayrandvar rot_flash 2048
  sub x 45
  sub y 20
  guniqhudid 10
  rotatespritea x y 27000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 45
  add y 20
  guniqhudid 11
  rotatesprite x y 40960 0 8981 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_zchaingun

  set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 153 320

state long_arm_tilenum

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 27
        {
        add gunsmoke_disp 1
        guniqhudid 18
		sub x 70
		sub y 37
        rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 70
		add y 37
        guniqhudid 0
        }

	state gunpushback_display

    switch weaponcount
    case 0 // rotate 1
	case 4
	case 8
	case 12
	case 16
	case 20
	case 24
	case 29
	case 33
	case 37
	case 41
	case 45
	case 49
      state wep_drawup
      guniqhudid 10
      rotatesprite x y 40960 weap_disp_temp2 19895 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 124
      sub y 25
      guniqhudid 11
      rotatesprite x y 40960 weap_disp_temp2 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
	case 1
	case 5
	case 9
	case 13
	case 17
	case 21
	case 25
	case 30
	case 34
	case 38
	case 42
	case 46
	case 50
      guniqhudid 10 // rotate 2
      rotatesprite x y 40960 0 19896 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 124
      sub y 25
      guniqhudid 11
      rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
	case 2
	case 6
	case 10
	case 14
	case 18
	case 22
	case 31
	case 35
	case 39
	case 43
	case 47
	case 51
      guniqhudid 10 // rotatate 3
      rotatesprite x y 40960 0 19897 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 124
      sub y 25
      guniqhudid 11
      rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
	case 3
	case 7
	case 11
	case 15
	case 19
	case 23
	case 32
	case 36
	case 40
	case 44
	case 48
	case 52
        guniqhudid 10 // rotate 4
        rotatesprite x y 40960 0 19898 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          add x 124
		  sub y 25
          guniqhudid 11
          rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 26
	  displayrandvar gun_pushb_disp 5
	  add x gun_pushb_disp
	  add y gun_pushb_disp

	  state gun_smoke_display
      sub x 70
      sub y 37
      displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 17000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 70
      add y 37
      guniqhudid 11
      rotatesprite x y 40960 0 19869 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 124
      sub y 25
      guniqhudid 12
      rotatesprite x y 40960 0 tilenum 0 107 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 27
      sub x 70
      sub y 37
      displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 18000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 70
      add y 37
      guniqhudid 11
      rotatesprite x y 40960 0 19869 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 124
      sub y 25
      guniqhudid 12
      rotatesprite x y 40960 0 tilenum 0 107 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 28
      sub x 70
      sub y 37
      displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 16000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 70
      add y 37
      guniqhudid 11
      rotatesprite x y 40960 0 19869 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 124
      sub y 25
      guniqhudid 12
      rotatesprite x y 40960 0 tilenum 0 107 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
guniqhudid 0
ends

defstate displaytemp_jug_minigun

  set x 230
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 205
  sub y wepsway_y
  add y looking_arc
  divvar gun_pos 2
  sub y gun_pos
  clamp y 162 320

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 42
        sub y 10
        rotatespritea x y 40000 0 29952 gunsmoke_disp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 42
        add y 10
        guniqhudid 0
        }

switch weaponcount
case 0
  ife player[].weapon_pos 8 soundonce SELECT_BIG_WEAPON
  state wep_drawup
  state gunpushback_display
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 23959 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
case 3
 state gun_smoke_display
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp
    sub y 10
  sub x 42
 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 32768 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // muzzleflash
  add y 10
  add x 42
  guniqhudid 11
  rotatesprite x y 40960 0 23960 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// tempORARY RAILGUN=======================================================================================================


defstate displaytemp_railgun
  set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 206
  sub y wepsway_y
  add y looking_arc
  set weap_disp_temp gun_pos
  divvar weap_disp_temp 2
  sub y weap_disp_temp
  clamp y 167 320

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 60
        sub y 45
        rotatespritea x y 40000 0 29952 gunsmoke_disp 1 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 60
        add y 45
        guniqhudid 0
        }
  ifg scope 0 break

ifg weaponcount 11
 ifl weaponcount 15
    {
      set weap_disp_temp5 kickbackpic
      mulvar weap_disp_temp5 512
      set weap_disp_temp6 101072
      sub weap_disp_temp6 weap_disp_temp5
      sub y 45
      sub x 60
      guniqhudid 10
      rotatespritea x 160 weap_disp_temp6 0 6240 1 1 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 45
      add x 60
    }

switch weaponcount
case 0
case 2
case 4
case 6
  state wep_drawup
  state gunpushback_display
  guniqhudid 11
  rotatesprite x y 40960 weap_disp_temp2 19921 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  rotatesprite x y 40960 weap_disp_temp2 19923 0 0 1 windowx1 windowy1 windowx2 windowy2
  sub x 70
  add y 29
  guniqhudid 13
  rotatesprite x y 32768 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 5
 displayrandvar gun_pushb_disp 3
  add x gun_pushb_disp
 displayrandvar gun_pushb_disp 3
  add y gun_pushb_disp
    guniqhudid 11
    rotatesprite x y 40960 weap_disp_temp2 19921 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 12
    rotatesprite x y 40960 weap_disp_temp2 19923 0 0 1 windowx1 windowy1 windowx2 windowy2
  sub x 70
  add y 29
  guniqhudid 13
  rotatesprite x y 32768 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 3
case 7
 displayrandvar gun_pushb_disp 3
  add x gun_pushb_disp
 displayrandvar gun_pushb_disp 3
  add y gun_pushb_disp
  guniqhudid 11
    rotatesprite x y 40960 weap_disp_temp2 19921 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 12
    rotatesprite x y 40960 weap_disp_temp2 19926 0 0 1 windowx1 windowy1 windowx2 windowy2
  sub x 70
  add y 29
  guniqhudid 13
  rotatesprite x y 32768 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 8
case 9
case 10
guniqhudid 11
    rotatesprite x y 40960 weap_disp_temp2 19922 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 12
    rotatesprite x y 40960 weap_disp_temp2 19926 0 0 1 windowx1 windowy1 windowx2 windowy2
      sub x 70
      add y 29
      guniqhudid 13
      rotatesprite x y 32768 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 13
    guniqhudid 11
    rotatesprite x y 40960 weap_disp_temp2 19922 0 102 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 12
    rotatesprite x y 40960 weap_disp_temp2 19926 0 102 1 windowx1 windowy1 windowx2 windowy2
      sub x 70
      add y 29
      guniqhudid 13
      rotatesprite x y 32768 0 C_ARM_2 0 102 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
    guniqhudid 11
    rotatesprite x y 40960 weap_disp_temp2 19922 0 103 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 12
    rotatesprite x y 40960 weap_disp_temp2 19926 0 0 1 windowx1 windowy1 windowx2 windowy2
      sub x 70
      add y 29
      guniqhudid 13
      rotatesprite x y 32768 0 C_ARM_2 0 103 4096 windowx1 windowy1 windowx2 windowy2
  break
case 14
case 15
case 16
  state gun_smoke_display
  set gun_pushb_disp 20
    guniqhudid 11
    rotatesprite x y 40960 weap_disp_temp2 19921 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 12
    rotatesprite x y 40960 weap_disp_temp2 19923 0 0 1 windowx1 windowy1 windowx2 windowy2
      sub x 70
      add y 29
      guniqhudid 13
      rotatesprite x y 32768 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// ####################################################################################################################################################################################
// Temp AR65
// ####################################################################################################################################################################################

defstate ar65_hand
    sub x 80
    add y 53
    guniqhudid 17
    ife weaponcount 2 rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade 106 4096 windowx1 windowy1 windowx2 windowy2
    else rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
ends

defstate ar65_hand2
    sub x 85
    add y 63
    guniqhudid 18
    rotatesprite x y 40960 32 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
ends

defstate displaytemp_ar65

  set x 250
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 224
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 140 320

  ifg scope 0 { add x 30 add y 30 }

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
	    sub y 40
	    sub x 55
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 55
        add y 40
        guniqhudid 0
        }

  ife currentweapon 11
  ife wep_pal 0
    {
    set wep_pal 21
    }

  set weap_disp_temp5 60
  sub weap_disp_temp5 GUN_HEAT[cur_weap]

switch weaponcount
case 0
case 1
case 4
case 5
case 6
  state wep_drawup
    state gunpushback_display
    set rot_flash 0
    guniqhudid 10
    rotatesprite x y 40960 weap_disp_temp2 22613 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 11
    ifl weap_disp_temp5 30 rotatespritea x y 40960 weap_disp_temp2 22614 weap_disp_temp5 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
    state ar65_hand
  break
case 2
add x 5
add y 5
set gun_pushb_disp 6
state gun_smoke_display
   sub y 25
  sub x 55
 state random_AR_horzflash
 guniqhudid 10
  ifg GUN_HEAT[cur_weap] 75 rotatespritea x y 28000 0 rot_flash 0 2 4096 -255 windowx1 windowy1 windowx2 windowy2
  else rotatespritea x y 26000 0 rot_flash 0 94 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 55
  guniqhudid 11
  rotatesprite x y 40960 0 22615 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  ifl weap_disp_temp5 30 rotatespritea x y 40960 0 22614 weap_disp_temp5 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
  state ar65_hand
  break
case 3
add x 5
add y 5
set gun_pushb_disp 6

   sub y 25
  sub x 55
  state random_AR_horzflash
  guniqhudid 10

  ifg GUN_HEAT[cur_weap] 75 rotatespritea x y 30000 0 rot_flash 0 2 4096 -255 windowx1 windowy1 windowx2 windowy2
  else rotatespritea x y 28000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 55
  guniqhudid 11
  rotatesprite x y 40960 0 22615 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  ifl weap_disp_temp5 30 rotatespritea x y 40960 0 22614 weap_disp_temp5 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
  state ar65_hand
  break
case 7
case 8
case 9
case 10
case 19
case 20
case 21
case 22
  state gunpushback_display
  guniqhudid 10
  rotatesprite x y 40960 16 22613 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifl weap_disp_temp5 30 rotatespritea x y 40960 16 22636 weap_disp_temp5 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
   add x 10
  state ar65_hand
  break
case 11
case 12
case 13
case 16
case 17
case 18
add x 10
add y 10
  guniqhudid 10
  rotatesprite x y 40960 32 22637 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatespritea x y 40960 32 22638 weap_disp_temp5 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
  state ar65_hand2
  break
case 14
add x 10
add y 10
  guniqhudid 10
  rotatesprite x y 40960 32 22637 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatespritea x y 40960 32 22638 weap_disp_temp5 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
  state ar65_hand2
  break
case 15
add x 10
add y 10
  guniqhudid 10
  rotatesprite x y 40960 32 22637 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatespritea x y 40960 32 22638 weap_disp_temp5 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
  state ar65_hand2
  break
endswitch
guniqhudid 0
ends

// ===========================================================================================================================================

defstate displaytemp_lizmanfirelasergun
  set x 210
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 157 320

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 45
        sub y 20
        rotatespritea x y 30000 0 29952 gunsmoke_disp 2 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 45
        add y 20
        guniqhudid 0
        }

  ife wep_pal 0 set wep_pal 24

switch weaponcount
case 0
  ife player[].weapon_pos 7 soundonce SELECT_BIG_WEAPON
 state wep_drawup
  state gunpushback_display
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 8971 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  state crystal_glow
  guniqhudid 11
  ife WEAPONS_RESEARCH[11] 2 rotatespritea x y 40960 weap_disp_temp2 9022 crystal_shade 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
case 1
  state gun_smoke_display
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp

  displayrandvar rot_flash 2048
  sub x 55
  sub y 20
  guniqhudid 10
  rotatespritea x y 17000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 55
  add y 20
  guniqhudid 11
  rotatesprite x y 40960 0 8979 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp

  displayrandvar rot_flash 2048
  sub x 55
  sub y 20
  guniqhudid 10
  rotatespritea x y 17000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 55
  add y 20
  guniqhudid 11
  rotatesprite x y 40960 0 8980 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp

  displayrandvar rot_flash 2048
  sub x 55
  sub y 20
  guniqhudid 10
  rotatespritea x y 17000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 55
  add y 20
  guniqhudid 11
  rotatesprite x y 40960 0 8981 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_pigcopgun

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 248
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 160 320

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
		sub x 47
		sub y 52
        rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 47
        add y 52
        guniqhudid 0
        }

  state gunpushback_display

switch weaponcount
case 0
case 1
case 4
case 5
case 18
case 19
case 20
  ife player[].weapon_pos 8 soundonce SHOTGUN_COCK2
  state wep_drawup
  ife weaponcount 4 set gun_pushb_disp 10
  set rot_flash 0
  set rot_flash2 0
  guniqhudid 10
  rotatesprite x y 49152 weap_disp_temp2 8475 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 68
  add y 4
  guniqhudid 11
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
  state gun_smoke_display
  sub x 47
  sub y 52
  guniqhudid 10
  state random_shotg_flash
  rotatespritea x y 40960 rot_flash2 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 47
  add x 52
  guniqhudid 11
  rotatesprite x y 49152 weap_disp_temp2 8476 0 0 4096 windowx1 windowy1 windowx2 windowy2
  sub x 68
  add y 4
  guniqhudid 12
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
  state gun_smoke_display
  sub x 47
  sub y 52
  displayrandvar rot_flash 2048
  guniqhudid 10
  rotatespritea x y 16000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 47
  add x 52
  guniqhudid 11
  rotatesprite x y 49152 weap_disp_temp2 8476 0 0 4096 windowx1 windowy1 windowx2 windowy2
  sub x 68
  add y 4
  guniqhudid 12
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
case 7
case 8
case 9
case 10
case 14
case 15
case 16
case 17
  guniqhudid 10
  rotatesprite x y 49152 0 8477 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 68
  add y 4
  guniqhudid 11
  rotatesprite x y 36864 -64 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
  add y 10
  ife weaponcount 13 add y 5
  guniqhudid 10
  rotatesprite x y 49152 0 8478 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 60
  add y 34
  guniqhudid 11
  rotatesprite x y 40960 -64 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_mossberg

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 248
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 160 320

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
		sub x 47
		sub y 52
        rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 47
        add y 52
        guniqhudid 0
        }

  state gunpushback_display

switch weaponcount
case 0
case 1
case 4
case 5
case 18
case 19
case 20
  ife player[].weapon_pos 8 soundonce SHOTGUN_COCK2
  state wep_drawup
  ife weaponcount 4 set gun_pushb_disp 10
  set rot_flash 0
  set rot_flash2 0
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 29928 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 68
  add y 4
  guniqhudid 11
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
  state gun_smoke_display
  sub x 47
  sub y 52
  guniqhudid 10
  state random_shotg_flash
  rotatespritea x y 40960 rot_flash2 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 47
  add x 52
  guniqhudid 11
  rotatesprite x y 40960 0 29929 0 0 4096 windowx1 windowy1 windowx2 windowy2
  sub x 68
  add y 4
  guniqhudid 12
  rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
  state gun_smoke_display
  sub x 47
  sub y 52
  displayrandvar rot_flash 2048
  guniqhudid 10
  rotatespritea x y 16000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 47
  add x 52
  guniqhudid 11
  rotatesprite x y 40960 0 29929 0 0 4096 windowx1 windowy1 windowx2 windowy2
  sub x 68
  add y 4
  guniqhudid 12
  rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
case 7
case 16
case 17
  guniqhudid 10
  rotatesprite x y 40960 0 29930 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 68
  add y 8
  guniqhudid 11
  rotatesprite x y 36864 -64 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 8
case 9
case 10
case 14
case 15
  guniqhudid 10
  rotatesprite x y 40960 0 29931 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 68
  add y 4
  guniqhudid 11
  rotatesprite x y 36864 -64 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
  add y 10
  ife weaponcount 13 add y 5
  guniqhudid 10
  rotatesprite x y 40960 0 29932 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 60
  add y 34
  guniqhudid 11
  rotatesprite x y 40960 -64 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_lasergun

  set x 233
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 235
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 162 320

  ifand gun_firemode 16384
    {
    set weap_disp_temp3 49960
    add x 45
    add y 45
    }
    else set weap_disp_temp3 40960

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 50
        sub y 32
        rotatespritea x y 30000 0 29952 gunsmoke_disp 8 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 50
        add y 32
        guniqhudid 0
        }

switch weaponcount
case 0
case 1
case 4
case 5
case 6
case 7
case 8
ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_BIG_WEAPON state sound_lower_weapon }
  state wep_drawup
  guniqhudid 10
  rotatesprite x y weap_disp_temp3 weap_disp_temp2 9397 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ife HANDS_DRAW 2
        {
        sub x 75
        add y 23
        ife SPACE_SUIT 1 set tilenum 23089 else set tilenum C_ARM_2
        guniqhudid 11
        rotatesprite x y 32768 weap_disp_temp2 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
        }
  break
case 2
case 3
  state gun_smoke_display
 displayrandvar weap_disp_temp 10
  add x weap_disp_temp
  add y weap_disp_temp
  sub y 32
  sub x 50
  state random_AR_flash
  guniqhudid 10
  rotatespritea x y 24000 0 3605 0 11 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 32
  add x 50
  guniqhudid 11
  rotatesprite x y weap_disp_temp3 0 9398 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ife HANDS_DRAW 2
    {
    sub x 75
    add y 23
    ife SPACE_SUIT 1 set tilenum 23089 else set tilenum C_ARM_2
    guniqhudid 12
    rotatesprite x y 32768 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    }
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_skullduster

  set x 200
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 194
  sub y wepsway_y
  add y looking_arc
  set weap_disp_temp gun_pos
  divvar weap_disp_temp 2
  sub y weap_disp_temp
  state gunpushback_display
  clamp y 149 320
switch weaponcount
case 0
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 45152 weap_disp_temp2 9075 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
  guniqhudid 10
  rotatesprite x y 45152 0 9076 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
  guniqhudid 10
  rotatesprite x y 45152 0 9077 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
  set gun_pushb_disp 10
  guniqhudid 10
  rotatesprite x y 45152 0 9078 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 4
  guniqhudid 10
  rotatesprite x y 45152 0 9078 0 106 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_fleshsquirter

  set x 230
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 245
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  ife weap_disp_temp8 0
   {
   displayrandvar weap_disp_temp6 3000
  ifl weap_disp_temp6 5
        {
        set weap_disp_temp8 90
        }
    }

ifg weap_disp_temp8 0
    {
    sub weap_disp_temp8 1
    soundonce FS_GRUMB
    displayrandvar weap_disp_temp7 3
    add x weap_disp_temp7
    displayrandvar weap_disp_temp7 3
    add y weap_disp_temp7
    }

    state gunpushback_display
    set weap_disp_temp3 player[].player_par
    set weap_disp_temp THISACTOR
    ifand weap_disp_temp 1 add weap_disp_temp 256
    add weap_disp_temp3 weap_disp_temp
    shiftvarl weap_disp_temp3 4
    sin weap_disp_temp weap_disp_temp3
    shiftvarr weap_disp_temp 4
    add weap_disp_temp 45056

switch weaponcount
case 0
case 1
case 4
case 5
case 6
case 7
case 8
case 9
case 10
case 11
case 12
case 13
case 14
case 15
case 16
  state wep_drawup
  guniqhudid 10
  rotatesprite x y weap_disp_temp weap_disp_temp2 9079 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 3
  displayrandvar gun_pushb_disp 10
  add gun_pushb_disp 5
  sub x 60
  sub y 30
  displayrandvar rot_flash 2048
  guniqhudid 10
  rotatespritea x y 47000 rot_flash 18937 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 60
  add y 30
  guniqhudid 11
  rotatesprite x y weap_disp_temp 0 9080 0 0 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_stygianwarcannon

  set x 170
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  state gunpushback_display

switch weaponcount
case 0
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 49152 weap_disp_temp2 9088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
case 3
  guniqhudid 10
  rotatesprite x y 49152 0 9088 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 4
case 5
case 6
  guniqhudid 10
  rotatesprite x y 49152 0 9089 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
  guniqhudid 10
  rotatesprite x y 49152 0 9090 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
case 10
  guniqhudid 10
  rotatesprite x y 49152 0 9090 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
  guniqhudid 10
  rotatesprite x y 49152 0 9090 0 108 4096 windowx1 windowy1 windowx2 windowy2
  break
case 13
case 14
  set gun_pushb_disp 16
  guniqhudid 10
  rotatesprite x y 49152 0 9089 0 108 4096 windowx1 windowy1 windowx2 windowy2
  break
case 15
case 16
  guniqhudid 10
  rotatesprite x y 49152 0 9089 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
  guniqhudid 10
  rotatesprite x y 49152 0 9089 0 106 4096 windowx1 windowy1 windowx2 windowy2
  break
case 19
case 20
  guniqhudid 10
  rotatesprite x y 49152 0 9088 0 0 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_sawnoff

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1


  set y 250
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
		sub x 40
		sub y 50
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 40
        add y 50
        guniqhudid 0
        }

switch weaponcount
case 0
case 1
case 29
case 30
case 31
case 32
  ife player[].weapon_pos 8 soundonce SELECT_SHOTGUN
  state wep_drawup
  guniqhudid 10
  set rot_flash 0
  set rot_flash2 0
  rotatesprite x y 45152 weap_disp_temp2 7807 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ife HANDS_DRAW 2
      {
      sub x 62
      sub y 0
      guniqhudid 11
      rotatesprite x y 32768 -64 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 2
  state gun_smoke_display
  add x 5
  add y 5
  ifand gun_firemode 256 nullop else { ife gun_mag 2 add x 10 else ife gun_mag 1 sub x 10 }
  sub x 40
  sub y 50
	state random_shotg_flash
    guniqhudid 10
    rotatespritea x y 40960 rot_flash2 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 40
  add y 50
  ifand gun_firemode 256 nullop else { ife gun_mag 2 sub x 10 else ife gun_mag 1 add x 10 }
  guniqhudid 11
  rotatesprite x y 45152 0 7807 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  rotatesprite x y 45152 0 7808 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ife HANDS_DRAW 2
      {
      sub x 62
      sub y 0
      guniqhudid 13
      rotatesprite x y 32768 -64 C_ARM_2 0 106 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 3
  add x 10
  add y 10
  ifand gun_firemode 256 nullop else { ife gun_mag 1 add x 10 else ife gun_mag 0 sub x 10 }
  sub x 40
  sub y 50
  displayrandvar rot_flash 2048
  guniqhudid 10
  rotatespritea x y 20000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 40
  add y 50
  ifand gun_firemode 256 nullop else { ife gun_mag 1 sub x 10 else ife gun_mag 0 add x 10 }
  guniqhudid 11
  rotatesprite x y 45152 0 7807 0 107 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  rotatesprite x y 45152 0 7808 0 107 4096 windowx1 windowy1 windowx2 windowy2
  ife HANDS_DRAW 2
      {
      sub x 62
      sub y 0
      guniqhudid 13
      rotatesprite x y 32768 -64 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 4
case 5
  ifand gun_firemode 256 nullop else { ife gun_mag 1 add x 10 else ife gun_mag 0 sub x 10 }
  sub x 40
  sub y 50
  displayrandvar rot_flash 2048
  guniqhudid 10
rotatespritea x y 16000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 40
  add y 50
  ifand gun_firemode 256 nullop else { ife gun_mag 1 sub x 10 else ife gun_mag 0 add x 10 }
  guniqhudid 10
  rotatesprite x y 45152 0 7807 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatesprite x y 45152 0 7808 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ife HANDS_DRAW 2
      {
      sub x 62
      sub y 0
      guniqhudid 12
      rotatesprite x y 32768 -64 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 6
case 26
case 27
case 28
  guniqhudid 10
  rotatesprite x y 45152 0 7807 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ife HANDS_DRAW 2
      {
      sub x 62
      sub y 0
      guniqhudid 11
      rotatesprite x y 32768 -64 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 7 // start reload
case 8
case 23
case 24
case 25
  guniqhudid 10
  rotatesprite x y 45152 0 7809 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ife HANDS_DRAW 2
      {
      sub x 62
      sub y 5
      guniqhudid 11
      rotatesprite x y 36864 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 9
case 10
case 11
case 20
case 21
case 22
guniqhudid 10
  rotatesprite x y 45152 0 7810 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ife HANDS_DRAW 2
      {
      sub x 72
      sub y 5
      guniqhudid 11
      rotatesprite x y 40960 96 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 12
case 13
case 14
case 15
case 16
guniqhudid 10
  rotatesprite x y 45152 0 7811 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifg kickbackpic 14 { add y 5 add x 5 } else { add y 15 add x 15 }
  guniqhudid 11
  rotatesprite x y 49152 0 C_HAND_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifand AMMO_TYPES[cur_weap] 1 ifg explosive_shells 0 myospal x y 7903 shade 0 wep_pal
  ifand AMMO_TYPES[cur_weap] 4 ifg flechete_shells 0 myospal x y 7867 shade 0 wep_pal
  break
case 17
case 18
case 19
  add x 5
  add y 5
  guniqhudid 10
  rotatesprite x y 45152 0 7811 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 5
  sub y 15
  guniqhudid 11
  rotatesprite x y 49152 0 C_HAND_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_tommygun
  set x 200
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1
  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 146 320
	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 35
        sub y 45
        rotatespritea x y 35000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 35
        add y 45
        guniqhudid 0
        }

ife CHAR 9 set weap_disp_temp5 3 else set weap_disp_temp5 0

ifg kickbackpic_3 1
	switch kickbackpic_3
	case 0
	case 1
	case 2
	case 3
	case 4
	  guniqhudid 10
	  sub y 10
	  rotatesprite x y 40960 0 9619 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
	case 5
	case 6
	case 7
	case 8
	  guniqhudid 10
	  sub y 10
	  rotatesprite x y 40960 0 9620 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
	break
	case 9
	case 10
	case 11
	case 12
	  guniqhudid 10
	  sub y 10
	  ife kickbackpic_3 10 sub y 10
	  rotatesprite x y 40960 0 9621 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
	break
	case 13
	case 14
	case 15
	case 16
	  guniqhudid 10
	  sub y 5
	  rotatesprite x y 40960 0 9622 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
	break
	endswitch
else
switch weaponcount
case 0
case 1
  ife player[].weapon_pos 8 soundonce TOMMYG_COCK
  state wep_drawup
  set rot_flash 0
  state gunpushback_display
  set x2 x
  set y2 y
  sub x2 55
  add y2 30
  guniqhudid 10
  rotatesprite x2 y2 49152 weap_disp_temp2 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifand AMMO_TYPES[weap_disp_temp5] 2 set tilenum 11238 else
  ifand AMMO_TYPES[weap_disp_temp5] 32768 set tilenum 12660 else
  set tilenum 7909
  guniqhudid 11
  ife CHAR 9 ife needs_pump[3] 0 rotatesprite x y 49152 weap_disp_temp2 9619 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 49152 weap_disp_temp2 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
  state gun_smoke_display
  displayrandvar gun_pushb_disp 5
  add gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp

  sub y 45
  sub x 35
  ifand AMMO_TYPES[weap_disp_temp5] 2 set weap_disp_temp 1
  else ifand AMMO_TYPES[weap_disp_temp5] 32768 set weap_disp_temp 106
  else set weap_disp_temp 0
  ife rot_flash 0 displayrandvar rot_flash 2048
  guniqhudid 10
  rotatespritea x y 16000 rot_flash 16115 0 weap_disp_temp 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 45
  add x 35

  set x2 x
  set y2 y
  sub x2 55
  add y2 30
  guniqhudid 11
  rotatesprite x2 y2 49152 weap_disp_temp2 C_ARM_1 0 107 4096 windowx1 windowy1 windowx2 windowy2
  ifand AMMO_TYPES[weap_disp_temp5] 2 set tilenum 11239 else
  ifand AMMO_TYPES[weap_disp_temp5] 32768 set tilenum 12661 else
  set tilenum 7910
  guniqhudid 12
  rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
  state gunpushback_display
  sub y 45
  sub x 35
  ifand AMMO_TYPES[weap_disp_temp5] 2 set weap_disp_temp 17 else set weap_disp_temp 0
  guniqhudid 10
     rotatespritea x y 16000 rot_flash 16115 0 weap_disp_temp 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 45
  add x 35

  set x2 x
  set y2 y
  sub x2 55
  add y2 30
  guniqhudid 11
  rotatesprite x2 y2 49152 weap_disp_temp2 C_ARM_1 0 108 4096 windowx1 windowy1 windowx2 windowy2
  ifand AMMO_TYPES[weap_disp_temp5] 2 set tilenum 11239 else
  ifand AMMO_TYPES[weap_disp_temp5] 32768 set tilenum 12661 else
  set tilenum 7910
  guniqhudid 12
  rotatesprite x y 49152 0 tilenum 0 108 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// =================================================================================================

defstate riotgun_button
    guniqhudid 17
      rotatesprite x y 49152 weap_disp_temp2 tilenum 0 0 4096 windowx1 windowy1 windowx2 windowy2
      ife opt_weapon_glow YES
        {
        state reverse_shade
        guniqhudid 18
        rotatespritea x y 49152 weap_disp_temp2 4060 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        }
     ife HANDS_DRAW 2
      {
      sub x 95
      add y 30
      guniqhudid 19
      rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      }
ends

defstate displaytemp_riotgun

  set x 235
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 197
  divvar wepsway_y 2
  sub y wepsway_y
  add y looking_arc
  divvar gun_pos 2
  sub y gun_pos

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 65
        sub y 36
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 65
        add y 36
        guniqhudid 0
        }

ifand gun_firemode 16 // 4 shot mode
{
    switch weaponcount
    case 0
	  set rot_flash 0
      set rot_flash2 0
      ife player[].weapon_pos 8 soundonce RIOTGUN_BOLT
      state wep_drawup
      guniqhudid 10
      rotatesprite x y 49152 weap_disp_temp2 4058 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4059
      state riotgun_button
      break
    case 36
    case 37
    case 38
    case 39
    case 40
    case 41
    case 42
    case 43
    case 44
    case 45
    case 46
      add y 55
      set weap_disp_temp4 kickbackpic
      sub weap_disp_temp4 20
      mulvar weap_disp_temp4 2
      sub y weap_disp_temp4
       guniqhudid 10
      rotatesprite x y 49152 0 4064 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4059
      state riotgun_button
      break
    case 1
    case 2
    case 7
    case 8
    case 13
    case 14
    case 19
    case 20
	  state gun_smoke_display
      add x 3
      add y 3
      sub x 65
      sub y 36
         guniqhudid 10
		 state random_shotg_flash
        rotatespritea x y 40960 rot_flash2 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 65
      add y 36
       guniqhudid 11
      rotatesprite x y 49152 0 4057 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // FIRING FRAME 1
      set tilenum 4059
      state riotgun_button
      break
    case 3
    case 4
    case 9
    case 10
    case 15
    case 16
    case 21
    case 22
      add x 7
      add y 7
      sub x 65
      sub y 36
        displayrandvar rot_flash 2048
         guniqhudid 10
        rotatespritea x y 24000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 65
      add y 36
       guniqhudid 11
      rotatesprite x y 49152 0 4056 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // FIRING FRAME 2
      set tilenum 4059
      state riotgun_button
      break
    case 5
    case 11
    case 17
    case 23
	  set rot_flash 0
      set rot_flash2 0
      add x 10
      add y 10
       guniqhudid 10
      rotatesprite x y 49152 0 4058 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // LOADING FRAME 1
      set tilenum 4059
      state riotgun_button
      break
    case 6
    case 12
    case 18
    case 24
	  set rot_flash 0
      set rot_flash2 0
      add x 5
      add y 5
       guniqhudid 10
      rotatesprite x y 49152 0 4064 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // LOADING FRAME 2
      set tilenum 4059
      state riotgun_button
      set weap_disp_temp3 0
      break
    case 25
    case 26
    case 27
    case 28
    case 29
    case 30
    case 31
    case 32
    case 33
    case 34
    case 35
      set weap_disp_temp4 kickbackpic
      sub weap_disp_temp4 20
      mulvar weap_disp_temp4 2
      add y weap_disp_temp4
       guniqhudid 10
      rotatesprite x y 49152 0 4055 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4059
      state riotgun_button
      break
    endswitch
}
else ifand AMMO_TYPES[cur_weap] 8 // Tesla mode
{
    switch weaponcount
    case 0
    case 1
      ife player[].weapon_pos 8 soundonce RIOTGUN_BOLT
      state wep_drawup
       guniqhudid 10
      rotatesprite x y 49152 weap_disp_temp2 4064 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4063
      state riotgun_button
      break
    case 2
    case 3
    case 4
    case 11
    case 12
    case 13
    case 18
    case 19
    case 20
    case 26
    case 29
    case 32
    case 37
    case 38
    case 45
    case 46
    case 47
       guniqhudid 10
      rotatesprite x y 49152 weap_disp_temp2 4058 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4063
      state riotgun_button
      break
    case 5
    case 6
    case 7
    case 14
    case 15
    case 21
    case 22
    case 24
    case 30
    case 33
    case 34
    case 39
    case 40
    case 41
    case 48
    case 49
    case 50
       guniqhudid 10
      rotatesprite x y 49152 weap_disp_temp2 4055 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4063
      state riotgun_button
      break
    case 8
    case 9
    case 10
    case 16
    case 17
    case 23
    case 25
    case 31
    case 35
    case 36
    case 42
    case 43
    case 44
       guniqhudid 10
      rotatesprite x y 49152 weap_disp_temp2 4064 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4063
      state riotgun_button
      break
    case 27
	  state gun_smoke_display
      sub x 55
      sub y 25
       guniqhudid 10
      rotatespritea x y DOUBLESIZE 0 6197 0 0 4097 -255 windowx1 windowy1 windowx2 windowy2
      add x 55
      add y 25
       guniqhudid 11
      rotatesprite x y 49152 0 4056 0 102 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4063
      state riotgun_button
      break
    case 28
      sub x 55
      sub y 25
       guniqhudid 10
      rotatespritea x y DOUBLESIZE 0 6197 0 0 33 -255 windowx1 windowy1 windowx2 windowy2
      add x 55
      add y 25
       guniqhudid 11
      rotatesprite x y 49152 0 4057 0 102 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4063
      state riotgun_button
      break
    endswitch
    }
else
{
    switch weaponcount
    case 0
    case 1
    case 6
    case 7
    case 14
    case 15
        ifg gun_pushb_disp 0
        {
        add x gun_pushb_disp
        add y gun_pushb_disp
        sub gun_pushb_disp 2
        }
      ife player[].weapon_pos 8 soundonce RIOTGUN_BOLT
      state wep_drawup
	set rot_flash 0
	set rot_flash2 0
       guniqhudid 10
      rotatesprite x y 49152 weap_disp_temp2 4055 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4062
      state riotgun_button
      break
    case 2
    case 3
	  state gun_smoke_display
      add x 3
      add y 3
      sub x 65
      sub y 36
		 state random_shotg_flash
        rotatespritea x y 40960 rot_flash2 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 65
      add y 36
       guniqhudid 11
      rotatesprite x y 49152 0 4056 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4062
      state riotgun_button
      break
    case 4
    case 5
      add x 7
      add y 7
      set gun_pushb_disp 10
      sub x 65
      sub y 36
        displayrandvar rot_flash 2048
         guniqhudid 10
        rotatespritea x y 24000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 65
      add y 36
       guniqhudid 11
      rotatesprite x y 49152 0 4057 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4062
      state riotgun_button
      break
    case 8
    case 9
    case 10
     guniqhudid 10
      rotatesprite x y 49152 0 4058 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4062
      state riotgun_button
      break
    case 11
    case 12
    case 13
     guniqhudid 10
      rotatesprite x y 49152 0 4064 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 4062
      state riotgun_button
      break
    endswitch
    }
guniqhudid 0
ends

defstate riotgun_minigun_CHAIN1
getp[].ammo_amount 0 weap_disp_temp6
ife weap_disp_temp6 9 set tilenum 6895 else
ife weap_disp_temp6 8 set tilenum 6896 else
ife weap_disp_temp6 7 set tilenum 6897 else
ife weap_disp_temp6 6 set tilenum 6898 else
ife weap_disp_temp6 5 set tilenum 6899 else
ife weap_disp_temp6 4 set tilenum 6900 else
ife weap_disp_temp6 3 set tilenum 6901 else
ife weap_disp_temp6 2 set tilenum 6902 else
ife weap_disp_temp6 1 set tilenum 6903 else
ife weap_disp_temp6 0 set tilenum 6903 else
set tilenum 5180
ends

defstate riotgun_minigun_CHAIN2
getp[].ammo_amount 0 weap_disp_temp6
ife weap_disp_temp6 9 set tilenum 6904 else
ife weap_disp_temp6 8 set tilenum 6905 else
ife weap_disp_temp6 7 set tilenum 6906 else
ife weap_disp_temp6 6 set tilenum 6907 else
ife weap_disp_temp6 5 set tilenum 6908 else
ife weap_disp_temp6 4 set tilenum 6909 else
ife weap_disp_temp6 3 set tilenum 6910 else
ife weap_disp_temp6 2 set tilenum 6911 else
ife weap_disp_temp6 1 set tilenum 6903 else
ife weap_disp_temp6 0 set tilenum 6903 else
set tilenum 5181
ends

defstate displaytemp_riotgun_minigun

  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 202
  divvar wepsway_y 2
  sub y wepsway_y
  add y looking_arc
  divvar gun_pos 2
  sub y gun_pos

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 60
        sub y 30
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 60
        add y 30
        guniqhudid 0
        }

    switch weaponcount
    case 0
    case 1
      ife player[].weapon_pos 8 soundonce RIOTGUN_BOLT
      state wep_drawup
       guniqhudid 10
      rotatesprite x y 49152 weap_disp_temp2 12224 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      state riotgun_minigun_CHAIN1
      sub x 78
      add y 47
       guniqhudid 11
      rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 2
    case 3
    case 4
    case 8
    case 9
    case 10
    case 14
    case 15
    case 18
    case 19
    case 20
    case 23
    case 25
    case 28
    case 30
    case 32
    case 35
    case 36
    case 37
    case 40
    case 41
    case 42
    case 47
    case 48
    case 49
    case 50
       guniqhudid 10
      rotatesprite x y 49152 0 12225 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      state riotgun_minigun_CHAIN1
      sub x 78
      add y 47
       guniqhudid 11
      rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 5
    case 6
    case 7
    case 11
    case 12
    case 13
    case 16
    case 17
    case 21
    case 22
    case 24
    case 29
    case 31
    case 33
    case 34
    case 38
    case 39
    case 43
    case 44
    case 45
    case 46
      guniqhudid 10
      rotatesprite x y 49152 0 12224 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      state riotgun_minigun_CHAIN1
      sub x 78
      add y 47
       guniqhudid 11
      rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 26
	  state gun_smoke_display
      sub x 60
      sub y 30
      guniqhudid 10
      ifand AMMO_TYPES[cur_weap] 8
      rotatespritea x y INVENSIZE 0 6197 0 0 4097 -255 windowx1 windowy1 windowx2 windowy2
      else
          {
          displayrandvar rot_flash 2048
          rotatespritea x y 20000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          }
      add x 60
      add y 30
       guniqhudid 11
      rotatesprite x y 49152 0 12226 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      state riotgun_minigun_CHAIN1
      sub x 78
      add y 47
       guniqhudid 12
      rotatesprite x y 40960 0 tilenum 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 27
	  state gun_smoke_display
      sub x 60
      sub y 30
      guniqhudid 10
      ifand AMMO_TYPES[cur_weap] 8
       rotatespritea x y INVENSIZE 0 6197 0 0 4097 -255 windowx1 windowy1 windowx2 windowy2
      else
      {
      displayrandvar rot_flash 2048
      rotatespritea x y 21000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      }
      add x 60
      add y 30
      guniqhudid 11
      rotatesprite x y 49152 0 12226 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      state riotgun_minigun_CHAIN2
      sub x 78
      add y 47
      guniqhudid 12
      rotatesprite x y 40960 0 tilenum 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
guniqhudid 0
ends

defstate displaytemp_riotgun_minigun_mark2

  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 202
  divvar wepsway_y 2
  sub y wepsway_y
  add y looking_arc
  divvar gun_pos 2
  sub y gun_pos

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 60
        sub y 30
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 60
        add y 30
        guniqhudid 0
        }

    switch weaponcount
    case 0
    case 1
      ife player[].weapon_pos 8 soundonce RIOTGUN_BOLT
      state wep_drawup
      guniqhudid 10
      rotatesprite x y 49152 weap_disp_temp2 16088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 2
    case 3
    case 4
    case 8
    case 9
    case 10
    case 14
    case 15
    case 18
    case 19
    case 20
    case 23
    case 25
    case 28
    case 30
    case 32
    case 35
    case 36
    case 37
    case 40
    case 41
    case 42
    case 47
    case 48
    case 49
    case 50
      guniqhudid 10
      rotatesprite x y 49152 0 16089 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 5
    case 6
    case 7
    case 11
    case 12
    case 13
    case 16
    case 17
    case 21
    case 22
    case 24
    case 29
    case 31
    case 33
    case 34
    case 38
    case 39
    case 43
    case 44
    case 45
    case 46
      guniqhudid 10
      rotatesprite x y 49152 0 16088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 26
	  state gun_smoke_display
      sub x 60
      sub y 30
      guniqhudid 10
      ifand AMMO_TYPES[cur_weap] 8
      rotatesprite x y DOUBLESIZE 0 9603 0 0 1 windowx1 windowy1 windowx2 windowy2
      else
          {
          displayrandvar rot_flash 2048
          rotatespritea x y 20000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          }
      add x 60
      add y 30
      guniqhudid 11
     rotatesprite x y 49152 0 16090 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 27
	  state gun_smoke_display
      sub x 60
      sub y 30
      guniqhudid 10
      ifand AMMO_TYPES[cur_weap] 8
      rotatesprite x y DOUBLESIZE 0 9603 0 0 1 windowx1 windowy1 windowx2 windowy2
      else
          {
          displayrandvar rot_flash 2048
          rotatespritea x y 22000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          }
      add x 60
      add y 30
      guniqhudid 11
      rotatesprite x y 49152 0 16090 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
guniqhudid 0
ends

defstate displaytemp_riotgun_grenadel

  set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 192
  divvar wepsway_y 2
  sub y wepsway_y
  add y looking_arc
  divvar gun_pos 2
  sub y gun_pos

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 60
        sub y 20
        rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 60
        add y 20
        guniqhudid 0
        }

    switch weaponcount
    case 0
      ife player[].weapon_pos 8 soundonce RIOTGUN_BOLT
      state wep_drawup
      guniqhudid 10
      rotatesprite x y 49152 weap_disp_temp2 11199 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 1
    case 2
	  state gun_smoke_display
      sub x 60
      sub y 20
      displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 17000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 60
      add y 20

      add x 5
      add y 5
      guniqhudid 11
      rotatesprite x y 49152 0 11200 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 3
    case 4

      sub x 60
      sub y 20
      displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 14000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 60
      add y 20

      add x 10
      add y 10
      guniqhudid 11
      rotatesprite x y 49152 0 11201 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 5
    case 6
      guniqhudid 10
      rotatesprite x y 49152 0 11201 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 7
    case 8
      guniqhudid 10
      rotatesprite x y 49152 0 11201 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 9
    case 10
      guniqhudid 10
      rotatesprite x y 49152 0 11199 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
guniqhudid 0
ends

defstate displaytemp_rw_crossbow

  set x 190
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 234
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 160 320

 ifand AMMO_TYPES[cur_weap] 16 set weap_disp_temp3 12 // set the bolt colour to grey if using silver bolts
 else ifand AMMO_TYPES[cur_weap] 8192 set weap_disp_temp3 10 // set the bolt colour to red if using tek bolts
 else ifand AMMO_TYPES[cur_weap] 16384 set weap_disp_temp3 49 // set the bolt colour to purple if using void bolts
 else set weap_disp_temp3 15

state long_arm_tilenum

  ifand AMMO_TYPES[cur_weap] 16 set tilenum2 29170 // set the bolt colour to grey if using silver bolts
 else ifand AMMO_TYPES[cur_weap] 8192 set tilenum2 29170 // set the bolt colour to red if using tek bolts
 else ifand AMMO_TYPES[cur_weap] 16384 set tilenum2 29162 // set the bolt colour to purple if using void bolts
 else set tilenum2 29166

   state gunpushback_display

ifn kickbackpic_2 0
    switch kickbackpic_2
    case 1
    case 2
    case 4
    case 5
    case 6
    case 7
    case 8
    case 9
    case 10
    case 11
    case 12
    case 13
    case 14
    case 15
    case 16
    case 17
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
       ifand AMMO_TYPES[cur_weap] 16 set weap_disp_temp4 102 // set blue if using blue mana
       else ifand AMMO_TYPES[cur_weap] 8192 set weap_disp_temp4 106 // set orange if using orange mana
     else ifand AMMO_TYPES[cur_weap] 16384 set weap_disp_temp4 30 // set purple if using purple mana
     else set weap_disp_temp4 104 // set to green if using green mana
      ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
      state wep_drawup
      ife HANDS_DRAW 2
          {
            sub x 40
            add y 20
            guniqhudid 10
            rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
            add x 40
            sub y 20
          }
      guniqhudid 11
      rotatesprite x y 40960 weap_disp_temp2 29174 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      rotatesprite x y 40960 weap_disp_temp2 29170 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      // glow stuff
      ife HANDS_DRAW 2
          {
            sub x 40
            add y 20
            guniqhudid 13
            rotatespritea x y 32768 weap_disp_temp2 C_ARM_2 kickbackpic_2 weap_disp_temp4 4096 -255 windowx1 windowy1 windowx2 windowy2
            add x 40
            sub y 20
          }
      guniqhudid 14
      rotatespritea x y 40960 weap_disp_temp2 29174 kickbackpic_2 weap_disp_temp4 4096 -255 windowx1 windowy1 windowx2 windowy2
      guniqhudid 15
      rotatespritea x y 40960 weap_disp_temp2 29170 kickbackpic_2 weap_disp_temp4 4096 -255 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
else // normal firing mode
    switch weaponcount
    case 0
    case 1
    case 2
      ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
      state wep_drawup
      ife HANDS_DRAW 2
          {
            sub x 40
            add y 20
            guniqhudid 10
            rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
            add x 40
            sub y 20
          }
     guniqhudid 11
      rotatesprite x y 40960 weap_disp_temp2 29174 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      rotatesprite x y 40960 weap_disp_temp2 tilenum2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 3
    case 4
    case 5
      set gun_pushb_disp 10
      ife HANDS_DRAW 2
          {
            sub x 40
            add y 20
            guniqhudid 10
            rotatesprite x y 32768 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
            add x 40
            sub y 20
          }
      guniqhudid 11
      rotatesprite x y 40960 0 29175 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 6
    case 7
    case 8
    case 9
      ife HANDS_DRAW 2
          {
            sub x 30
            add y 30
            guniqhudid 10
            rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
            add x 30
            sub y 30
          }
      guniqhudid 11
      rotatesprite x y 40960 0 29176 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 10
    case 11
    case 12
        guniqhudid 10
        rotatesprite x y 40960 0 29177 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 110
        sub y 27
        guniqhudid 11
        rotatesprite x y 32768 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 13
    case 14
        sub y 15
        guniqhudid 10
        rotatesprite x y 40960 0 29178 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 110
        guniqhudid 11
        rotatesprite x y 39768 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
        break
    case 15
    case 16
        guniqhudid 10
        rotatesprite x y 40960 0 29179 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add tilenum2 1
        guniqhudid 11
        rotatesprite x y 40960 0 tilenum2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 110
        guniqhudid 12
        rotatesprite x y 39768 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 17
        guniqhudid 10
        rotatesprite x y 40960 0 29179 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add tilenum2 1
        guniqhudid 11
        rotatesprite x y 40960 0 tilenum2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 18
      add y 10
      guniqhudid 10
      rotatesprite x y 40960 0 29180 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add tilenum2 2
      guniqhudid 11
      rotatesprite x y 40960 0 tilenum2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 19
      guniqhudid 10
      rotatesprite x y 40960 0 29180 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add tilenum2 2
      guniqhudid 11
      rotatesprite x y 40960 0 tilenum2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 20
      guniqhudid 10
      rotatesprite x y 40960 0 29181 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add tilenum2 2
      add y 40
      add x 9
      guniqhudid 11
      rotatesprite x y 41960 0 tilenum2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 21
    case 22
    case 23
    case 24
      guniqhudid 10
      rotatesprite x y 40960 0 29182 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add tilenum2 3
      guniqhudid 11
      rotatesprite x y 40960 0 tilenum2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
guniqhudid 0
ends

defstate displaytemp_crossbow

  set x 200
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 244
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 160 320

  ifand gun_firemode 16384 { add x 20 add y 20 set weap_disp_temp9 50960 }
else set weap_disp_temp9 45152

 ifand AMMO_TYPES[cur_weap] 16 set weap_disp_temp3 27 // set the bolt colour to grey if using silver bolts
 else ifand AMMO_TYPES[cur_weap] 16384 set weap_disp_temp3 30 // set the bolt colour to purple if using void bolts
 else set weap_disp_temp3 wep_pal

state long_arm_tilenum

   state gunpushback_display

switch weaponcount
case 0
case 1
case 2
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
  state wep_drawup
  ife HANDS_DRAW 2
      {
        sub x 55
        add y 16
        guniqhudid 10
        rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 55
        sub y 16
      }
  guniqhudid 11
  rotatesprite x y weap_disp_temp9 weap_disp_temp2 9381 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  rotatesprite x y weap_disp_temp9 weap_disp_temp2 9303 shade weap_disp_temp3 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
case 4
case 5
  set gun_pushb_disp 10
  ife HANDS_DRAW 2
      {
        sub x 55
        add y 16
        guniqhudid 10
        rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 55
        sub y 16
      }
  guniqhudid 11
  rotatesprite x y weap_disp_temp9 0 9382 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
case 7
case 8
case 9
   guniqhudid 10
  rotatesprite x y weap_disp_temp9 0 9383 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
case 11
case 12
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 0 9384 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add x 120
    sub y 32
    guniqhudid 11
    rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 13
case 14
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 0 9385 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add x 125
    add y 2
    guniqhudid 11
    rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 15
case 16
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 32 9385 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add x 125
    add y 12
    guniqhudid 11
    rotatesprite x y 40960 32 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 16 9386 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 80
  add x 24
  guniqhudid 11
  rotatesprite x y weap_disp_temp9 16 9304 shade weap_disp_temp3 4096 windowx1 windowy1 windowx2 windowy2
  break
case 18
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 0 9386 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 50
  add x 17
  guniqhudid 11
  rotatesprite x y weap_disp_temp9 0 9304 shade weap_disp_temp3 4096 windowx1 windowy1 windowx2 windowy2
  break
case 19
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 0 9386 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 20
  add x 6
  guniqhudid 11
  rotatesprite x y weap_disp_temp9 0 9304 shade weap_disp_temp3 4096 windowx1 windowy1 windowx2 windowy2
  break
case 20
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 0 9386 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatesprite x y weap_disp_temp9 0 9304 shade weap_disp_temp3 4096 windowx1 windowy1 windowx2 windowy2
  break
case 21
case 22
case 23
case 24
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 0 9387 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatesprite x y weap_disp_temp9 0 9305 shade weap_disp_temp3 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_miagun

  set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 255
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

switch weaponcount
case 0
  ife player[].weapon_pos 8 soundonce SELECT_BIG_WEAPON
  state wep_drawup
  getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 10
  guniqhudid 10
  rotatesprite x y 49152 weap_disp_temp2 9372 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatespritea x y 49152 weap_disp_temp2 9374 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  state crystal_glow
  guniqhudid 12
  rotatespritea x y 49152 weap_disp_temp2 9370 crystal_shade 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    sub x 87
    add y 15
    guniqhudid 13
    rotatesprite x y 36864 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
case 3
case 4
case 5
case 6
 displayrandvar weap_disp_temp 10
  add x weap_disp_temp
  add y weap_disp_temp
  guniqhudid 10
  rotatesprite x y 49152 0 9373 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 87
    add y 15
    guniqhudid 11
    rotatesprite x y 36864 weap_disp_temp2 C_ARM_2 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
case 9
case 10

set weap_disp_temp5 kickbackpic
  mulvar weap_disp_temp5 4096
  set weap_disp_temp6 131072
  sub weap_disp_temp6 weap_disp_temp5
  sub x 55
  sub y 45
  guniqhudid 10
  rotatespritea x y weap_disp_temp6 0 6240 0 19 4097 -255 windowx1 windowy1 windowx2 windowy2
  add x 55
  add y 45

 displayrandvar weap_disp_temp 10
  add x weap_disp_temp
  add y weap_disp_temp
  guniqhudid 11
  rotatesprite x y 49152 0 9373 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 87
    add y 15
    guniqhudid 12
    rotatesprite x y 36864 weap_disp_temp2 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
case 14
case 15
case 16
case 17
case 18
set weap_disp_temp5 kickbackpic
  mulvar weap_disp_temp5 4096
  set weap_disp_temp6 131072
  sub weap_disp_temp6 weap_disp_temp5
  sub x 55
  sub y 45
  guniqhudid 10
  rotatespritea x y weap_disp_temp6 0 6240 0 19 4097 -255 windowx1 windowy1 windowx2 windowy2
  add x 55
  add y 45

  getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 10
   guniqhudid 11
  rotatesprite x y 49152 0 9372 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  rotatespritea x y 49152 0 9374 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  guniqhudid 13
  rotatespritea x y 49152 0 9370 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    sub x 87
    add y 15
    guniqhudid 14
    rotatesprite x y 36864 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_missilel
  set x 260
  add x weapon_xoffset
  sub x looking_angSR1
  set weap_disp_temp wepsway_y
  divvar weap_disp_temp 2
  sub x weap_disp_temp


  set y 197
  sub y wepsway_y
  add y looking_arc
  set weap_disp_temp gun_pos
  divvar weap_disp_temp 2
  sub y weap_disp_temp

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 20
        sub y 35
        rotatespritea x y 50000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 20
        add y 35
        guniqhudid 0
        }

guniqhudid 0
switch weaponcount
case 0
case 1
  ife player[].ammo_amount 0 0 set tilenum 11211 else set tilenum 11204
  guniqhudid 10
  rotatesprite x y 49152 0 tilenum shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
      add y 40
      guniqhudid 11
      rotatesprite x y 32768 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 70
      add y 5
      guniqhudid 12
      rotatesprite x y 40960 0 C_PISTOL_R shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 3
  state gun_smoke_display
  sub y 35
  sub x 20
 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 32000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 35
  add x 20
  guniqhudid 10
  rotatesprite x y 49152 0 11205 0 wep_pal 4608 windowx1 windowy1 windowx2 windowy2
      add y 40
      guniqhudid 11
      rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
      add x 70
      add y 5
      guniqhudid 12
      rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 4
case 5
  add x weaponcount
  add y weaponcount
  guniqhudid 10
  rotatesprite x y 49152 0 11211 shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
      add y 40
      guniqhudid 11
      rotatesprite x y 32768 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 70
      add y 5
      guniqhudid 12
      rotatesprite x y 40960 0 C_PISTOL_R shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
case 7
case 8
case 9
case 10
  sub y 40
  set weap_disp_temp2 weaponcount
  mul weap_disp_temp2 4
  add y weap_disp_temp2
  add x weap_disp_temp2
  guniqhudid 10
  rotatesprite x y 49152 0 11206 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
case 14
  sub x 100
  add y 80
  guniqhudid 10
  rotatesprite x y 49152 0 11208 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 35
  guniqhudid 11
  rotatesprite x y 32769 -128 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 135
  sub y 80

  sub y 20
  set weap_disp_temp2 weaponcount
  mul weap_disp_temp2 3
  add y weap_disp_temp2
  guniqhudid 12
  rotatesprite x y 49152 0 11207 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 15
  sub x 90
  add y 70
  guniqhudid 10
  rotatesprite x y 49152 0 11208 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 35
  guniqhudid 11
  rotatesprite x y 32769 -128 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 125
  sub y 70

  sub y 20
  set weap_disp_temp2 weaponcount
  mul weap_disp_temp2 3
  add y weap_disp_temp2
  guniqhudid 12
  rotatesprite x y 49152 0 11207 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 16
  sub x 80
  add y 60
  guniqhudid 10
  rotatesprite x y 49152 0 11208 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 35
  guniqhudid 11
  rotatesprite x y 32769 -128 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
  sub x 70
  add y 50
  guniqhudid 10
  rotatesprite x y 49152 0 11208 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 35
    guniqhudid 11
  rotatesprite x y 32769 -128 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 18
  sub x 60
  add y 40
  guniqhudid 10
  rotatesprite x y 49152 0 11208 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 35
    guniqhudid 11
  rotatesprite x y 32769 -128 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 19
  sub x 50
  add y 50
  guniqhudid 10
  rotatesprite x y 49152 0 11208 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 35
    guniqhudid 11
  rotatesprite x y 32769 -128 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 20
  sub x 40
  add y 60
  guniqhudid 10
  rotatesprite x y 49152 0 11208 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 35
    guniqhudid 11
  rotatesprite x y 32769 -128 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 21
case 22
case 23
case 24
case 25
  add y 80
  set weap_disp_temp2 weaponcount
  mul weap_disp_temp2 3
  sub y weap_disp_temp2
  guniqhudid 10
  rotatesprite x y 49152 0 11209 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 35
    add y 15
    guniqhudid 11
  rotatesprite x y 40960 -128 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 26
case 27
case 28
case 29
case 30
  add y 80
  set weap_disp_temp2 weaponcount
  mul weap_disp_temp2 3
  sub y weap_disp_temp2
  add x weap_disp_temp2
  guniqhudid 10
  rotatesprite x y 49152 0 11210 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 45
    add y 45
    guniqhudid 11
  rotatesprite x y 40960 -128 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 31
case 32
case 33
case 34
case 35

  add y 80
  set weap_disp_temp2 weaponcount
  mul weap_disp_temp2 3
  sub y weap_disp_temp2

  set weap_disp_temp2 weaponcount
  add weap_disp_temp2 512
  mul weap_disp_temp2 4
  guniqhudid 10
  rotatesprite x y 49152 weap_disp_temp2 11204 shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
      add y 40
      guniqhudid 11
      rotatesprite x y 32768 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 70
      add y 5
      guniqhudid 12
      rotatesprite x y 40960 0 C_PISTOL_R shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends


defstate displaytemp_chainsaw

 ifn WEP0_BLOODY 0
    {
    ifg wep_pal 0
    ifl wep_pal 9
        set BLOOD_PAL wep_pal
        else set BLOOD_PAL WEP0_BLOODY
        ife BLOOD_PAL 2 set BLOOD_PAL 21
        ife BLOOD_PAL 8 set BLOOD_PAL 11
        ife BLOOD_PAL 1 set BLOOD_PAL 3
    }

  set x 230
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 236
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos


  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 25
        sub y 50
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 25
        add y 50
        guniqhudid 0
        }

state long_arm_tilenum

switch weaponcount
case 0
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND CHAINSAW_UP state sound_lower_weapon }
  ife player[].weapon_pos -9 stopsound CHAINSAW_IDLE
  state wep_drawup
  state gunpushback_display
  guniqhudid 10
  displayrandvar weap_disp_temp6 100
  ifl weap_disp_temp6 10 state gun_smoke_display
  ifn BLOOD_PAL 0 rotatesprite x y 49152 weap_disp_temp2 10927 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 49152 weap_disp_temp2 10325 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add x 120
    sub y 34
    guniqhudid 11
  rotatesprite x y 40960 weap_disp_temp2 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
case 3
case 4
case 5
case 6
  displayrandvar gun_pushb_disp 15
  add x gun_pushb_disp
  displayrandvar gun_pushb_disp 15
  add y gun_pushb_disp
  guniqhudid 10
  ifn BLOOD_PAL 0 rotatesprite x y 49152 0 10929 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 49152 0 10327 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add x 110
    sub y 46
    guniqhudid 11
  rotatesprite x y 38960 weap_disp_temp2 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_flamethrower

  set x 205
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 235
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  clamp y 157 240

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 45
        sub y 38
        rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 45
        add y 38
        guniqhudid 0
        }

switch weaponcount
case 0
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
  state wep_drawup

      sub x 38
    sub y 60
    guniqhudid 10
    ife weap_disp_temp2 -5 soundonce PILOTL
    ife weap_disp_temp2 0 rotatespritea x y QUARTERSIZE 0 16547 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    add x 38
    add y 60
    guniqhudid 11
  rotatesprite x y 49152 weap_disp_temp2 11229 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 50
    add y 20
    guniqhudid 12
    rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
case 3
 state gun_smoke_display
 displayrandvar weap_disp_temp2 8
  add x weap_disp_temp2
 displayrandvar weap_disp_temp2 8
  add y weap_disp_temp2
 displayrandvar rot_flash 2048
  sub y 38
  sub x 45
  guniqhudid 10
  rotatespritea x y HALFSIZE rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 38
  add x 45
  guniqhudid 11
  rotatesprite x y 49152 0 11230 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 50
    add y 20
    guniqhudid 12
    rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_sword // Katana

 ifn WEP0_BLOODY 0
    {
    ifg wep_pal 0
    ifl wep_pal 9
        set BLOOD_PAL wep_pal
        else set BLOOD_PAL WEP0_BLOODY
    }

  set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1


  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

state sword_hands

ife SWORD_ANIM 0
{
switch weaponcount
case 0
  ife player[].weapon_pos 8 soundonce DRAW_SWORD2

  ifand BITS_PRESS 64
      {
      sub x 30
      clamp x 238 360
      clamp y 160 360
      guniqhudid 10
      rotatesprite x y NORMALSIZE 90 12154 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
      guniqhudid 11
      rotatesprite x y 49152 90 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      ifn WEP0_BLOODY 0 rotatesprite x y NORMALSIZE 90 12050 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
      }
  else
      {
      clamp x 238 360
      guniqhudid 10
      rotatesprite x y NORMALSIZE 0 12154 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
      guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      ifn WEP0_BLOODY 0 rotatesprite x y NORMALSIZE 0 12050 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 1
case 2
  add x 10
  sub y 10
  rotatesprite x y NORMALSIZE 0 12154 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite x y NORMALSIZE 0 12050 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
case 4
  add x 15
  sub y 15
  rotatesprite x y NORMALSIZE 0 12154 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite x y 49152 64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite x y NORMALSIZE 64 12050 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
 add tilenum 1
  rotatesprite 240 120 NORMALSIZE 0 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 120 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 240 120 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
 add tilenum 1
 rotatesprite 240 120 NORMALSIZE 0 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 120 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 240 120 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 130 NORMALSIZE 0 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 130 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 130 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
 add tilenum 1
 rotatesprite 240 120 NORMALSIZE 0 12155 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 120 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 240 120 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 130 NORMALSIZE 0 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 130 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 130 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 140 NORMALSIZE 0 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 140 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 140 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 8
 add tilenum 1
 rotatesprite 210 130 NORMALSIZE 0 12155 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 130 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 130 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 140 NORMALSIZE 0 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 140 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 140 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 150 NORMALSIZE 0 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 150 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 150 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
 add tilenum 1
 rotatesprite 180 140 NORMALSIZE 0 12155 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 140 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 140 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 150 NORMALSIZE 0 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 150 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 150 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 160 NORMALSIZE 0 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 160 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 160 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
 add tilenum 1
 rotatesprite 150 150 NORMALSIZE 0 12155 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 150 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 150 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 160 NORMALSIZE 0 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 160 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 160 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 170 NORMALSIZE 0 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 170 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 170 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
 add tilenum 1
 rotatesprite 120 160 NORMALSIZE 0 12155 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 160 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 160 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 170 NORMALSIZE 0 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 170 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 170 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 190 NORMALSIZE 0 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 190 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 190 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
 add tilenum 1
 rotatesprite 90 170 NORMALSIZE 0 12155 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 170 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 170 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 190 NORMALSIZE 0 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 190 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 190 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 30 210 NORMALSIZE 0 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 210 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 30 210 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
}
else
ife SWORD_ANIM 1
{
switch weaponcount
case 5
 add tilenum 1
 rotatesprite 30 120 NORMALSIZE 1024 12155 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 120 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 30 120 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 6
 add tilenum 1
 rotatesprite 30 120 NORMALSIZE 1024 12155 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 120 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 30 120 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 130 NORMALSIZE 1024 12155 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 130 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 130 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 7
 add tilenum 1
  rotatesprite 30 120 NORMALSIZE 1024 12155 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 120 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 30 120 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 130 NORMALSIZE 1024 12155 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 130 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 130 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 140 NORMALSIZE 1024 12155 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 140 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 140 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 8
 add tilenum 1
 rotatesprite 60 130 NORMALSIZE 1024 12155 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 130 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 130 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 140 NORMALSIZE 1024 12155 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 140 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 140 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 150 NORMALSIZE 1024 12155 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 150 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 150 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 9
 add tilenum 1
  rotatesprite 90 140 NORMALSIZE 1024 12155 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 90 140 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 140 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 150 NORMALSIZE 1024 12155 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 120 150 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 150 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 160 NORMALSIZE 1024 12155 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 150 160 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 160 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 10
 add tilenum 1
  rotatesprite 120 150 NORMALSIZE 1024 12155 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 120 150 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 150 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 160 NORMALSIZE 1024 12155 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 160 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 160 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 170 NORMALSIZE 1024 12155 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 170 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 170 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 11
 add tilenum 1
  rotatesprite 150 160 NORMALSIZE 1024 12155 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 160 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 160 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 170 NORMALSIZE 1024 12155 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 170 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 170 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 190 NORMALSIZE 1024 12155 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2  // Sword Graphic
  rotatesprite 210 190 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 190 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 12
 add tilenum 1
  rotatesprite 180 170 NORMALSIZE 1024 12155 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 170 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 170 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 190 NORMALSIZE 1024 12155 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 190 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 190 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 240 210 NORMALSIZE 1024 12155 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 210 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 240 210 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
endswitch
}
else
ife SWORD_ANIM 2
{
switch weaponcount
case 5
 add tilenum 1
  rotatesprite 180 120 NORMALSIZE -64 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 180 120 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 120 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
 add tilenum 1
  rotatesprite 180 120 NORMALSIZE -64 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 180 120 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 120 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 170 150 NORMALSIZE -64 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 170 150 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 170 150 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
 add tilenum 1
  rotatesprite 180 120 NORMALSIZE -64 12155 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 180 120 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 120 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 170 150 NORMALSIZE -64 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 170 150 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 170 150 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 160 180 NORMALSIZE -64 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 160 180 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 160 180 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 8
 add tilenum 1
 rotatesprite 170 150 NORMALSIZE -64 12155 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 170 150 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 170 150 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 160 180 NORMALSIZE -64 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 160 180 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 160 180 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 210 NORMALSIZE -64 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 210 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 210 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
 add tilenum 1
  rotatesprite 160 180 NORMALSIZE -64 12155 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 160 180 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 160 180 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 210 NORMALSIZE -64 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 210 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 210 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 140 240 NORMALSIZE -64 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 140 240 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 140 240 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
 add tilenum 1
 rotatesprite 150 210 NORMALSIZE -64 12155 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 210 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 210 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 140 240 NORMALSIZE -64 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 140 240 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 140 240 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 130 270 NORMALSIZE -64 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 130 270 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 130 270 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
 add tilenum 1
  rotatesprite 140 240 NORMALSIZE -64 12155 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 140 240 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 140 240 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 130 270 NORMALSIZE -64 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 130 270 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 130 270 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 300 NORMALSIZE -64 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 300 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 300 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
 add tilenum 1
  rotatesprite 130 270 NORMALSIZE -64 12155 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 130 270 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 130 170 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 300 NORMALSIZE -64 12155 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 300 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 300 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 110 330 NORMALSIZE -64 12155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 110 330 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 110 330 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
}
guniqhudid 0
ends

defstate displaytemp_sword2 // Shadow Warrior's Katana

  set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

 ifn WEP0_BLOODY 0
    {
    ifg wep_pal 0
    ifl wep_pal 9
        set BLOOD_PAL wep_pal
        else set BLOOD_PAL WEP0_BLOODY
    }

state sword_hands

ife SWORD_ANIM 0
{
switch weaponcount
case 0
  set weap_disp_temp2 player[].weapon_pos
  ife weap_disp_temp2 8 soundonce DRAW_SWORD2
  ifand BITS_PRESS 64
      {
      sub x 30
      clamp x 240 360
      clamp y 160 360
      guniqhudid 10
      rotatesprite x y NORMALSIZE 90 12201 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
      guniqhudid 11
      rotatesprite x y 49152 90 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      ifn WEP0_BLOODY 0 rotatesprite x y NORMALSIZE 90 12050 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
      }
  else
  {
  clamp x 240 360
  guniqhudid 10
  rotatesprite x y NORMALSIZE 0 12201 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  guniqhudid 11
  rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  ifn WEP0_BLOODY 0 rotatesprite x y NORMALSIZE 0 12050 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  }
  break
case 1
case 2
  add x 10
  sub y 10
  rotatesprite x y NORMALSIZE 0 12201 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite x y NORMALSIZE 0 12050 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
case 4
  add x 15
  sub y 15
  rotatesprite x y NORMALSIZE 0 12201 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite x y 49152 64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite x y NORMALSIZE 0 12050 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
 add tilenum 1
  rotatesprite 240 120 NORMALSIZE 0 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 120 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 240 120 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
 add tilenum 1
 rotatesprite 240 120 NORMALSIZE 0 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 120 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 240 120 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 130 NORMALSIZE 0 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 130 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 130 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
 add tilenum 1
 rotatesprite 240 120 NORMALSIZE 0 12202 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 120 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 240 120 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 130 NORMALSIZE 0 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 130 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 130 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 140 NORMALSIZE 0 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 140 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 140 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 8
 add tilenum 1
 rotatesprite 210 130 NORMALSIZE 0 12202 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 130 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 130 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 140 NORMALSIZE 0 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 140 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 140 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 150 NORMALSIZE 0 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 150 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 150 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
 add tilenum 1
 rotatesprite 180 140 NORMALSIZE 0 12202 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 140 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 140 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 150 NORMALSIZE 0 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 150 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 150 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 160 NORMALSIZE 0 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 160 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 160 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
 add tilenum 1
 rotatesprite 150 150 NORMALSIZE 0 12202 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 150 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 150 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 160 NORMALSIZE 0 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 160 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 160 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 170 NORMALSIZE 0 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 170 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 170 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
 add tilenum 1
 rotatesprite 120 160 NORMALSIZE 0 12202 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 160 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 160 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 170 NORMALSIZE 0 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 170 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 170 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 190 NORMALSIZE 0 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 190 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 190 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
 add tilenum 1
 rotatesprite 90 170 NORMALSIZE 0 12202 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 170 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 170 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 190 NORMALSIZE 0 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 190 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 190 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 30 210 NORMALSIZE 0 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 210 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 30 210 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
}
else
ife SWORD_ANIM 1
{
switch weaponcount
case 5
 add tilenum 1
 rotatesprite 30 120 NORMALSIZE 1024 12202 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 120 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 30 120 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 6
 add tilenum 1
 rotatesprite 30 120 NORMALSIZE 1024 12202 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 120 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 30 120 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 130 NORMALSIZE 1024 12202 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 130 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 130 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 7
 add tilenum 1
  rotatesprite 30 120 NORMALSIZE 1024 12202 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 120 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 30 120 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 130 NORMALSIZE 1024 12202 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 130 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 130 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 140 NORMALSIZE 1024 12202 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 140 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 140 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 8
 add tilenum 1
 rotatesprite 60 130 NORMALSIZE 1024 12202 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 130 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 130 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 140 NORMALSIZE 1024 12202 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 140 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 140 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 150 NORMALSIZE 1024 12202 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 150 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 150 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 9
 add tilenum 1
  rotatesprite 90 140 NORMALSIZE 1024 12202 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 90 140 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 140 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 150 NORMALSIZE 1024 12202 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 120 150 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 150 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 160 NORMALSIZE 1024 12202 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 150 160 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 160 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 10
 add tilenum 1
  rotatesprite 120 150 NORMALSIZE 1024 12202 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 120 150 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 150 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 160 NORMALSIZE 1024 12202 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 160 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 160 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 170 NORMALSIZE 1024 12202 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 170 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 170 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 11
 add tilenum 1
  rotatesprite 150 160 NORMALSIZE 1024 12202 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 160 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 160 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 170 NORMALSIZE 1024 12202 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 170 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 170 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 190 NORMALSIZE 1024 12202 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2  // Sword Graphic
  rotatesprite 210 190 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 190 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 12
 add tilenum 1
  rotatesprite 180 170 NORMALSIZE 1024 12202 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 170 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 170 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 190 NORMALSIZE 1024 12202 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 190 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 190 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 240 210 NORMALSIZE 1024 12202 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 210 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 240 210 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
endswitch
}
else
ife SWORD_ANIM 2
{
switch weaponcount
case 5
 add tilenum 1
  rotatesprite 180 120 NORMALSIZE -64 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 180 120 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 120 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
 add tilenum 1
  rotatesprite 180 120 NORMALSIZE -64 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 180 120 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 120 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 170 150 NORMALSIZE -64 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 170 150 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 170 150 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
 add tilenum 1
  rotatesprite 180 120 NORMALSIZE -64 12202 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 180 120 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 120 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 170 150 NORMALSIZE -64 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 170 150 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 170 150 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 160 180 NORMALSIZE -64 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 160 180 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 160 180 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 8
 add tilenum 1
 rotatesprite 170 150 NORMALSIZE -64 12202 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 170 150 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 170 150 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 160 180 NORMALSIZE -64 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 160 180 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 160 180 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 210 NORMALSIZE -64 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 210 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 210 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
 add tilenum 1
  rotatesprite 160 180 NORMALSIZE -64 12202 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 160 180 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 160 180 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 210 NORMALSIZE -64 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 210 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 210 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 140 240 NORMALSIZE -64 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 140 240 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 140 240 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
 add tilenum 1
 rotatesprite 150 210 NORMALSIZE -64 12202 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 210 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 210 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 140 240 NORMALSIZE -64 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 140 240 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 140 240 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 130 270 NORMALSIZE -64 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 130 270 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 130 270 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
 add tilenum 1
  rotatesprite 140 240 NORMALSIZE -64 12202 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 140 240 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 140 240 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 130 270 NORMALSIZE -64 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 130 270 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 130 270 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 300 NORMALSIZE -64 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 300 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 300 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
 add tilenum 1
  rotatesprite 130 270 NORMALSIZE -64 12202 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 130 270 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 130 170 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 300 NORMALSIZE -64 12202 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 300 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 300 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 110 330 NORMALSIZE -64 12202 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 110 330 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 110 330 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
}
guniqhudid 0
ends

defstate displaytemp_beamsabre // Beam sabre

  set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

state sword_hands

ife SWORD_ANIM 0
{
switch weaponcount
case 0
  ife player[].weapon_pos 2 soundonce BEAMSABRE_ON
  ifand BITS_PRESS 64
  {
  sub x 30
  clamp x 238 360
  clamp y 160 360
  guniqhudid 10
  rotatesprite x y HALFSIZE 90 20102 shade wep_pal 1024 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  ifl player[].weapon_pos 2
      {
      guniqhudid 11
      rotatesprite x y NORMALSIZE 90 20103 0 0 1024 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
      guniqhudid 12
      rotatespritea x y NORMALSIZE 90 20104 0 0 1024 -255 windowx1 windowy1 windowx2 windowy2 // glow
      }
  guniqhudid 13
  rotatesprite x y 49152 90 tilenum shade arm_pal 1024 windowx1 windowy1 windowx2 windowy2
  }
  else
  {
  clamp x 238 360
  guniqhudid 10
  rotatesprite x y HALFSIZE 0 20102 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
   ifl player[].weapon_pos 2
      {
      guniqhudid 11
      rotatesprite x y NORMALSIZE 0 20103 0 0 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
      guniqhudid 12
      rotatespritea x y NORMALSIZE 0 20104 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // glow
      }
  guniqhudid 13
  rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  }
  break
case 1
case 2
  add x 10
  sub y 10
  rotatesprite x y HALFSIZE 0 20102 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite x y HALFSIZE 0 20103 0 0 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatespritea x y NORMALSIZE 0 20104 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // glow
  rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
case 4
  add x 15
  sub y 15
  rotatesprite x y HALFSIZE 0 20102 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite x y HALFSIZE 0 20103 0 0 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatespritea x y NORMALSIZE 0 20104 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // glow
  rotatesprite x y 49152 64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
 add tilenum 1
  rotatesprite 240 120 HALFSIZE 0 20105 0 0 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatespritea 240 120 HALFSIZE 0 20106 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 120 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
 add tilenum 1
 rotatesprite 240 120 HALFSIZE 0 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 120 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 130 HALFSIZE 0 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 130 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
 add tilenum 1
 rotatesprite 240 120 HALFSIZE 0 20105 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 120 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 130 HALFSIZE 0 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 130 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 140 HALFSIZE 0 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 140 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 8
 add tilenum 1
 rotatesprite 210 130 HALFSIZE 0 20105 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 130 NORMALSIZE 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2

  rotatesprite 180 140 HALFSIZE 0 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 140 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2

  rotatesprite 150 150 HALFSIZE 0 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 150 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2

  break
case 9
 add tilenum 1
 rotatesprite 180 140 HALFSIZE 0 20105 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 140 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2

  rotatesprite 150 150 HALFSIZE 0 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 150 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2

  rotatesprite 120 160 HALFSIZE 0 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 160 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2

  break
case 10
 add tilenum 1
 rotatesprite 150 150 HALFSIZE 0 20105 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 150 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2

  rotatesprite 120 160 HALFSIZE 0 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 160 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2

  rotatesprite 90 170 HALFSIZE 0 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 170 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2

  break
case 11
 add tilenum 1
 rotatesprite 120 160 HALFSIZE 0 20105 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 160 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 120 160 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 170 HALFSIZE 0 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 170 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 90 170 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 190 HALFSIZE 0 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 190 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 60 190 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
 add tilenum 1
 rotatesprite 90 170 HALFSIZE 0 20105 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 170 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 90 170 NORMALSIZE 0 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 190 HALFSIZE 0 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 190 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 60 190 NORMALSIZE 0 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 30 210 HALFSIZE 0 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 210 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 30 210 NORMALSIZE 0 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
}
else
ife SWORD_ANIM 1
{
switch weaponcount
case 5
 add tilenum 1
 rotatesprite 30 120 HALFSIZE 1024 20105 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 120 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 30 120 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 6
 add tilenum 1
 rotatesprite 30 120 HALFSIZE 1024 20105 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 120 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 30 120 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 130 HALFSIZE 1024 20105 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 130 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 60 130 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 7
 add tilenum 1
  rotatesprite 30 120 HALFSIZE 1024 20105 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 120 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 30 120 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 130 HALFSIZE 1024 20105 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 130 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 60 130 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 140 HALFSIZE 1024 20105 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 140 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 90 140 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 8
 add tilenum 1
 rotatesprite 60 130 HALFSIZE 1024 20105 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 130 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 60 130 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 140 HALFSIZE 1024 20105 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 140 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 90 140 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 150 HALFSIZE 1024 20105 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 150 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 120 150 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 9
 add tilenum 1
  rotatesprite 90 140 HALFSIZE 1024 20105 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 90 140 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 90 140 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 150 HALFSIZE 1024 20105 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 120 150 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 120 150 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 160 HALFSIZE 1024 20105 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 150 160 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 150 160 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 10
 add tilenum 1
  rotatesprite 120 150 HALFSIZE 1024 20105 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 120 150 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 120 150 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 160 HALFSIZE 1024 20105 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 160 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 150 160 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 170 HALFSIZE 1024 20105 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 170 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 180 170 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 11
 add tilenum 1
  rotatesprite 150 160 HALFSIZE 1024 20105 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 160 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 150 160 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 170 HALFSIZE 1024 20105 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 170 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 180 170 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 190 HALFSIZE 1024 20105 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2  // Sword Graphic
  rotatesprite 210 190 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 210 190 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 12
 add tilenum 1
  rotatesprite 180 170 HALFSIZE 1024 20105 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 170 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 180 170 NORMALSIZE 1024 12051 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 190 HALFSIZE 1024 20105 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 190 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 210 190 NORMALSIZE 1024 12051 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 240 210 HALFSIZE 1024 20105 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 210 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 240 210 NORMALSIZE 1024 12051 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
endswitch
}
else
ife SWORD_ANIM 2
{
switch weaponcount
case 5
 add tilenum 1
  rotatesprite 180 120 HALFSIZE -64 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 180 120 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 180 120 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
 add tilenum 1
  rotatesprite 180 120 HALFSIZE -64 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 180 120 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 180 120 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 170 150 HALFSIZE -64 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 170 150 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 170 150 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
 add tilenum 1
  rotatesprite 180 120 HALFSIZE -64 20105 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 180 120 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 180 120 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 170 150 HALFSIZE -64 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 170 150 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 170 150 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 160 180 HALFSIZE -64 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 160 180 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 160 180 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 8
 add tilenum 1
 rotatesprite 170 150 HALFSIZE -64 20105 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 170 150 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 170 150 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 160 180 HALFSIZE -64 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 160 180 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 160 180 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 210 HALFSIZE -64 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 210 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 150 210 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
 add tilenum 1
  rotatesprite 160 180 HALFSIZE -64 20105 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 160 180 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 160 180 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 210 HALFSIZE -64 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 210 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 150 210 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 140 240 HALFSIZE -64 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 140 240 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 140 240 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
 add tilenum 1
 rotatesprite 150 210 HALFSIZE -64 20105 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 210 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 150 210 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 140 240 HALFSIZE -64 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 140 240 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 140 240 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 130 270 HALFSIZE -64 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 130 270 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 130 270 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
 add tilenum 1
  rotatesprite 140 240 HALFSIZE -64 20105 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 140 240 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 140 240 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 130 270 HALFSIZE -64 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 130 270 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 130 270 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 300 HALFSIZE -64 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 300 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 120 300 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
 add tilenum 1
  rotatesprite 130 270 HALFSIZE -64 20105 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 130 270 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 130 170 NORMALSIZE -64 12051 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 300 HALFSIZE -64 20105 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 300 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 120 300 NORMALSIZE -64 12051 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 110 330 HALFSIZE -64 20105 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 110 330 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  // ifn WEP0_BLOODY 0 rotatesprite 110 330 NORMALSIZE -64 12051 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
}
guniqhudid 0
ends

defstate displaytemp_mop

 ifn WEP0_BLOODY 0
    {
    ifg wep_pal 0
    ifl wep_pal 9
        set BLOOD_PAL wep_pal
        else set BLOOD_PAL WEP0_BLOODY
    }


  set x 200
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

state sword_hands

ife SWORD_ANIM 0
{
switch weaponcount
case 0
  set weap_disp_temp2 player[].weapon_pos
  ife weap_disp_temp2 8 soundonce DRAW_SWORD2
  sub x 40
  guniqhudid 10
  rotatesprite x y NORMALSIZE 0 12156 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  guniqhudid 11
  rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  ifn WEP0_BLOODY 0 rotatesprite x y NORMALSIZE 0 12080 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
  add x 10
  sub y 10
  rotatesprite x y NORMALSIZE 0 12156 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite x y NORMALSIZE 0 12080 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
case 4
  add x 15
  sub y 15
  rotatesprite x y NORMALSIZE 0 12156 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite x y 49152 64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite x y NORMALSIZE 64 12080 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
 add tilenum 1
  rotatesprite 240 120 NORMALSIZE 0 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 120 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 240 120 NORMALSIZE 0 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
 add tilenum 1
 rotatesprite 240 120 NORMALSIZE 0 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 120 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 240 120 NORMALSIZE 0 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 130 NORMALSIZE 0 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 130 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 130 NORMALSIZE 0 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
 add tilenum 1
 rotatesprite 240 120 NORMALSIZE 0 12157 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 120 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 240 120 NORMALSIZE 0 12081 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 130 NORMALSIZE 0 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 130 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 130 NORMALSIZE 0 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 140 NORMALSIZE 0 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 140 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 140 NORMALSIZE 0 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 8
 add tilenum 1
 rotatesprite 210 130 NORMALSIZE 0 12157 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 130 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 130 NORMALSIZE 0 12081 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 140 NORMALSIZE 0 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 140 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 140 NORMALSIZE 0 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 150 NORMALSIZE 0 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 150 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 150 NORMALSIZE 0 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
 add tilenum 1
 rotatesprite 180 140 NORMALSIZE 0 12157 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 140 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 140 NORMALSIZE 0 12081 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 150 NORMALSIZE 0 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 150 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 150 NORMALSIZE 0 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 160 NORMALSIZE 0 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 160 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 160 NORMALSIZE 0 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
 add tilenum 1
 rotatesprite 150 150 NORMALSIZE 0 12157 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 150 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 150 NORMALSIZE 0 12081 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 160 NORMALSIZE 0 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 160 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 160 NORMALSIZE 0 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 170 NORMALSIZE 0 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 170 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 170 NORMALSIZE 0 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
 add tilenum 1
 rotatesprite 120 160 NORMALSIZE 0 12157 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 160 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 160 NORMALSIZE 0 12081 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 170 NORMALSIZE 0 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 170 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 170 NORMALSIZE 0 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 190 NORMALSIZE 0 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 190 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 190 NORMALSIZE 0 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
 add tilenum 1
 rotatesprite 90 170 NORMALSIZE 0 12157 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 170 49152 0 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 170 NORMALSIZE 0 12081 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 190 NORMALSIZE 0 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 190 49152 0 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 190 NORMALSIZE 0 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 30 210 NORMALSIZE 0 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 210 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 30 210 NORMALSIZE 0 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
}
else
ife SWORD_ANIM 1
{
switch weaponcount
case 5
 add tilenum 1
 rotatesprite 30 120 NORMALSIZE 1024 12157 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 120 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 30 120 NORMALSIZE 1024 12081 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 6
 add tilenum 1
 rotatesprite 30 120 NORMALSIZE 1024 12157 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 120 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 30 120 NORMALSIZE 1024 12081 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 130 NORMALSIZE 1024 12157 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 130 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 130 NORMALSIZE 1024 12081 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 7
 add tilenum 1
  rotatesprite 30 120 NORMALSIZE 1024 12157 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 30 120 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 30 120 NORMALSIZE 1024 12081 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 60 130 NORMALSIZE 1024 12157 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 130 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 130 NORMALSIZE 1024 12081 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 140 NORMALSIZE 1024 12157 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 140 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 140 NORMALSIZE 1024 12081 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 8
 add tilenum 1
 rotatesprite 60 130 NORMALSIZE 1024 12157 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 60 130 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 60 130 NORMALSIZE 1024 12081 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 90 140 NORMALSIZE 1024 12157 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 90 140 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 140 NORMALSIZE 1024 12081 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 150 NORMALSIZE 1024 12157 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 150 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 150 NORMALSIZE 1024 12081 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 9
 add tilenum 1
  rotatesprite 90 140 NORMALSIZE 1024 12157 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 90 140 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 90 140 NORMALSIZE 1024 12081 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 150 NORMALSIZE 1024 12157 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 120 150 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 150 NORMALSIZE 1024 12081 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 160 NORMALSIZE 1024 12157 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 150 160 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 160 NORMALSIZE 1024 12081 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 10
 add tilenum 1
  rotatesprite 120 150 NORMALSIZE 1024 12157 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 120 150 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 150 NORMALSIZE 1024 12081 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 160 NORMALSIZE 1024 12157 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 160 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 160 NORMALSIZE 1024 12081 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 170 NORMALSIZE 1024 12157 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 170 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 170 NORMALSIZE 1024 12081 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 11
 add tilenum 1
  rotatesprite 150 160 NORMALSIZE 1024 12157 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 160 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 160 NORMALSIZE 1024 12081 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 180 170 NORMALSIZE 1024 12157 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 170 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 170 NORMALSIZE 1024 12081 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 190 NORMALSIZE 1024 12157 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2  // Sword Graphic
  rotatesprite 210 190 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 190 NORMALSIZE 1024 12081 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
case 12
 add tilenum 1
  rotatesprite 180 170 NORMALSIZE 1024 12157 shade wep_pal 37 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 180 170 49152 1024 tilenum shade arm_pal 37 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 170 NORMALSIZE 1024 12081 shade BLOOD_PAL 37 windowx1 windowy1 windowx2 windowy2
  rotatesprite 210 190 NORMALSIZE 1024 12157 shade wep_pal 5 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 210 190 49152 1024 tilenum shade arm_pal 5 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 210 190 NORMALSIZE 1024 12081 shade BLOOD_PAL 5 windowx1 windowy1 windowx2 windowy2
  rotatesprite 240 210 NORMALSIZE 1024 12157 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 240 210 49152 1024 tilenum shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 240 210 NORMALSIZE 1024 12081 shade BLOOD_PAL 4 windowx1 windowy1 windowx2 windowy2
  break
endswitch
}
else
ife SWORD_ANIM 2
{
switch weaponcount
case 5
 add tilenum 1
  rotatesprite 180 120 NORMALSIZE -64 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 180 120 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 120 NORMALSIZE -64 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
 add tilenum 1
  rotatesprite 180 120 NORMALSIZE -64 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 180 120 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 120 NORMALSIZE -64 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 170 150 NORMALSIZE -64 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 170 150 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 170 150 NORMALSIZE -64 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
 add tilenum 1
  rotatesprite 180 120 NORMALSIZE -64 12157 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword graphic
  rotatesprite 180 120 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 180 120 NORMALSIZE -64 12081 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 170 150 NORMALSIZE -64 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 170 150 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 170 150 NORMALSIZE -64 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 160 180 NORMALSIZE -64 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 160 180 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 160 180 NORMALSIZE -64 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 8
 add tilenum 1
 rotatesprite 170 150 NORMALSIZE -64 12157 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 170 150 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 170 150 NORMALSIZE -64 12081 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 160 180 NORMALSIZE -64 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 160 180 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 160 180 NORMALSIZE -64 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 210 NORMALSIZE -64 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 210 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 210 NORMALSIZE -64 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
 add tilenum 1
  rotatesprite 160 180 NORMALSIZE -64 12157 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 160 180 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 160 180 NORMALSIZE -64 12081 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 150 210 NORMALSIZE -64 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 210 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 210 NORMALSIZE -64 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 140 240 NORMALSIZE -64 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 140 240 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 140 240 NORMALSIZE -64 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
 add tilenum 1
 rotatesprite 150 210 NORMALSIZE -64 12157 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 150 210 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 150 210 NORMALSIZE -64 12081 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 140 240 NORMALSIZE -64 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 140 240 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 140 240 NORMALSIZE -64 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 130 270 NORMALSIZE -64 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 130 270 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 130 270 NORMALSIZE -64 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
 add tilenum 1
  rotatesprite 140 240 NORMALSIZE -64 12157 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 140 240 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 140 240 NORMALSIZE -64 12081 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 130 270 NORMALSIZE -64 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 130 270 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 130 270 NORMALSIZE -64 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 300 NORMALSIZE -64 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 300 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 300 NORMALSIZE -64 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
 add tilenum 1
  rotatesprite 130 270 NORMALSIZE -64 12157 shade wep_pal 33 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 130 270 49152 -64 tilenum shade arm_pal 33 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 130 170 NORMALSIZE -64 12081 shade BLOOD_PAL 33 windowx1 windowy1 windowx2 windowy2
  rotatesprite 120 300 NORMALSIZE -64 12157 shade wep_pal 1 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 120 300 49152 -64 tilenum shade arm_pal 1 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 120 300 NORMALSIZE -64 12081 shade BLOOD_PAL 1 windowx1 windowy1 windowx2 windowy2
  rotatesprite 110 330 NORMALSIZE -64 12157 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Sword Graphic
  rotatesprite 110 330 49152 -64 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifn WEP0_BLOODY 0 rotatesprite 110 330 NORMALSIZE -64 12081 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
}
guniqhudid 0
ends

// FN FAL

defstate displaytemp_FNFAL

  set x 222
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 235
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 54
        sub y 50
        rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 54
        add y 50
        guniqhudid 0
        }

switch weaponcount
case 0
case 1
case 2
  ifand gun_firemode 16384 // Ironsight?
      {
      set x 160
      set weap_disp_temp2 wepsway_x
      divvar weap_disp_temp2 2
      sub x weap_disp_temp2
      set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
      divvar weap_disp_temp4 2 // divide it by 2
      add x weap_disp_temp4 // add it to x
      sub x 5 // offset it by 5
      set y 187
      set weap_disp_temp3 wepsway_y
      divvar weap_disp_temp3 2
      sub y weap_disp_temp3


      set weap_disp_temp8 HALFSIZE
       ifg gun_pushb_disp 0
        {
        set weap_disp_temp7 4 // base value
        mul weap_disp_temp7 gun_spread // weapon shake affected by gun spread too
        mul weap_disp_temp7 gun_pushb_disp // countdown
        add weap_disp_temp8 weap_disp_temp7 // add to zoom value
        sub gun_pushb_disp 2
        }
      guniqhudid 10
      rotatesprite x y weap_disp_temp8 0 19881 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // barrel part of ironsight
      set x 160
      sub x wepsway_x
      add x weapon_xoffset // add weaponxsway to position
      sub x 10 // offset it by 10
      set y 178
      sub y wepsway_y
      guniqhudid 11
      rotatesprite x y weap_disp_temp8 0 19880 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // sight
      }
  else
      {
      state gunpushback_display
      ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
      ife player[].weapon_pos -2 soundonce SELECT_WEAPON
      state wep_drawup
      guniqhudid 10
      rotatesprite x y 45056 weap_disp_temp2 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 60
      add y 10
      guniqhudid 11
      rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 3
    ifand gun_firemode 16384 // Ironsight?
      {
       displayrandvar gun_pushb_disp 5
     add gun_pushb_disp 5
      add x gun_pushb_disp
      add y gun_pushb_disp

      set x 160
      set weap_disp_temp2 wepsway_x
      divvar weap_disp_temp2 2
      sub x weap_disp_temp2
      set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
      divvar weap_disp_temp4 2 // divide it by 2
      add x weap_disp_temp4 // add it to x
      sub x 5 // offset it by 5
      set y 187
      set weap_disp_temp3 wepsway_y
      divvar weap_disp_temp3 2
      sub y weap_disp_temp3
      state random_AR_flash
      sub y 65
      guniqhudid 10
      rotatespritea x y 32638 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 70

      set gun_pushb_disp 10
       set weap_disp_temp8 HALFSIZE
       ifg gun_pushb_disp 0
        {
        set weap_disp_temp7 4 // base value
        mul weap_disp_temp7 gun_spread // weapon shake affected by gun spread too
        mul weap_disp_temp7 gun_pushb_disp // countdown
        add weap_disp_temp8 weap_disp_temp7 // add to zoom value
        sub gun_pushb_disp 2
        }
      guniqhudid 11
      rotatesprite x y weap_disp_temp8 0 19881 0 106 4096 windowx1 windowy1 windowx2 windowy2 // barrel part of ironsight
      set x 160
      sub x wepsway_x
      add x weapon_xoffset // add weaponxsway to position
      sub x 10 // offset it by 10
      set y 183
      sub y wepsway_y
      guniqhudid 12
      rotatesprite x y weap_disp_temp8 0 19880 0 106 4096 windowx1 windowy1 windowx2 windowy2 // sight
      }
else
      {
	  state gun_smoke_display
     displayrandvar gun_pushb_disp 5
     add gun_pushb_disp 5
      add x gun_pushb_disp
      add y gun_pushb_disp
      sub x 54
      sub y 50
     state random_AR_flash
     guniqhudid 10
      rotatespritea x y 22638 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 54
      add y 50
      guniqhudid 11
      rotatesprite x y 45056 0 12089 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 60
      add y 10
      guniqhudid 12
      rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 4
case 5
case 6
 displayrandvar gun_pushb_disp 5
 add gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp
  guniqhudid 10
  rotatesprite x y 45056 0 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
case 9
case 10
  guniqhudid 10
  rotatesprite x y 45056 0 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  set x2 x
  set y2 y
  sub x2 40
  add y2 40
  guniqhudid 11
  rotatesprite x2 y2 32768 128 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
  ife weaponcount 12 add y 10
  guniqhudid 10
  rotatesprite x y 45056 64 12090 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 14
case 15
case 16
  add y 5
  add x 5
  guniqhudid 10
  rotatesprite x y 45056 96 12138 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
  add y 5
  add x 5
  guniqhudid 10
  rotatesprite x y 45056 128 12138 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 27
  sub x 5
  guniqhudid 10
  rotatesprite x y 45056 96 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  set x2 x
  set y2 y
  sub x2 40
  add y2 40
  guniqhudid 11
  rotatesprite x2 y2 32768 128 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 28
case 29
  sub y 5
  sub x 5
  guniqhudid 10
  rotatesprite x y 45056 96 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  set x2 x
  set y2 y
  sub x2 40
  add y2 40
  guniqhudid 11
  rotatesprite x2 y2 32768 128 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 30
case 31
case 32
case 33
case 34
case 35
  ife weaponcount 33 sub y 10
  sub y 5
  sub x 5
  guniqhudid 10
  rotatesprite x y 45056 64 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  set x2 x
  set y2 y
  sub x2 40
  add y2 40
  guniqhudid 11
  rotatesprite x2 y2 32768 128 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 36
case 37
  guniqhudid 10
  rotatesprite x y 45056 0 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  set x2 x
  set y2 y
  sub x2 40
  add y2 40
  guniqhudid 11
  rotatesprite x2 y2 32768 128 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 38 // start of mag release action
case 56
  guniqhudid 10
  rotatesprite x y 45056 0 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 39
case 55
  guniqhudid 10
  rotatesprite x y 45056 16 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 40
case 54
  guniqhudid 10
  rotatesprite x y 45056 32 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 41
case 53
  guniqhudid 10
  rotatesprite x y 45056 32 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 50
  add y 20
  break
case 42
case 52
  guniqhudid 10
  rotatesprite x y 45056 32 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 55
  add y 20
  break
case 43
case 51
  add y 5
  guniqhudid 10
  rotatesprite x y 45056 48 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 57
  add y 50
  break
case 44
case 50
  add y 10
  guniqhudid 10
  rotatesprite x y 45056 64 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 57
  add y 50
  break
case 45
case 49
  add y 15
  guniqhudid 10
  rotatesprite x y 45056 76 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 57
  add y 50
  break
case 46
case 48
  add y 20
  guniqhudid 10
  rotatesprite x y 45056 96 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 47
  add y 35
  guniqhudid 10
  rotatesprite x y 45056 104 12088 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// AK104
defstate displaytemp_AK114

 set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 227
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 146 320

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
	    sub x 40
	    sub y 32
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 40
        add y 32
        guniqhudid 0
        }

 ifand gun_firemode 32768 // Using the GL?
{
    switch gl_countd
    case 0
    case 43
    case 42
    case 41
      state wep_drawup
      guniqhudid 10
     rotatesprite x y 40960 weap_disp_temp2 9846 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 1
    case 2
    case 3
    case 4
    guniqhudid 10
     rotatesprite x y 40960 0 9848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 5
    case 6
    case 7
    case 8
    guniqhudid 10
     rotatesprite x y 40960 32 9852 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 9
    case 10
    case 11
    case 12
    case 13
    guniqhudid 10
     rotatesprite x y 40960 32 9853 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 14
    case 15
    case 16
    guniqhudid 10
     rotatesprite x y 32768 0 9853 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            sub x 20
            add y 5
            guniqhudid 11
            rotatesprite x y 40960 1024 C_HAND_2 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
     break
    case 17
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    case 29
     guniqhudid 10
     rotatesprite x y 32768 64 9853 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            set weap_disp_temp7 gl_countd
            mulvar weap_disp_temp7 2
            sub weap_disp_temp7 20
            add y weap_disp_temp7
            sub x 20
            state fortymm_caseless_disp
     break
    case 30
    case 31
    case 32
     guniqhudid 10
     rotatesprite x y 40960 0 9852 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 33
    case 34
    case 35
    case 36
     guniqhudid 10
     rotatesprite x y 40960 32 9852 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 37
    case 38
    case 39
    case 40
     guniqhudid 10
     rotatesprite x y 40960 0 9848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 44
    case 45
    case 46
    case 47
    case 48
		state gun_smoke_display
            set weap_disp_temp6 x
            sub weap_disp_temp6 48
            set weap_disp_temp7 y
            sub weap_disp_temp7 32
            displayrandvar rot_flash 2048
            guniqhudid 10
            rotatespritea weap_disp_temp6 weap_disp_temp7 14000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
            guniqhudid 11
            rotatesprite x y 40960 0 9845 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            guniqhudid 12
            rotatesprite x y 40960 0 9847 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    endswitch
guniqhudid 0
}
else
switch weaponcount
case 0
case 1
case 4
case 5
case 6
case 7
case 8
case 9
case 10
  ifand gun_firemode 16384 // Ironsight?
  {
      set x 160
      set weap_disp_temp2 wepsway_x
      divvar weap_disp_temp2 2
      sub x weap_disp_temp2
      set y 140
      set weap_disp_temp3 wepsway_y
      divvar weap_disp_temp3 2
      sub y weap_disp_temp3
      set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
      divvar weap_disp_temp4 2 // divide it by 2
      add x weap_disp_temp4 // add it to x
      sub x 5 // offset it by 5
      sub y 10
      state gunpushback_sight_display
      guniqhudid 10
      rotatesprite x y weap_disp_temp8 0 12172 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Barrel
      sub y 30
      guniqhudid 11
      rotatespritea x y 8192 0 11047 0 0 4097 -255 windowx1 windowy1 windowx2 windowy2 // holographic crosshair
      set x 160
      sub x wepsway_x
      sub x 10
      add x weapon_xoffset
      set y 147
      sub y wepsway_y
      guniqhudid 12
      rotatesprite x y weap_disp_temp8 0 12165 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // holotech sight
        ifl player_shade_diff -5
            {
            set weap_disp_temp3 player_shade_diff
            mulvar weap_disp_temp3 2
            sub y 30
            guniqhudid 13
            rotatespritea x y 6096 0 2587 player_shade_diff wall_pal 33 weap_disp_temp3 windowx1 windowy1 windowx2 windowy2 // Glass in holosight
            }
  }
  else
      {
      state wep_drawup
      state gunpushback_display
      sub x 35
      add y 35
      guniqhudid 10
      rotatesprite x y 36864 weap_disp_temp2 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 35
      sub y 35
      guniqhudid 11
      rotatesprite x y 40960 weap_disp_temp2 9845 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 2
case 3
  ifand gun_firemode 16384
  {
      set x 160
      set weap_disp_temp2 wepsway_x
      divvar weap_disp_temp2 2
      sub x weap_disp_temp2
      set y 140
      set weap_disp_temp3 wepsway_y
      divvar weap_disp_temp3 2
      sub y weap_disp_temp3
      set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
      divvar weap_disp_temp4 2 // divide it by 2
      add x weap_disp_temp4 // add it to x
      sub x 5 // offset it by 5
      sub y 5
      state random_AR_horzflash
      sub y 10
      guniqhudid 10
      rotatespritea x y 20000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 5
      set gun_pushb_disp 10
        state gunpushback_sight_display
        guniqhudid 11
      rotatesprite x y weap_disp_temp8 0 12172 0 106 4096 windowx1 windowy1 windowx2 windowy2 // Barrel
      sub y 30
      guniqhudid 12
      rotatespritea x y 8192 0 11047 0 0 4097 -255 windowx1 windowy1 windowx2 windowy2 // holographic crosshair
      set x 160
      sub x wepsway_x
      sub x 10
      add x weapon_xoffset
      set y 147
      sub y wepsway_y
      guniqhudid 13
      rotatesprite x y weap_disp_temp8 0 12165 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // holotech sight

  }
  else
  {
  state gun_smoke_display
  ife weaponcount 3
      {
      displayrandvar gun_pushb_disp 7
      add x gun_pushb_disp
      add y gun_pushb_disp
      }
  sub x 40
  sub y 32
  state random_AR_horzflash
  guniqhudid 10
  rotatespritea x y 24000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 40
  add y 32
      sub x 35
      add y 35
      guniqhudid 11
      rotatesprite x y 36864 0 C_ARM_1 0 107 4096 windowx1 windowy1 windowx2 windowy2
      add x 35
      sub y 35
    guniqhudid 12
  rotatesprite x y 40960 0 9845 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 13
  rotatesprite x y 40960 0 9847 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  }
  break
case 11
case 12
case 13
  guniqhudid 10
  rotatesprite x y 40960 64 9848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 14
case 15
case 16
case 36
case 37
  add y 5
  add x 5
  ife weaponcount 16 add y 10
  guniqhudid 10
  rotatesprite x y 40960 96 9848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 50
  sub x 40
  guniqhudid 11
  rotatesprite x y 40960 64 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
case 34
case 35
  add y 10
  guniqhudid 10
  rotatesprite x y 40960 0 9851 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatesprite x y 40960 0 9849 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 55
  sub x 35
  guniqhudid 12
  rotatesprite x y 40960 96 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 21
case 22
case 23
case 24
case 25
case 32
case 33
  add y 10
  ife weaponcount 33 sub y 10
  guniqhudid 10
  rotatesprite x y 40960 0 9851 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatesprite x y 40960 0 9850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 26
case 27
case 28
case 29
case 30
case 31
  add y 10
  guniqhudid 10
  rotatesprite x y 40960 64 9851 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 38 // start reloading
case 58
  guniqhudid 10
  rotatesprite x y 40960 0 9848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 39
case 57
  guniqhudid 10
  rotatesprite x y 40960 16 9848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 40
case 56
  guniqhudid 10
  rotatesprite x y 40960 24 9848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 41
case 55
  guniqhudid 10
  rotatesprite x y 40960 32 9848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 42
case 54
  guniqhudid 10
  rotatesprite x y 40960 40 9848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 43
case 53
  add y 15
  guniqhudid 10
  rotatesprite x y 40960 48 9848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 44
case 52
  add y 20
  guniqhudid 10
  rotatesprite x y 40960 64 9848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 45
case 51
  add y 25
  guniqhudid 10
  rotatesprite x y 40960 76 9848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 46
case 50
  add y 30
  guniqhudid 10
  rotatesprite x y 40960 96 9851 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatesprite x y 40960 96 9849 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 47
case 48
case 49
  add y 45
  guniqhudid 10
  rotatesprite x y 40960 104 9851 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatesprite x y 40960 104 9849 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// AXE

defstate displaytemp_axe

 ifn WEP0_BLOODY 0
    {
    ifg wep_pal 0
    ifl wep_pal 9
    ifl wep_pal 50
        set BLOOD_PAL wep_pal
        else set BLOOD_PAL WEP0_BLOODY
        ife BLOOD_PAL 2 set BLOOD_PAL 21
        ife BLOOD_PAL 8 set BLOOD_PAL 11
        ife BLOOD_PAL 1 set BLOOD_PAL 3
    }

  set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 225
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 148 320

  state gunpushback_display


  switch CHAR
  case 0 ifand CHAR_APP 1 set tilenum 29007 else set tilenum 28998 ; break
  case 1
  case 16 set tilenum 29000 ; break
  case 2 ifand CHAR_APP 4 set tilenum 29013 else set tilenum 29003 ; break
  case 11 set tilenum 29003 ; break
  case 3 ifand CHAR_APP 16 set tilenum 29008 else set tilenum 29006 ; break
  case 4 ifand CHAR_APP 2 set tilenum 29011 else set tilenum 29002 ; break
  case 5 set tilenum 29012 ; break
  case 6 set tilenum 29004 ; break
  case 7 set tilenum 28999 ; break
  case 10 set tilenum 29001 ; break
  case 12 set tilenum 29005 ; break
  case 13 set tilenum 29008 ; break
  case 14 set tilenum 29009 ; break
  case 17 set tilenum 29010 ; break
  default set tilenum 28997 ; break
  endswitch

ifg kickbackpic_2 0  // magic attack
switch kickbackpic_2
case 0
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 32768 weap_disp_temp2 28967 0 58 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifn BLOOD_PAL 0 rotatesprite x y 32768 weap_disp_temp2 29016 0 BLOOD_PAL 4097 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
 rotatesprite x 100 32768 0 28968 0 62 4096 windowx1 windowy1 windowx2 windowy2
 ifn BLOOD_PAL 0 rotatesprite x 100 32768 0 29017 0 BLOOD_PAL 4097 windowx1 windowy1 windowx2 windowy2
 break
case 3
case 4
case 11
case 12
 add x 40
 guniqhudid 10
 rotatesprite x 95 32768 0 28969 0 76 4096 windowx1 windowy1 windowx2 windowy2
 guniqhudid 11
 ifn BLOOD_PAL 0 rotatesprite x 95 32768 0 29018 0 BLOOD_PAL 4097 windowx1 windowy1 windowx2 windowy2
  sub x 30
  guniqhudid 12
 rotatesprite x 165 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 5
case 6
case 9
case 10
 add x 20
 guniqhudid 10
 rotatesprite x y 32768 0 28970 0 86 4096 windowx1 windowy1 windowx2 windowy2
    sub x 60
  add y 20
  guniqhudid 11
  rotatesprite x y 49152 256 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 7
case 8
 add x 40
 guniqhudid 10
 rotatesprite x y 32768 0 28971 0 104 4096 windowx1 windowy1 windowx2 windowy2
   sub x 70
  add y 20
  guniqhudid 11
  rotatesprite x y 53152 300 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 13
guniqhudid 10
 rotatesprite x y 32768 0 28967 0 104 4096 windowx1 windowy1 windowx2 windowy2
 guniqhudid 11
 ifn BLOOD_PAL 0 rotatesprite x y 32768 0 29016 0 BLOOD_PAL 4097 windowx1 windowy1 windowx2 windowy2
 guniqhudid 12
 rotatespritea x y 34768 0 28967 0 104 4096 -255 windowx1 windowy1 windowx2 windowy2
 break
case 14
case 18
  sub x 60
  add y 15
  guniqhudid 10
  rotatesprite x y 32768 -32 28967 0 104 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifn BLOOD_PAL 0 rotatesprite x y 32768 -32 29016 0 BLOOD_PAL 4097 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  rotatespritea x y 32768 -32 28967 0 104 4096 -255 windowx1 windowy1 windowx2 windowy2
 break
case 15
case 17
  sub x 90
  add y 25
  guniqhudid 10
  rotatesprite x y 32768 -64 28967 0 86 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifn BLOOD_PAL 0 rotatesprite x y 32768 -64 29016 0 BLOOD_PAL 4097 windowx1 windowy1 windowx2 windowy2
 break
case 16
  sub x 120
  add y 40
  guniqhudid 10
  rotatesprite x y 32768 -128 28967 0 62 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifn BLOOD_PAL 0 rotatesprite x y 32768 -128 29016 0 BLOOD_PAL 4097 windowx1 windowy1 windowx2 windowy2
 break
endswitch
else
ife SWORD_ANIM 0
switch weaponcount
case 0
case 17
  state wep_drawup
  set rot_flash 0
  guniqhudid 10
  rotatesprite x y 32768 weap_disp_temp2 28967 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifn BLOOD_PAL 0 rotatesprite x y 32768 weap_disp_temp2 29016 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
case 3
guniqhudid 10
 rotatesprite x 100 32768 0 28968 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 guniqhudid 11
 ifn BLOOD_PAL 0 rotatesprite x 100 32768 0 29017 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 break
case 4
case 5
case 6
case 15
case 16
 add x 40
 guniqhudid 10
 rotatesprite x 95 32768 0 28969 shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
 guniqhudid 11
 ifn BLOOD_PAL 0 rotatesprite x 95 32768 0 29018 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 sub x 30
 guniqhudid 12
 rotatesprite x 165 49152 0 tilenum shade arm_pal 4608 windowx1 windowy1 windowx2 windowy2
 break
case 7
case 8
case 9
case 13
case 14
 add x 40
 guniqhudid 10
 rotatesprite x y 32768 0 28970 shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
   sub x 60
  add y 20
  guniqhudid 11
   rotatesprite x y 49152 256 tilenum shade arm_pal 4608 windowx1 windowy1 windowx2 windowy2
 break
case 10
case 11
case 12
 add x 40
 guniqhudid 10
 rotatesprite x y 32768 0 28971 shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
   sub x 70
  add y 20
  guniqhudid 11
  rotatesprite x y 53152 300 tilenum shade arm_pal 4608 windowx1 windowy1 windowx2 windowy2
 break
case 18
case 22
  sub x 60
  add y 15
  guniqhudid 10
  rotatesprite x y 32768 -32 28967 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 19
case 21
  sub x 90
  add y 25
  guniqhudid 10
  rotatesprite x y 32768 -64 28967 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifn BLOOD_PAL 0 rotatesprite x y 32768 -64 29016 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 break
case 20
  sub x 120
  add y 40
  guniqhudid 10
  rotatesprite x y 32768 -128 28967 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifn BLOOD_PAL 0 rotatesprite x y 32768 -128 29016 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 break
endswitch
else
switch weaponcount
case 0
case 17
  state wep_drawup
  set rot_flash 0
  guniqhudid 10
  rotatesprite x y 32768 weap_disp_temp2 28972 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifn BLOOD_PAL 0 rotatesprite x y 32768 weap_disp_temp2 29019 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
case 3
guniqhudid 10
 rotatesprite x 100 32768 0 28973 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 sub x 10
 guniqhudid 11
  rotatesprite x 200 53152 -256 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 4
case 5
case 6
case 15
case 16
 add x 40
 guniqhudid 10
 rotatesprite x 100 32768 0 28974 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 35
  guniqhudid 11
  rotatesprite x 200 53152 -128 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 7
case 8
case 9
case 13
case 14
 add x 20
 guniqhudid 10
 rotatesprite x y 32768 0 28975 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 65
  add y 30
  guniqhudid 11
  rotatesprite x y 53152 256 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 10
case 11
case 12
 add x 60
 add y 40
 guniqhudid 10
 rotatesprite x y 32768 0 28976 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 55
  add y 0
  guniqhudid 11
  rotatesprite x y 53152 450 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 18
case 22
  sub x 60
  add y 15
  guniqhudid 10
  rotatesprite x y 32768 -32 28972 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifn BLOOD_PAL 0 rotatesprite x y 32768 -32 29019 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 break
case 19
case 21
  sub x 90
  add y 25
  guniqhudid 10
  rotatesprite x y 32768 -64 28972 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifn BLOOD_PAL 0 rotatesprite x y 32768 -64 29019 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 break
case 20
  sub x 120
  add y 40
  guniqhudid 10
  rotatesprite x y 32768 -128 28972 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  ifn BLOOD_PAL 0 rotatesprite x y 32768 -128 29019 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 break
endswitch
guniqhudid 0
ends

// VORPAL SWORD

defstate displaytemp_vorpal

 ifn WEP0_BLOODY 0
    {
    ifg wep_pal 0
    ifl wep_pal 9
    ifl wep_pal 50
        set BLOOD_PAL wep_pal
        else set BLOOD_PAL WEP0_BLOODY
        ife BLOOD_PAL 2 set BLOOD_PAL 21
        ife BLOOD_PAL 8 set BLOOD_PAL 11
        ife BLOOD_PAL 1 set BLOOD_PAL 3
    }

  set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 225
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 148 320

  state gunpushback_display


  switch CHAR
  case 0 ifand CHAR_APP 1 set tilenum 29007 else set tilenum 28998 ; break
  case 1
  case 16 set tilenum 29000 ; break
  case 2
  case 11 set tilenum 29003 ; break
  case 3 ifand CHAR_APP 16 set tilenum 29008 else set tilenum 29006 ; break
  case 4 ifand CHAR_APP 2 set tilenum 29011 else set tilenum 29002 ; break
  case 5 set tilenum 29012 ; break
  case 6 set tilenum 29004 ; break
  case 7 set tilenum 28999 ; break
  case 10 set tilenum 29001 ; break
  case 12 set tilenum 29005 ; break
  case 13 set tilenum 29008 ; break
  case 14 set tilenum 29009 ; break
  case 17 set tilenum 29010 ; break
  default set tilenum 28997 ; break
  endswitch

ife SWORD_ANIM 0
switch weaponcount
case 0
case 17
  state wep_drawup
  set rot_flash 0
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 29042 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  // ifn BLOOD_PAL 0 rotatesprite x y 40960 weap_disp_temp2 29016 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
case 3
guniqhudid 10
 rotatesprite x 100 40960 0 29043 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 guniqhudid 11
 // ifn BLOOD_PAL 0 rotatesprite x 100 40960 0 29017 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 break
case 4
case 5
case 6
case 15
case 16
 add x 40
 guniqhudid 10
 rotatesprite x 95 40960 0 29044 shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
 guniqhudid 11
 // ifn BLOOD_PAL 0 rotatesprite x 95 40960 0 29018 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 sub x 100
 guniqhudid 12
 rotatesprite x 185 40960 0 tilenum shade arm_pal 4608 windowx1 windowy1 windowx2 windowy2
 break
case 7
case 8
case 9
case 13
case 14
 add x 160
 guniqhudid 10
 rotatesprite x y 40960 0 29045 shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
   sub x 120
   guniqhudid 11
   rotatesprite x y 40960 256 tilenum shade arm_pal 4608 windowx1 windowy1 windowx2 windowy2
 break
case 10
case 11
case 12
 add x 160

 add x 40
 add y 5
 guniqhudid 10
 rotatesprite x y 40960 0 29046 shade wep_pal 4608 windowx1 windowy1 windowx2 windowy2
   sub x 140
  sub y 5
  guniqhudid 11
  rotatesprite x y 40960 300 tilenum shade arm_pal 4608 windowx1 windowy1 windowx2 windowy2
 break
case 18
case 22
  sub x 60
  add y 15
  guniqhudid 10
  rotatesprite x y 40960 -32 29047 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 19
case 21
  sub x 90
  add y 25
  guniqhudid 10
  rotatesprite x y 40960 -64 29047 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  // ifn BLOOD_PAL 0 rotatesprite x y 32768 -64 29016 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 break
case 20
  sub x 120
  add y 40
  guniqhudid 10
  rotatesprite x y 40960 -128 29047 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  // ifn BLOOD_PAL 0 rotatesprite x y 32768 -128 29016 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 break
endswitch
else
switch weaponcount
case 0
case 17
  state wep_drawup
  set rot_flash 0
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 29042 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  // ifn BLOOD_PAL 0 rotatesprite x y 40960 weap_disp_temp2 29016 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
case 3
	guniqhudid 10
	 rotatesprite x 100 32768 0 29048 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
	 sub x 10
	 guniqhudid 11
	  rotatesprite x 200 40960 -256 tilenum shade arm_pal 4104 windowx1 windowy1 windowx2 windowy2
 break
case 4
case 5
case 6
case 15
case 16
 add x 40
 guniqhudid 10
 rotatesprite x 100 32768 0 29049 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
  sub x 45
  guniqhudid 11
  rotatesprite x 180 40960 -128 tilenum shade arm_pal 4104 windowx1 windowy1 windowx2 windowy2
 break
case 7
case 8
case 9
case 13
case 14
 add x 140
 add y 10
 guniqhudid 10
 rotatesprite x y 40960 0 29050 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
  sub x 85
  add y 10
  guniqhudid 11
  rotatesprite x y 40960 256 tilenum shade arm_pal 4104 windowx1 windowy1 windowx2 windowy2
 break
case 10
case 11
case 12
 add x 160
 add y 60
 guniqhudid 10
 rotatesprite x y 40960 0 29051 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
  sub x 55
  sub y 20
  guniqhudid 11
  rotatesprite x y 40960 450 tilenum shade arm_pal 4104 windowx1 windowy1 windowx2 windowy2
 break
case 18
case 22
  sub x 60
  add y 15
  guniqhudid 10
  rotatesprite x y 40960 -32 29047 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  // ifn BLOOD_PAL 0 rotatesprite x y 32768 -32 29019 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 break
case 19
case 21
  sub x 90
  add y 25
  guniqhudid 10
  rotatesprite x y 40960 -64 29047 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  // ifn BLOOD_PAL 0 rotatesprite x y 32768 -64 29019 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 break
case 20
  sub x 120
  add y 40
  guniqhudid 10
  rotatesprite x y 40960 -128 29047 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  // ifn BLOOD_PAL 0 rotatesprite x y 32768 -128 29019 shade BLOOD_PAL 4096 windowx1 windowy1 windowx2 windowy2
 break
endswitch
guniqhudid 0
ends

// Engineer SMG===============================================================================================================

defstate displaytemp_engy_smg

  set x 230
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 152 320

   	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
          sub x 52
          sub y 10
        rotatespritea x y 45000 0 29952 gunsmoke_disp 102 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 52
        add y 10
        guniqhudid 0
        }

switch weaponcount
case 0
case 1
          state wep_drawup
          state gunpushback_display
          set rot_flash 0
          ife HANDS_DRAW 2
          {
            sub x 60
            add y 30
            guniqhudid 10
            rotatesprite x y 40960 weap_disp_temp2 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
            add x 60
            sub y 30
          }
          ifg kickbackpic_2 12
                {
				state gun_smoke_display
                 displayrandvar gun_pushb_disp 5
                 add gun_pushb_disp 10
                  add x gun_pushb_disp
                  add y gun_pushb_disp
                  sub x 52
                  sub y 10
                  ife rot_flash 0 displayrandvar rot_flash 2048
                  guniqhudid 10
                  rotatespritea x y 26000 rot_flash 16115 0 1 4096 -255 windowx1 windowy1 windowx2 windowy2
                  add x 52
                  add y 10
                  ife HANDS_DRAW 2
                  {
                    sub x 60
                    add y 30
                    guniqhudid 11
                    rotatesprite x y 40960 0 C_ARM_1 0 102 4096 windowx1 windowy1 windowx2 windowy2
                    add x 60
                    sub y 30
                  }
                  guniqhudid 12
                  rotatesprite x y 40960 0 21999 0 0 4096 windowx1 windowy1 windowx2 windowy2
                }
            else
            {
          guniqhudid 11
          rotatesprite x y 40960 weap_disp_temp2 21998 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            }
  break
case 2
case 3
         displayrandvar gun_pushb_disp 5
         add gun_pushb_disp 2
          add x gun_pushb_disp
          add y gun_pushb_disp
		  state gun_smoke_display
          sub x 52
          sub y 10
          ife rot_flash 0 displayrandvar rot_flash 2048
          guniqhudid 10
          rotatespritea x y 20000 rot_flash 16115 0 1 4096 -255 windowx1 windowy1 windowx2 windowy2
          add x 52
          add y 10
          ife HANDS_DRAW 2
          {
            sub x 60
            add y 30
            guniqhudid 11
            rotatesprite x y 40960 0 C_ARM_1 0 102 4096 windowx1 windowy1 windowx2 windowy2
            add x 60
            sub y 30
          }
          guniqhudid 12
          rotatesprite x y 40960 0 21999 0 0 4096 windowx1 windowy1 windowx2 windowy2
  break
case 4
case 5
  guniqhudid 10
  rotatesprite x y 40960 0 21998 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
case 7
case 8
case 40
  guniqhudid 10
  rotatesprite x y 40960 8 21998 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
case 10
case 11
case 38
case 39
  guniqhudid 10
  rotatesprite x y 40960 16 21998 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
case 13
case 14
case 36
case 37
  guniqhudid 10
  rotatesprite x y 40960 24 22000 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 15
case 16
case 17
case 34
case 35
  guniqhudid 10
  rotatesprite x y 40960 32 22000 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 18
case 19
case 20
case 32
case 33
  guniqhudid 10
  rotatesprite x y 40960 48 22000 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 21
case 22
case 23
case 30
case 31
  guniqhudid 10
  rotatesprite x y 40960 64 22001 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 24
case 25
case 26
case 27
case 28
case 29
add y 5
  guniqhudid 10
  rotatesprite x y 40960 68 22001 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// =====================================================================================================================================================
// UDP 45
// =====================================================================================================================================================

defstate displaytemp_UDP45

  set x 220
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 233
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
guniqhudid 0
	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 48
        sub y 40
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 48
        add y 40
        guniqhudid 0
        }
    switch weaponcount
    case 0
    case 1
    case 4
      set weap_disp_temp2 player[].weapon_pos
      mulvar weap_disp_temp2 -20
      set rot_flash 0
      ifand gun_firemode 16384
          {
          set x 160
          set weap_disp_temp2 wepsway_x
          divvar weap_disp_temp2 2
          sub x weap_disp_temp2
          set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
          divvar weap_disp_temp4 2 // divide it by 2
          add x weap_disp_temp4 // add it to x
          sub x 5 // offset it by 5
          set y 140
          set weap_disp_temp3 wepsway_y
          divvar weap_disp_temp3 2
          sub y weap_disp_temp3
          state gunpushback_sight_display
          sub y 40
          guniqhudid 11
          rotatespritea x y QUARTERSIZE 0 11046 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // red dot
          set x 160
          sub x wepsway_x
          add x weapon_xoffset // add weaponxsway to position
          sub x 10 // offset it by 10
          set y 142
          sub y wepsway_y
          guniqhudid 12
          rotatesprite x y weap_disp_temp8 0 12121 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // red dot sight
        ifl player_shade_diff -5
            {
            set weap_disp_temp3 player_shade_diff
            mulvar weap_disp_temp3 2
            sub y 37
            guniqhudid 13
            rotatespritea x y 10192 0 2587 player_shade_diff wall_pal 33 weap_disp_temp3 windowx1 windowy1 windowx2 windowy2 // Glass in holosight
            }
          }
      else
          {
          state gunpushback_display
          state wep_drawup
          guniqhudid 10
          rotatesprite x y 45152 weap_disp_temp2 29152 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
          sub x 70
          add y 25
           guniqhudid 11
          rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4104 windowx1 windowy1 windowx2 windowy2
          }
      break
    case 2
    case 3
      ifand gun_firemode 16384
          {
          guniqhudid 0
            displayrandvar rot_flash 2048
              sub x 77
              sub y 5
              guniqhudid 10
              rotatespritea x y 24000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
              add x 77
              add y 5
          set x 160
          set weap_disp_temp2 wepsway_x
          divvar weap_disp_temp2 2
          sub x weap_disp_temp2
          set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
          divvar weap_disp_temp4 2 // divide it by 2
          add x weap_disp_temp4 // add it to x
          sub x 5 // offset it by 5
          set y 140
          set weap_disp_temp3 wepsway_y
          divvar weap_disp_temp3 2
          sub y weap_disp_temp3
          set gun_pushb_disp 10
          state gunpushback_sight_display
          sub y 40
          guniqhudid 12
          rotatespritea x y 16384 0 2484 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // red dot
          set x 160
          sub x wepsway_x
          add x weapon_xoffset // add weaponxsway to position
          sub x 10 // offset it by 10
          set y 142
          sub y wepsway_y
          guniqhudid 13
          rotatesprite x y weap_disp_temp8 0 12121 0 108 4096 windowx1 windowy1 windowx2 windowy2 // red dot sight
          }
    else
            {
			state gun_smoke_display
         displayrandvar gun_pushb_disp 5
		 add gun_pushb_disp 3
          add x gun_pushb_disp
          add y gun_pushb_disp
        ife rot_flash 0 displayrandvar rot_flash 2048
          sub x 48
          sub y 40
          ife AMMO_TYPES[3] 2 set weap_disp_temp2 1 else ife AMMO_TYPES[3] 32768 set weap_disp_temp2 106 else set weap_disp_temp2 0
          guniqhudid 10
          rotatespritea x y 18000 rot_flash 16115 0 weap_disp_temp2 8 -255 windowx1 windowy1 windowx2 windowy2
          add x 48
          add y 40
          guniqhudid 11
          rotatesprite x y 45152 0 29153 0 wep_pal 4104 windowx1 windowy1 windowx2 windowy2
          sub x 70
          add y 25
           guniqhudid 12
          rotatesprite x y 32768 0 C_ARM_2 0 107 4104 windowx1 windowy1 windowx2 windowy2
          }
      break
    case 5
    case 41
    case 42
    case 43
    case 44
      add x 20
      guniqhudid 10
      rotatesprite x y 49152 0 29152 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 6
    case 7
    case 39
    case 40
    add x 22
      guniqhudid 10
      rotatesprite x y 49152 16 29152 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 8
    case 9
    case 37
    case 38
    add x 24
    guniqhudid 10
      rotatesprite x y 49152 32 29152 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 10
    case 11
    case 35
    case 36
    add x 26
    guniqhudid 10
      rotatesprite x y 49152 48 29154 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 33
    case 34
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 48 29154 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 14
    case 15
    case 31
    case 32
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 64 29154 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 16
    add x 15
      add y 10
      guniqhudid 10
      rotatesprite x y 49152 64 29155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 17
    add x 15
      add y 10
      guniqhudid 10
      rotatesprite x y 49152 64 29155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    add x 15
      guniqhudid 10
      rotatesprite x y 49152 64 29155 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 29
    add x 15
      sub y 10
      guniqhudid 10
      rotatesprite x y 49152 64 29156 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 30
    add x 15
      sub y 10
      guniqhudid 10
      rotatesprite x y 49152 64 29156 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
ends

// P90===============================================================================================================

defstate displaytemp_p90

  set x 230
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 225
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 148 320

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 52
        sub y 10
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 52
        add y 10
        guniqhudid 0
        }

switch weaponcount
case 0
case 1
case 3
      ifand gun_firemode 16384
          {
          set x 160
          set weap_disp_temp2 wepsway_x
          divvar weap_disp_temp2 2
          sub x weap_disp_temp2
          set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
          divvar weap_disp_temp4 2 // divide it by 2
          add x weap_disp_temp4 // add it to x
          sub x 5 // offset it by 5
          set y 140
          set weap_disp_temp3 wepsway_y
          divvar weap_disp_temp3 2
          sub y weap_disp_temp3
          state gunpushback_sight_display
          sub y 40
          guniqhudid 11
          rotatespritea x y QUARTERSIZE 0 11046 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // red dot
          set x 160
          sub x wepsway_x
          add x weapon_xoffset // add weaponxsway to position
          sub x 10 // offset it by 10
          set y 142
          sub y wepsway_y
          guniqhudid 12
          rotatesprite x y weap_disp_temp8 0 12121 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // red dot sight
        ifl player_shade_diff -5
            {
            set weap_disp_temp3 player_shade_diff
            mulvar weap_disp_temp3 2
            sub y 37
            guniqhudid 13
            rotatespritea x y 10192 0 2587 player_shade_diff wall_pal 33 weap_disp_temp3 windowx1 windowy1 windowx2 windowy2 // Glass in holosight
            }
          }
         else
          {
          state wep_drawup
          state gunpushback_display
          set rot_flash 0
          ife HANDS_DRAW 2
          {
            sub x 60
            add y 30
            guniqhudid 10
            rotatesprite x y 40960 weap_disp_temp2 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
            add x 60
            sub y 30
          }
          guniqhudid 11
          rotatesprite x y 40960 weap_disp_temp2 7886 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          }
  break
case 2
      ifand gun_firemode 16384
          {
          guniqhudid 0
            displayrandvar rot_flash 2048
              sub x 77
              sub y 5
              guniqhudid 10
              rotatespritea x y 24000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
              add x 77
              add y 5
          set x 160
          set weap_disp_temp2 wepsway_x
          divvar weap_disp_temp2 2
          sub x weap_disp_temp2
          set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
          divvar weap_disp_temp4 2 // divide it by 2
          add x weap_disp_temp4 // add it to x
          sub x 5 // offset it by 5
          set y 140
          set weap_disp_temp3 wepsway_y
          divvar weap_disp_temp3 2
          sub y weap_disp_temp3
          set gun_pushb_disp 10
          state gunpushback_sight_display
          sub y 40
          guniqhudid 12
          rotatespritea x y 16384 0 2484 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // red dot
          set x 160
          sub x wepsway_x
          add x weapon_xoffset // add weaponxsway to position
          sub x 10 // offset it by 10
          set y 142
          sub y wepsway_y
          guniqhudid 13
          rotatesprite x y weap_disp_temp8 0 12121 0 108 4096 windowx1 windowy1 windowx2 windowy2 // red dot sight
          }
        else
          {
		  state gun_smoke_display
         displayrandvar gun_pushb_disp 5
         add gun_pushb_disp 2
          add x gun_pushb_disp
          add y gun_pushb_disp
          sub x 52
          sub y 10
          ife rot_flash 0 displayrandvar rot_flash 2048
          guniqhudid 10
          rotatespritea x y 20000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          add x 52
          add y 10
          ife HANDS_DRAW 2
          {
            sub x 60
            add y 30
            guniqhudid 11
            rotatesprite x y 40960 0 C_ARM_1 0 106 4096 windowx1 windowy1 windowx2 windowy2
            add x 60
            sub y 30
          }
          guniqhudid 12
          rotatesprite x y 40960 0 7887 0 0 4096 windowx1 windowy1 windowx2 windowy2
          }
  break
case 4
case 5
  guniqhudid 10
  rotatesprite x y 40960 0 7886 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
case 7
case 8
case 40
  guniqhudid 10
  rotatesprite x y 40960 8 7888 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
case 10
case 11
case 38
case 39
  guniqhudid 10
  rotatesprite x y 40960 16 7888 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 60
    add y 55
    guniqhudid 11
    rotatesprite x y 40960 16 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
case 13
case 14
case 36
case 37
  guniqhudid 10
  rotatesprite x y 40960 24 7889 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 65
    add y 70
    guniqhudid 11
    rotatesprite x y 40960 16 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 15
case 16
case 17
case 34
case 35
  guniqhudid 10
  rotatesprite x y 40960 32 7890 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 18
case 19
case 20
case 32
case 33
  guniqhudid 10
  rotatesprite x y 40960 48 7891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 21
case 22
case 23
case 30
case 31
  guniqhudid 10
  rotatesprite x y 40960 64 7891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 24
case 25
case 26
case 27
case 28
case 29
add y 5
  guniqhudid 10
  rotatesprite x y 40960 68 7891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_MP40

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 235
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  state gunpushback_display

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 50
        sub y 55
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 50
        add y 55
        guniqhudid 0
        }

switch weaponcount
case 0
case 1
case 4
  ife player[].weapon_pos 8 soundonce TOMMYG_COCK
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 45056 weap_disp_temp2 13218 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 66
  add y 15
  guniqhudid 11
  ife HANDS_DRAW 2 rotatesprite x y 32768 64 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 3
	state gun_smoke_display
	displayrandvar gun_pushb_disp 5
	add y gun_pushb_disp
	add x gun_pushb_disp
	 displayrandvar rot_flash 2048
	  sub y 55
	  sub x 50
	  guniqhudid 10
	  rotatespritea x y 18000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
	  add y 55
	  add x 50
	  guniqhudid 11
	  rotatesprite x y 45056 0 13218 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
	  guniqhudid 12
	  rotatesprite x y 45056 0 13219 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
	  sub x 66
	  add y 15
	  guniqhudid 13
	  ife HANDS_DRAW 2 rotatesprite x y 32768 64 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
	  break
case 5
case 6
case 7
case 32
case 33
case 34
   ife weaponcount 32 sub y 10
   guniqhudid 10
  rotatesprite x y 45056 0 13265 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 60
  add y 35
  guniqhudid 11
  rotatesprite x y 38960 0 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 8
case 9
case 10
case 29
case 30
case 31
  sub y 5
  ife weaponcount 8 add y 10
  guniqhudid 10
  rotatesprite x y 45056 0 13220 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatesprite x y 45056 0 13212 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 65
  add y 35
  guniqhudid 12
  rotatesprite x y 40960 0 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 28
  guniqhudid 10
  rotatesprite x y 45056 0 13220 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatesprite x y 45056 0 13213 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 80
  add y 65
  guniqhudid 12
  rotatesprite x y 40960 0 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
case 27
  guniqhudid 10
  rotatesprite x y 45056 0 13220 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 5
  add y 5
  guniqhudid 11
  rotatesprite x y 45056 0 13213 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 80
  add y 65
  guniqhudid 12
  rotatesprite x y 40960 0 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 13
case 26
  guniqhudid 10
  rotatesprite x y 45056 0 13220 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 10
  add y 10
  guniqhudid 11
  rotatesprite x y 45056 0 13213 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 80
  add y 65
  guniqhudid 12
  rotatesprite x y 40960 0 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 14
case 25
sub y 7
  guniqhudid 10
  rotatesprite x y 45056 0 13220 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 15
  add y 15
  guniqhudid 11
  rotatesprite x y 45056 0 13213 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 80
  add y 65
  guniqhudid 12
  rotatesprite x y 40960 0 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 15
case 16
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
sub y 9
  guniqhudid 10
  rotatesprite x y 45056 0 13220 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// GDF Plasma gun

defstate displaytemp_jplasma

  set x 235
  sub x wepsway_x
  add x weapon_xoffset
  divvar x 2
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc

  sub y gun_pos
  divvar y 2

  add y 90
  add x 130

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 54
        sub y 25
        rotatespritea x y 30000 0 29952 gunsmoke_disp 1 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 54
        add y 25
        guniqhudid 0
        }

switch weaponcount
case 0
  ife player[].weapon_pos 8 soundonce RIOTGUN_BOLT
  state wep_drawup
  state gunpushback_display

  ife HANDS_DRAW 2
    {
    sub x 96
    add y 15
    guniqhudid 10
    rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    add x 96
    sub y 15
    }
  guniqhudid 11
  rotatesprite x y 40960 weap_disp_temp2 12103 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 16
   guniqhudid 12
  rotatespritea x y 40960 weap_disp_temp2 12105 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 2
case 3
case 4
	state gun_smoke_display
    displayrandvar gun_pushb_disp 10
    state gunpushback_display
  sub x 54
  sub y 25
  displayrandvar rot_flash 2048
  guniqhudid 10
  rotatespritea x y NORMALSIZE rot_flash 6240 0 1 4097 -255 windowx1 windowy1 windowx2 windowy2
  add x 54
  add y 25

  ife HANDS_DRAW 2
      {
      sub x 96
      add y 15
      guniqhudid 11
      rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 0 103 4096 windowx1 windowy1 windowx2 windowy2
      add x 96
      sub y 15
      }
      guniqhudid 12
  rotatesprite x y 40960 0 12103 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 13
  rotatesprite x y 40960 0 12104 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 16
   guniqhudid 14
  rotatespritea x y 40960 0 12105 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// Phased Plasma rifle

defstate displaytemp_phased

  set x 250
  sub x wepsway_x
  add x weapon_xoffset
  divvar x 2
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc

  sub y gun_pos
  divvar y 2

  add y 90
  add x 130

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 74
        sub y 45
        rotatespritea x y 30000 0 29952 gunsmoke_disp 30 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 74
        add y 45
        guniqhudid 0
        }

switch weaponcount
case 0
case 1
case 4
  ife player[].weapon_pos 8 soundonce RIOTGUN_BOLT
  state wep_drawup
  state gunpushback_display

  ife HANDS_DRAW 2
    {
    sub x 96
    add y 15
    guniqhudid 10
    rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    add x 96
    sub y 15
    }
  guniqhudid 11
  rotatesprite x y 40960 weap_disp_temp2 17243 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   ife opt_weapon_glow YES
    {
  getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 16
   guniqhudid 12
  rotatespritea x y 40960 weap_disp_temp2 17244 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    guniqhudid 13
  rotatespritea x y 40960 weap_disp_temp2 17245 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    }
  break
case 2
case 3
	state gun_smoke_display
    displayrandvar gun_pushb_disp 10
    state gunpushback_display
  sub x 74
  sub y 45
  guniqhudid 10
  rotatespritea x y NORMALSIZE 0 6240 0 30 4097 -255 windowx1 windowy1 windowx2 windowy2
  add x 74
  add y 45

  ife HANDS_DRAW 2
      {
      sub x 96
      add y 15
      guniqhudid 11
      rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 0 105 4096 windowx1 windowy1 windowx2 windowy2
      add x 96
      sub y 15
      }
      guniqhudid 12
  rotatesprite x y 40960 0 17243 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 13
  rotatesprite x y 40960 0 17246 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     ife opt_weapon_glow YES
    {
  getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 16
   guniqhudid 14
  rotatespritea x y 40960 0 17244 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  guniqhudid 15
  rotatespritea x y 40960 0 17245 weap_disp_temp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    }
  break
endswitch
guniqhudid 0
ends

// M4 + M203

defstate displaytemp_m16

  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 257
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  state gunpushback_display

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 65
        sub y 60
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 65
        add y 60
        guniqhudid 0
        }

ifand gun_firemode 32768 // Using the M16's GL?
switch gl_countd
case 0
case 43
case 42
case 41
 state wep_drawup
    sub x 45
    add y 50
    guniqhudid 10
    rotatesprite x y 40960 weap_disp_temp2 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    add x 45
    sub y 50
    guniqhudid 11
 rotatesprite x y 45152 weap_disp_temp2 12123 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 9
case 10
case 11
case 12
case 13
guniqhudid 10
 rotatesprite x y 45152 32 12109 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 guniqhudid 11
 rotatesprite x y 45152 32 12110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 155
    guniqhudid 12
    rotatesprite x y 40960 -64 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 14
case 15
case 16
guniqhudid 10
 rotatesprite x y 45152 0 12109 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 guniqhudid 11
 rotatesprite x y 45152 0 12110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
sub x 90
add y 5
guniqhudid 12
ife CHAR 0 rotatesprite x y 40960 1024 C_UNIQUE_3 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
else
rotatesprite x y 40960 1024 C_HAND_2 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
 break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
case 27
case 28
case 29
guniqhudid 10
 rotatesprite x y 45152 64 12109 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        set weap_disp_temp7 gl_countd
        mulvar weap_disp_temp7 2
        sub weap_disp_temp7 20
        add y weap_disp_temp7
        sub x 105
        state fortymm_case_disp
 break
case 30
case 31
case 32
    guniqhudid 10
    rotatesprite x y 45152 0 12109 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 155
    add y 5
    guniqhudid 11
    rotatesprite x y 40960 -64 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 33
case 34
case 35
case 36
case 5
case 6
case 7
case 8
    guniqhudid 10
    rotatesprite x y 45152 32 12108 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 145
    add y 5
    guniqhudid 11
    rotatesprite x y 40960 -48 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 37
case 38
case 39
case 40
case 1
case 2
case 3
case 4
    guniqhudid 10
    rotatesprite x y 45152 0 12125 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 95
    add y 10
    guniqhudid 11
    rotatesprite x y 36864 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 44
case 45
case 46
case 47
case 48
		state gun_smoke_display
        set weap_disp_temp6 x
        sub weap_disp_temp6 58
        set weap_disp_temp7 y
        sub weap_disp_temp7 52
        displayrandvar rot_flash 2048
        guniqhudid 10
        rotatespritea weap_disp_temp6 weap_disp_temp7 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        sub x 45
        add y 50
        guniqhudid 11
        rotatesprite x y 40960 weap_disp_temp2 C_ARM_1 0 106 4096 windowx1 windowy1 windowx2 windowy2
        add x 45
        sub y 50
        guniqhudid 12
        rotatesprite x y 45152 0 12123 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        guniqhudid 13
        rotatesprite x y 45152 0 12124 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
endswitch
else // using M16's mainfiring mode
    {
    switch weaponcount
    case 0
    case 1
    case 3
    case 4
        ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
        state wep_drawup
        guniqhudid 10
        rotatesprite x y 45152 weap_disp_temp2 12123 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 86
      add y 15
      guniqhudid 11
      rotatesprite x y 36864 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 2
	state gun_smoke_display
    displayrandvar gun_pushb_disp 5
	add gun_pushb_disp 4
      add x gun_pushb_disp
      add y gun_pushb_disp
      sub x 65
      sub y 60
      state random_AR_flash
      guniqhudid 10
      rotatespritea x y 20000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 65
      add y 60
      guniqhudid 11
      rotatesprite x y 45152 0 12123 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      rotatesprite x y 45152 0 12124 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 86
      add y 15
      guniqhudid 13
      rotatesprite x y 36864 weap_disp_temp2 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 5
    case 6
    case 7
    case 8
    case 9
    case 10
    case 11
    case 36
    case 37
    case 38
    case 39
    case 40
    case 41
    case 42
      guniqhudid 10
      rotatesprite x y 40960 0 12125 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 14
    case 15
    case 16
    case 17
    case 30
    case 31
    case 32
    case 33
    case 34
    case 35
      sub y 15
      ife kickbackpic 30 sub y 5
      guniqhudid 10
      rotatesprite x y 40960 0 12127 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 40960 0 12126 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 80
      add y 50
      guniqhudid 12
      rotatesprite x y 40960 96 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    case 29
      sub y 15
      ife kickbackpic 18 add y 5
      guniqhudid 10
      rotatesprite x y 40960 0 12127 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    // PRESS BOLT CATCH RELOAD
    case 43
    case 61
      guniqhudid 10
      rotatesprite x y 40960 0 12125 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 44
    case 60
      guniqhudid 10
      rotatesprite x y 40960 16 12125 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 45
    case 59
      guniqhudid 10
      rotatesprite x y 40960 32 12125 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 46
    case 58
      guniqhudid 10
      rotatesprite x y 40960 32 12125 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 50
      add y 20
      break
    case 47
    case 57
      guniqhudid 10
      rotatesprite x y 40960 32 12125 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 55
      add y 20
      break
    case 48
    case 56
      add y 2
      guniqhudid 10
      rotatesprite x y 40960 48 12125 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 49
    case 55
      add y 4
      guniqhudid 10
      rotatesprite x y 40960 64 12125 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 50
    case 54
      add y 6
      guniqhudid 10
      rotatesprite x y 40960 76 12125 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 51
    case 53
      add y 8
      guniqhudid 10
      rotatesprite x y 40960 96 12127 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 40960 96 12126 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 80
      add y 55
      guniqhudid 12
      rotatesprite x y 40960 128 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 52
      add y 10
      guniqhudid 10
      rotatesprite x y 40960 104 12127 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 40960 104 12126 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 80
      add y 55
      guniqhudid 12
      rotatesprite x y 40960 130 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
    }
guniqhudid 0
ends

defstate displaytemp_nailgun

  set x 215
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  state gunpushback_display

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 53
        sub y 27
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 53
        add y 27
        guniqhudid 0
        }

switch weaponcount
case 0
case 2
case 4
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 6482 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 72
    add y 15
    guniqhudid 11
    rotatesprite x y 32768 64 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 3
  state gun_smoke_display
  displayrandvar gun_pushb_disp 10
  sub x 53
  sub y 27
  guniqhudid 10
  displayrandvar rot_flash 2048
  ife ARTIFACTS_LOADOUT[CHAR] 7 // make muzzleflash blue if they have the book of nails
    {
    set artifact_used 60
    rotatespritea x y 20000 rot_flash 16114 0 1 4096 -255 windowx1 windowy1 windowx2 windowy2
    }
  else rotatespritea x y 20000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 53
  add y 27
  guniqhudid 11
  rotatesprite x y 40960 0 6483 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 72
      add y 15
      guniqhudid 12
      rotatesprite x y 32768 64 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
      add x 72
      sub y 15
  break
endswitch
guniqhudid 0
ends



defstate displaytemp_dartgun

  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  ifg gl_countd 28
  {
  displayrandvar rot_flash 2048
    sub x 27
  sub y 50
  guniqhudid 15
  rotatespritea x y 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    add x 27
  add y 50
  }


switch weaponcount
case 0
case 4
case 5
case 6
case 7
case 8
case 9
  ife player[].weapon_pos 8 soundonce ROTATEBARREL
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 14500 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 95
  add y 40
  guniqhudid 11
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
add y 3
add x 3
  guniqhudid 10
  rotatesprite x y 40960 0 14501 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 95
  add y 40
  guniqhudid 11
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
add y 5
add x 5
  guniqhudid 10
  rotatesprite x y 40960 0 14501 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 95
  add y 40
  guniqhudid 11
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
add y 3
add x 3
  guniqhudid 10
  rotatesprite x y 40960 0 14501 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 95
  add y 40
  guniqhudid 11
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
case 11
case 12
case 13
case 29
case 30
    guniqhudid 10
    rotatesprite x y 40960 0 14502 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 85
    add y 30
    guniqhudid 11
    rotatesprite x y 36768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 14
case 15
case 16
case 17
case 26
case 27
case 28
    guniqhudid 10
    rotatesprite x y 40960 0 14503 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 35
    add y 60
    guniqhudid 11
    rotatesprite x y 36768 -64 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 18
case 19
case 24
case 25
    guniqhudid 10
    rotatesprite x y 40960 0 14504 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 20
case 21
    add y 5
    guniqhudid 10
    rotatesprite x y 40960 0 14505 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 22
case 23
    add y 10
    guniqhudid 10
    rotatesprite x y 40960 0 14505 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate M60AMMOAM
ife temp_wep_mag 2 set tilenum 6902 else
ife temp_wep_mag 3 set tilenum 6901 else
ife temp_wep_mag 4 set tilenum 6900 else
ife temp_wep_mag 5 set tilenum 6899 else
ife temp_wep_mag 6 set tilenum 6898 else
ife temp_wep_mag 7 set tilenum 6897 else
ife temp_wep_mag 8 set tilenum 6896 else
ife temp_wep_mag 9 set tilenum 6895
else set tilenum 6895
ends

defstate displaytemp_m60

  set x 220
  ifand gun_firemode 512 add x wepsway_x else
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 40
        sub y 40
        rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 40
        add y 40
        guniqhudid 0
        }

switch weaponcount
case 0
case 1
case 3
case 5
case 7
case 9
  ifand gun_firemode 512 set tilenum 14560
  else set tilenum 14565
  state gunpushback_display
  ife player[].weapon_pos 8
    {
    sound CHAIN_RATTLE
    }
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 55
      add y 20
      guniqhudid 11
      rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 55
      sub y 20
guniqhudid 12
 rotatesprite x y 40960 weap_disp_temp2 14497 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
//CHAIN
ifg temp_wep_mag 1
 {
  state M60AMMOAM
  sub x 30
  add y 47
  guniqhudid 13
  rotatesprite x y 40960 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 }
  break
case 2
case 4
case 6
case 8
  state gun_smoke_display
  sub x 40
  sub y 40
  set gun_pushb_disp 10
    state random_AR_flash
    guniqhudid 10
    rotatespritea x y 22000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    add x 40
    add y 40
//GUN
  ifand gun_firemode 512 set tilenum 14561
  else set tilenum 14566
  ife wep_pal 0 set wep_pal 21
  guniqhudid 11
  rotatesprite x y 40960 0 tilenum 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 55
      add y 20
      guniqhudid 12
      rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
      add x 55
      sub y 20
      guniqhudid 13
 rotatesprite x y 40960 weap_disp_temp2 14498 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
//CHAIN
ifg temp_wep_mag 1
{
  state M60AMMOAM
  sub x 30
  add y 47
  guniqhudid 14
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
}
  break
case 10
case 11
case 12
case 13
case 14
case 15
case 16
case 17
case 18
case 19
case 20
 ifand gun_firemode 512 set tilenum 14562
  else set tilenum 14567
  guniqhudid 10
rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 21
case 22
case 23
case 24
case 25
case 26
case 27
case 28
case 29
case 30
ifand gun_firemode 512 set tilenum 14563
  else set tilenum 14568
  guniqhudid 10
rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 31
case 32
case 33
case 34
case 35
case 36
case 37
case 38
case 39
case 40
case 41
case 42
case 43
case 44
case 45
case 46
case 47
case 48
case 49
case 50
ifand gun_firemode 512 set tilenum 14564
  else set tilenum 14591
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 51
case 52
case 53
case 54
case 55
case 56
case 57
case 58
case 59
case 60
ifand gun_firemode 512 set tilenum 14563
  else set tilenum 14568
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 61
case 62
case 63
case 64
case 65
case 66
case 67
case 68
case 69
case 70
ifand gun_firemode 512 set tilenum 14562
  else set tilenum 14567
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate displaytemp_gorohead

  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

switch weaponcount
case 1
case 2
case 3
case 4
add y 5
  getp[].random_club_frame weap_disp_temp
   sin weap_disp_temp weap_disp_temp
   divvar weap_disp_temp 1024 // 2^10
   add weap_disp_temp 16
   add x weap_disp_temp
  break
endswitch

  ife player[].weapon_pos 8 soundonce GUARDIAN_ALERT
  state wep_drawup

switch CHAR
case 0 ifand CHAR_APP 1 set tilenum 19882 else set tilenum 16038 break
case 1 set tilenum 16047 break
case 2 ifand CHAR_APP 4 set tilenum 32286 else set tilenum 15996 break
case 3 ifand CHAR_APP 16 set tilenum 16041 else set tilenum 16035 break
case 4 ifand CHAR_APP 2 set tilenum 23851 else set tilenum 15999 break
case 5 set tilenum 16066 break
case 6 set tilenum 16044 break
case 7 set tilenum 16050 break
case 9 set tilenum 16098 break
case 10 set tilenum 16032 break
case 11 set tilenum 15996 break
case 12 set tilenum 16002 break
case 13 set tilenum 16041 break
case 14 set tilenum 20859 break
case 17 set tilenum 27306 break
endswitch

ifand gun_firemode_two 4 add tilenum 1
else ifand gun_firemode_two 8 add tilenum 2
guniqhudid 10
rotatesprite x y 40960 weap_disp_temp2 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
guniqhudid 0
ends

// RIPPER HEART

defstate displaytemp_ripperheart

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  ifl y 166 set y 166

  set x 165
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  ife CHAR 0
    {
    ifand CHAR_APP 1 set tilenum 18003
    else set tilenum 18038
    }
  else ife CHAR 1 set tilenum 18046
  else ife CHAR 2
	{
	ifand CHAR_APP 4 set tilenum 32298
	else set tilenum 18054
	}
  else ife CHAR 3
	{
	ifand CHAR_APP 16 set tilenum 18062
	else set tilenum 18030
	}
  else ife CHAR 4
    {
    ifand CHAR_APP 2 set tilenum 23884
    else set tilenum 18050
    }
  else ife CHAR 5 set tilenum 17999
  else ife CHAR 6 set tilenum 18034
  else ife CHAR 7 set tilenum 18058
  else ife CHAR 10 set tilenum 18042
  else ife CHAR 11 set tilenum 18054
  else ife CHAR 12 set tilenum 13143
  else ife CHAR 13 set tilenum 18062
  else ife CHAR 14 set tilenum 20876
  else ife CHAR 17 set tilenum 27309
  else set tilenum 18050

switch weaponcount
case 0
case 7
    ife player[].weapon_pos 8 soundonce BLOOD_SPURT
    state wep_drawup
    guniqhudid 10
    rotatesprite x y 49152 weap_disp_temp2 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 1
case 2
case 5
case 6
    add tilenum 2
    guniqhudid 11
    rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
case 3
case 4
    add tilenum 3
    guniqhudid 12
    rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
endswitch
guniqhudid 0
ends

// ZILLA INC MISSILE LAUNCHER

defstate DUP_HEAD_COUNTER
set tilenum 15979
 add tilenum DUP_missile_ammo
 ifg tilenum 15980 set tilenum 15980
 ife tilenum 15979 set tilenum 15980
 ife opt_weapon_glow YES
    {
     state reverse_shade
     guniqhudid 18
     rotatespritea x y 45056 0 15990 weap_disp_temp5 8 4097 -255 windowx1 windowy1 windowx2 windowy2
     }
guniqhudid 19
rotatesprite x y 45056 0 tilenum 0 8 4096 windowx1 windowy1 windowx2 windowy2
ends

defstate zilla_counter_stuff
  ifand gun_firemode_two 2 // Nuke mode
  {
  guniqhudid 14
  rotatesprite x y 45056 0 15937 0 0 4096 windowx1 windowy1 windowx2 windowy2
  ife opt_weapon_glow YES
      {
      state reverse_shade
      guniqhudid 15
      rotatespritea x y 45056 0 15990 weap_disp_temp5 0 4097 -255 windowx1 windowy1 windowx2 windowy2
      }
  guniqhudid 16
  rotatesprite x y 45056 0 15936 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  }
  else
  ifand gun_firemode_two 1 // Heat mode
  {
  ifand gun_firemode_two 4 state DUP_HEAD_COUNTER
  else
  {
  ife opt_weapon_glow YES
    {
     state reverse_shade
     guniqhudid 14
     rotatespritea x y 45056 0 15990 weap_disp_temp5 0 4097 -255 windowx1 windowy1 windowx2 windowy2
     }
  guniqhudid 15
  rotatesprite x y 45056 0 15980 0 0 4096 windowx1 windowy1 windowx2 windowy2
  }
  ifg heat_seek_card 5
      {
      guniqhudid 20
      rotatesprite x y 45056 0 15941 0 0 4096 windowx1 windowy1 windowx2 windowy2
      ife heat_seek_card 10 set tilenum 15941
       ife heat_seek_card 9 set tilenum 15942
        ife heat_seek_card 8 set tilenum 15943
         ife heat_seek_card 7 set tilenum 15944
          ife heat_seek_card 6 set tilenum 15945
      guniqhudid 21
      rotatesprite x y 45056 0 tilenum 0 25 4096 windowx1 windowy1 windowx2 windowy2
      }
  else
      {
      ife heat_seek_card 5 set tilenum 15941
       ife heat_seek_card 4 set tilenum 15942
        ife heat_seek_card 3 set tilenum 15943
         ife heat_seek_card 2 set tilenum 15944
          ife heat_seek_card 1 set tilenum 15945
           ife heat_seek_card 0 set tilenum 15946
      guniqhudid 20
      rotatesprite x y 45056 0 tilenum 0 0 4096 windowx1 windowy1 windowx2 windowy2
      }
  ife opt_weapon_glow YES
        {
        state reverse_shade
        guniqhudid 21
        rotatespritea x y 45056 0 15947 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        }
  }
  else // Normal mode
  {
  ifand gun_firemode_two 4 state DUP_HEAD_COUNTER
  else
      {
      ife opt_weapon_glow YES
            {
            state reverse_shade
            guniqhudid 23
            rotatespritea x y 45056 0 15990 weap_disp_temp5 0 4097 -255 windowx1 windowy1 windowx2 windowy2
            }
      guniqhudid 24
      rotatesprite x y 45056 0 15980 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      }
  }
ends

defstate displaytemp_zmissilel

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  clamp y 166 320

  set x 215
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 15
        sub x 35
        sub y 35
        rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 35
        add y 35
        guniqhudid 0
        }

switch weaponcount
case 0
case 14
case 15
case 16
case 17
case 18
  ifg gun_pushb_disp 0
    {
    add x gun_pushb_disp
    add y gun_pushb_disp
    sub gun_pushb_disp 5
    }
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 45056 weap_disp_temp2 15933 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  state zilla_counter_stuff
  break
case 1
  guniqhudid 10
  rotatesprite x y 45056 0 15934 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  state zilla_counter_stuff
  break
case 2
case 3
case 4
        sub x 35
        sub y 35
        displayrandvar rot_flash 2048
        guniqhudid 10
        rotatespritea x y 45056 rot_flash 15955 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 35
        add y 35
  guniqhudid 11
  rotatesprite x y 45056 0 15935 0 107 4096 windowx1 windowy1 windowx2 windowy2
  state zilla_counter_stuff
  break
case 5
case 6
case 7
case 8
        sub x 35
        sub y 35
        displayrandvar rot_flash 2048
        guniqhudid 10
        rotatespritea x y 45056 rot_flash 15954 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 35
        add y 35
  guniqhudid 11
  rotatesprite x y 45056 0 15935 0 106 4096 windowx1 windowy1 windowx2 windowy2
  state zilla_counter_stuff
  break
case 9
    add x 3
    add y 3
        sub x 35
        sub y 35
        displayrandvar rot_flash 2048
        guniqhudid 10
        rotatespritea x y 45056 rot_flash 15963 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 35
        add y 35
   guniqhudid 11
  rotatesprite x y 45056 0 15935 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  state zilla_counter_stuff
  break
case 10
    add x 6
    add y 6
        sub x 35
        sub y 35
        displayrandvar rot_flash 2048
        guniqhudid 10
        rotatespritea x y 45056 rot_flash 15964 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 35
        add y 35
  guniqhudid 11
  rotatesprite x y 45056 0 15934 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  state zilla_counter_stuff
  break
case 11
	state gun_smoke_display
    add x 9
    add y 9
        sub x 35
        sub y 35
        displayrandvar rot_flash 2048
        guniqhudid 10
        rotatespritea x y 45056 rot_flash 15965 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 35
        add y 35
  guniqhudid 11
  rotatesprite x y 45056 0 15933 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  state zilla_counter_stuff
  break
case 12
    add x 12
    add y 12
  guniqhudid 10
  rotatesprite x y 45056 0 15933 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  state zilla_counter_stuff
  break
case 13
    add x 15
    add y 15
  set gun_pushb_disp 30
  guniqhudid 10
  rotatesprite x y 45056 0 15933 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  state zilla_counter_stuff
  break
endswitch
guniqhudid 0
ends

// Calico m960

defstate displaytemp_m960

  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 235
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  state gunpushback_display
  clamp gun_pushb_disp 0 10

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 55
        sub y 28
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 55
        add y 28
        guniqhudid 0
        }

switch weaponcount
case 0
case 1
case 4
case 5
case 6
case 38
case 39
  ife player[].weapon_pos 8 soundonce SELECT_WEAPON
  state wep_drawup
  set rot_flash 0
  ifn C_ARM_1 0
        {
        sub x 60
        add y 20
        guniqhudid 10
        rotatesprite x y 55000 weap_disp_temp2 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand graphics
        add x 60
        sub y 20
        }
    guniqhudid 11
  rotatesprite x y 40960 weap_disp_temp2 16060 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // gun
    sub x 10
    add y 35
    guniqhudid 12
    rotatesprite x y 40960 weap_disp_temp2 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand graphics
  break
case 2
case 3
displayrandvar gun_pushb_disp 4
add gun_pushb_disp 4
state gun_smoke_display
  sub y 28
  sub x 55
   ife rot_flash 0 displayrandvar rot_flash 2048
   guniqhudid 10
  rotatespritea x y 18000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // muzzleflash
  add y 28
  add x 55

  ifn C_ARM_1 0
        {
        sub x 60
        add y 20
        guniqhudid 11
        rotatesprite x y 55000 weap_disp_temp2 C_ARM_1 0 107 4096 windowx1 windowy1 windowx2 windowy2 // hand graphics
        add x 60
        sub y 20
        }
        guniqhudid 12
    rotatesprite x y 40960 0 16060 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // gun
    guniqhudid 13
  rotatesprite x y 40960 0 16061 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // gun
    sub x 10
    add y 35
    guniqhudid 14
    rotatesprite x y 40960 weap_disp_temp2 C_PISTOL_R 0 67 4096 windowx1 windowy1 windowx2 windowy2 // hand graphics
  break
case 7
case 8
case 9
case 35
case 36
case 37
    sub y 15
    guniqhudid 10
  rotatesprite x y 40960 0 16062 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
case 11
case 12
case 32
case 33
case 34
    sub y 10
    guniqhudid 10
    rotatesprite x y 40960 0 16063 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 45
    add y 70
    guniqhudid 11
    rotatesprite x y 44960 -64 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 13
case 14
case 30
case 31
sub y 5
  guniqhudid 10
  rotatesprite x y 40960 8 16065 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatesprite x y 40960 8 16064 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 15
case 16
case 17
case 27
case 28
case 29
add y 5
  guniqhudid 10
  rotatesprite x y 40960 16 16065 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatesprite x y 40960 16 16064 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 18
case 19
case 25
case 26
add y 10
  guniqhudid 10
  rotatesprite x y 40960 32 16065 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 20
case 21
case 22
case 23
case 24
add y 15
  guniqhudid 10
  rotatesprite x y 40960 64 16065 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

defstate weapon_drawcode
ife RETURN 1 break
getu .drawweapon disp_temp
ifmultiplayer set disp_temp 1
ife disp_temp 1
{
    ife CHAR 12 // If it's JANE, get her player colour
        {
        ifn pal 1
         ifn pal 2
          ifn pal 4
           ifn pal 7
            ifn pal 8
             ifn pal 17
              ifn pal 19
            {
            getp[].palookup pal
            ife CHAR 12 ife pal 0 set pal 3
            }
        }

    ifg INVINC 0
        {
        set wep_pal 121
        set wep_pal 121
        set wep_pal 121
        set pal 121
        }



    ife currentweapon 0
    {
    ife temp_weap 1 state displaytemp_shrinker
    ife temp_weap 2 state displaytemp_barrett
    ife temp_weap 3 state displaytemp_MAC10
    ife temp_weap 4 state displaytemp_bloodstaff
    ife temp_weap 5 state displaytemp_lizmangun
    ife temp_weap 6 state displaytemp_pigcopgun
    ife temp_weap 7 state displaytemp_skullduster
    ife temp_weap 8 state displaytemp_fleshsquirter
    ife temp_weap 9 state displaytemp_stygianwarcannon
    ife temp_weap 10 state displaytemp_sawnoff
    ife temp_weap 11 state displaytemp_tommygun
    ife temp_weap 12 state displaytemp_riotgun
    ife temp_weap 13 state displaytemp_crossbow
    ife temp_weap 14 state displaytemp_miagun
    ife temp_weap 15 state displaytemp_lasergun
    ife temp_weap 16 state displaytemp_missilel
    ife temp_weap 17 state displaytemp_chainsaw
    ife temp_weap 18 state displaytemp_flamethrower
    ife temp_weap 19 state displaytemp_sword
    ife temp_weap 20 state displaytemp_mop
    ife temp_weap 21 state displaytemp_FNFAL
    ife temp_weap 22 state displaytemp_MP40
    ife temp_weap 23 state displaytemp_jplasma
    ife temp_weap 24 state displaytemp_lizmanfirelasergun
    ife temp_weap 25 state displaytemp_m16
    ife temp_weap 26 state displaytemp_AK114
    ife temp_weap 27 state displaytemp_riotgun_minigun
    ife temp_weap 28 state displaytemp_nailgun
    ife temp_weap 29 state displaytemp_riotgun_grenadel
    ife temp_weap 30 state displaytemp_dartgun
    ife temp_weap 31 state displaytemp_m60
    ife temp_weap 32 state displaytemp_zmissilel
    ife temp_weap 33 state displaytemp_gorohead
    ife temp_weap 34 state displaytemp_riotgun_minigun_mark2
    ife temp_weap 35 state displaytemp_m960
    ife temp_weap 36 state displaytemp_sword2
    ife temp_weap 37 state displaytemp_beamsabre
    ife temp_weap 38 state displaytemp_ripperheart
    ife temp_weap 39 state displaytemp_zchaingun
    ife temp_weap 40 state displaytemp_railgun
    ife temp_weap 41 state displaytemp_ar65
    ife temp_weap 42 state displaytemp_hell_nailer
    ife temp_weap 43 state displaytemp_shrinker2
    ife temp_weap 44 state displaytemp_jug_minigun
    ife temp_weap 45 state displaytemp_p90
    ife temp_weap 46 state displaytemp_ogre_staff
    ife temp_weap 47 state displaytemp_engy_smg
    ife temp_weap 48 state displaytemp_rot_xbow
    ife temp_weap 49 state displaytemp_axe
    ife temp_weap 50 state displaytemp_rw_crossbow
	ife temp_weap 51 state displaytemp_vorpal
    ife temp_weap 52 state displaytemp_UDP45
	ife temp_weap 55 state displaytemp_phased
	ife temp_weap 56 state displaytemp_mossberg
    }
    else ife currentweapon 1
    {
    ife CHAR 0
        {
        set RETURN 1
      ife SPECIALIST_EQUIPMENT[88] 2 state draw_beretta
        else ife SPECIALIST_EQUIPMENT[2] 2 state draw_fn57
        else ife SPECIALIST_EQUIPMENT[28] 2 state draw_OTs-33
        else ife SPECIALIST_EQUIPMENT[36] 2 state draw_gold_jericho
        else ife SPECIALIST_EQUIPMENT[44] 2 state draw_ppk
        else ife JAMES_1911 1 state draw1911
        else state drawglock
        }
    ife CHAR 1
        {
        set RETURN 1
        ife SPECIALIST_EQUIPMENT[82] 2 state draw_mp5k
        else ife SPECIALIST_EQUIPMENT[37] 2 state draw_gold_zrifle
        else state displayzaxrifle
        }
    ife CHAR 2
        {
        set RETURN 1
        ife SPECIALIST_EQUIPMENT[38] 2 state drawm_gold_knife
        else state drawmknife
        }
    ife CHAR 3
        {
        set RETURN 1
        ife SPECIALIST_EQUIPMENT[10] 2 state draw_pp2000
        else ife SPECIALIST_EQUIPMENT[32] 2 state draw_automag
        else ife SPECIALIST_EQUIPMENT[39] 2 state draw_skorpion
        else state drawtokarev
        }
    ife CHAR 4
        {
        set RETURN 1
        state drawspell1
        }
    ife CHAR 5
        {
        set RETURN 1
        ife SPECIALIST_EQUIPMENT[24] 2 state draw_r1858 else
        ife SPECIALIST_EQUIPMENT[41] 2 state draw_gold_revolvers else
        ife SPECIALIST_EQUIPMENT[29] 2 state draw_microuzi else
        state drawrevolvers
        }
    ife CHAR 6
        {
        set RETURN 12
		ife SPECIALIST_EQUIPMENT[97] 2 state draw_eviscerator else
        ife SPECIALIST_EQUIPMENT[42] 2 state drawg_gold_pistol else
        state drawgpistol
        }
    ife CHAR 7
        {
        set RETURN 1
        ife SPECIALIST_EQUIPMENT[4] 2 state draw_MDF_magnum
        else ife SPECIALIST_EQUIPMENT[43] 2 state draw_gold_rose
        else state drawmpistol
        }
    ife CHAR 9 { set RETURN 1 state drawpcpistol }
    ife CHAR 10 { set RETURN 1 state draw_deagle }
    ife CHAR 11 { set RETURN 1 state draw_morningstar }
    ife CHAR 12 { set RETURN 1 state draw_handlaser }
    ife CHAR 13
        {
        set RETURN 1
        ife SPECIALIST_EQUIPMENT[46] 2 state draw_gold_metalstorm_pistol
        else ife SPECIALIST_EQUIPMENT[60] 2 state draw_longside
        else ife SPECIALIST_EQUIPMENT[73] 2 state draw_tecsmg
        else state draw_auto9_pistol
        }
    ife CHAR 14 { set RETURN 1 state draw_hblaster }
    ife CHAR 15 { set RETURN 1 state draw_auto9_pistol }
    ife CHAR 17 { set RETURN 1 state draw_yo_sword }
    }
    else ife currentweapon 2
    {
    set RETURN 1
    ife CHAR 0
        {
        ife JAMES_JACKH 1
        state draw_jackhammer
        else ife SPECIALIST_EQUIPMENT[61] 2 state draw_gold_CAWS
        else ife SPECIALIST_EQUIPMENT[25] 2 state draw_auto5
        else ife SPECIALIST_EQUIPMENT[53] 2 state draw_ksg12
        else state draw_protecta
        }
    ife CHAR 1
        {
        ife SPECIALIST_EQUIPMENT[62] 2 state draw_z_goldshotgun
        else ife SPECIALIST_EQUIPMENT[5] 2 state draw_z_quadshot
        else state draw_z_shotgun
        }
    ife CHAR 2
        {
        ife SPECIALIST_EQUIPMENT[51] 2 state draw_guandao
        else ife SPECIALIST_EQUIPMENT[63] 2 state drawm_gold_sword
        else state drawmsword
        }
    ife CHAR 3
        {
        ife SPECIALIST_EQUIPMENT[13] 2 state draw_saiga12 else
        ife SPECIALIST_EQUIPMENT[65] 2 state draw_golden_triple else
        state draw870
        }
    ife CHAR 4
        {
        ife SPECIALIST_EQUIPMENT[31] 2 state draw_spell2_fire
        else ife SPECIALIST_EQUIPMENT[64] 2 state draw_spell2_gold
        else state drawspell2
        }
    ife CHAR 5
        {
        ife SPECIALIST_EQUIPMENT[83] 2 state draw_autom_shotgun
        else ife SPECIALIST_EQUIPMENT[3] 2 state draw_overunder
        else ife SPECIALIST_EQUIPMENT[66] 2 state draw_gold_handshotgun
		else ife SPECIALIST_EQUIPMENT[116] 2 state draw_alof
        else state draw_autoshotgun
        }
    ife CHAR 6
        {
        ife SPECIALIST_EQUIPMENT[20] 2 state draw_gplasmashotgun
        else ife SPECIALIST_EQUIPMENT[67] 2 state drawg_goldshotgun
        else state drawgshotgun
        }
    ife CHAR 7
        {
        ife SPECIALIST_EQUIPMENT[30] 2 state draw_m_assault_shotgun
        else ife SPECIALIST_EQUIPMENT[68] 2 state drawm_gold_shotgun
        else ife SPECIALIST_EQUIPMENT[85] 2 state draw_msc12
        else state drawmshotgun
        }
    ife CHAR 9 state displaytemp_sawnoff
    ife CHAR 10 state draw_aa12
    ife CHAR 11 state displaytemp_rw_crossbow
    ife CHAR 12
		{
		ife SPECIALIST_EQUIPMENT[122] 2 state draw_jackhammer
		else state draw_uts15
		}
    ife CHAR 13
        {
        ife SPECIALIST_EQUIPMENT[58] 2 state draw_mc_whiplash
        else ife SPECIALIST_EQUIPMENT[69] 2 state draw_mc_gold_shotgun
        else state draw_mc_shotgun
        }
    ife CHAR 14
		{
		ife SPECIALIST_EQUIPMENT[100] 2 state draw_spike_shotgun
		else state draw_sf_shotgun
		}
    ife CHAR 17
		{
		ife SPECIALIST_EQUIPMENT[103] 2 state draw_dragonblades
		else state draw_dp_12
		}
    }
    else ife currentweapon 3
    {
    set RETURN 1
    ife CHAR 0
        {
        ife SPECIALIST_EQUIPMENT[8] 2 state draw_mp5
        else ife SPECIALIST_EQUIPMENT[15] 2 state draw_pp19
        else ife SPECIALIST_EQUIPMENT[55] 2 state draw_ump
        else state draw_mp7
        }
    ife CHAR 1
        {
        ife SPECIALIST_EQUIPMENT[23] 2 state draw_rc_zsmg
        else ife SPECIALIST_EQUIPMENT[70] 2 state draw_zsgalil
        else state drawzsmg
        }
    ife CHAR 2
        {
        ife SPECIALIST_EQUIPMENT[26] 2 state draw_longaxe
        else state drawdaxe
        }
    ife CHAR 3
        {
        ife SPECIALIST_EQUIPMENT[7] 2 state drawm16a2
        else ife SPECIALIST_EQUIPMENT[14] 2 state draw_Pribor
        else state drawAKM
        }
    ife CHAR 4
        {
        ife SPECIALIST_EQUIPMENT[6] 2 state draw_bar
        else ife SPECIALIST_EQUIPMENT[16] 2 state draw_ppsh
        else ife SPECIALIST_EQUIPMENT[34] 2 state draw_sang_sr-2
        else ife SPECIALIST_EQUIPMENT[71] 2 state draw_F2000
        else ife SPECIALIST_EQUIPMENT[74] 2 state draw_ak47
        else ife SPECIALIST_EQUIPMENT[92] 2 state draw_kriss
        else state drawsuzi
        }
    ife CHAR 5
        {
        ife SPECIALIST_EQUIPMENT[9] 2 state draw_m41c
        else ife SPECIALIST_EQUIPMENT[27] 2 state draw_ak74
        else { ife RUSTY_BAYONET 1 state drawbar_bayonet else state drawbar }
        }
    ife CHAR 6
        {
        ife SPECIALIST_EQUIPMENT[12] 2 state draw_ap_gsmg
        else ife SPECIALIST_EQUIPMENT[81] 2 state draw_gp_63
		 else ife SPECIALIST_EQUIPMENT[95] 2 { ife RUSTY_BAYONET 1 state draw_cutlass_bayonet else state draw_cutlass }
        else state drawgsmg
        }
    ife CHAR 7
        {
        ife SPECIALIST_EQUIPMENT[21] 2 state draw_msmg
        else ife SPECIALIST_EQUIPMENT[47] 2 state draw_mikko_battle_rifle
        else state drawmassrifle
        }
    ife CHAR 9 state displaytemp_tommygun
    ife CHAR 10 state drawm4a1
    ife CHAR 11 state drawsunstaff
    ife CHAR 12 state draw_famas
    ife CHAR 13
        {
        ife SPECIALIST_EQUIPMENT[48] 2 state draw_ar73
        else ifand MICKY_UPGRADE 4 state draw_mc_ar_gl
        else state draw_mc_ar
        }
    ife CHAR 14
        {
        ife SPECIALIST_EQUIPMENT[91] 2 state draw_SF_TAR
        else state draw_SF_AR
        }
    ife CHAR 17
        {
        ife SPECIALIST_EQUIPMENT[90] 2 state draw_flam4
        else state draw_auto_crossbow
        }
    }
    else ife currentweapon 4
    {
    set RETURN 1
    ife CHAR 0
        {
        ife SPECIALIST_EQUIPMENT[77] 2 state draw_40MMlauncher else
        state drawjgrenadel
        }
    ife CHAR 1
        {
        ife SPECIALIST_EQUIPMENT[75] 2 state draw_z_plasma_rpg
		else ife SPECIALIST_EQUIPMENT[99] 2 state draw_z_elemental
        else state draw_z_rpg
        }
    ife CHAR 2
        {
        ife SPECIALIST_EQUIPMENT[56] 2 state COMPOUND_BOW else
        state MBOW
        }
    ife CHAR 3 state drawmissilel
    ife CHAR 4 state drawspell4
    ife CHAR 5 state drawtrimissile
    ife CHAR 6 state drawggrenadel
    ife CHAR 7 state drawfireballc
    ife CHAR 9 state draw_m79
    ife CHAR 10 state draw_xm25
	ife CHAR 11 state draw_ice_cannon
    ife CHAR 12 state draw_paw20
    ife CHAR 13 state draw_mc_rocket
    ife CHAR 14 state draw_sf_rocket
    ife CHAR 17 state draw_kagura_rocketl
    }
    else ife currentweapon 5 // GRENADE ========================================================================================================================
    {
    set RETURN 1
    ife CHAR 0 state displayjgrenade else
    ife CHAR 1 state DISP_zax_pike else
    ife CHAR 3 state displaygrenade else
    ife CHAR 5 state displaydynastick else
    ife CHAR 6 state displaygrenade else
    ife CHAR 7 state displaygrenade else
    ife CHAR 9 state displaydynastick else
    ife CHAR 10 state displaygrenade else
    ife CHAR 12 state displaygrenade else
    ife CHAR 17 state displaygrenade else
    state displaypipe
    }
    else ife currentweapon 6 // SHRINKER =====================================================================================================================
    {
    ifn CHAR 1 set RETURN 1
    ife CHAR 0
        {
        ife SPECIALIST_EQUIPMENT[49] 2 state draw_j_autocrossbow
		else ife SPECIALIST_EQUIPMENT[98] 2 state draw_darkmatter_xm8
        else state draw_xm8
        }
    ife CHAR 2
		{
		ife SPECIALIST_EQUIPMENT[105] 2 state draw_quietus
		else state drawmthundersword
		}
    ife CHAR 3 state drawrrifle
    ife CHAR 4 state drawspell5
    ife CHAR 5 state drawmine_dart
    ife CHAR 6 state drawg_railgun
    ife CHAR 7
        {
        ife SPECIALIST_EQUIPMENT[59] 2 state draw_awms
        else state drawgreenmgun
        }
    ife CHAR 9 state draw_sawblade
    ife CHAR 10 state displaytemp_shrinker
    ife CHAR 11 state draw_moonlight_sword
    ife CHAR 12 state draw_plas_railgun
    ife CHAR 13 state draw_mc_auto_pulsegun
    ife CHAR 14
		{
		ife SPECIALIST_EQUIPMENT[96] 2 state draw_arx_assault
		else state draw_sf_cannon
		}
    ife CHAR 17 state draw_CZN-M22
    }
    else ife currentweapon 7 // DEVISTATOR ===========================================================================================================
    {
    set RETURN 1
    ife CHAR 0
        {
        ife SPECIALIST_EQUIPMENT[45] 2 state drawLR300
        else ife SPECIALIST_EQUIPMENT[78] 2 state draw_G36
        else ife SPECIALIST_EQUIPMENT[84] 2 state draw_m4-15
        else state draw_steyr_aug
        }
    ife CHAR 1
        {
        ife SPECIALIST_EQUIPMENT[52] 2 state DISP_zaxfirestorm
        else state DISP_zaxdevi
        }
    ife CHAR 2
        {
        ife SPECIALIST_EQUIPMENT[50] 2 state draw_warcannon
		else ife SPECIALIST_EQUIPMENT[102] 2 state draw_thunderbuss
        else state drawblunderbuss
        }
    ife CHAR 3 state drawhighgl
    ife CHAR 4
        {
        ife SPECIALIST_EQUIPMENT[80] 2 state draw_manacle
        else ife SPECIALIST_EQUIPMENT[86] 2 state draw_seraph_shotg
        else state drawunmaker
        }
    ife CHAR 5 state drawpulserifle
    ife CHAR 6
        {
        ife SPECIALIST_EQUIPMENT[79] 2 state draw_geo_autoshotgun
        else state drawmeltarifle
        }
    ife CHAR 7 state drawredmgun
    ife CHAR 9 state draw_cult_rotarygun
    ife CHAR 10 state display_M99
    ife CHAR 11 state draw_hand_blunder
    ife CHAR 12  state draw_m14
    ife CHAR 13
        {
        ife SPECIALIST_EQUIPMENT[54] 2 state draw_mc_meson_cannon
        else state draw_mc_explosive_shotgun
        }
    ife CHAR 14 state draw_sf_lightning
    ife CHAR 17
		{
		ife SPECIALIST_EQUIPMENT[104] 2 state draw_dragon_kuwabara
        else state draw_psg1
		}
    }
    else ife currentweapon 8 // TRIPBOMB ===========================================================================================================
    {
    set RETURN 1
    getp[].ammo_amount 8 temp
    ifg temp 0
            {
            ife CHAR 0
				{
				ife SPECIALIST_EQUIPMENT[112] 2 state drawjames_rocketpunch else
				state drawjamesprox
				}
				else
            ife CHAR 2 state draw_merlijn_trap else
            ife CHAR 4 state drawheartleech else
            ife CHAR 5 state drawrustytrap else
            ife CHAR 6 state displaydisctripbomb else
			ife CHAR 7 ife SPECIALIST_EQUIPMENT[114] 2 state draw_golden_mikko else
            ife CHAR 11 state draw_merlijn_trap else
            ife CHAR 13
				{
				ife SPECIALIST_EQUIPMENT[113] 2 state drawmicky_icebeam else
				state draw_mc_icebomb
				}
				else
			ife CHAR 14 ife SPECIALIST_EQUIPMENT[115] 2 state draw_tron_disc else													
            ife CHAR 17 state display_talisman else
            state displaytripbomb
            }
    }
    else ife currentweapon 9 // FREEZER ===========================================================================================================
    {
    set RETURN 1
    ife CHAR 0
        {
        ife SPECIALIST_EQUIPMENT[22] 2 state draw_an94 else
        ife SPECIALIST_EQUIPMENT[72] 2 state draw_gilboa else
        state drawm16shotgun
        }
    ife CHAR 1
        {
        ife SPECIALIST_EQUIPMENT[93] 2 state draw_annihilator else
        state draw_petrify
        }
    ife CHAR 2 state drawdragonslayer
    ife CHAR 3
        {
        ife SPECIALIST_EQUIPMENT[11] 2 state drawRPKM else
        ife SPECIALIST_EQUIPMENT[35] 2 state drawPKM else
        state drawRPK
        }
    ife CHAR 4
        {
        ife SPECIALIST_EQUIPMENT[57] 2 state draw_nemesis_staff
        else state drawspell8
        }
    ife CHAR 5 state drawnailgun
    ife CHAR 6 state drawgshockr
    ife CHAR 7
        {
        ife SPECIALIST_EQUIPMENT[19] 2 state draw_mdf_plasma else
        ife SPECIALIST_EQUIPMENT[33] 2 state DISP_ms_nailgun else
        state drawmplasma
        }
    ife CHAR 9 state draw_teslagun
    ife CHAR 10 state draw_shellyfreeze
    ife CHAR 11 state draw_cutting_word
    ife CHAR 12 state draw_j_pbeam
    ife CHAR 13
        {
        ife SPECIALIST_EQUIPMENT[76] 2 state draw_mc_pbeam else
        state draw_mc_flamethrower
        }
    ife CHAR 14 state draw_sf_hmg
    ife CHAR 17 state draw_kagura_firework
    }
    else ife currentweapon 10 { set RETURN 1 state drawdetonator }
    else ife currentweapon 11 ifn CHAR 1 // Expander ============================================================================================
    {
    ife CHAR 0
        {
        set RETURN 1
		state draw_xm8
        }
    ife CHAR 2 { set RETURN 1 state drawmflamesword }
    ife CHAR 3 { set RETURN 1 state drawrrifle }
    ife CHAR 4 { set RETURN 1 state drawspell5 }
    ife CHAR 5 { set RETURN 1 state draw_in_mine_dart }
    ife CHAR 6 { set RETURN 1 state drawg_railgun }
    ife CHAR 7
        {
        set RETURN 1 ife SPECIALIST_EQUIPMENT[59] 2 state draw_awms_am
        else state drawgreenmgun
        }
    ife CHAR 9 set RETURN 1
    ife CHAR 10 { set RETURN 1 state displaytemp_expander }
    ife CHAR 11 set RETURN 1
    ife CHAR 12 set RETURN 1
    ife CHAR 13 { set RETURN 1 state draw_mc_auto_pulsegun }
    ife CHAR 14
		{ set RETURN 1
		ife SPECIALIST_EQUIPMENT[96] 2 state draw_arx_shotgun
		else state draw_sf_cannon
		}
    ife CHAR 17 { set RETURN 1 state draw_CZN-M22_HV }
    }

    ifg shield_up 0
        {
        ife shield_type 1 state draw_wood_shield
        else ife shield_type 2 state draw_engineer_shield
        else state drawriotshield
        }
    ife CHAR 2 ifg merl_shieldup 0 state drawshield
	ife CHAR 11 ifg merl_shieldup 0 state draw_maartn_shield

}
else ife temp 2 // If weapon Icons is set...
state weaponicons
else set RETURN 0
ends
