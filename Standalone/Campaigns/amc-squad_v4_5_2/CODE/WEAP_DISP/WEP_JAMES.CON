/*
-------------------------------------------------------------------------------
===============================================================================

         -ooo:             +oo-            `+oo.       ./+oooooooooo+/:
        /NMMMN+            NMMNo`         -dMMM/      .mMMNmmmmmmmmmMMNo
       /NMd:mMMo           NMMNMd:      `oNMNMM/      :MMM/.........mMMh
      oNMd. -mMMy`         NMN:mMNs`   -hMm/mMM/      :MMM:         ::-.
    `sMMh`   .dMMh`        NMN .sNMd:`oNMh. mMM/      :MMM:
   `yMMMdhhhhhmMMMd.       NMN   /mMNdMm+`  mMM/      :MMM:         ss+:
  `hMMdhhhhhhhhhmMMm-      NMN    .yMMh.    mMM/      :MMM/.........mMMh
 .dMMs`         .hMMm:     NMN      :/`     mMM/      .mMMNmmmmmmmmmMMNo
 :oo+            `+oo+     +o+              +oo.       ./++ooooooooo+/:

###############################################################################
+ The AMC Squad
+ CON code by James Stanfield, Cedric "Sangman" Haegeman, Dino Bollinger,
+              Mikko Sandt, Cedric "Zaxtor" Lutes and Dan "Danarama" Gaskill
-------------------------------------------------------------------------------
* See AMC_MAIN.CON for a full list of script authors.

Feel free to use any code in the game for your own uses; just make
sure to mention the authors and/or "The AMC Squad" in your credits.
--------------------------------------------------------------------------------
NOTES:
This file defines the display code for James' weapons.
--------------------------------------------------------------------------------
*/

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 0 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

//JAMES SUPER PUNCH (I SHALL ANSWER YOU WITH MY FISTS)===============================================================

defstate JSORAORAPUNCH
switch weaponcount
case 0
  break
case 1
  set x 250
  add x weapon_xoffset
  sub x looking_angSR1

  set y 254
  add y looking_arc
  sub y gun_pos
  set tilenum 5186
  guniqhudid 10
  ifand CHAR_APP 1 ifn TIMEZONE 2 rotatesprite x y 40960 0 19866 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // right hook
 break
case 3
case 5
  set x 250
  add x weapon_xoffset
  sub x looking_angSR1

  set y 255
  add y looking_arc
  sub y gun_pos
  set tilenum 5188
  guniqhudid 10
  ifand CHAR_APP 1 ifn TIMEZONE 2 rotatesprite x y 40960 0 19868 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // right hook
break
case 4
  set x 210
  add x weapon_xoffset
  sub x looking_angSR1

  set y 234
  add y looking_arc
  sub y gun_pos
  set tilenum 5187
  guniqhudid 10
  ifand CHAR_APP 1 ifn TIMEZONE 2 rotatesprite x y 40960 0 19867 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 40960 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // right hook
break

case 6
  set x 100
  add x weapon_xoffset
  sub x looking_angSR1

  set y 254
  add y looking_arc
  sub y gun_pos
  set tilenum 5186
  guniqhudid 10
  rotatesprite x y 40960 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
 break
case 7
case 9
  set x 110
  add x weapon_xoffset
  sub x looking_angSR1

  set y 255
  add y looking_arc
  sub y gun_pos
  set tilenum 5188
  guniqhudid 10
  rotatesprite x y 40960 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
break
case 8
  set x 70
  add x weapon_xoffset
  sub x looking_angSR1

  set y 234
  add y looking_arc
  sub y gun_pos
  set tilenum 5187
  guniqhudid 10
  rotatesprite x y 40960 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
break
endswitch
guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 1 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


// JAMES' GLOCK AND 1911===============================================================================================================

defstate OTHERONE2
guniqhudid 0
ifand gun_firemode 64
{
  set x2 96
  sub x2 wepsway_x
  sub x2 weapon_xoffset
  add x2 looking_angSR1

  set y2 235
  sub y2 wepsway_y
  add y2 looking_arc
  sub y2 gun_pos

       ifl gunsmoke_disp 40 ife INVINC 0
         ifn weaponcount 2
            {
            guniqhudid 28
            add x2 20
            sub y2 40
            rotatespritea x2 y2 20000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
            sub x2 20
            add y2 40
            guniqhudid 0
            }


  ife kickbackpic 1
    {
    ife SPECIALIST_EQUIPMENT[44] 2 ifand gun_firemode 65536 nullop else
            {
             displayrandvar weap_disp_temp 5
			  add x2 weap_disp_temp
			  add y2 weap_disp_temp
              sub y2 40
              add x2 20
			  displayrandvar rot_flash 2048
             ifand GUN_AMMO_TYPES 2 { ifand AMMO_TYPES[cur_weap] 2 set weap_disp_temp7 1 else ifand AMMO_TYPES[cur_weap] 32768 set weap_disp_temp7 106 else set weap_disp_temp7 0 }
             else set weap_disp_temp7 0
              guniqhudid 15
              rotatespritea x2 y2 14000 rot_flash 16115 0 weap_disp_temp7 4096 -255 windowx1 windowy1 windowx2 windowy2
              add y2 40
              sub x2 20
          }
    }

   ifg gun_pushb_disp 0
    {
    sub x gun_pushb_disp
    add y gun_pushb_disp
    }

  state wep_drawup_rev
  guniqhudid 16
  rotatesprite x2 y2 32768 weap_disp_temp2 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
    add y2 25
  sub x2 5
  guniqhudid 17
  rotatesprite x2 y2 40960 weap_disp_temp2 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  guniqhudid 0
}
ends


defstate drawglock

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 235
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
guniqhudid 0
	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 20
        sub y 40
        rotatespritea x y 20000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 20
        add y 40
        guniqhudid 0
        }
switch weaponcount
case 0
case 4
case 5
case 6
case 67
case 68
case 69
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_PISTOL state sound_lower_weapon }
  getp[].ammo_amount 1 weap_disp_temp
  ifand JAMES_UPGRADE 8 // PISTOL UPGRADE 2
    {
  ife PISTOLMAG 0 set tilenum 5185 else ife weap_disp_temp 0 set tilenum 5185 else set tilenum 5183
    }
    else
    {
  ife PISTOLMAG 0 set tilenum 5122 else ife weap_disp_temp 0 set tilenum 5122 else set tilenum 5120
    }

 state wep_drawup
  state gunpushback_display
  guniqhudid 10
  rotatesprite x y 32768 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE2
  break
case 1
 state gun_smoke_display
 displayrandvar weap_disp_temp 2
  add x weap_disp_temp
  add y weap_disp_temp
  ife weaponcount 3 ifand gun_firemode 64 soundvar WEAPON1_FIRESOUND
    sub y 40
  sub x 20
 displayrandvar rot_flash 2048
  guniqhudid 12
  rotatespritea x y 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 40
  add x 20
  ifand JAMES_UPGRADE 8 set tilenum 5184 else set tilenum 5121
  guniqhudid 10
  rotatesprite x y 32768 0 tilenum 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE2
  break
case 2
case 3
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp
  ifand JAMES_UPGRADE 8 set tilenum 5185 else set tilenum 5122
  guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE2
  break
case 7
case 8
case 9
case 10
case 11
case 12
case 13
case 14
case 15
case 16
  ifand JAMES_UPGRADE 8
      {
      ife PISTOLMAG 0 set tilenum 5165 else
      set tilenum 5166
      }
  else
      {
      ife PISTOLMAG 0 set tilenum 5123 else
      set tilenum 5124
      }
  ife weaponcount 13 add y 5
  guniqhudid 10
  rotatesprite x y 32768 32 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
  add y 5
  add x 5
  ifand JAMES_UPGRADE 8
      {
      ife PISTOLMAG 0 set tilenum 5165 else
      set tilenum 5166
      }
  else
      {
      ife PISTOLMAG 0 set tilenum 5123 else
      set tilenum 5124
      }
      guniqhudid 10
  rotatesprite x y 32768 96 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 12
  guniqhudid 11
  rotatesprite x y 40960 160 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 27
case 28
case 29
  sub y 5
  sub x 5
  ifand JAMES_UPGRADE 8
      {
      ife PISTOLMAG 0 set tilenum 5165 else
      set tilenum 5166
      }
  else
      {
      ife PISTOLMAG 0 set tilenum 5123 else
      set tilenum 5124
      }
      guniqhudid 10
  rotatesprite x y 32768 128 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 23
  sub x 14
  guniqhudid 11
  rotatesprite x y 40960 192 C_PISTOL_R shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 30
case 31
case 32
case 33
case 34
case 35
  sub y 5
  sub x 5
  ifand JAMES_UPGRADE 8
      {
      ife PISTOLMAG 0 set tilenum 5185 else
      set tilenum 5183
      }
  else
      {
      ife PISTOLMAG 0 set tilenum 5122 else
      set tilenum 5120
      }
  ife weaponcount 34 sub y 5
  guniqhudid 10
  rotatesprite x y 32768 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 27
  sub x 3
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  ifand gun_firemode 64
  {
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos
  guniqhudid 20
   rotatesprite x y 32768 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 20
  sub x 5
  guniqhudid 21
  rotatesprite x y 40960 1024 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  }
  break
case 36
case 37
case 38
case 39
case 40

  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 260
  add y looking_arc
  sub y gun_pos
  ifand JAMES_UPGRADE 8 set tilenum 5183 else set tilenum 5120
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

      ifand JAMES_UPGRADE 8
      {
      ife reload_type 2 set tilenum 5165 else
      set tilenum 5166
      }
  else
      {
      ife reload_type 2 set tilenum 5123 else
      set tilenum 5124
      }

  set y 260
  add y looking_arc
  sub y gun_pos
  guniqhudid 20
  rotatesprite x y 32768 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
}
case 41
case 42
case 43
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos
  ifand JAMES_UPGRADE 8 set tilenum 5183 else set tilenum 5120
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  set y 240
  add y looking_arc
  sub y gun_pos

      ifand JAMES_UPGRADE 8
      {
      ife reload_type 2 set tilenum 5165 else
      set tilenum 5166
      }
  else
      {
      ife reload_type 2 set tilenum 5123 else
      set tilenum 5124
      }
  ife weaponcount 45 sub y 5
  guniqhudid 20
  rotatesprite x y 32768 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  }
  break
case 44
case 45
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
      ifand JAMES_UPGRADE 8
      {
      ife reload_type 2 set tilenum 5165 else
      set tilenum 5166
      }
  else
      {
      ife reload_type 2 set tilenum 5123 else
      set tilenum 5124
      }
      guniqhudid 10
  rotatesprite x y 32768 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 10
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
case 46
case 47
case 48
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
      ifand JAMES_UPGRADE 8
      {
      ife reload_type 2 set tilenum 5165 else
      set tilenum 5166
      }
  else
      {
      ife reload_type 2 set tilenum 5123 else
      set tilenum 5124
      }
      guniqhudid 10
  rotatesprite x y 32768 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
case 49
case 50
case 51
case 52
case 53
case 54
case 55
case 56
case 57
case 58
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
      ifand JAMES_UPGRADE 8
      {
      ife reload_type 2 set tilenum 5165 else
      set tilenum 5166
      }
  else
      {
      ife reload_type 2 set tilenum 5123 else
      set tilenum 5124
      }
      guniqhudid 10
  rotatesprite x y 32768 -1152 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 23
  add x 17
  guniqhudid 11
  rotatesprite x y 40960 800 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
case 59
case 60
case 61
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  sub y 5
  add x 5
      ifand JAMES_UPGRADE 8
      {
      ife reload_type 2 set tilenum 5165 else
      set tilenum 5166
      }
  else
      {
      ife reload_type 2 set tilenum 5123 else
      set tilenum 5124
      }
      guniqhudid 10
  rotatesprite x y 32768 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
case 62
case 63
case 64
case 65
case 66
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos

  ifand JAMES_UPGRADE 8
      {
      ife reload_type 2 set tilenum 5185 else
      set tilenum 5183
      }
  else
      {
      ife reload_type 2 set tilenum 5122 else
      set tilenum 5120
      }
      guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
  ife weaponcount 65 sub y 5
  sub y 5
  add x 5
  guniqhudid 20
  rotatesprite x y 32768 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 21
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
 break
endswitch
guniqhudid 0
ends

// M1911 ======================================================================================================================

defstate OTHERONE_1911
guniqhudid 0
ifand gun_firemode 64
{
  set x2 96
  sub x2 wepsway_x
  sub x2 weapon_xoffset
  add x2 looking_angSR1

  set y2 245
  sub y2 wepsway_y
  add y2 looking_arc
  sub y2 gun_pos

         ifl gunsmoke_disp 40 ife INVINC 0
         ifn weaponcount 2
            {
            guniqhudid 28
          add x2 30
          sub y2 50
            rotatespritea x2 y2 25000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
          sub x2 30
          add y2 50
            guniqhudid 0
            }

  ife kickbackpic 2
    {
    displayrandvar weap_disp_temp 5
    add x2 weap_disp_temp
    add y2 weap_disp_temp
    sub y2 50
    add x2 30
    displayrandvar rot_flash 2048
    ifand GUN_AMMO_TYPES 2 ifand AMMO_TYPES[cur_weap] 2 set weap_disp_temp7 1 else
    ifand GUN_AMMO_TYPES 2 ifand AMMO_TYPES[cur_weap] 32768 set weap_disp_temp7 106 else
    set weap_disp_temp7 0
    rotatespritea x2 y2 14000 rot_flash 16115 0 weap_disp_temp7 4096 -255 windowx1 windowy1 windowx2 windowy2
    add y2 50
    sub x2 30
    }

   ifg gun_pushb_disp 0
    {
    sub x2 gun_pushb_disp
    add y2 gun_pushb_disp
    }

  state wep_drawup_rev
  guniqhudid 20
  rotatesprite x2 y2 40960 weap_disp_temp2 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
    add y2 20
  sub x2 5
  guniqhudid 21
  rotatesprite x2 y2 40960 weap_disp_temp2 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
}
ends

defstate draw1911

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 245
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 30
        sub y 50
        rotatespritea x y 25000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 30
        add y 50
        guniqhudid 0
        }
guniqhudid 0
switch weaponcount
case 0
case 1
case 4
case 5
case 6
case 67
case 68
case 69
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_PISTOL state sound_lower_weapon }
  getp[].ammo_amount 1 weap_disp_temp
  ife PISTOLMAG 0 set tilenum 10388 else ife weap_disp_temp 0 set tilenum 10388 else set tilenum 10386

 state wep_drawup
  state gunpushback_display
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE_1911
  break
case 2 // Firing frame ==========================================
 state gun_smoke_display
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp
  ife weaponcount 3 ifand gun_firemode 64 soundvar WEAPON1_FIRESOUND
            sub y 50
          sub x 30
         displayrandvar rot_flash 2048
         guniqhudid 10
            ifand GUN_AMMO_TYPES 2 ifand AMMO_TYPES[cur_weap] 2 set weap_disp_temp7 1 else
            ifand GUN_AMMO_TYPES 2 ifand AMMO_TYPES[cur_weap] 32768 set weap_disp_temp7 106 else
            set weap_disp_temp7 0
          rotatespritea x y 14000 rot_flash 16115 0 weap_disp_temp7 4096 -255 windowx1 windowy1 windowx2 windowy2
          add y 50
          add x 30
          set tilenum 10387
          guniqhudid 11
          rotatesprite x y 40960 0 tilenum 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          add y 25
          add x 5
          guniqhudid 12
          rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // HAND
        state OTHERONE_1911
          break
case 3 // RECOIL FRAME
  set tilenum 10388
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE_1911
  break
case 7
case 8
case 9
case 10
case 11
case 12
case 13
case 14
case 15
case 16
      ife PISTOLMAG 0 set tilenum 10357 else
      set tilenum 10358
  ife weaponcount 13 add y 5
  guniqhudid 10
  rotatesprite x y 40960 32 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
  add y 5
  add x 5
      ife PISTOLMAG 0 set tilenum 10357 else
      set tilenum 10358
      guniqhudid 10
  rotatesprite x y 40960 96 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 12
  guniqhudid 11
  rotatesprite x y 40960 160 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 27
case 28
case 29
  sub y 5
  sub x 5
      ife PISTOLMAG 0 set tilenum 10357 else
      set tilenum 10358
  guniqhudid 10
  rotatesprite x y 40960 128 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 23
  sub x 14
  guniqhudid 11
  rotatesprite x y 40960 192 C_PISTOL_R shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 30
case 31
case 32
case 33
case 34
case 35
  sub y 5
  sub x 5
      ife PISTOLMAG 0 set tilenum 10388 else
      set tilenum 10386

  ife weaponcount 34 sub y 5
  guniqhudid 10
  rotatesprite x y 49152 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 27
  sub x 3
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  ifand gun_firemode 64
      {
      set x 115
      sub x weapon_xoffset
      sub x looking_angSR1

      set y 280
      add y looking_arc
      sub y gun_pos
      guniqhudid 20
       rotatesprite x y 49152 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      add y 20
      sub x 5
      guniqhudid 21
      rotatesprite x y 40960 1024 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      }
  break
case 36
case 37
case 38
case 39
case 40

  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 260
  add y looking_arc
  sub y gun_pos
  set tilenum 10386
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 49152 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

      ife reload_type 2 set tilenum 10357 else
      set tilenum 10358

  set y 260
  add y looking_arc
  sub y gun_pos
  guniqhudid 20
  rotatesprite x y 40960 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
}
case 41
case 42
case 43
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos
  set tilenum 10386
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 49152 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  set y 240
  add y looking_arc
  sub y gun_pos
      ife reload_type 2 set tilenum 10357 else
      set tilenum 10358

  ife weaponcount 45 sub y 5
  guniqhudid 20
  rotatesprite x y 40960 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  }
  break
case 44
case 45
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
      ife reload_type 2 set tilenum 10357 else
      set tilenum 10358
  guniqhudid 10
  rotatesprite x y 40960 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 11
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
case 46
case 47
case 48
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
      ife reload_type 2 set tilenum 10357 else
      set tilenum 10358
  guniqhudid 10
  rotatesprite x y 40960 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
case 49
case 50
case 51
case 52
case 53
case 54
case 55
case 56
case 57
case 58
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
      ife reload_type 2 set tilenum 10357 else
      set tilenum 10358
  guniqhudid 10
  rotatesprite x y 40960 -1152 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 23
  add x 17
  guniqhudid 11
  rotatesprite x y 40960 800 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
case 59
case 60
case 61
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  sub y 5
  add x 5
  ife reload_type 2 set tilenum 10357 else
  set tilenum 10358
  guniqhudid 10
  rotatesprite x y 40960 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
case 62
case 63
case 64
case 65
case 66
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos

      ife reload_type 2 set tilenum 10388 else
      set tilenum 10386
      guniqhudid 10
  rotatesprite x y 49152 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
  ife weaponcount 65 sub y 5
  sub y 5
  add x 5
  guniqhudid 20
  rotatesprite x y 49152 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 21
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
 break
endswitch
guniqhudid 0
ends

// Beretta

defstate OTHERONE_BERETTA
guniqhudid 0
ifand gun_firemode 64
{
  set x2 96
  sub x2 wepsway_x
  sub x2 weapon_xoffset
  add x2 looking_angSR1

  set y2 245
  sub y2 wepsway_y
  add y2 looking_arc
  sub y2 gun_pos

    ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        guniqhudid 28
        add x2 30
        sub y2 50
        rotatespritea x2 y2 20000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        sub x2 30
        add y2 50
        guniqhudid 0
        }

  ife kickbackpic 2
    {
    displayrandvar weap_disp_temp 5
    add x2 weap_disp_temp
    add y2 weap_disp_temp
    sub y2 50
    add x2 30
    displayrandvar rot_flash 2048
    guniqhudid 22
    rotatespritea x2 y2 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    add y2 50
    sub x2 30
    }

   ifg gun_pushb_disp 0
    {
    sub x2 gun_pushb_disp
    add y2 gun_pushb_disp
    }

  state wep_drawup_rev
  guniqhudid 20
  rotatesprite x2 y2 32768 weap_disp_temp2 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
    add y2 20
  sub x2 5
  guniqhudid 21
  rotatesprite x2 y2 40960 weap_disp_temp2 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
}
ends

defstate draw_beretta

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 245
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 30
        sub y 50
        rotatespritea x y 25000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 30
        add y 50
        guniqhudid 0
        }
guniqhudid 0
switch weaponcount
case 0
case 1
case 4
case 5
case 6
case 67
case 68
case 69
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_PISTOL state sound_lower_weapon }
  getp[].ammo_amount 1 weap_disp_temp
  ife PISTOLMAG 0 set tilenum 14980 else ife weap_disp_temp 0 set tilenum 14980 else set tilenum 14978

 state wep_drawup
  state gunpushback_display
  guniqhudid 10
  rotatesprite x y 32768 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE_BERETTA
  break
case 2 // Firing frame ==========================================
 state gun_smoke_display
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp
  ife weaponcount 3 ifand gun_firemode 64 soundvar WEAPON1_FIRESOUND
            sub y 50
          sub x 30
         displayrandvar rot_flash 2048
         guniqhudid 10
          rotatespritea x y 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          add y 50
          add x 30
  set tilenum 14979
  guniqhudid 11
  rotatesprite x y 32768 0 tilenum 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 12
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE_BERETTA
  break
case 3 // RECOIL FRAME
  set tilenum 14980
  guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE_BERETTA
  break
case 7
case 8
case 9
case 10
case 11
case 12
case 13
case 14
case 15
case 16
      ife PISTOLMAG 0 set tilenum 14981 else
      set tilenum 14983
  ife weaponcount 13 add y 5
  guniqhudid 10
  rotatesprite x y 32768 32 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
  add y 5
  add x 5
      ife PISTOLMAG 0 set tilenum 14981 else
      set tilenum 14983
      guniqhudid 10
  rotatesprite x y 32768 96 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 12
  guniqhudid 11
  rotatesprite x y 40960 160 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 27
case 28
case 29
  sub y 5
  sub x 5
      ife PISTOLMAG 0 set tilenum 14982 else
      set tilenum 14984
  guniqhudid 10
  rotatesprite x y 32768 128 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 23
  sub x 14
  guniqhudid 11
  rotatesprite x y 40960 192 C_PISTOL_R shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 30
case 31
case 32
case 33
case 34
case 35
  sub y 5
  sub x 5
      ife PISTOLMAG 0 set tilenum 14980 else
      set tilenum 14978

  ife weaponcount 34 sub y 5
  guniqhudid 10
  rotatesprite x y 32768 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 27
  sub x 3
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  ifand gun_firemode 64
      {
      set x 115
      sub x weapon_xoffset
      sub x looking_angSR1

      set y 280
      add y looking_arc
      sub y gun_pos
      guniqhudid 20
       rotatesprite x y 32768 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      add y 20
      sub x 5
      guniqhudid 21
      rotatesprite x y 40960 1024 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      }
  break
case 36
case 37
case 38
case 39
case 40

  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 260
  add y looking_arc
  sub y gun_pos
  set tilenum 14978
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

      ife reload_type 2 set tilenum 14981 else
      set tilenum 14983

  set y 260
  add y looking_arc
  sub y gun_pos
  guniqhudid 20
  rotatesprite x y 32768 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
}
case 41
case 42
case 43
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos
  set tilenum 14978
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  set y 240
  add y looking_arc
  sub y gun_pos
      ife reload_type 2 set tilenum 14981 else
      set tilenum 14983

  ife weaponcount 45 sub y 5
  guniqhudid 20
  rotatesprite x y 32768 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  }
  break
case 44
case 45
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
      ife reload_type 2 set tilenum 14981 else
      set tilenum 14983
  guniqhudid 10
  rotatesprite x y 32768 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 11
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
case 46
case 47
case 48
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
      ife reload_type 2 set tilenum 14982 else
      set tilenum 14984
      guniqhudid 10
  rotatesprite x y 32768 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
case 49
case 50
case 51
case 52
case 53
case 54
case 55
case 56
case 57
case 58
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
      ife reload_type 2 set tilenum 14981 else
      set tilenum 14983
  guniqhudid 10
  rotatesprite x y 32768 -1152 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 23
  add x 17
  guniqhudid 11
  rotatesprite x y 40960 800 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
case 59
case 60
case 61
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  sub y 5
  add x 5
      ife reload_type 2 set tilenum 14981 else
      set tilenum 14983
    guniqhudid 10
  rotatesprite x y 32768 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
  break
case 62
case 63
case 64
case 65
case 66
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos

      ife reload_type 2 set tilenum 14980 else
      set tilenum 14978
      guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
  ife weaponcount 65 sub y 5
  sub y 5
  add x 5
  guniqhudid 20
  rotatesprite x y 32768 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 21
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4108 windowx1 windowy1 windowx2 windowy2
 break
endswitch
guniqhudid 0
ends

// FN57 =============================================================================================================

defstate OTHERONE_FN57
guniqhudid 0
ifand gun_firemode 64
{
  set x2 96
  sub x2 wepsway_x
  sub x2 weapon_xoffset
  add x2 looking_angSR1

  set y2 245
  sub y2 wepsway_y
  add y2 looking_arc
  sub y2 gun_pos

    ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        guniqhudid 28
        add x2 20
        sub y2 40
        rotatespritea x2 y2 25000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        sub x2 20
        add y2 40
        guniqhudid 0
        }

  ife kickbackpic 1
    {
    ife SPECIALIST_EQUIPMENT[44] 2 ifand gun_firemode 65536 nullop else
        {
        displayrandvar weap_disp_temp 5
        add x2 weap_disp_temp
        add y2 weap_disp_temp
        sub y2 40
        add x2 20
        displayrandvar rot_flash 2048
        ifand AMMO_TYPES[cur_weap] 2 ifand GUN_AMMO_TYPES 2 set weap_disp_temp7 17 else set weap_disp_temp7 0
        guniqhudid 23
        rotatespritea x2 y2 14000 rot_flash 16115 0 weap_disp_temp7 4096 -255 windowx1 windowy1 windowx2 windowy2
        add y2 40
        sub x2 20
        }
    }

   ifg gun_pushb_disp 0
    {
    sub x2 gun_pushb_disp
    add y2 gun_pushb_disp
    }

  state wep_drawup_rev
  guniqhudid 20
  rotatesprite x2 y2 32768 weap_disp_temp2 10320 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y2 20
  sub x2 5
  guniqhudid 21
  rotatesprite x2 y2 40960 weap_disp_temp2 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2 // HAND
  sub y2 20
  add x2 5
  guniqhudid 22
  rotatesprite x2 y2 32768 weap_disp_temp2 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
}
ends

defstate draw_fn57

guniqhudid 0
  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 245
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  state gunpushback_display
	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 20
        sub y 40
        rotatespritea x y 25000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 20
        add y 40
        guniqhudid 0
        }

    ifl kickbackpic 7
    ifand gun_firemode 2048
    {
    sub x 26
    sub y 20
    ifand SPECIALIST_CUSTOM[2] 1073741824 set weap_disp_temp3 1
    else ifand SPECIALIST_CUSTOM[2] 2147483648 set weap_disp_temp3 8
    else set weap_disp_temp3 2
    guniqhudid 16
    rotatespritea x y 27000 weap_disp_temp2 8623 0 weap_disp_temp3 4129 -255 windowx1 windowy1 windowx2 windowy2 // laser sight light
    add x 26
    add y 20
    }

switch weaponcount
case 0
case 4
case 5
case 6
case 67
case 68
case 69
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_PISTOL state sound_lower_weapon }
  getp[].ammo_amount 1 weap_disp_temp
  ife PISTOLMAG 0 set tilenum 10393 else ife weap_disp_temp 0 set tilenum 10393 else set tilenum 10391

 state wep_drawup
  guniqhudid 10
  rotatesprite x y 32768 weap_disp_temp2 10320 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 20
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 weap_disp_temp2 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  sub y 20
  sub x 5
  guniqhudid 12
  rotatesprite x y 32768 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
state OTHERONE_FN57
  break
case 1
 state gun_smoke_display
 displayrandvar weap_disp_temp 2
  add x weap_disp_temp
  add y weap_disp_temp
  ife weaponcount 3 ifand gun_firemode 64 soundvar WEAPON1_FIRESOUND
    sub y 40
  sub x 20
 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 40
  add x 20
  set tilenum 10392
  guniqhudid 11
  rotatesprite x y 32768 0 10320 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 20
  add x 5
  guniqhudid 12
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  sub y 20
  sub x 5
  guniqhudid 13
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
state OTHERONE_FN57
  break
case 2
case 3
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp
  set tilenum 10393
  guniqhudid 10
  rotatesprite x y 32768 0 10320 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 20
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  sub y 20
  sub x 5
  guniqhudid 12
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
state OTHERONE_FN57
  break
case 7
case 8
case 9
case 10
case 11
case 12
case 13
case 14
case 15
case 16
      ife PISTOLMAG 0 set tilenum 10395 else
      set tilenum 10396
  ife weaponcount 13 add y 5
  guniqhudid 10
  rotatesprite x y 32768 32 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
  add y 5
  add x 5
      ife PISTOLMAG 0 set tilenum 10395 else
      set tilenum 10396
      guniqhudid 10
  rotatesprite x y 32768 96 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 12
  guniqhudid 11
  rotatesprite x y 40960 160 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 27
case 28
case 29
  sub y 5
  sub x 5
      ife PISTOLMAG 0 set tilenum 10395 else
      set tilenum 10396
  guniqhudid 10
  rotatesprite x y 32768 128 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 23
  sub x 14
  guniqhudid 11
  rotatesprite x y 40960 192 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 30
case 31
case 32
case 33
case 34
case 35
  sub y 5
  sub x 5
      ife PISTOLMAG 0 set tilenum 10393 else
      set tilenum 10391

  ife weaponcount 34 sub y 5
  guniqhudid 10
  rotatesprite x y 32768 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 27
  sub x 3
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  ifand gun_firemode 64
      {
      set x 115
      sub x weapon_xoffset
      sub x looking_angSR1

      set y 280
      add y looking_arc
      sub y gun_pos
      guniqhudid 20
       rotatesprite x y 32768 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      add y 20
      sub x 5
      guniqhudid 21
      rotatesprite x y 40960 1024 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      }
  break
case 36
case 37
case 38
case 39
case 40

  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 260
  add y looking_arc
  sub y gun_pos
  set tilenum 10391
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

      ife reload_type 2 set tilenum 10395 else
      set tilenum 10396

  set y 260
  add y looking_arc
  sub y gun_pos
  guniqhudid 20
  rotatesprite x y 32768 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
}
case 41
case 42
case 43
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos
  set tilenum 10391
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  set y 240
  add y looking_arc
  sub y gun_pos
      ife reload_type 2 set tilenum 10395 else
      set tilenum 10396

  ife weaponcount 45 sub y 5
  guniqhudid 20
  rotatesprite x y 32768 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  }
  break
case 44
case 45
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
      ife reload_type 2 set tilenum 10395 else
      set tilenum 10396
    guniqhudid 10
  rotatesprite x y 32768 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 11
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 46
case 47
case 48
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
      ife reload_type 2 set tilenum 10395 else
      set tilenum 10396
      guniqhudid 10
  rotatesprite x y 32768 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 49
case 50
case 51
case 52
case 53
case 54
case 55
case 56
case 57
case 58
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
      ife reload_type 2 set tilenum 10395 else
      set tilenum 10396
  guniqhudid 10
  rotatesprite x y 32768 -1152 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 23
  add x 17
  guniqhudid 11
  rotatesprite x y 40960 800 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 59
case 60
case 61
      set x 115
      sub x weapon_xoffset
      sub x looking_angSR1

      sub y 5
      add x 5
          ife reload_type 2 set tilenum 10395 else
          set tilenum 10396
          guniqhudid 10
      rotatesprite x y 32768 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      add y 25
      add x 15
      guniqhudid 11
      rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 62
case 63
case 64
case 65
case 66
      set x 215
      add x weapon_xoffset
      sub x looking_angSR1

      set y 280
      add y looking_arc
      sub y gun_pos

          ife reload_type 2 set tilenum 10393 else
          set tilenum 10391
          guniqhudid 10
      rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add y 25
      add x 5
      guniqhudid 11
      rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
      set x 115
      sub x weapon_xoffset
      sub x looking_angSR1
      ife weaponcount 65 sub y 5
      sub y 5
      add x 5
      guniqhudid 12
      rotatesprite x y 32768 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      add y 27
      add x 10
      guniqhudid 13
      rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
     break
endswitch
guniqhudid 0
ends

// OTs-33 =========================================================================================================================================

defstate draw_OTs-33

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 235
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 20
        sub y 40
        rotatespritea x y 25000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 20
        add y 40
        guniqhudid 0
        }

switch weaponcount
case 0
case 4
case 5
case 6
case 67
case 68
case 69
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_PISTOL state sound_lower_weapon }
  getp[].ammo_amount 1 weap_disp_temp
  ife PISTOLMAG 0 set tilenum 13415 else ife weap_disp_temp 0 set tilenum 13415 else set tilenum 13413

 state wep_drawup
  state gunpushback_display
  guniqhudid 10
  rotatesprite x y 32768 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE2
  break
case 1
 state gun_smoke_display
 displayrandvar weap_disp_temp 2
  add x weap_disp_temp
  add y weap_disp_temp
  ife weaponcount 3 ifand gun_firemode 64 soundvar WEAPON1_FIRESOUND
    sub y 40
  sub x 20
 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 40
  add x 20
  set tilenum 13414
  guniqhudid 11
  rotatesprite x y 32768 0 tilenum 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 12
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE2
  break
case 2
case 3
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp
  set tilenum 13415
  guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE2
  break
case 7
case 8
case 9
case 10
case 11
case 12
case 13
case 14
case 15
case 16
      ife PISTOLMAG 0 set tilenum 13416 else
      set tilenum 13417
  ife weaponcount 13 add y 5
  guniqhudid 10
  rotatesprite x y 32768 32 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
  add y 5
  add x 5
      ife PISTOLMAG 0 set tilenum 13416 else
      set tilenum 13417
      guniqhudid 10
  rotatesprite x y 32768 96 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 12
  guniqhudid 11
  rotatesprite x y 40960 160 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 27
case 28
case 29
      sub y 5
      sub x 5
          ife PISTOLMAG 0 set tilenum 13416 else
          set tilenum 13417
      guniqhudid 10
      rotatesprite x y 32768 128 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add y 23
      sub x 14
      guniqhudid 11
      rotatesprite x y 40960 192 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
      break
case 30
case 31
case 32
case 33
case 34
case 35
  sub y 5
  sub x 5
      ife PISTOLMAG 0 set tilenum 13415 else
      set tilenum 13413

  ife weaponcount 34 sub y 5
  guniqhudid 10
  rotatesprite x y 32768 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 27
  sub x 3
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  ifand gun_firemode 64
      {
      set x 115
      sub x weapon_xoffset
      sub x looking_angSR1

      set y 280
      add y looking_arc
      sub y gun_pos
      guniqhudid 20
       rotatesprite x y 32768 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      add y 20
      sub x 5
      guniqhudid 21
      rotatesprite x y 40960 1024 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      }
  break
case 36
case 37
case 38
case 39
case 40

  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 260
  add y looking_arc
  sub y gun_pos
  set tilenum 13413
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

      ife reload_type 2 set tilenum 13416 else
      set tilenum 13417

  set y 260
  add y looking_arc
  sub y gun_pos
  guniqhudid 20
  rotatesprite x y 32768 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
}
case 41
case 42
case 43
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos
  set tilenum 13413
  ifand gun_firemode 64
      {
      guniqhudid 10
      rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add y 25
      add x 5
      guniqhudid 11
      rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

      set x 115
      sub x weapon_xoffset
      sub x looking_angSR1

      set y 240
      add y looking_arc
      sub y gun_pos
          ife reload_type 2 set tilenum 13416 else
          set tilenum 13417

      ife weaponcount 45 sub y 5
      guniqhudid 20
      rotatesprite x y 32768 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      add y 25
      add x 5
      guniqhudid 21
      rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      }
  break
case 44
case 45
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
      ife reload_type 2 set tilenum 13416 else
      set tilenum 13417
  guniqhudid 10
  rotatesprite x y 32768 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 11
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 46
case 47
case 48
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
      ife reload_type 2 set tilenum 13416 else
      set tilenum 13417
      guniqhudid 10
  rotatesprite x y 32768 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 49
case 50
case 51
case 52
case 53
case 54
case 55
case 56
case 57
case 58
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
      ife reload_type 2 set tilenum 13416 else
      set tilenum 13417
  guniqhudid 10
  rotatesprite x y 32768 -1152 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 23
  add x 17
  guniqhudid 11
  rotatesprite x y 40960 800 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 59
case 60
case 61
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  sub y 5
  add x 5
      ife reload_type 2 set tilenum 13416 else
      set tilenum 13417
      guniqhudid 10
  rotatesprite x y 32768 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 62
case 63
case 64
case 65
case 66
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos

      ife reload_type 2 set tilenum 13415 else
      set tilenum 13413
      guniqhudid 10
  rotatesprite x y 32768 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
  ife weaponcount 65 sub y 5
  sub y 5
  add x 5
  guniqhudid 20
  rotatesprite x y 32768 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 21
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
 break
endswitch
guniqhudid 0
ends

// GOLD JERICHO =========================================================================================================================

defstate OTHERONE_JERICHO
guniqhudid 0
ifand gun_firemode 64
{
  set x2 96
  sub x2 wepsway_x
  sub x2 weapon_xoffset
  add x2 looking_angSR1

  set y2 245
  sub y2 wepsway_y
  add y2 looking_arc
  sub y2 gun_pos

    ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        guniqhudid 28
        add x2 20
        sub y2 40
        rotatespritea x2 y2 25000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        sub x2 20
        add y2 40
        guniqhudid 0
        }

  ife kickbackpic 1
    {
    ife SPECIALIST_EQUIPMENT[44] 2 ifand gun_firemode 65536 nullop else
            {
             displayrandvar weap_disp_temp 5
          add x2 weap_disp_temp
          add y2 weap_disp_temp
              sub y2 40
              add x2 20
          displayrandvar rot_flash 2048
             ifand AMMO_TYPES[cur_weap] 2 ifand GUN_AMMO_TYPES 2 set weap_disp_temp7 17 else set weap_disp_temp7 0
             guniqhudid 22
              rotatespritea x2 y2 14000 rot_flash 16115 0 weap_disp_temp7 4096 -255 windowx1 windowy1 windowx2 windowy2
              add y2 40
              sub x2 20
          }
    }

   ifg gun_pushb_disp 0
    {
    sub x2 gun_pushb_disp
    add y2 gun_pushb_disp
    }

  state wep_drawup_rev
  guniqhudid 20
  rotatesprite x2 y2 40960 weap_disp_temp2 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
    add y2 25
  sub x2 5
  guniqhudid 21
  rotatesprite x2 y2 40960 weap_disp_temp2 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
}
guniqhudid 0
ends

defstate draw_gold_jericho
  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 245
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 20
        sub y 40
        rotatespritea x y 25000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 20
        add y 40
        guniqhudid 0
        }

switch weaponcount
case 0
case 4
case 5
case 6
case 67
case 68
case 69
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_PISTOL state sound_lower_weapon }
  getp[].ammo_amount 1 weap_disp_temp
  ife PISTOLMAG 0 set tilenum 14614 else ife weap_disp_temp 0 set tilenum 14614 else set tilenum 14612

 state wep_drawup
  state gunpushback_display
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE_JERICHO
  break
case 1
 state gun_smoke_display
 displayrandvar weap_disp_temp 2
  add x weap_disp_temp
  add y weap_disp_temp
  ife weaponcount 3 ifand gun_firemode 64 soundvar WEAPON1_FIRESOUND
    sub y 40
  sub x 20
 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 40
  add x 20
  set tilenum 14613
  guniqhudid 11
  rotatesprite x y 40960 0 tilenum 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 12
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE_JERICHO
  break
case 2
case 3
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp
  set tilenum 14614
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE_JERICHO
  break
case 7
case 8
case 9
case 10
case 11
case 12
case 13
case 14
case 15
case 16
      ife PISTOLMAG 0 set tilenum 14615 else
      set tilenum 14616
  ife weaponcount 13 add y 5
  guniqhudid 10
  rotatesprite x y 40960 32 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
  add y 5
  add x 5
      ife PISTOLMAG 0 set tilenum 14615 else
      set tilenum 14616
      guniqhudid 10
  rotatesprite x y 40960 96 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 12
  guniqhudid 11
  rotatesprite x y 40960 160 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 27
case 28
case 29
  sub y 5
  sub x 5
      ife PISTOLMAG 0 set tilenum 14615 else
      set tilenum 14616
  guniqhudid 10
  rotatesprite x y 40960 128 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 23
  sub x 14
  guniqhudid 11
  rotatesprite x y 40960 192 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 30
case 31
case 32
case 33
case 34
case 35
  sub y 5
  sub x 5
      ife PISTOLMAG 0 set tilenum 14614 else
      set tilenum 14612

  ife weaponcount 34 sub y 5
  guniqhudid 10
  rotatesprite x y 40960 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 27
  sub x 3
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  ifand gun_firemode 64
  {
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos
  guniqhudid 20
   rotatesprite x y 40960 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 20
  sub x 5
  guniqhudid 21
  rotatesprite x y 40960 1024 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  }
  break
case 36
case 37
case 38
case 39
case 40

  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 260
  add y looking_arc
  sub y gun_pos
  set tilenum 14612
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

      ife reload_type 2 set tilenum 14615 else
      set tilenum 14616

  set y 260
  add y looking_arc
  sub y gun_pos
  guniqhudid 20
  rotatesprite x y 40960 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
}
case 41
case 42
case 43
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos
  set tilenum 14612
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  set y 240
  add y looking_arc
  sub y gun_pos
      ife reload_type 2 set tilenum 14615 else
      set tilenum 14616

  ife weaponcount 45 sub y 5
  guniqhudid 20
  rotatesprite x y 40960 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  }
  break
case 44
case 45
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
      ife reload_type 2 set tilenum 14615 else
      set tilenum 14616
  guniqhudid 10
  rotatesprite x y 40960 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 11
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 46
case 47
case 48
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
      ife reload_type 2 set tilenum 14615 else
      set tilenum 14616
      guniqhudid 10
  rotatesprite x y 40960 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 49
case 50
case 51
case 52
case 53
case 54
case 55
case 56
case 57
case 58
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
      ife reload_type 2 set tilenum 14615 else
      set tilenum 14616
  guniqhudid 10
  rotatesprite x y 40960 -1152 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 23
  add x 17
  guniqhudid 11
  rotatesprite x y 40960 800 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 59
case 60
case 61
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  sub y 5
  add x 5
      ife reload_type 2 set tilenum 14615 else
      set tilenum 14616
      guniqhudid 10
  rotatesprite x y 40960 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 62
case 63
case 64
case 65
case 66
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos

      ife reload_type 2 set tilenum 14614 else
      set tilenum 14612
      guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
  ife weaponcount 65 sub y 5
  sub y 5
  add x 5
  guniqhudid 20
  rotatesprite x y 40960 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 21
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
 break
endswitch
guniqhudid 0
ends

// PPK =====================================================================================================================================================

defstate OTHERONE_PPK
guniqhudid 0
ifand gun_firemode 64
{
  set x2 96
  sub x2 wepsway_x
  sub x2 weapon_xoffset
  add x2 looking_angSR1

  set y2 245
  sub y2 wepsway_y
  add y2 looking_arc
  sub y2 gun_pos


   ifg gun_pushb_disp 0
    {
    sub x2 gun_pushb_disp
    add y2 gun_pushb_disp
    }

  state wep_drawup_rev
  guniqhudid 20
  rotatesprite x2 y2 40960 weap_disp_temp2 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
    add y2 25
  sub x2 5
  guniqhudid 21
  rotatesprite x2 y2 40960 1024 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
}
guniqhudid 0
ends

defstate draw_ppk
   set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 245
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
guniqhudid 0
switch weaponcount
case 0
case 4
case 5
case 6
case 67
case 68
case 69
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_PISTOL state sound_lower_weapon }
  getp[].ammo_amount 1 weap_disp_temp
  ife PISTOLMAG 0 set tilenum 15874 else ife weap_disp_temp 0 set tilenum 15874 else set tilenum 15872
 state wep_drawup
  state gunpushback_display
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE_PPK
  break
case 1
 displayrandvar weap_disp_temp 2
  add x weap_disp_temp
  add y weap_disp_temp
  ife weaponcount 3 ifand gun_firemode 64 soundvar WEAPON1_FIRESOUND
  set tilenum 15873
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE_PPK
  break
case 2
case 3
 displayrandvar gun_pushb_disp 5
  add x gun_pushb_disp
  add y gun_pushb_disp
  set tilenum 15874
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
state OTHERONE_PPK
  break
case 7
case 8
case 9
case 10
case 11
case 12
case 13
case 14
case 15
case 16

      ife PISTOLMAG 0 set tilenum 15875 else
      set tilenum 15876

  ife weaponcount 13 add y 5
  guniqhudid 10
  rotatesprite x y 40960 32 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 8
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
  add y 5
  add x 5

      ife PISTOLMAG 0 set tilenum 15875 else
      set tilenum 15876
  guniqhudid 10
  rotatesprite x y 40960 96 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 25
  sub x 12
  guniqhudid 11
  rotatesprite x y 40960 160 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 27
case 28
case 29
  sub y 5
  sub x 5

      ife PISTOLMAG 0 set tilenum 15875 else
      set tilenum 15876
  guniqhudid 10
  rotatesprite x y 40960 128 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 23
  sub x 14
  guniqhudid 11
  rotatesprite x y 40960 192 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  break
case 30
case 31
case 32
case 33
case 34
case 35
  sub y 5
  sub x 5
    ife PISTOLMAG 0 set tilenum 15874 else
     set tilenum 15872
  ife weaponcount 34 sub y 5
  guniqhudid 10
  rotatesprite x y 40960 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   add y 27
  sub x 3
  guniqhudid 11
  rotatesprite x y 40960 96 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  ifand gun_firemode 64
  {
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos
  guniqhudid 20
   rotatesprite x y 40960 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 20
  sub x 5
  guniqhudid 21
  rotatesprite x y 40960 1024 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  }
  break
case 36
case 37
case 38
case 39
case 40

  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 260
  add y looking_arc
  sub y gun_pos
  set tilenum 15872
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

    ife reload_type 2 set tilenum 15875 else
    set tilenum 15876

  set y 260
  add y looking_arc
  sub y gun_pos
  guniqhudid 20
  rotatesprite x y 40960 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
}
case 41
case 42
case 43
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos
  set tilenum 15872
  ifand gun_firemode 64
  {
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R 0 107 4096 windowx1 windowy1 windowx2 windowy2 // HAND

  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  set y 240
  add y looking_arc
  sub y gun_pos

    ife reload_type 2 set tilenum 15875 else
 set tilenum 15876

  ife weaponcount 45 sub y 5
  guniqhudid 20
  rotatesprite x y 40960 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 5
  guniqhudid 21
  rotatesprite x y 40960 960 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  }
  break
case 44
case 45
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

      ife reload_type 2 set tilenum 15875 else
      set tilenum 15876
  guniqhudid 10
  rotatesprite x y 40960 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 11
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 46
case 47
case 48
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5

      ife reload_type 2 set tilenum 15875 else
      set tilenum 15876
  guniqhudid 10
  rotatesprite x y 40960 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 49
case 50
case 51
case 52
case 53
case 54
case 55
case 56
case 57
case 58
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5

      ife reload_type 2 set tilenum 15875 else
      set tilenum 15876
  guniqhudid 10
  rotatesprite x y 40960 -1152 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 23
  add x 17
  guniqhudid 11
  rotatesprite x y 40960 800 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 59
case 60
case 61
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  sub y 5
  add x 5

      ife reload_type 2 set tilenum 15875 else
      set tilenum 15876
  guniqhudid 10
  rotatesprite x y 40960 -1120 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 25
  add x 15
  guniqhudid 11
  rotatesprite x y 40960 832 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 62
case 63
case 64
case 65
case 66
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos


      ife reload_type 2 set tilenum 15874 else
      set tilenum 15872
  guniqhudid 10
  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 25
  add x 5
  guniqhudid 11
  rotatesprite x y 40960 0 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // HAND
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
  ife weaponcount 65 sub y 5
  sub y 5
  add x 5
  guniqhudid 20
  rotatesprite x y 40960 1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  add y 27
  add x 10
  guniqhudid 21
  rotatesprite x y 40960 896 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
 break
endswitch
guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 2 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// PROTECTA===============================================================================================================

defstate draw_protecta

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 245
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

      ifl gunsmoke_disp 40 ife INVINC 0
         ifn weaponcount 2
            {
            add gunsmoke_disp 1
            guniqhudid 18
            sub x 40
            sub y 40
            rotatespritea x y 50000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
            add x 40
            add y 40
            guniqhudid 0
            }

      ifl gunsmoke_disp2 40 ife INVINC 0
         ifn weaponcount 2
            {
            add gunsmoke_disp2 1
            guniqhudid 18
            sub x 40
            sub y 40
            rotatespritea x y 50000 0 29952 gunsmoke_disp 1 4096 -255 windowx1 windowy1 windowx2 windowy2
            add x 40
            add y 40
            guniqhudid 0
            }

  clamp y 164 320
guniqhudid 0
ifg kickbackpic_2 0
switch kickbackpic_2
case 2
case 3
    state gun_smoke2_display
	state getfactornormalizedframerate
	mul gunsmoke_disp2 NORMALIZED_FACTOR
    set gun_pushb_disp 7
   displayrandvar rot_flash 2048
    sub x 40
  sub y 40
  guniqhudid 10
  rotatespritea x y 20000 rot_flash 16114 0 1 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 40
  add y 40

    sub x 45
    add y 5
    guniqhudid 11
    rotatesprite x y 45152 weap_disp_temp2 C_ARM_1 shade 103 4096 windowx1 windowy1 windowx2 windowy2 // hand graphics
    add x 45
    sub y 5
    guniqhudid 12
  rotatesprite x y 36864 0 5360 0 103 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 13
  rotatesprite x y 36864 0 5361 0 103 4096 windowx1 windowy1 windowx2 windowy2
  break
case 1
case 4
case 5
case 6
  add x 7
  add y 7
  set weap_disp_temp4 20
    sub x 45
    add y 5
    guniqhudid 10
    rotatesprite x y 45152 weap_disp_temp2 C_ARM_1 shade 60 4096 windowx1 windowy1 windowx2 windowy2 // hand graphics
    add x 45
    sub y 5
    guniqhudid 11
  rotatesprite x y 36864 20 5360 shade 60 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
else
switch weaponcount
case 0
case 1
case 36
  set weap_disp_temp2 player[].weapon_pos
  set rot_flash 0
  set rot_flash2 0
  ife weap_disp_temp2 8 soundonce WINCHUP
  ifg weap_disp_temp4 0
  {
  set weap_disp_temp4 weap_disp_temp2
  sub weap_disp_temp2 1
  }
  else
  state wep_drawup
state gunpushback_display
    sub x 45
    add y 5
    guniqhudid 10
    rotatesprite x y 45152 weap_disp_temp2 C_ARM_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand graphics
    add x 45
    sub y 5
    guniqhudid 11
  rotatesprite x y 36864 weap_disp_temp2 5360 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
  set gun_pushb_disp 7
  sub x 40
  sub y 40
  guniqhudid 10
  state random_shotg_flash
  rotatespritea x y 40152 rot_flash2 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 40
  add y 40

    sub x 45
    add y 5
    guniqhudid 11
    rotatesprite x y 45152 weap_disp_temp2 C_ARM_1 shade 107 4096 windowx1 windowy1 windowx2 windowy2 // hand graphics
    add x 45
    sub y 5
    guniqhudid 12
  rotatesprite x y 36864 0 5360 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 13
  rotatesprite x y 36864 0 5361 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
    state gun_smoke_display
    set gun_pushb_disp 7
    sub x 40
  sub y 40
  guniqhudid 10
  displayrandvar rot_flash 2048
  rotatespritea x y 20000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 40
  add y 40

    sub x 45
    add y 5
    guniqhudid 11
    rotatesprite x y 45152 weap_disp_temp2 C_ARM_1 shade 107 4096 windowx1 windowy1 windowx2 windowy2 // hand graphics
    add x 45
    sub y 5
    guniqhudid 12
  rotatesprite x y 36864 0 5360 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 13
  rotatesprite x y 36864 0 5361 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 4
case 5
case 6
  add x 7
  add y 7
  set weap_disp_temp4 20
    sub x 45
    add y 5
    guniqhudid 10
    rotatesprite x y 45152 weap_disp_temp2 C_ARM_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand graphics
    add x 45
    sub y 5
    guniqhudid 11
  rotatesprite x y 36864 20 5360 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
    case 13
    case 14
      add x 10
      sub y 20
      guniqhudid 10
      rotatesprite x y 40960 0 5348 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 15
    case 16
      add x 10
      sub y 20
      guniqhudid 10
      rotatesprite x y 40960 32 5348 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 17
    case 18
      add x 10
      sub y 18
      guniqhudid 10
     rotatesprite x y 40960 5 5348 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 19
    case 20
      add x 10
      sub y 18
      guniqhudid 10
      rotatesprite x y 40960 20 5348 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2

      sub x 60
      add y 15
      guniqhudid 11
      rotatesprite x y 49152 1024 7893 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      // ifand AMMO_TYPES[cur_weap] 1 ifg explosive_shells 0 rotatesprite x y NORMALSIZE 1024 7903 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      // ifand AMMO_TYPES[cur_weap] 4 ifg flechete_shells 0 rotatesprite x y NORMALSIZE 1024 7867 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      break
    case 21
    case 22
      add x 10
      sub y 15
      guniqhudid 10
      rotatesprite x y 40960 10 5348 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 20
      guniqhudid 11
      rotatesprite x y 40960 128 C_UNIQUE_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      // ifand JAMES_UPGRADE 1024 rotatesprite x y NORMALSIZE 10 18002 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 23
    case 24
      add x 10
      sub y 15
      guniqhudid 10
      rotatesprite x y 40960 20 5348 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 20
      guniqhudid 11
      rotatesprite x y 40960 108 C_UNIQUE_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      // ifand JAMES_UPGRADE 1024 rotatesprite x y NORMALSIZE 20 18002 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 25
    case 26
    case 27
    sub y 20
    guniqhudid 10
    rotatesprite x y 40960 40 5348 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    // ifand JAMES_UPGRADE 1024 rotatesprite x y NORMALSIZE 40 18000 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
    case 28
    case 29
    case 30
      sub y 10
      guniqhudid 10
      rotatesprite x y 40960 20 5348 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      // ifand JAMES_UPGRADE 1024 rotatesprite x y NORMALSIZE 20 18000 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
endswitch
guniqhudid 0
ends

// ==============================================================================================================
// JAMES JACKHAMMER
// ==============================================================================================================

defstate draw_jackhammer

  set x 248
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1


  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

        ifl gunsmoke_disp 40 ife INVINC 0
         ifn weaponcount 2
            {
            add gunsmoke_disp 1
            guniqhudid 18
            sub y 30
            sub x 62
            rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
            add y 30
            add x 62
            guniqhudid 0
            }
  state gunpushback_display
  clamp y 145 320

switch weaponcount
case 60
case 61
case 62
case 63
case 0
case 1
  state wep_drawup
  set rot_flash 0
  set rot_flash2 0
  guniqhudid 10
  rotatesprite x y 36864 weap_disp_temp2 12161 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 90
  add y 20
  guniqhudid 11
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
  sub y 30
  sub x 62
 guniqhudid 10
  state random_shotg_flash
  rotatespritea x y 40960 rot_flash2 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 30
  add x 62
  guniqhudid 11
  rotatesprite x y 36864 0 12161 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  rotatesprite x y 36864 0 12162 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 90
  add y 20
  guniqhudid 13
  rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
  state gun_smoke_display
  sub y 30
  sub x 62
 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 20000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 30
  add x 62
  guniqhudid 11
  rotatesprite x y 36864 0 12161 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 12
  rotatesprite x y 36864 0 12162 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 90
  add y 20
  guniqhudid 13
  rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 4
  displayrandvar gun_pushb_disp 10
  add gun_pushb_disp 5
  add y gun_pushb_disp
  add x gun_pushb_disp
  guniqhudid 10
  rotatesprite x y 36864 0 12161 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 90
  add y 20
  guniqhudid 11
  rotatesprite x y 32768 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
case 6
case 7
  guniqhudid 10
  rotatesprite x y 36864 24 12161 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 88
  add y 20
  guniqhudid 11
  rotatesprite x y 32768 24 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 8
case 9
case 10
case 11
case 12
  guniqhudid 10
  rotatesprite x y 36864 0 12159 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 76
  add y 26
  guniqhudid 11
  rotatesprite x y 32768 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 13
case 14
case 15
  guniqhudid 10
  rotatesprite x y 36864 0 12153 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 76
  add y 26
  guniqhudid 11
  rotatesprite x y 36864 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 16
case 17
case 18
case 19
case 20
case 21
  guniqhudid 10
  rotatesprite x y 36864 0 12153 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  set x2 x
  set y2 y
  sub x2 40
  set weap_disp_temp weaponcount
  mul weap_disp_temp 3
  sub x2 weap_disp_temp
  add y2 weap_disp_temp
  guniqhudid 11
  ife CHAR 12 set tilenum 15087 else set tilenum 5175
  rotatesprite x2 y2 40960 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 22
case 23
case 24
case 25
case 26
case 27
case 28
  guniqhudid 10
  rotatesprite x y 36864 24 12153 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 29
case 30
case 31
case 32
case 33
case 34
case 57
case 58
case 59
  guniqhudid 10
  rotatesprite x y 36864 -12 12153 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 35
case 36
case 37
case 38
case 39
case 40
case 41
case 42
case 53
case 54
case 55
case 56
  guniqhudid 10
  rotatesprite x y 36864 0 12153 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 43
case 44
case 45
case 46
case 47
case 48
case 49
case 50
case 51
case 52
  ife kickbackpic 43 sub y 15
  guniqhudid 10
  rotatesprite x y 36864 24 12153 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends


// KSG-12===============================================================================================================

defstate draw_ksg12

  set x 235
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

    ifl gunsmoke_disp 40 ife INVINC 0
         ifn weaponcount 2
            {
            add gunsmoke_disp 1
            guniqhudid 18
              sub x 57
              sub y 45
            rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
            add x 57
            add y 45
            guniqhudid 0
            }

ifl kickbackpic 18
state gunpushback_display

set pal_2 wep_pal

ifn wep_pal 1
ifn wep_pal 2
ifn wep_pal 4
ifn wep_pal 7
ifn wep_pal 8
ifn wep_pal 18
ifn wep_pal 26
ifn wep_pal 27
ifn wep_pal 28
ifn wep_pal 29
ifn wep_pal 30
ifn wep_pal 31
ifn wep_pal 32
ifn wep_pal 33
ifn wep_pal 34
ifn wep_pal 35
	{
	set cosm_col_id 53
	state cus_gun_colour
	set wep_pal cosm_col
	}

guniqhudid 0
switch weaponcount
case 0
case 1
  ife player[].weapon_pos 8 soundonce WINCHUP
  state wep_drawup
  set rot_flash 0
  set rot_flash2 0
      sub x 65
      add y 20
      guniqhudid 10
      rotatesprite x y 45152 weap_disp_temp2 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 65
      sub y 20
      guniqhudid 11
  rotatesprite x y 45152 weap_disp_temp2 16080 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
    state gun_smoke_display
  sub x 57
  sub y 45
  guniqhudid 10
  state random_shotg_flash
  rotatespritea x y 40960 rot_flash2 rot_flash 0 94 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 57
  add y 45
      sub x 65
      add y 20
      guniqhudid 11
      rotatesprite x y 45152 0 C_ARM_1 0 106 4096 windowx1 windowy1 windowx2 windowy2
      add x 65
      sub y 20
      guniqhudid 12
  rotatesprite x y 45152 0 16080 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 13
  rotatesprite x y 45152 0 16081 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
  sub x 57
  sub y 45
  	  addvar gun_pushb_disp 4
  ife rot_flash 0 displayrandvar rot_flash 2048
  guniqhudid 10
  rotatespritea x y 19000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 57
  add y 45
      sub x 65
      add y 20
      guniqhudid 11
      rotatesprite x y 45152 0 C_ARM_1 0 107 4096 windowx1 windowy1 windowx2 windowy2
      add x 65
      sub y 20
      guniqhudid 12
  rotatesprite x y 45152 0 16080 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 13
  rotatesprite x y 45152 0 16081 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 4
case 5
case 6
      set weap_disp_temp4 20
	  randvar gun_pushb_disp 15
	  addvar gun_pushb_disp 15
      sub x 65
      add y 20
      guniqhudid 10
      rotatesprite x y 45152 0 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 65
      sub y 20
      guniqhudid 11
      rotatesprite x y 45152 20 16080 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
    case 7
    case 8
    case 14
    case 15
          add x 5
          add y 3
      sub x 55
      add y 15
      guniqhudid 10
      rotatesprite x y 45152 0 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 55
      sub y 15
      guniqhudid 11
      rotatesprite x y 45152 0 16082 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 9
    case 13
          add x 8
          add y 5
      sub x 50
      add y 12
      guniqhudid 10
      rotatesprite x y 45152 0 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 50
      sub y 12
      guniqhudid 11
      rotatesprite x y 45152 0 16083 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 10
    case 12
          add x 10
          add y 7
      sub x 35
      add y 30
      guniqhudid 10
      rotatesprite x y 45152 0 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 35
      sub y 30
      guniqhudid 11
      rotatesprite x y 45152 0 16086 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 11
          add x 10
          add y 7
      sub x 35
      add y 30
      guniqhudid 10
      rotatesprite x y 45152 32 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 35
      sub y 30
      guniqhudid 11
      rotatesprite x y 45152 32 16086 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 16
    case 17
    case 18
          add x 5
          add y 3
      sub x 60
      add y 20
      guniqhudid 10
      rotatesprite x y 45152 5 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 60
      sub y 20
      guniqhudid 11
      rotatesprite x y 45152 5 16080 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 19
    case 20
    case 21
    case 22
      sub x 20
      sub y 18
      guniqhudid 10
      rotatesprite x y 40960 20 16084 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2

      add x 25
      add y 45
      sub x kickbackpic
      add y kickbackpic
      guniqhudid 11
      ifand CHAR_APP 1 rotatesprite x y 56638 0 C_HAND_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      else rotatesprite x y 56638 0 C_HAND_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      ifand gun_firemode_two 8
          {
          guniqhudid 12
          ifand AMMO_TYPES[15] 1 ifg explosive_shells 0 rotatesprite x y 56638 0 7903 shade pal_2 4096 windowx1 windowy1 windowx2 windowy2
          else ifand AMMO_TYPES[15] 4 ifg flechete_shells 0 rotatesprite x y 56638 0 7867 shade pal_2 4096 windowx1 windowy1 windowx2 windowy2
          else ifand AMMO_TYPES[15] 64 ifg magnum_shells 0 rotatesprite x y 56638 0 7868 shade pal_2 4096 windowx1 windowy1 windowx2 windowy2
          else ifand AMMO_TYPES[15] 1024 ifg dragon_shells 0 rotatesprite x y 56638 0 7866 shade pal_2 4096 windowx1 windowy1 windowx2 windowy2
          }
      else
          {
          guniqhudid 13
          ifand AMMO_TYPES[cur_weap] 1 ifg explosive_shells 0 rotatesprite x y 56638 0 7903 shade pal_2 4096 windowx1 windowy1 windowx2 windowy2
          else ifand AMMO_TYPES[cur_weap] 4 ifg flechete_shells 0 rotatesprite x y 56638 0 7867 shade pal_2 4096 windowx1 windowy1 windowx2 windowy2
          else ifand AMMO_TYPES[cur_weap] 64 ifg magnum_shells 0 rotatesprite x y 56638 0 7868 shade pal_2 4096 windowx1 windowy1 windowx2 windowy2
          else ifand AMMO_TYPES[cur_weap] 1024 ifg dragon_shells 0 rotatesprite x y 56638 0 7866 shade pal_2 4096 windowx1 windowy1 windowx2 windowy2
          }
      break
    case 23
    case 24
      sub x 23
      sub y 15
      guniqhudid 10
      rotatesprite x y 40960 20 16085 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 25
    case 26
    case 27
    sub x 20
    sub y 20
    guniqhudid 10
    rotatesprite x y 40960 40 16085 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
    case 28
    case 29
    case 30
      sub x 20
      sub y 10
      guniqhudid 10
      rotatesprite x y 40960 20 16084 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 31
    case 32
    case 33
      sub x 15
      sub y 8
      guniqhudid 10
      rotatesprite x y 40960 0 16084 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 34
    case 35
    case 36
      sub x 40
      guniqhudid 10
      rotatesprite x y 45152 0 16078 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
endswitch
guniqhudid 0
ends

// JAMES GOLD HK CAWS

defstate draw_gold_CAWS

 set x 220
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 220
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

        ifl gunsmoke_disp 40 ife INVINC 0
         ifn weaponcount 2
            {
            add gunsmoke_disp 1
            guniqhudid 18
            sub y 33
            sub x 47
            rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
            add x 47
            add y 33
            guniqhudid 0
            }

  clamp y 139 320

  state gunpushback_display

guniqhudid 0
switch weaponcount
case 0
case 1
case 4
case 5
case 6
  ife player[].weapon_pos 8 soundonce WINCHUP
  set rot_flash 0
  set rot_flash2 0
    ifand gun_firemode 16384 state default_gun_scope
    else
        {
      state wep_drawup
      state gunpushback_display
      guniqhudid 10
      rotatesprite x y 40960 weap_disp_temp2 19760 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 76
        add y 26
        guniqhudid 11
        rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2

      add x 25
      sub y 55
      state do_gold_sparkle
      }
  break
case 2
    ifand gun_firemode 16384
            {
              set x 160
              set disp_temp2 wepsway_x
              divvar disp_temp2 2
              sub x disp_temp2
              set y 100
              set disp_temp3 wepsway_y
              divvar disp_temp3 2
              sub y disp_temp3

            add y 40
            guniqhudid 10
			state random_shotg_flash
            rotatespritea x y 40000 rot_flash rot_flash2 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
            sub y 40

			state default_gun_scope
            }
        else
            {
            sub y 33
            sub x 47
            guniqhudid 10
			state random_shotg_flash
            rotatespritea x y 40960 rot_flash2 rot_flash 0 0 8 -255 windowx1 windowy1 windowx2 windowy2
            add x 47
            add y 33
            guniqhudid 11
            rotatesprite x y 40960 0 19761 0 0 4096 windowx1 windowy1 windowx2 windowy2
            sub x 76
            add y 26
            guniqhudid 12
            rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
            }
  break
case 3
    ifand gun_firemode 16384
            {
              set x 160
              set disp_temp2 wepsway_x
              divvar disp_temp2 2
              sub x disp_temp2
              set y 100
              set disp_temp3 wepsway_y
              divvar disp_temp3 2
              sub y disp_temp3

            ife rot_flash 0 displayrandvar rot_flash 2048
            add y 40
            guniqhudid 10
            rotatespritea x y 40000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
            sub y 40
			state default_gun_scope
            }
        else
            {
            state gun_smoke_display
            displayrandvar gun_pushb_disp 15
			clamp gun_pushb_disp 5 15
            ife rot_flash 0 displayrandvar rot_flash 2048
            sub y 33
            sub x 47
            guniqhudid 10
            rotatespritea x y 18000 rot_flash 16114 0 0 8 -255 windowx1 windowy1 windowx2 windowy2
            add x 47
            add y 33
            guniqhudid 11
            rotatesprite x y 40960 0 19761 0 0 4096 windowx1 windowy1 windowx2 windowy2
            sub x 76
            add y 26
            guniqhudid 12
            rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
            }
  break
case 39
case 38
case 37
  add y 15
  guniqhudid 10
  rotatesprite x y 40960 0 19760 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 76
    add y 26
    guniqhudid 11
    rotatesprite x y 32768 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
case 36
case 35
  add y 20
  guniqhudid 10
  rotatesprite x y 40960 0 19762 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
case 10
case 34
case 33
  add y 35
  ife weaponcount 33 sub y 10
  guniqhudid 10
  rotatesprite x y 40960 0 19762 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 15
case 16
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 28
case 29
case 30
case 31
case 32
  add y 25
  guniqhudid 10
  rotatesprite x y 40960 0 19764 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  rotatesprite x y 40960 0 19763 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 12
case 13
case 14
case 25
case 26
case 27
  add y 30
  ife weaponcount 13 add y 10
  guniqhudid 10
  rotatesprite x y 40960 0 19764 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// JAMES' AUTO-5===============================================================================================================

defstate draw_auto5

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 235
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

        ifl gunsmoke_disp 40 ife INVINC 0
         ifn weaponcount 2
            {
            add gunsmoke_disp 1
            guniqhudid 18
            ifand gun_firemode 16384 sub x 77 else
            sub x 55
            sub y 52
            rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
            ifand gun_firemode 16384 add x 77 else
            add x 55
            add y 52
            guniqhudid 0
            }

guniqhudid 0
switch weaponcount
case 0
case 1
case 36
  state gunpushback_display
  state wep_drawup
  set rot_flash 0
  set rot_flash2 0
    ifand gun_firemode 16384
        {
        sub x 125
        add y 5
        guniqhudid 10
        rotatesprite x y 40960 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 50
        sub y 10
        guniqhudid 11
        rotatesprite x y 32768 0 13377 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        }
    else
        {
        guniqhudid 10
        rotatesprite x y 40960 weap_disp_temp2 13379 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 66
        add y 16
        guniqhudid 11
        rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        }
  break
case 2
    ifand gun_firemode 16384
        {
        sub y 5
      sub x 77
      sub y 60
      guniqhudid 10
	  state random_shotg_flash
      rotatespritea x y 40960 rot_flash2 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 60
        sub x 50
        add y 10
        guniqhudid 11
        rotatesprite x y 40960 0 C_ARM_2 0 106 4096 windowx1 windowy1 windowx2 windowy2
        add x 50
        sub y 10
        guniqhudid 12
        rotatesprite x y 32768 0 13377 0 106 4096 windowx1 windowy1 windowx2 windowy2
        }
    else
        {
      sub x 53
      sub y 52
      guniqhudid 10
	  state random_shotg_flash
      rotatespritea x y 40960 rot_flash2 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 53
      add y 52
      guniqhudid 11
      rotatesprite x y 40960 0 13380 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 66
      add y 16
      guniqhudid 12
      rotatesprite x y 32768 24 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
        }
  break
case 3
    state gun_smoke_display
    set gun_pushb_disp 10
    ifand gun_firemode 16384
        {
        sub y 5
        displayrandvar rot_flash 2048
      sub x 77
      sub y 60
      guniqhudid 10
      rotatespritea x y 16000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 60
        sub x 50
        add y 10
        guniqhudid 11
        rotatesprite x y 40960 0 C_ARM_2 0 106 4096 windowx1 windowy1 windowx2 windowy2
        add x 50
        sub y 10
        guniqhudid 12
        rotatesprite x y 32768 0 13377 0 106 4096 windowx1 windowy1 windowx2 windowy2
        }
    else
        {
       displayrandvar rot_flash 2048
      sub x 53
      sub y 52
      guniqhudid 10
      rotatespritea x y 14000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 53
      add y 52
      guniqhudid 11
      rotatesprite x y 40960 0 13380 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 66
      add y 16
      guniqhudid 12
      rotatesprite x y 32768 24 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
        }
  break
case 4
case 5
case 6
  ifand gun_firemode 16384
    {
    set weap_disp_temp8 32768
   ifg gun_pushb_disp 0
        {
        set weap_disp_temp7 32 // base value
        mul weap_disp_temp7 gun_spread // weapon shake affected by gun spread too
        mul weap_disp_temp7 gun_pushb_disp // countdown
        add weap_disp_temp8 weap_disp_temp7 // add to zoom value
        sub gun_pushb_disp 2
        }
    sub y 5
    sub x 77

    sub x 50
    add y 10
    add weap_disp_temp8 8192
    guniqhudid 10
    rotatesprite x y weap_disp_temp8 0 C_ARM_2 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub weap_disp_temp8 8192
    add x 50
    sub y 10
    guniqhudid 11
    rotatesprite x y weap_disp_temp8 0 13377 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    }
  else
    {
      state gunpushback_display
      guniqhudid 10
    rotatesprite x y 40960 20 13379 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 66
    add y 16
    guniqhudid 11
    rotatesprite x y 32768 24 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
    }
  break
    case 13
    case 14
      add x 10
      sub y 20
      guniqhudid 10
      rotatesprite x y 40960 0 13379 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 15
    case 16
      add x 10
      sub y 20
      guniqhudid 10
      rotatesprite x y 40960 32 13379 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 17
    case 18
      add x 10
      sub y 18
      guniqhudid 10
      rotatesprite x y 40960 5 13382 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 60
      add y 40
      guniqhudid 11
      rotatesprite x y 40960 1024 7893 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      ifand AMMO_TYPES[cur_weap] 1 ifg explosive_shells 0 rotatesprite x y 40960 1024 7903 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      else ifand AMMO_TYPES[cur_weap] 4 ifg flechete_shells 0 rotatesprite x y 40960 1024 7867 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      else rotatesprite x y 40960 1024 13378 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      break
    case 19
    case 20
      add x 10
      sub y 18
      guniqhudid 10
      rotatesprite x y 40960 20 13382 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 50
      add y 60
      guniqhudid 11
     rotatesprite x y 40960 1024 7893 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      ifand AMMO_TYPES[cur_weap] 1 ifg explosive_shells 0 rotatesprite x y 40960 1024 7903 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      else ifand AMMO_TYPES[cur_weap] 4 ifg flechete_shells 0 rotatesprite x y 40960 1024 7867 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      else rotatesprite x y 40960 1024 13378 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      break
    case 21
      add x 10
      guniqhudid 10
      rotatesprite x y 40960 20 13382 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 22
      add x 10
      guniqhudid 10
      rotatesprite x y 40960 10 13382 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 23
    case 24
      add x 10
      guniqhudid 10
      rotatesprite x y 40960 20 13382 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 25
    case 26
    case 27
    guniqhudid 10
    rotatesprite x y 40960 40 13382 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
    case 28
    case 29
    case 30
      sub y 10
      guniqhudid 10
      rotatesprite x y 40960 20 13381 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
endswitch
guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 3 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// MP7===============================================================================================================

defstate OTHERONE
ifand gun_firemode 1024
{
  set x2 75
  sub x2 wepsway_x
  sub x2 weapon_xoffset
  add x2 looking_angSR1

  set y2 235
  sub y2 wepsway_y
  add y2 looking_arc
  sub y2 gun_pos

        ifl gunsmoke_disp 40 ife INVINC 0
            {
            guniqhudid 28
            ifand gun_firemode_two 2048
                {
                sub y2 55
                add x2 70
                rotatespritea x2 y2 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
                add y2 55
                sub x2 70
                }
            else
                {
              sub y2 35
              add x2 45
                rotatespritea x2 y2 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
              add y2 35
              sub x2 45
              }
            guniqhudid 0
            }

  switch weaponcount
  case 1
  case 3
  case 5
    displayrandvar weap_disp_temp4 5
    sub x2 weap_disp_temp4
    add y2 weap_disp_temp4
      ifand gun_firemode_two 2048 nullop else
        {
          sub y2 35
          add x2 45
          mulvar rot_flash -1
          guniqhudid 20
          rotatespritea x2 y2 20000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          add y2 35
          sub x2 45
        }
    ifand gun_firemode_two 2048 set tilenum 5159 else set tilenum 5156
    break
  case 0
  case 2
  case 4
  case 6
    ifand gun_firemode_two 2048 set tilenum 5159 else set tilenum 5155
    break
  endswitch

     state wep_drawup_rev
     guniqhudid 21
  rotatesprite x2 y2 49152 weap_disp_temp2 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
}
guniqhudid 0
ends

// JAMES' MP7 ========================================================================================================================================================

defstate draw_mp7


  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 235
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

        ifl gunsmoke_disp 40 ife INVINC 0
            {
            add gunsmoke_disp 1
            guniqhudid 18
            ifand gun_firemode_two 2048
                {
                sub y 55
                sub x 70
                rotatespritea x y 40000 0 29952 gunsmoke_disp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
                add y 55
                add x 70
                }
            else
                {
                sub y 35
                sub x 45
                rotatespritea x y 40000 0 29952 gunsmoke_disp 0 4096 -255 windowx1 windowy1 windowx2 windowy2
                add y 35
                add x 45
                }
            guniqhudid 0
            }

  ifand gun_firemode 1024 set HANDS_DRAW 1
  guniqhudid 0
switch weaponcount
case 0
case 4
case 5
case 6
  ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_PISTOL state sound_lower_weapon }
  getp[].ammo_amount 1 weap_disp_temp
  ifand gun_firemode_two 2048 set tilenum 5159 else set tilenum 5155
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 49152 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ife HANDS_DRAW 2
  {
  sub x 80
  add y 35
  guniqhudid 11
  rotatesprite x y 40960 -32 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  }
  state OTHERONE
  break
case 1
 displayrandvar weap_disp_temp 5
  add x weap_disp_temp
  add y weap_disp_temp
      ifand gun_firemode_two 2048 nullop else
        {
        sub y 35
        sub x 45
        displayrandvar rot_flash 2048
        guniqhudid 10
         rotatespritea x y 20000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          add y 35
          add x 45
          }
  ifand gun_firemode_two 2048 set tilenum 5159 else set tilenum 5156
  guniqhudid 11
  rotatesprite x y 49152 0 tilenum 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ife HANDS_DRAW 2
  {
  sub x 80
  add y 35
  guniqhudid 12
  ifand gun_firemode_two 2048 rotatesprite x y 40960 -32 C_ARM_2 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  else rotatesprite x y 40960 -32 C_ARM_2 0 106 4096 windowx1 windowy1 windowx2 windowy2
  }
  state OTHERONE
  break
case 2
case 3
 state gun_smoke_display
 displayrandvar weap_disp_temp 5
  add x weap_disp_temp
  add y weap_disp_temp
  ifand gun_firemode_two 2048 set tilenum 5159 else set tilenum 5155
  guniqhudid 10
  rotatesprite x y 49152 0 tilenum 0 0 4096 windowx1 windowy1 windowx2 windowy2
  ife HANDS_DRAW 2
      {
      sub x 80
      add y 35
      guniqhudid 11
      rotatesprite x y 40960 -32 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      }
state OTHERONE
  break
case 7
case 8
case 9
case 10
  ifand gun_firemode_two 2048 set tilenum 5159 else set tilenum 5155
  guniqhudid 10
  rotatesprite x y 49152 32 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
 ifand gun_firemode_two 2048 set tilenum 5159 else set tilenum 5155
 guniqhudid 10
  rotatesprite x y 49152 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 14
case 15
case 16
case 27
case 28
case 29
  add y 5
  add x 5
   ifand gun_firemode_two 2048 set tilenum 5160 else set tilenum 5157
   guniqhudid 10
  rotatesprite x y 49152 96 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 35
    add y 35
    guniqhudid 11
    rotatesprite x y 49152 256 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
  add y 5
  add x 5
  ife kickbackpic 26 sub y 10
   ifand gun_firemode_two 2048 set tilenum 5161 else set tilenum 5158
   guniqhudid 10
  rotatesprite x y 49152 128 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 40
    add y 30
    guniqhudid 11
    rotatesprite x y 49152 328 C_PISTOL_R shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 30
case 31
case 32
case 33
case 34
case 35
  sub y 5
  sub x 5
  ifand gun_firemode_two 2048 set tilenum 5159 else set tilenum 5155
  guniqhudid 10
  rotatesprite x y 49152 64 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  ifand gun_firemode 1024
      {
      set x 115
      sub x weapon_xoffset
      sub x looking_angSR1

      set y 280
      add y looking_arc
      sub y gun_pos
      guniqhudid 11
      rotatesprite x y 49152 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      }
  break
case 36
case 37
case 38
case 39
case 40

  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 260
  add y looking_arc
  sub y gun_pos
  ifand gun_firemode 1024
          {
          ifand gun_firemode_two 2048 set tilenum 5159 else set tilenum 5155
          guniqhudid 10
          rotatesprite x y 49152 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          set x 115
          sub x weapon_xoffset
          sub x looking_angSR1

          set y 260
          add y looking_arc
          sub y gun_pos
           ifand gun_firemode_two 2048 set tilenum 5160 else set tilenum 5157
           guniqhudid 11
          rotatesprite x y 49152 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2

        }
  break
case 41
case 42
case 43
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos
  ifand gun_firemode 1024
      {
      ifand gun_firemode_two 2048 set tilenum 5159 else set tilenum 5155
      guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      set x 115
      sub x weapon_xoffset
      sub x looking_angSR1

      set y 240
      add y looking_arc
      sub y gun_pos
       ifand gun_firemode_two 2048 set tilenum 5160 else set tilenum 5157
       guniqhudid 11
      rotatesprite x y 49152 -1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
      }
  break
case 44
case 45
case 46
case 47
case 48
case 59
case 60
case 61
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1
   ifand gun_firemode_two 2048 set tilenum 5161 else set tilenum 5157
   guniqhudid 10
  rotatesprite x y 49152 -1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
    add x 35
    add y 35
    guniqhudid 11
    rotatesprite x y 49152 -1280 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 49
case 50
case 51
case 52
case 53
case 54
case 55
case 56
case 57
case 58
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  add y 15
  sub x 5
  ifand gun_firemode_two 2048 set tilenum 5161 else set tilenum 5158
  ife kickbackpic 58 sub y 10
  guniqhudid 10
  rotatesprite x y 49152 -1152 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
    add x 40
    add y 30
    guniqhudid 11
    rotatesprite x y 49152 -1344 C_PISTOL_L shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
case 62
case 63
case 64
case 65
case 66
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 280
  add y looking_arc
  sub y gun_pos

  ifand gun_firemode_two 2048 set tilenum 5159 else set tilenum 5155
  guniqhudid 10
  rotatesprite x y 49152 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  sub y 5
  add x 5
  guniqhudid 11
  rotatesprite x y 49152 -1088 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
 break
case 67
case 68
case 69
  set x 215
  add x weapon_xoffset
  sub x looking_angSR1

  set y 260
  add y looking_arc
  sub y gun_pos

  ifand gun_firemode_two 2048 set tilenum 5159 else set tilenum 5155
  guniqhudid 10
  rotatesprite x y 49152 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  set x 115
  sub x weapon_xoffset
  sub x looking_angSR1

  set y 240
  add y looking_arc
  sub y gun_pos
  guniqhudid 11
  rotatesprite x y 49152 1024 tilenum shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
 break
endswitch
guniqhudid 0
ends

// ********************************************************************************************************************************************
// JAMES' MP5+M203
// ********************************************************************************************************************************************

defstate draw_mp5

  set x 235
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 237
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
		sub x 65
        sub y 46
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 65
        add y 46
        guniqhudid 0
        }
ifand gun_firemode 32768 // Using the GL?
{
    switch gl_countd
    case 0
    case 43
    case 42
    case 41
    state wep_drawup
     sub x 65
     add y 40
     guniqhudid 10
     rotatesprite x y 40960 weap_disp_temp2 C_ARM_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     add x 65
     sub y 40
     guniqhudid 11
     rotatesprite x y 49152 weap_disp_temp2 11887 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 9
    case 10
    case 11
    case 12
    case 13
    guniqhudid 10
     rotatesprite x y 49152 0 12072 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     guniqhudid 11
     ifand AMMO_TYPES[cur_weap] 32 rotatesprite x y 49152 0 12073 shade 2 4096 windowx1 windowy1 windowx2 windowy2
     else ifand AMMO_TYPES[cur_weap] 128 rotatesprite x y 49152 0 12073 shade 7 4096 windowx1 windowy1 windowx2 windowy2
     else ifand AMMO_TYPES[cur_weap] 256 rotatesprite x y 49152 0 12073 shade 54 4096 windowx1 windowy1 windowx2 windowy2
     else rotatesprite x y 49152 0 12073 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     sub x 135
     add y 35
     guniqhudid 12
     rotatesprite x y 32768 -64 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 14
    case 15
    case 16
        guniqhudid 10
        rotatesprite x y 49152 0 12072 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 80
        add y 25
        guniqhudid 11
        rotatesprite x y 40960 1024 C_UNIQUE_3 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
     break
    case 17
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    case 29
        guniqhudid 10
        rotatesprite x y 49152 64 12072 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        set weap_disp_temp7 gl_countd
        mulvar weap_disp_temp7 2
        add weap_disp_temp7 10
        add y weap_disp_temp7
        sub x 100
        state fortymm_case_disp
     break
    case 30
    case 31
    case 32
     guniqhudid 10
     rotatesprite x y 49152 0 12072 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     sub x 135
     add y 25
     guniqhudid 11
     rotatesprite x y 32768 -64 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 5
    case 6
    case 7
    case 8
    case 33
    case 34
    case 35
    case 36
     guniqhudid 10
     rotatesprite x y 49152 32 12071 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     sub x 130
     add y 30
     guniqhudid 11
     rotatesprite x y 32768 -128 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 1
    case 2
    case 3
    case 4
    case 37
    case 38
    case 39
    case 40
     guniqhudid 10
     rotatesprite x y 49152 0 11887 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     sub x 90
     add y 30
     guniqhudid 11
     rotatesprite x y 36864 -32 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 44
    case 45
    case 46
    case 47
    case 48
			state gun_smoke_display
            set weap_disp_temp6 x
            sub weap_disp_temp6 64
            set weap_disp_temp7 y
            sub weap_disp_temp7 22
            displayrandvar rot_flash 2048
            guniqhudid 10
            rotatespritea weap_disp_temp6 weap_disp_temp7 14000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
             sub x 65
             add y 40
             guniqhudid 11
             rotatesprite x y 40960 weap_disp_temp2 C_ARM_1 0 107 4096 windowx1 windowy1 windowx2 windowy2
             add x 65
             sub y 40
            guniqhudid 12
            rotatesprite x y 49152 weap_disp_temp2 11887 0 107 4096 windowx1 windowy1 windowx2 windowy2
            guniqhudid 13
            rotatesprite x y 49152 weap_disp_temp2 11888 0 107 4096 windowx1 windowy1 windowx2 windowy2
     break
    endswitch
guniqhudid 0
}
else
{
guniqhudid 0
    switch weaponcount
    case 0
    case 1
    case 6
      ifand gun_firemode 16384
          {
          set x 160
          set weap_disp_temp2 wepsway_x
          divvar weap_disp_temp2 2
          sub x weap_disp_temp2
          set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
          divvar weap_disp_temp4 2 // divide it by 2
          add x weap_disp_temp4 // add it to x
          sub x 5 // offset it by 5
          set y 140
          set weap_disp_temp3 wepsway_y
          divvar weap_disp_temp3 2
          sub y weap_disp_temp3
          state gunpushback_sight_display
          guniqhudid 10
          rotatesprite x y weap_disp_temp8 0 12070 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // barrel part of ironsight
          sub y 40
          guniqhudid 11
		  sub x 1
          rotatespritea x y QUARTERSIZE 0 11046 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // red dot
          set x 160
          sub x wepsway_x
          add x weapon_xoffset // add weaponxsway to position
          sub x 10 // offset it by 10
          set y 142
          sub y wepsway_y
          guniqhudid 12
          rotatesprite x y weap_disp_temp8 0 12069 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // red dot sight
                ifl player_shade_diff -5
                    {
                    set weap_disp_temp3 player_shade_diff
                    mulvar weap_disp_temp3 2
                    sub y 37
                    guniqhudid 13
                    rotatespritea x y 10192 0 2587 player_shade_diff wall_pal 33 weap_disp_temp3 windowx1 windowy1 windowx2 windowy2 // Glass in holosight
                    }
          }
      else
          {
          state wep_drawup
          state gunpushback_display
          ife opt_weapon_glow YES // not a glow but it's fluff that can be disabled for perf reasons
              {
              getp[].angvel weap_disp_temp3
              mulvar weap_disp_temp3 3
              divvar weap_disp_temp3 2
              set weap_disp_temp4 weapon_xoffset
              mulvar weap_disp_temp4 3
              add weap_disp_temp3 weap_disp_temp4
              sub y 23
              sub x 58
              guniqhudid 10
              rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
              add y 23
              add x 58
              }
          guniqhudid 11
          rotatesprite x y 49152 weap_disp_temp2 11887 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          sub x 100
          add y 15
          guniqhudid 12
          rotatesprite x y 40960 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          }
      break
    case 2
    case 3
      ifand gun_firemode 16384
          {
          guniqhudid 0
            displayrandvar rot_flash 2048
              sub x 77
              sub y 55
              guniqhudid 10
              rotatespritea x y 10000 rot_flash 16115 0 27 4096 -255 windowx1 windowy1 windowx2 windowy2
              add x 77
              add y 55
          set x 160
          set weap_disp_temp2 wepsway_x
          divvar weap_disp_temp2 2
          sub x weap_disp_temp2
          set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
          divvar weap_disp_temp4 2 // divide it by 2
          add x weap_disp_temp4 // add it to x
          sub x 5 // offset it by 5
          set y 140
          set weap_disp_temp3 wepsway_y
          divvar weap_disp_temp3 2
          sub y weap_disp_temp3
          set gun_pushb_disp 10
          state gunpushback_sight_display
          guniqhudid 11
          rotatesprite x y weap_disp_temp8 0 12070 0 106 4096 windowx1 windowy1 windowx2 windowy2 // barrel part of ironsight
          sub y 40
          guniqhudid 12
          rotatespritea x y QUARTERSIZE 0 2484 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // red dot
          set x 160
          sub x wepsway_x
          add x weapon_xoffset // add weaponxsway to position
          sub x 10 // offset it by 10
          set y 142
          sub y wepsway_y
          guniqhudid 13
          rotatesprite x y weap_disp_temp8 0 12069 0 108 4096 windowx1 windowy1 windowx2 windowy2 // red dot sight
          }
        else
            {
			state gun_smoke_display
            guniqhudid 0
         displayrandvar gun_pushb_disp 5
          add x gun_pushb_disp
          add y gun_pushb_disp
          ife opt_weapon_glow YES
                  {
                  getp[].angvel weap_disp_temp3
                  mulvar weap_disp_temp3 3
                  divvar weap_disp_temp3 2
                  sub y 23
                  sub x 52
                  guniqhudid 10
                  rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
                  add y 23
                  add x 52
                  }
           displayrandvar rot_flash 2048
          sub x 65
          sub y 46
          guniqhudid 11
          rotatespritea x y 8000 rot_flash 16115 0 27 4096 -255 windowx1 windowy1 windowx2 windowy2
          add x 65
          add y 46
          guniqhudid 12
		  rotatesprite x y 49152 0 11887 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
		  guniqhudid 13
          rotatesprite x y 49152 0 11888 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
              sub x 100
              add y 15
              guniqhudid 14
              rotatesprite x y 40960 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
          }
        set weap_disp_temp2 0
    break
    endswitch
guniqhudid 0
    ife reload_type 0
    {
    switch kickbackpic
    case 4
    case 5
    case 41
    case 42
    case 43
    case 44
      add x 15

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 52
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 52
      guniqhudid 11
      rotatesprite x y 49152 0 11887 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 6
    case 7
    case 39
    case 40
    add x 15

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 16 11889 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 8
    case 9
    case 37
    case 38
    add x 15

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 32 11889 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 10
    case 11
    case 35
    case 36
    add x 15

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 48 11890 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 33
    case 34
    add x 15

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 48 11890 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 14
    case 15
    case 31
    case 32
    add x 15

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 64 11891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 16
    add x 15
      add y 10

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 64 11891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 17
    add x 15
      add y 10

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 64 11892 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    add x 15

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 64 11892 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 29
    add x 15
      sub y 10

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 64 11892 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 30
    add x 15
      sub y 10

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 64 11891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
    guniqhudid 0
    }
    else
    ife reload_type 1 // Reloading from an empty mag?
    {
    guniqhudid 0
    switch kickbackpic
    case 58
    case 59
    case 60
    case 61
    case 62
    add x 15
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 48 11890 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2

           add x 70
          add y 140
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 2
          add x weap_disp_temp3
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 2
          add y weap_disp_temp3
          clamp y 0 200
          clamp x 0 160
          guniqhudid 12
          rotatesprite x y 55538 16 C_UNIQUE_4 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away
      break
    case 55
    case 56
    case 57
    add x 15
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 76 11890 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          add x 70
          add y 140
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 3
          sub x weap_disp_temp3
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 3
          sub y weap_disp_temp3
          guniqhudid 12
          rotatesprite x y 55538 16 C_UNIQUE_4 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away
      break
    case 53
    case 54
    add x 15
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 96 11890 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 70
        add y 140
        set weap_disp_temp3 kickbackpic
        mulvar weap_disp_temp3 3
        sub x weap_disp_temp3
        set weap_disp_temp3 kickbackpic
        mulvar weap_disp_temp3 3
        sub y weap_disp_temp3
        guniqhudid 12
        rotatesprite x y 55538 32 C_UNIQUE_4 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away
      break
    case 3
    case 4
    case 5
      add x 15
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 52
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 52
      guniqhudid 11
      rotatesprite x y 49152 0 11890 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 6
    case 7
    case 49
    case 50
    case 51
    case 52
    add x 15
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 16 11889 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 8
    case 9
    case 47
    case 48
    add x 15

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 32 11889 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 10
    case 11
    case 45
    case 46
    add x 15
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 48 11890 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 14
    case 15
    case 16
    add x 15
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 48 11890 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            sub x 20
          add y 30
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 4
          sub x weap_disp_temp3
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 4
          sub y weap_disp_temp3
          guniqhudid 12
          rotatesprite x y 55538 0 C_UNIQUE_4 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away
      break
    case 17
    case 18
    case 19
    add x 15
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 76 11890 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 170
        sub y 80
        set weap_disp_temp3 kickbackpic
        mulvar weap_disp_temp3 4
        add x weap_disp_temp3
        set weap_disp_temp3 kickbackpic
        mulvar weap_disp_temp3 4
        add y weap_disp_temp3
        guniqhudid 12
        rotatesprite x y 55538 16 C_UNIQUE_4 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away
      break
    case 20
    case 21
    add x 15
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 96 11890 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 170
          sub y 80
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 4
          add x weap_disp_temp3
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 4
        add y weap_disp_temp3
        guniqhudid 12
        rotatesprite x y 55538 32 C_UNIQUE_4 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away
      break
    case 22
    case 23
    case 43
    case 44
    add x 15
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 48 11891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 24
    case 25
    case 41
    case 42
    add x 15
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 64 11891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 26
    add x 15
      add y 10

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 64 11891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 27
    add x 15
      add y 10

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 64 11892 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 28
    case 29
    case 30
    case 31
    case 32
    case 33
    case 34
    case 35
    case 36
    case 37
    case 38
    add x 15
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 64 11892 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 39
    add x 15
      sub y 10
      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 64 11892 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 40
    add x 15
      sub y 10

      getp[].angvel weap_disp_temp3
      mulvar weap_disp_temp3 3
      divvar weap_disp_temp3 2
      sub y 23
      sub x 54
      guniqhudid 10
      rotatesprite x y NORMALSIZE weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 23
      add x 54
      guniqhudid 11
      rotatesprite x y 49152 64 11891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
    }
guniqhudid 0
}
ends

// JAMES' PP19 BIZON===============================================================================================================

defstate draw_pp19

  set x 220
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 240
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  state gunpushback_display
	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 38
        sub y 38
        rotatespritea x y 30000 0 29952 gunsmoke_disp 2 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 38
        add y 38
        guniqhudid 0
        }

guniqhudid 0
ifg kickbackpic_2 0
    switch kickbackpic_2
    case 0
    case 1
      state wep_drawup
      set rot_flash 0
      guniqhudid 10
      rotatesprite x y 40960 weap_disp_temp2 12063 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 75
      add y 25
      guniqhudid 11
      rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 2
    case 3
	  state gun_smoke_display
      displayrandvar gun_pushb_disp 5
       add x gun_pushb_disp
       add y gun_pushb_disp
          sub y 38
          sub x 38
          add rot_flash 16
          guniqhudid 10
          rotatespritea x y 26000 rot_flash 3605 0 21 4096 -255 windowx1 windowy1 windowx2 windowy2
          add y 38
          add x 38
          guniqhudid 11
      rotatesprite x y 40960 weap_disp_temp2 12064 0 106 4096 windowx1 windowy1 windowx2 windowy2
      sub x 75
      add y 25
      guniqhudid 12
      rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 0 106 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
else
switch weaponcount
case 0
case 1
case 6
  state wep_drawup
  state gunpushback_display
  set rot_flash 0
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 12063 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 75
  add y 25
  guniqhudid 11
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 3
  state gun_smoke_display
  displayrandvar gun_pushb_disp 5
   add x gun_pushb_disp
   add y gun_pushb_disp
      sub y 38
      sub x 38
      ife rot_flash 0 displayrandvar rot_flash 2048
      guniqhudid 10
      rotatespritea x y 20000 rot_flash 3605 0 21 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 38
      add x 38
      guniqhudid 11
  rotatesprite x y 40960 weap_disp_temp2 12064 0 107 4096 windowx1 windowy1 windowx2 windowy2
  sub x 75
  add y 25
  guniqhudid 12
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
  break
case 4
case 5
  displayrandvar gun_pushb_disp 5
   add x gun_pushb_disp
   add y gun_pushb_disp
   set rot_flash 0
   guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 12064 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 75
  add y 25
  guniqhudid 11
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
case 9
case 35
case 36
case 37
    sub y 15
    guniqhudid 10
  rotatesprite x y 40960 0 12065 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 40
  add y 30
  guniqhudid 11
  rotatesprite x y 40960 -64 C_UNIQUE_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
case 11
case 12
case 32
case 33
case 34
sub y 10
  guniqhudid 10
  rotatesprite x y 40960 0 12066 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 60
  add y 35
  guniqhudid 11
  rotatesprite x y 40960 0 C_UNIQUE_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 13
case 14
case 30
case 31
sub y 5
  guniqhudid 10
  rotatesprite x y 40960 8 12068 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 15
case 16
case 17
case 27
case 28
case 29
add y 5
  guniqhudid 10
  rotatesprite x y 40960 16 13369 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 18
case 19
case 25
case 26
add y 10
  guniqhudid 10
  rotatesprite x y 40960 32 13369 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 20
case 21
case 22
case 23
case 24
add y 15
  guniqhudid 10
  rotatesprite x y 40960 64 13369 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 38 // start reloading
case 58
  guniqhudid 10
  rotatesprite x y 40960 0 12063 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 39
case 57
  guniqhudid 10
  rotatesprite x y 40960 16 12063 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 40
case 56
  guniqhudid 10
  rotatesprite x y 40960 32 12063 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 41
case 55
  guniqhudid 10
  rotatesprite x y 40960 32 12063 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 50
  add y 10
  break
case 42
case 54
  guniqhudid 10
  rotatesprite x y 40960 32 12063 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 55
  add y 10
  break
case 43
case 53
  add y 5
  guniqhudid 10
  rotatesprite x y 40960 48 12063 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 57
  add y 40
  break
case 44
case 52
  add y 10
  guniqhudid 10
  rotatesprite x y 40960 64 12063 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 57
  add y 40
  break
case 45
case 51
  add y 15
  add y 60
  sub x 10
  guniqhudid 10
  rotatesprite x y 40960 0 1500 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub y 60
  add x 10
  guniqhudid 11
  rotatesprite x y 40960 76 12065 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 46
case 50
  add y 80
  sub x 13
  guniqhudid 10
  rotatesprite x y 40960 0 1500 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub y 60
  add x 13
  guniqhudid 11
  rotatesprite x y 40960 96 12065 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 47
case 48
case 49
  add y 35
  guniqhudid 10
  rotatesprite x y 40960 104 12065 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// ********************************************************************************************************************************************
// JAMES' UMP45
// ********************************************************************************************************************************************

defstate draw_ump

  set x 220
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 233
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  state gunpushback_display
  	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
		sub x 48
        sub y 35
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 48
        add y 35
        guniqhudid 0
        }
guniqhudid 0
    switch weaponcount
    case 0
    case 1
    case 4
    case 6
      set weap_disp_temp2 player[].weapon_pos
      mulvar weap_disp_temp2 -20
      set rot_flash 0
      ifand gun_firemode 16384 // ironsighting?
          {
          set x 160
          set weap_disp_temp2 wepsway_x
          divvar weap_disp_temp2 2
          sub x weap_disp_temp2
          set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
          divvar weap_disp_temp4 2 // divide it by 2
          add x weap_disp_temp4 // add it to x
          sub x 5 // offset it by 5
          set y 140
          set weap_disp_temp3 wepsway_y
          divvar weap_disp_temp3 2
          sub y weap_disp_temp3
          state gunpushback_sight_display
          guniqhudid 10
          rotatesprite x y weap_disp_temp8 0 16014 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // barrel part of ironsight
          sub y 40
          guniqhudid 11
          rotatespritea x y 4096 0 11047 0 0 1 -255 windowx1 windowy1 windowx2 windowy2 // holographic crosshair
          set x 160
          sub x wepsway_x
          add x weapon_xoffset // add weaponxsway to position
          sub x 10 // offset it by 10
          set y 142
          sub y wepsway_y
          guniqhudid 12
          rotatesprite x y weap_disp_temp8 0 16013 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // red dot sight
            ifl player_shade_diff -5
                {
                set weap_disp_temp3 player_shade_diff
                mulvar weap_disp_temp3 2
                sub y 37
                guniqhudid 13
                rotatespritea x y 10192 0 2587 player_shade_diff wall_pal 33 weap_disp_temp3 windowx1 windowy1 windowx2 windowy2 // Glass in holosight
                }
          }
      else
          {
          state wep_drawup
          sub x 55
          add y 20
          guniqhudid 10
          rotatesprite x y 45152 weap_disp_temp2 C_ARM_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          add x 55
          sub y 20
          guniqhudid 11
          rotatesprite x y 49152 weap_disp_temp2 16108 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          }
      break
    case 2
    case 3
      ifand gun_firemode 16384
      {
      ife rot_flash 0 displayrandvar rot_flash 2048
      sub x 67
      sub y 55
      ife AMMO_TYPES[3] 2 set weap_disp_temp2 1 else ife AMMO_TYPES[3] 32768 set weap_disp_temp2 106 else set weap_disp_temp2 0
      guniqhudid 10
      rotatespritea x y 10000 rot_flash 16115 0 weap_disp_temp2 4096 -255 windowx1 windowy1 windowx2 windowy2
      set x 160
      set weap_disp_temp2 wepsway_x
      divvar weap_disp_temp2 2
      sub x weap_disp_temp2
      set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
      divvar weap_disp_temp4 2 // divide it by 2
      add x weap_disp_temp4 // add it to x
      sub x 5 // offset it by 5
      set y 140
      set weap_disp_temp3 wepsway_y
      divvar weap_disp_temp3 2
      sub y weap_disp_temp3
      set gun_pushb_disp 10
        state gunpushback_sight_display
        guniqhudid 10
      rotatesprite x y weap_disp_temp8 0 16014 0 106 4096 windowx1 windowy1 windowx2 windowy2 // barrel part of ironsight
      sub y 40
      guniqhudid 11
      rotatespritea x y 4096 0 11047 0 0 1 -255 windowx1 windowy1 windowx2 windowy2 // holographic crosshair
      set x 160
      sub x wepsway_x
      add x weapon_xoffset // add weaponxsway to position
      sub x 10 // offset it by 10
      set y 142
      sub y wepsway_y
      guniqhudid 12
      rotatesprite x y weap_disp_temp8 0 16013 0 108 4096 windowx1 windowy1 windowx2 windowy2 // red dot sight
      }
    else
            {
			state gun_smoke_display
         displayrandvar gun_pushb_disp 5
          add x gun_pushb_disp
          add y gun_pushb_disp
        ife rot_flash 0 displayrandvar rot_flash 2048
          sub x 48
          sub y 35
          ife AMMO_TYPES[3] 2 set weap_disp_temp2 1 else ife AMMO_TYPES[3] 32768 set weap_disp_temp2 106 else set weap_disp_temp2 0
          guniqhudid 10
          rotatespritea x y 18000 rot_flash 16115 0 weap_disp_temp2 8 -255 windowx1 windowy1 windowx2 windowy2
          sub x 7
          add y 55
          guniqhudid 11
          rotatesprite x y 45152 weap_disp_temp2 C_ARM_1 0 107 4096 windowx1 windowy1 windowx2 windowy2
          add x 55
          sub y 20
          guniqhudid 12
          rotatesprite x y 49152 0 16108 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          guniqhudid 13
          rotatesprite x y 49152 0 16109 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          }
      break
    endswitch

    ife reload_type 0 // reloading when not empty
    {
    switch kickbackpic
    case 5
    case 41
    case 42
    case 43
    case 44
      add x 20
      guniqhudid 10
      rotatesprite x y 49152 0 16108 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 6
    case 7
    case 39
    case 40
    add x 22
      guniqhudid 10
      rotatesprite x y 49152 16 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 8
    case 9
    case 37
    case 38
    add x 24
    guniqhudid 10
      rotatesprite x y 49152 32 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 10
    case 11
    case 35
    case 36
    add x 26
    guniqhudid 10
      rotatesprite x y 49152 48 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 33
    case 34
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 48 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 49152 48 16111 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 14
    case 15
    case 31
    case 32
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 64 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 49152 64 16111 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 16
    add x 15
      add y 10
      guniqhudid 10
      rotatesprite x y 49152 64 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 49152 64 16111 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 17
    add x 15
      add y 10
      guniqhudid 10
      rotatesprite x y 49152 64 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    add x 15
      guniqhudid 10
      rotatesprite x y 49152 64 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 29
    add x 15
      sub y 10
      guniqhudid 10
      rotatesprite x y 49152 64 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 30
    add x 15
      sub y 10
      guniqhudid 10
      rotatesprite x y 49152 64 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 49152 64 16111 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
    }
    else
    ife reload_type 1 // Reloading from an empty mag?
    {
    switch kickbackpic
    case 58
    case 59
    case 60
    case 61
    case 62
    add x 15
      guniqhudid 10
      rotatesprite x y 49152 48 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
           add x 80
          add y 150
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 2
          add x weap_disp_temp3
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 2
          add y weap_disp_temp3
          ifg y 200 set y 200
          ifg x 160 set x 160
          guniqhudid 11
          rotatesprite x y 55538 16 C_UNIQUE_4 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away

      break
    case 55
    case 56
    case 57
    add x 15
      guniqhudid 10
      rotatesprite x y 49152 76 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          add x 80
          add y 150
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 3
          sub x weap_disp_temp3
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 3
          sub y weap_disp_temp3
          guniqhudid 11
          rotatesprite x y 55538 16 C_UNIQUE_4 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away

      break
    case 53
    case 54
    add x 15
      guniqhudid 10
      rotatesprite x y 49152 96 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          add x 80
          add y 150
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 3
          sub x weap_disp_temp3
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 3
          sub y weap_disp_temp3
          guniqhudid 11
          rotatesprite x y 55538 32 C_UNIQUE_4 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away

      break
    case 3
    case 5
      add x 15
      guniqhudid 10
      rotatesprite x y 49152 0 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 6
    case 7
    case 49
    case 50
    case 51
    case 52
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 16 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 8
    case 9
    case 47
    case 48
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 32 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 10
    case 11
    case 45
    case 46
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 48 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 14
    case 15
    case 16
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 48 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            sub x 20
          add y 30
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 4
          sub x weap_disp_temp3
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 4
          sub y weap_disp_temp3
          guniqhudid 11
          rotatesprite x y 55538 0 C_UNIQUE_4 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away

      break
    case 17
    case 18
    case 19
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 76 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2

                sub x 170
          sub y 80
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 4
          add x weap_disp_temp3
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 4
          add y weap_disp_temp3
          guniqhudid 11
          rotatesprite x y 55538 16 C_UNIQUE_4 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away

      break
    case 20
    case 21
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 96 16110 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2

                sub x 170
          sub y 80
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 4
          add x weap_disp_temp3
          set weap_disp_temp3 kickbackpic
          mulvar weap_disp_temp3 4
          add y weap_disp_temp3
          guniqhudid 11
          rotatesprite x y 55538 32 C_UNIQUE_4 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away
      break
    case 22
    case 23
    case 43
    case 44
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 48 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 49152 48 16111 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 24
    case 25
    case 41
    case 42
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 64 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 49152 64 16111 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 26
    add x 15
      add y 10
      guniqhudid 10
      rotatesprite x y 49152 64 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 49152 64 16111 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 27
    add x 15
      add y 10
      guniqhudid 10
      rotatesprite x y 49152 64 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 28
    case 29
    case 30
    case 31
    case 32
    case 33
    case 34
    case 35
    case 36
    case 37
    case 38
    add x 15
    guniqhudid 10
      rotatesprite x y 49152 64 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 39
    add x 15
      sub y 10
      guniqhudid 10
      rotatesprite x y 49152 64 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 40
    add x 15
      sub y 10
      guniqhudid 10
      rotatesprite x y 49152 64 16112 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 49152 64 16111 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
    }
guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 4 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// JAMES' ROCKET GRENADE LAUNCHER===============================================================================================================

defstate drawjgrenadel

  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 220
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
		sub y 30
		sub x 70
        rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
		add y 30
		add x 70
        guniqhudid 0
        }
  clamp y 134 320

switch weaponcount
case 0
case 1
case 8
case 9
case 10
case 11
case 12
case 13
case 14
case 15
  ife player[].weapon_pos 8 soundonce ROTATEBARREL
  state gunpushback_display
  state wep_drawup
  sub x 72
  add y 32
  guniqhudid 10
  rotatesprite x y 49152 weap_disp_temp2 C_ARM_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 72
  sub y 32
  guniqhudid 11
  rotatesprite x y 36864 weap_disp_temp2 5162 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 3
case 4
    state gun_smoke_display
    sub y 30
    sub x 70
    displayrandvar rot_flash 2048
    guniqhudid 10
    rotatespritea x y 14000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
    add y 30
    add x 70

  sub x 72
  add y 32
  guniqhudid 11
  rotatesprite x y 49152 0 C_ARM_1 0 106 4096 windowx1 windowy1 windowx2 windowy2
  add x 72
  sub y 32
  guniqhudid 12
  rotatesprite x y 36864 0 5162 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 13
  rotatesprite x y 36864 0 5163 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 5
  sub x 72
  add y 32
  guniqhudid 10
  rotatesprite x y 49152 0 C_ARM_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 72
  sub y 32
  guniqhudid 11
  rotatesprite x y 36864 0 5164 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
break
case 6
case 7
soundonce ROTATEBARREL
  sub x 72
  add y 32
  guniqhudid 10
  rotatesprite x y 49152 16 C_ARM_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 72
  sub y 32
  guniqhudid 11
  rotatesprite x y 36864 16 5164 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 16
case 17
case 18
case 19
case 55
case 56
case 57
case 58
  guniqhudid 10
  rotatesprite x y 36864 16 5628 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 20
case 21
case 22
case 23
case 51
case 52
case 53
case 54
  add y 10
  guniqhudid 10
  rotatesprite x y 36864 32 5628 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 24
case 25
case 26
case 27
case 47
case 48
case 49
case 50
  add y 5
  guniqhudid 10
  rotatesprite x y 36864 0 5628 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 28
case 29
case 30
case 44
case 45
case 46
  add y 10
  guniqhudid 10
  rotatesprite x y 36864 16 5630 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  guniqhudid 11
  rotatesprite x y 36864 16 5629 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
case 31
case 32
case 33
case 34
case 35
case 36
case 37
case 38
case 39
case 40
case 41
case 42
case 43
  add y 15
  guniqhudid 10
  rotatesprite x y 36864 -24 5630 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
 break
endswitch
guniqhudid 0
ends

// JAMES' 4Omm Launcher===============================================================================================================

defstate draw_40MMlauncher

  set x 227
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 218
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 40
        sub y 15
        rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 40
        add y 15
        guniqhudid 0
        }
  ifg weaponcount 6 set gun_pushb_disp 0
guniqhudid 0
switch weaponcount
case 0
case 1
case 3
case 4
case 5
  state wep_drawup
  state gunpushback_display
  sub x 50
  add y 45
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 C_ARM_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 50
  sub y 45
  guniqhudid 11
  rotatesprite x y 40960 weap_disp_temp2 22539 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
 state gun_smoke_display
 set gun_pushb_disp 10
 displayrandvar rot_flash 2048
   sub x 40
   sub y 15
   guniqhudid 10
  rotatespritea x y 15000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 40
  add y 15

  sub x 50
  add y 45
  guniqhudid 11
  rotatesprite x y 40960 weap_disp_temp2 C_ARM_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  add x 50
  sub y 45
  guniqhudid 12
  rotatesprite x y 40960 weap_disp_temp2 22539 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 6
case 7
case 8
case 9
case 10
case 27
case 28
case 29
case 30
  guniqhudid 10
  rotatesprite x y 40960 0 22541 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
case 24
case 25
case 26
  guniqhudid 10
  rotatesprite x y 40960 -64 22541 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 14
case 15
case 16
add y 15
add x 30
  guniqhudid 10
  rotatesprite x y 40960 0 22542 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
  guniqhudid 10
  rotatesprite x y 40960 0 22544 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 40
    state fortymm_case_disp
  break
case 21
case 22
case 23
  add y 5
  guniqhudid 10
  rotatesprite x y 40960 0 22542 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    add y 30
    add x 10
    guniqhudid 11
    rotatesprite x y 48960 1024 C_UNIQUE_3 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
  break
 endswitch
 guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 5 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// JAMES' GRENADE===============================================================================================================

defstate displayjgrenade

      set x 235
      set y 255
      sub x wepsway_x
      add x weapon_xoffset
      sub x looking_angSR1
      sub y wepsway_y
      add y looking_arc
      sub y gun_pos

  switch weaponcount
   case 0
      ife CHAR 0 ifand CHAR_APP 1 set tilenum 1506 else
      set tilenum CPIPEBOMB
getp[].ammo_amount 5 weap_disp_temp
      guniqhudid 10
      ifg weap_disp_temp 0 rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 1
   case 2
      ifand CHAR_APP 1 set tilenum 1506 else
      set tilenum CPIPEBOMB
      guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 1499
    sub x 140
    guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 3
   case 4
      ifand CHAR_APP 1 set tilenum 1506 else
      set tilenum CPIPEBOMB
      guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 1499
    sub x 120
    guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 5
   case 6
      ifand CHAR_APP 1 set tilenum 1506 else
      set tilenum CPIPEBOMB
      guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 1499
    sub x 100
    guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 7
   case 8
   case 9
   case 10
   ife weaponcount 10 sub x 10
      ifand CHAR_APP 1 set tilenum 1506 else
      set tilenum CPIPEBOMB
      guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      set tilenum 1500
    sub x 100
    guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 11
   case 12
   ife weaponcount 11 sub x 5
      soundonce JG_FLIP
      ifand CHAR_APP 1 set tilenum 1507 else
          {
          set tilenum CPIPEBOMB
          add tilenum 4
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 120
      set tilenum 1501
    guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 13
   case 14
      ifand CHAR_APP 1 set tilenum 1507 else
          {
          set tilenum CPIPEBOMB
          add tilenum 4
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 140
      set tilenum 1500
    guniqhudid 11
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 15
   case 16
   case 17
      ifand CHAR_APP 1 set tilenum 1507 else
          {
          set tilenum CPIPEBOMB
          add tilenum 4
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 18
   case 19
    sub x 150
          set tilenum 1499
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 20
   case 21
    sub x 40
      sub y 10
      set tilenum CPIPEBOMB
    add tilenum 5
    guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 22
    sub x 60
      sub y 20
       ifand CHAR_APP 1 set tilenum 1509 else
          {
          set tilenum CPIPEBOMB
          add tilenum 6
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 23
   case 24
    sub x 60
      sub y 10
      ifand CHAR_APP 1 set tilenum 1509 else
          {
          set tilenum CPIPEBOMB
          add tilenum 6
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 25
   case 26
   case 27
    sub x 60
    sub y 10
      ifand CHAR_APP 1 set tilenum 1510 else
          {
          set tilenum CPIPEBOMB
          add tilenum 7
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
   case 28
   case 29
    sub x 60
    sub y 20
      ifand CHAR_APP 1 set tilenum 1510 else
          {
          set tilenum CPIPEBOMB
          add tilenum 7
          }
          guniqhudid 10
      rotatesprite x y 49152 0 tilenum shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
    break
  endswitch
guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 6 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// JAMES'S XM8 laser===============================================================================================================

defstate draw_xm8

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  set x 235
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1
  clamp y 149 360
  state gunpushback_display
   ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
		sub y 30
		sub x 60
		ife cur_weap 11 rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        else rotatespritea x y 30000 0 29952 gunsmoke_disp 8 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 60
        add y 30
        guniqhudid 0
        }
guniqhudid 0
switch weaponcount
case 0
case 1
case 52
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 5254 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  state reverse_shade
    ife cur_weap 11
        {
        guniqhudid 11
        rotatesprite x y 40960 weap_disp_temp2 5179 0 2 4096 windowx1 windowy1 windowx2 windowy2
        guniqhudid 12
        ife opt_weapon_glow YES rotatespritea x y 40960 weap_disp_temp2 5227 weap_disp_temp5 2 4096 -255 windowx1 windowy1 windowx2 windowy2
        }
    else
        {
        guniqhudid 11
        rotatesprite x y 40960 weap_disp_temp2 5179 0 0 4096 windowx1 windowy1 windowx2 windowy2
        guniqhudid 12
        ife opt_weapon_glow YES rotatespritea x y 40960 weap_disp_temp2 5227 weap_disp_temp5 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        }
    ife weap_disp_temp2 0
        {
        sub y 33
        sub x 9
        guniqhudid 0
        ife cur_weap 11 digitalnumberz 3010 x y SLUGSHOTMAG 0 4 4097 windowx1 windowy1 windowx2 windowy2 DOUBLESIZE
        else digitalnumberz 3010 x y slot6_mag 0 4 4097 windowx1 windowy1 windowx2 windowy2 DOUBLESIZE
        add y 33
        add x 9
        }
  sub x 86
  add y 25
  guniqhudid 13
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 3
case 4
displayrandvar gun_pushb_disp 5
add x gun_pushb_disp
add y gun_pushb_disp
displayrandvar rot_flash 2048
ife cur_weap 6 // Laser Rifle
        {
		state gun_smoke_display
       sub y 30
      sub x 60
      guniqhudid 10
      rotatespritea x y 17000 rot_flash 16115 0 8 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 30
      add x 60
      guniqhudid 11
      rotatesprite x y 40960 0 5255 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      rotatesprite x y 40960 0 5179 0 0 4096 windowx1 windowy1 windowx2 windowy2

        sub y 33
        sub x 9
        guniqhudid 0
        digitalnumberz 3010 x y slot6_mag 0 4 4097 windowx1 windowy1 windowx2 windowy2 DOUBLESIZE
        add y 33
        add x 9

      sub x 86
      add y 25
      guniqhudid 13
      rotatesprite x y 32768 0 C_ARM_2 0 104 4096 windowx1 windowy1 windowx2 windowy2
        }
    else
ife cur_weap 11 // Slug shot
        {
		state gun_smoke_display
       sub y 30
      sub x 60
      guniqhudid 10
      rotatespritea x y 14000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 30
      add x 60
      guniqhudid 11
      rotatesprite x y 40960 0 5258 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      rotatesprite x y 40960 0 5179 0 2 4096 windowx1 windowy1 windowx2 windowy2

             sub y 33
             sub x 9
             guniqhudid 0
             digitalnumberz 3010 x y SLUGSHOTMAG 0 4 4097 windowx1 windowy1 windowx2 windowy2 DOUBLESIZE
             add y 33
             add x 9
      sub x 86
      add y 25
      guniqhudid 13
      rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
        }
  break
case 5
case 6
    guniqhudid 10
  rotatesprite x y 49152 0 5256 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
case 9
case 49
case 50
case 51
    guniqhudid 10
  rotatesprite x y 49152 32 5256 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
case 11
case 12
case 46
case 47
case 48
    guniqhudid 10
    rotatesprite x y 49152 64 5259 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
    sub x 115
    add y 25
    guniqhudid 11
    rotatesprite x y 40960 64 CHOLDING_3 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
  break
case 13
case 14
case 15
case 16
case 42
case 43
case 44
case 45
  ife weaponcount 14 add y 10
  ife weaponcount 44 sub y 10
  guniqhudid 10
  rotatesprite x y 49152 0 5257 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
      sub x 120
      add y 85
      guniqhudid 11
      rotatesprite x y 40960 64 CHOLDING_3 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
case 27
case 28
case 29
case 30
case 31
case 32
case 33
case 34
case 35
case 36
case 37
case 38
case 39
case 40
case 41
    guniqhudid 10
  rotatesprite x y 49152 0 5442 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// JAMES'S XM8 laser===============================================================================================================

defstate draw_darkmatter_xm8

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  set x 235
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1
  clamp y 149 360
  state gunpushback_display
   ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
		sub y 30
		sub x 60
		rotatespritea x y 30000 0 29952 gunsmoke_disp 30 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 60
        add y 30
        guniqhudid 0
        }
guniqhudid 0
switch weaponcount
case 0
case 1
case 52
  state wep_drawup
  guniqhudid 10
  rotatesprite x y 40960 weap_disp_temp2 29120 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  sub x 76
  add y 25
  guniqhudid 13
  rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
case 3
case 4
displayrandvar gun_pushb_disp 5
add x gun_pushb_disp
add y gun_pushb_disp
displayrandvar rot_flash 2048

		state gun_smoke_display
       sub y 30
      sub x 60
      guniqhudid 10
      rotatespritea x y 17000 rot_flash 16115 0 30 4096 -255 windowx1 windowy1 windowx2 windowy2
      add y 30
      add x 60
      guniqhudid 12
      rotatesprite x y 40960 0 29121 0 0 4096 windowx1 windowy1 windowx2 windowy2


      sub x 76
      add y 25
      guniqhudid 13
      rotatesprite x y 32768 0 C_ARM_2 0 119 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
case 6
    guniqhudid 10
  rotatesprite x y 49152 0 29122 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 7
case 8
case 9
case 49
case 50
case 51
    guniqhudid 10
  rotatesprite x y 49152 32 29122 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 10
case 11
case 12
case 46
case 47
case 48
    guniqhudid 10
    rotatesprite x y 49152 64 29123 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
    sub x 85
    add y 65
    guniqhudid 11
    rotatesprite x y 40960 64 CHOLDING_3 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
  break
case 13
case 14
case 15
case 16
case 42
case 43
case 44
case 45
  ife weaponcount 14 add y 10
  ife weaponcount 44 sub y 10
  guniqhudid 10
  rotatesprite x y 49152 0 29123 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
      sub x 100
      add y 85
      guniqhudid 11
      rotatesprite x y 40960 64 CHOLDING_3 shade wep_pal 4104 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
case 21
case 22
case 23
case 24
case 25
case 26
case 27
case 28
case 29
case 30
case 31
case 32
case 33
case 34
case 35
case 36
case 37
case 38
case 39
case 40
case 41
    guniqhudid 10
  rotatesprite x y 49152 0 29124 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// JAMES' EXPLODING CROSSBOW ========================================================================================================================================================================================

defstate draw_j_autocrossbow

  set x 175
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 250
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

switch weaponcount
case 0
case 1
case 29
case 30
  state wep_drawup
  state gunpushback_display
  guniqhudid 10
  ife needs_pump[6] 1 set tilenum 15920 else set tilenum 15919
  rotatesprite x y 49152 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 2
  add x 5
  add y 5
  guniqhudid 10
  rotatesprite x y 49152 0 15920 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 3
case 4
  add x 7
  add y 7
  set gun_pushb_disp 7
  guniqhudid 10
  rotatesprite x y 49152 0 15920 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 5
case 6
case 7
case 8
  guniqhudid 10
  rotatesprite x y 49152 0 15921 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 9
case 10
case 11
case 12
  guniqhudid 10
  rotatesprite x y 49152 0 15922 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 13
case 14
case 15
case 16
  guniqhudid 10
  rotatesprite x y 49152 0 15923 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
  guniqhudid 10
  rotatesprite x y 49152 0 15924 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 21
case 22
case 23
case 24
  guniqhudid 10
  rotatesprite x y 49152 0 15925 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 25
case 26
case 27
case 28
  guniqhudid 10
  rotatesprite x y 49152 0 15926 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 7 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// STEYR AUG===============================================================================================================

defstate draw_steyr_aug

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 230
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

    ifl gunsmoke_disp 40 ife INVINC 0
         ifn weaponcount 2
            {
            add gunsmoke_disp 1
            guniqhudid 18
            sub x 55
            sub y 45
            rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
            add x 55
            add y 45
            guniqhudid 0
            }

ifg scope 0 { add x 20 add y 20 set weap_disp_temp9 71536 }
else set weap_disp_temp9 49152

ifvarn pal 1
ifvarn pal 2
ifvarn pal 4
ifvarn pal 7
ifvarn pal 8
ifvarn pal 18
	{
	set cosm_col_id 200
	state cus_gun_colour
	set wep_pal cosm_col
	}

switch weaponcount
case 0
case 1
case 3
case 4
case 5
ife scope 0
  {
  state wep_drawup
  getp[].angvel weap_disp_temp3
  mulvar weap_disp_temp3 3
  divvar weap_disp_temp3 2
  set weap_disp_temp4 weapon_xoffset
  mulvar weap_disp_temp4 3
  add weap_disp_temp3 weap_disp_temp4
  state gunpushback_display
      sub y 25
      sub x 32
      guniqhudid 10
      rotatesprite x y weap_disp_temp9 weap_disp_temp3 12145 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Gun's strap
      add y 25
      add x 32
   sub x 50
  add y 26
  guniqhudid 11
  rotatesprite x y 49152 0 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // Arm
  add x 50
  sub y 26
  guniqhudid 12
  rotatesprite x y weap_disp_temp9 weap_disp_temp2 12146 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Aug itself
  }
  break
case 2
  displayrandvar gun_pushb_disp 8
  add x gun_pushb_disp
  add y gun_pushb_disp
  state gun_smoke_display
 displayrandvar rot_flash 2048
  sub x 55
  sub y 45
  state random_AR_flash
  guniqhudid 10
  rotatespritea x y 20000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add x 55
  add y 45

   sub x 50
  add y 26
  guniqhudid 11
  rotatesprite x y 49152 0 C_ARM_1 0 107 4096 windowx1 windowy1 windowx2 windowy2 // Arm
  add x 50
  sub y 26


  ife scope 0
    {
    guniqhudid 12
    rotatesprite x y weap_disp_temp9 0 12146 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Aug itself
    guniqhudid 13
    rotatesprite x y weap_disp_temp9 0 12147 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // firing frame
    }

  break
case 6
case 7
case 8
case 9
case 10
case 11
case 12
  add y kickbackpic
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 0 12148 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Aug itself
      sub x 20
      add y 25
      set weap_disp_temp3 kickbackpic
      mulvar weap_disp_temp3 4
      sub x weap_disp_temp3
      set weap_disp_temp3 kickbackpic
      mulvar weap_disp_temp3 4
      sub y weap_disp_temp3
      guniqhudid 11
      rotatesprite x y 55538 0 C_UNIQUE_4 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away
  break
case 13
case 14
case 15
case 16
  add y kickbackpic
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 0 12149 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Aug itself
      sub x 100
      sub y 75
      set weap_disp_temp3 kickbackpic
      mulvar weap_disp_temp3 4
      add x weap_disp_temp3
      set weap_disp_temp3 kickbackpic
      mulvar weap_disp_temp3 4
      add y weap_disp_temp3
      guniqhudid 11
      rotatesprite x y 55538 1024 C_UNIQUE_3 shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2 // hand moving away
  break
case 17
case 18
case 19
case 20
  add y kickbackpic
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 64 12149 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Aug itself
      sub x 100
      sub y 75
      set weap_disp_temp3 kickbackpic
      mulvar weap_disp_temp3 4
      add x weap_disp_temp3
      set weap_disp_temp3 kickbackpic
      mulvar weap_disp_temp3 4
      add y weap_disp_temp3
      guniqhudid 11
      rotatesprite x y 55538 992 C_UNIQUE_3 shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2 // hand moving away
  break
case 21
case 22
case 23
case 24
case 25
case 26
case 27
case 28
case 29
case 30
case 31
case 32
case 33
case 34
case 35
  sub y kickbackpic
  set weap_disp_temp5 kickbackpic
  mulvar weap_disp_temp5 2
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 weap_disp_temp5 12150 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Aug itself

     sub x 15
     sub y 20
      set weap_disp_temp3 kickbackpic
      mulvar weap_disp_temp3 2
      sub x weap_disp_temp3
      set weap_disp_temp3 kickbackpic
      mulvar weap_disp_temp3 3
      add y weap_disp_temp3
      guniqhudid 11
      rotatesprite x y 55538 0 C_UNIQUE_4 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2 // hand moving away
  break
case 36
case 37
case 38
case 39
case 40
case 41
case 42
case 43
case 44
case 45
  sub y 15
  set weap_disp_temp5 kickbackpic
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 weap_disp_temp5 12150 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Aug itself
  break
case 46
case 47
case 48
  add y 10
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 50 12150 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Aug itself
  break
case 49
case 50
case 51
case 52
case 53
case 54
case 55
case 56
case 57
case 58
case 59
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 45 12150 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Aug itself
  break
 case 60
 case 61
 case 62
   add y 10
   guniqhudid 10
   rotatesprite x y weap_disp_temp9 50 12150 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Aug itself
  break
case 63
case 64
case 65
case 66
case 67
case 68
case 69
case 70
case 71
case 72
case 73
case 74
case 75
  sub y kickbackpic
  ife weaponcount 63 sub y 15
  ife weaponcount 64 sub y 15
  ife weaponcount 65 sub y 15
  add y 60
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 0 12150 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Aug itself
   break
case 76
case 77
case 78
case 79
case 80
case 81
case 82
case 83
case 84
case 85
  sub y kickbackpic
  add y 60
  guniqhudid 10
  rotatesprite x y weap_disp_temp9 0 12149 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Aug itself
   break
endswitch
guniqhudid 0
ends

// James'S LR300 =========================================================================================

defstate drawLR300

  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 247
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  state gunpushback_display
        ifl gunsmoke_disp 40 ife INVINC 0
         ifn weaponcount 2
            {
            add gunsmoke_disp 1
            guniqhudid 18
            sub x 57
            sub y 52
            rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
            add y 52
            add x 57
            guniqhudid 0
            }

ifvarn pal 1
ifvarn pal 2
ifvarn pal 4
ifvarn pal 7
ifvarn pal 8
ifvarn pal 18
	{
	set cosm_col_id 45
	state cus_gun_colour
	set wep_pal cosm_col
	}

guniqhudid 0
ifand gun_firemode 32768 // Using the Lr300's GL?
    {
    switch gl_countd
    case 0
    case 43
    case 42
    case 41
     state wep_drawup
     ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_ASSAULTR state sound_lower_weapon }
         sub x 50
         add y 35
         guniqhudid 10
         rotatesprite x y 40960 weap_disp_temp2 C_ARM_1 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
         add x 50
         sub y 35
         guniqhudid 11
     rotatesprite x y 40960 weap_disp_temp2 15893 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 9
    case 10
    case 11
    case 12
    case 13
     guniqhudid 10
     rotatesprite x y 40960 0 15891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     guniqhudid 11
     ifand AMMO_TYPES[cur_weap] 32 rotatesprite x y 40960 0 15892 shade 2 4096 windowx1 windowy1 windowx2 windowy2
     else ifand AMMO_TYPES[cur_weap] 128 rotatesprite x y 40960 0 15892 shade 7 4096 windowx1 windowy1 windowx2 windowy2
     else ifand AMMO_TYPES[cur_weap] 256 rotatesprite x y 40960 0 15892 shade 54 4096 windowx1 windowy1 windowx2 windowy2
     else rotatesprite x y 40960 0 15892 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     sub x 140
     add y 40
     guniqhudid 12
     rotatesprite x y 36864 -196 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 14
    case 15
    case 16
        guniqhudid 10
        rotatesprite x y 40960 0 15891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 90
        add y 25
        guniqhudid 11
        rotatesprite x y 40960 1024 C_UNIQUE_3 shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
     break
    case 17
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    case 29
        guniqhudid 10
        rotatesprite x y 40960 64 15891 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        set weap_disp_temp7 gl_countd
        mulvar weap_disp_temp7 2
        add weap_disp_temp7 10
        add y weap_disp_temp7
        sub x 115
        state fortymm_case_disp
     break
    case 30
    case 31
    case 32
     guniqhudid 10
     rotatesprite x y 40960 0 15890 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     sub x 140
     add y 40
     guniqhudid 11
     rotatesprite x y 36864 -196 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 5
    case 6
    case 7
    case 8
    case 33
    case 34
    case 35
    case 36
     guniqhudid 10
     rotatesprite x y 40960 32 15889 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     sub x 125
     add y 50
     guniqhudid 11
     rotatesprite x y 36864 -224 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 1
    case 2
    case 3
    case 4
    case 37
    case 38
    case 39
    case 40
     guniqhudid 10
     rotatesprite x y 40960 0 15889 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     sub x 120
     add y 60
     guniqhudid 11
     rotatesprite x y 36864 -256 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 44
    case 45
    case 46
    case 47
    case 48
			state gun_smoke_display
            set weap_disp_temp6 x
            sub weap_disp_temp6 58
            set weap_disp_temp7 y
            sub weap_disp_temp7 25
            displayrandvar rot_flash 2048
            guniqhudid 10
            rotatespritea weap_disp_temp6 weap_disp_temp7 14000 rot_flash 16115 0 0 8 -255 windowx1 windowy1 windowx2 windowy2
             sub x 50
             add y 35
             guniqhudid 11
             rotatesprite x y 40960 weap_disp_temp2 C_ARM_1 0 106 4096 windowx1 windowy1 windowx2 windowy2
             add x 50
             sub y 35
             guniqhudid 12
            rotatesprite x y 40960 weap_disp_temp2 15893 0 106 4096 windowx1 windowy1 windowx2 windowy2
            guniqhudid 13
            rotatesprite x y 40960 weap_disp_temp2 15894 0 106 4096 windowx1 windowy1 windowx2 windowy2
     break
    endswitch
    guniqhudid 0
    }
else // using LR300's mainfiring mode
    {
    guniqhudid 0
    switch weaponcount
    case 0
    case 1
    case 3
    case 4
    ifand gun_firemode 16384 state default_gun_scope
    else
        {
        ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_ASSAULTR state sound_lower_weapon }
        state wep_drawup
        guniqhudid 10
        rotatesprite x y 40960 weap_disp_temp2 15893 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 92
        add y 20
        guniqhudid 11
        rotatesprite x y 40960 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
        }
      break
    case 2
    ifand gun_firemode 16384
        {
              set x 160
              set disp_temp2 wepsway_x
              divvar disp_temp2 2
              sub x disp_temp2
              set y 100
              set disp_temp3 wepsway_y
              divvar disp_temp3 2
              sub y disp_temp3

            state random_AR_flash
            add y 40
            guniqhudid 10
            rotatespritea x y 40000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
            sub y 40
			state default_gun_scope
        }
    else
        {
        state gun_smoke_display
        displayrandvar gun_pushb_disp 5
		add gun_pushb_disp 4
          add x gun_pushb_disp
          add y gun_pushb_disp
          sub x 57
          sub y 52
          state random_AR_flash
          guniqhudid 10
          rotatespritea x y 26000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          add x 57
          add y 52
          guniqhudid 11
          rotatesprite x y 40960 0 15893 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          guniqhudid 12
          rotatesprite x y 40960 0 15894 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
         sub x 92
         add y 20
         guniqhudid 13
         rotatesprite x y 40960 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
        }
      break
    case 5
    case 6
    case 7
    case 8
    case 9
    case 10
    case 11
    case 36
    case 37
    case 38
    case 39
    case 40
    case 41
    case 42
      guniqhudid 10
      rotatesprite x y 40960 0 15886 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 14
    case 15
    case 16
    case 17
    case 30
    case 31
    case 32
    case 33
    case 34
    case 35
      sub y 15
      ife kickbackpic 30 sub y 5
      guniqhudid 10
      rotatesprite x y 40960 0 15888 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 40960 0 15887 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 100
      add y 60
      guniqhudid 12
      rotatesprite x y 40960 96 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    case 29
      sub y 15
      ife kickbackpic 18 add y 5
      guniqhudid 10
      rotatesprite x y 40960 0 15888 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    // PRESS BOLT CATCH RELOAD
    case 43
    case 61
      guniqhudid 10
      rotatesprite x y 40960 0 15886 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 44
    case 60
      guniqhudid 10
      rotatesprite x y 40960 16 15886 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 45
    case 59
      guniqhudid 10
      rotatesprite x y 40960 32 15886 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 46
    case 58
      guniqhudid 10
      rotatesprite x y 40960 32 15886 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 50
      add y 20
      break
    case 47
    case 57
      guniqhudid 10
      rotatesprite x y 40960 32 15886 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 55
      add y 20
      break
    case 48
    case 56
      add y 2
      guniqhudid 10
      rotatesprite x y 40960 48 15886 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 49
    case 55
      add y 4
      guniqhudid 10
      rotatesprite x y 40960 64 15886 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 50
    case 54
      add y 6
      guniqhudid 10
      rotatesprite x y 40960 76 15886 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 51
    case 53
      add y 8
      guniqhudid 10
      rotatesprite x y 40960 96 15888 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 40960 96 15887 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 100
      add y 45
      guniqhudid 12
      rotatesprite x y 40960 128 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 52
      add y 10
      guniqhudid 10
      rotatesprite x y 40960 104 15888 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 40960 104 15887 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 100
      add y 45
      guniqhudid 12
      rotatesprite x y 40960 136 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
    guniqhudid 0
    }
ends

// James's M4-15 =========================================================================================

defstate draw_m4-15

  set x 235
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 247
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  state gunpushback_display
	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 70
        sub y 65
        rotatespritea x y 35000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 70
        add y 65
        guniqhudid 0
        }

ifvarn pal 1
ifvarn pal 2
ifvarn pal 4
ifvarn pal 7
ifvarn pal 8
ifvarn pal 18
	{
	set cosm_col_id 84
	state cus_gun_colour
	set wep_pal cosm_col
	}

guniqhudid 0
    switch weaponcount
    case 0
    case 1
    case 3
    case 4
    ifand gun_firemode 16384 // Ironsight?
          {
              set x 160
              set weap_disp_temp2 wepsway_x
              divvar weap_disp_temp2 2
              sub x weap_disp_temp2
              set y 140
              set weap_disp_temp3 wepsway_y
              divvar weap_disp_temp3 2
              sub y weap_disp_temp3
              set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
              divvar weap_disp_temp4 2 // divide it by 2
              add x weap_disp_temp4 // add it to x
              sub x 5 // offset it by 5
              state gunpushback_sight_display
              guniqhudid 10
              rotatesprite x y weap_disp_temp8 0 15905 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Barrel
              sub y 40
              guniqhudid 11
              rotatespritea x y 4296 0 11047 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // holotech dot
              set x 160
              sub x wepsway_x
              sub x 10
              add x weapon_xoffset
              set y 142
              sub y wepsway_y
              guniqhudid 12
              rotatesprite x y weap_disp_temp8 0 15904 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // holographic sight
              ifl player_shade_diff -5
                {
                set weap_disp_temp3 player_shade_diff
                mulvar weap_disp_temp3 2
                sub y 35
                guniqhudid 13
                rotatespritea x y 10192 0 2587 player_shade_diff wall_pal 33 weap_disp_temp3 windowx1 windowy1 windowx2 windowy2 // Glass in holosight
                }
          }
    else
        {
        ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
        state wep_drawup
        guniqhudid 10
        rotatesprite x y 40960 weap_disp_temp2 15899 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 70
        add y 5
        guniqhudid 11
        rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
        }
      break
    case 2
    ifand gun_firemode 16384
          {
              set x 160
              set weap_disp_temp2 wepsway_x
              divvar weap_disp_temp2 2
              sub x weap_disp_temp2
              set y 142
              set weap_disp_temp3 wepsway_y
              divvar weap_disp_temp3 2
              sub y weap_disp_temp3
              set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
              divvar weap_disp_temp4 2 // divide it by 2
              add x weap_disp_temp4 // add it to x
              sub x 5 // offset it by 5

              state random_AR_flash
              guniqhudid 10
              rotatespritea x 120 10192 0 rot_flash 15 27 4096 -255 windowx1 windowy1 windowx2 windowy2
              set gun_pushb_disp 10
              state gunpushback_sight_display
              guniqhudid 11
              rotatesprite x y weap_disp_temp8 0 15905 0 106 4096 windowx1 windowy1 windowx2 windowy2 // Barrel
              sub y 42
              guniqhudid 12
              rotatespritea x y 4096 0 11047 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // holotech dot
             set x 160
             sub x wepsway_x
             sub x 10
             add x weapon_xoffset
             set y 142
             sub y wepsway_y
             guniqhudid 13
          rotatesprite x y weap_disp_temp8 0 15904 0 108 4096 windowx1 windowy1 windowx2 windowy2 // holotech gunsight
          }
    else
            {
			state gun_smoke_display
            displayrandvar gun_pushb_disp 5
			add gun_pushb_disp 5
            add x gun_pushb_disp
            add y gun_pushb_disp
            sub x 70
            sub y 65
            state random_AR_flash
            guniqhudid 10
            rotatespritea x y 8192 0 rot_flash 15 27 4096 -255 windowx1 windowy1 windowx2 windowy2
            add x 70
            add y 65
            guniqhudid 11
            rotatesprite x y 40960 0 15899 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            guniqhudid 12
            rotatesprite x y 40960 0 15900 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            sub x 70
            add y 5
            guniqhudid 13
            rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
            }
      break
    case 5
    case 6
    case 7
    case 8
    case 9
    case 10
    case 11
    case 36
    case 37
    case 38
    case 39
    case 40
    case 41
    case 42
        guniqhudid 10
      rotatesprite x y 40960 0 15901 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 14
    case 15
    case 16
    case 17
    case 30
    case 31
    case 32
    case 33
    case 34
    case 35
      sub y 15
      ife kickbackpic 30 sub y 5
      guniqhudid 10
      rotatesprite x y 40960 0 15903 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 40960 0 15902 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 60
      add y 30
      guniqhudid 12
	  rotatesprite x y 40960 78 C_UNIQUE_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    case 29
      sub y 15
      ife kickbackpic 18 add y 5
      guniqhudid 10
      rotatesprite x y 40960 0 15903 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    // PRESS BOLT CATCH RELOAD
    case 43
    case 61
      guniqhudid 10
      rotatesprite x y 40960 0 15901 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 44
    case 60
      guniqhudid 10
      rotatesprite x y 40960 16 15901 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 45
    case 59
      guniqhudid 10
      rotatesprite x y 40960 32 15901 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 46
    case 58
      guniqhudid 10
      rotatesprite x y 40960 32 15901 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 50
      add y 20
      break
    case 47
    case 57
      guniqhudid 10
      rotatesprite x y 40960 32 15901 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 55
      add y 20
      break
    case 48
    case 56
      add y 2
      guniqhudid 10
      rotatesprite x y 40960 48 15901 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 49
    case 55
      add y 4
      guniqhudid 10
      rotatesprite x y 40960 64 15901 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 50
    case 54
      add y 6
      guniqhudid 10
      rotatesprite x y 40960 76 15903 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 40960 76 15902 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 51
    case 53
      add y 8
      guniqhudid 10
      rotatesprite x y 40960 96 15903 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 40960 96 15902 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 57
      add y 18
      guniqhudid 12
      rotatesprite x y 40960 128 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 52
      add y 10
      guniqhudid 10
      rotatesprite x y 40960 104 15903 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 40960 104 15902 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 57
      add y 18
      guniqhudid 12
      rotatesprite x y 40960 136 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
guniqhudid 0
ends

// James'S G36 =========================================================================================

defstate draw_G36
  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 247
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos

  ifn wep_pal 1
ifn wep_pal 2
ifn wep_pal 4
ifn wep_pal 7
ifn wep_pal 8
ifn wep_pal 18
	{
	set cosm_col_id 78
	state cus_gun_colour
	set wep_pal cosm_col
	}

  state gunpushback_display
	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 65
        sub y 55
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 65
        add y 55
        guniqhudid 0
        }
guniqhudid 0
ifand gun_firemode 32768 // Using the M16's GL?
    {
    switch gl_countd
    case 0
    case 43
    case 42
    case 41
     state wep_drawup
     guniqhudid 10
     rotatesprite x y 45152 weap_disp_temp2 22572 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 9
    case 10
    case 11
    case 12
    case 13
    guniqhudid 10
    rotatesprite x y 45152 0 22576 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    guniqhudid 11
     ifand AMMO_TYPES[cur_weap] 32 rotatesprite x y 45152 0 22577 shade 2 4096 windowx1 windowy1 windowx2 windowy2
     else ifand AMMO_TYPES[cur_weap] 128 rotatesprite x y 45152 0 22577 shade 7 4096 windowx1 windowy1 windowx2 windowy2
     else ifand AMMO_TYPES[cur_weap] 256 rotatesprite x y 45152 0 22577 shade 54 4096 windowx1 windowy1 windowx2 windowy2
     else rotatesprite x y 45152 0 22577 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
    sub x 123
    sub y 15
    guniqhudid 12
    rotatesprite x y 40960 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 14
    case 15
    case 16
        guniqhudid 10
        rotatesprite x y 45152 0 22576 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 70
        add y 5
        guniqhudid 12
        rotatesprite x y 40960 1024 C_UNIQUE_3 shade arm_pal 4100 windowx1 windowy1 windowx2 windowy2
     break
    case 17
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    case 29
        guniqhudid 10
        rotatesprite x y 45152 64 22576 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        set weap_disp_temp7 gl_countd
        mulvar weap_disp_temp7 2
        sub weap_disp_temp7 20
        add y weap_disp_temp7
        sub x 95
        state fortymm_case_disp
     break
    case 30
    case 31
    case 32
        guniqhudid 10
        rotatesprite x y 45152 0 22576 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 123
        sub y 15
        guniqhudid 11
        rotatesprite x y 40960 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
        break
    case 33
    case 34
    case 35
    case 36
    case 5
    case 6
    case 7
    case 8
        guniqhudid 10
        rotatesprite x y 45152 0 22575 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 115
        add y 5
        guniqhudid 11
        rotatesprite x y 40960 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
        break
    case 37
    case 38
    case 39
    case 40
    case 1
    case 2
    case 3
    case 4
        guniqhudid 10
         rotatesprite x y 45152 0 22574 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 100
        add y 20
        guniqhudid 11
        rotatesprite x y 40960 0 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
         break
    case 44
    case 45
    case 46
    case 47
    case 48
			state gun_smoke_display
            set weap_disp_temp6 x
            sub weap_disp_temp6 72
            set weap_disp_temp7 y
            sub weap_disp_temp7 22
            displayrandvar rot_flash 2048
            guniqhudid 10
            rotatespritea weap_disp_temp6 weap_disp_temp7 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
            guniqhudid 11
            rotatesprite x y 45152 weap_disp_temp2 22573 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    endswitch
    guniqhudid 0
    }
else // using G36's mainfiring mode
    {
    guniqhudid 0
    switch weaponcount
    case 0
    case 1
    case 3
    case 4
    ifand gun_firemode 16384 state default_gun_scope
    else
        {
        ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
        state wep_drawup
        guniqhudid 10
        rotatesprite x y 40960 weap_disp_temp2 22572 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 95
        add y 20
        guniqhudid 11
        rotatesprite x y 40960 weap_disp_temp2 C_ARM_2 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
        }
      break
case 2
    ifand gun_firemode 16384
        {
        set x 160
        set disp_temp2 wepsway_x
        divvar disp_temp2 2
        sub x disp_temp2
        set y 100
        set disp_temp3 wepsway_y
        divvar disp_temp3 2
        sub y disp_temp3
        state random_AR_flash
        add y 40
        guniqhudid 10
        rotatespritea x y 40000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        sub y 40
        state default_gun_scope
        }
    else
        {
		state gun_smoke_display
        displayrandvar gun_pushb_disp 5
		add gun_pushb_disp 5
          add x gun_pushb_disp
          add y gun_pushb_disp
          sub x 65
          sub y 55
          state random_AR_flash
          guniqhudid 10
          rotatespritea x y 20000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
          add x 65
          add y 55
          guniqhudid 11
          rotatesprite x y 40960 0 22573 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          sub x 95
          add y 20
          guniqhudid 12
          rotatesprite x y 40960 weap_disp_temp2 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
        }
      break
    case 5
    case 6
    case 7
    case 8
    case 9
    case 10
    case 11
    case 36
    case 37
    case 38
    case 39
    case 40
    case 41
    case 42
        guniqhudid 10
      rotatesprite x y 40960 -16 22574 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 14
    case 15
    case 16
    case 17
    case 30
    case 31
    case 32
    case 33
    case 34
    case 35
      sub y 15
      ife weaponcount 33 sub y 10
      guniqhudid 10
      rotatesprite x y 40960 0 22574 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 65
      add y 55
      guniqhudid 11
      rotatesprite x y 40960 64 CHOLDING_3 shade arm_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    case 29
      sub y 15
      ife weaponcount 21 add y 10
      guniqhudid 10
      rotatesprite x y 40960 0 22575 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    // PRESS BOLT CATCH RELOAD
    case 43
    case 61
      guniqhudid 10
      rotatesprite x y 40960 0 22574 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 44
    case 60
      guniqhudid 10
      rotatesprite x y 40960 16 22574 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 45
    case 59
      guniqhudid 10
      rotatesprite x y 40960 32 22574 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 46
    case 58
      guniqhudid 10
      rotatesprite x y 40960 32 22574 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 50
      add y 20
      break
    case 47
    case 57
      guniqhudid 10
      rotatesprite x y 40960 32 22574 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 55
      add y 20
      break
    case 48
    case 56
      add y 5
      guniqhudid 10
      rotatesprite x y 40960 48 22574 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 49
    case 55
      add y 10
      guniqhudid 10
      rotatesprite x y 40960 64 22574 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 50
    case 54
      add y 15
      guniqhudid 10
      rotatesprite x y 40960 76 22575 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 51
    case 53
      add y 20
      guniqhudid 10
      rotatesprite x y 40960 96 22575 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 52
      add y 35
      guniqhudid 10
      rotatesprite x y 40960 104 22575 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
    guniqhudid 0
    }
ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 8 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// JAMES PROX ===============================================================================================================

defstate drawjamesprox

      set x 215
      sub x wepsway_x
      add x weapon_xoffset
      sub x looking_angSR1
      set y 240
      sub y wepsway_y
      add y looking_arc
      sub y gun_pos

      clamp y 156 320
guniqhudid 0
  switch weaponcount
   case 0
      ifand CHAR_APP 1 set tilenum 19865
      else set tilenum 5470
    getp[].ammo_amount 8 weap_disp_temp2
      ifg weap_disp_temp2 0
        {
        state wep_drawup
        guniqhudid 10
        rotatesprite x y 40960 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        guniqhudid 11
        ifand gun_firemode 32 rotatesprite x y 40960 weap_disp_temp2 5472 0 2 4096 windowx1 windowy1 windowx2 windowy2
        else rotatesprite x y 40960 weap_disp_temp2 5471 0 11 4096 windowx1 windowy1 windowx2 windowy2
        }
   break
   case 1
   case 2
   case 3
   case 4
   case 5
   case 6
      set x 175
      add x weapon_xoffset
      sub x looking_angSR1
      set y 240
      set weap_disp_temp3 kickbackpic
      mulvar weap_disp_temp3 20
      add y weap_disp_temp3
      add y looking_arc
      sub y gun_pos
      ifand CHAR_APP 1 set tilenum 19865
      else set tilenum 5470
      guniqhudid 10
        rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        guniqhudid 11
        ifand gun_firemode 32 rotatesprite x y 40960 0 5472 0 2 4096 windowx1 windowy1 windowx2 windowy2
        else rotatesprite x y 40960 0 5471 0 11 4096 windowx1 windowy1 windowx2 windowy2

   break
   case 7
   case 8
   case 9
   case 10
   case 11
   case 12
   case 13
      set x 175
      add x weapon_xoffset
      sub x looking_angSR1
      set y 300
      set weap_disp_temp3 kickbackpic
      mulvar weap_disp_temp3 5
      sub y weap_disp_temp3
      add y looking_arc
      sub y gun_pos
      ifand CHAR_APP 1 set tilenum 1510
      else set tilenum 5175
	  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 14
      set x 175
      set weap_disp_temp 240
      add x weapon_xoffset
      sub x looking_angSR1
      set y weap_disp_temp
      add y looking_arc
      sub y gun_pos
      ifand CHAR_APP 1 set tilenum 1510
      else set tilenum 5175
	  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add weap_disp_temp 5
   break
   case 15
   case 16
   case 17
   case 18
   case 19
      set x 175
      add x weapon_xoffset
      sub x looking_angSR1
      set y weap_disp_temp
      add y looking_arc
      add y gun_pos
      add y 60
      ifand CHAR_APP 1 set tilenum 1509
      else set tilenum 1504
	  rotatesprite x y 40960 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add weap_disp_temp 5
   break
  endswitch
  guniqhudid 0
ends

// James' rocket punch

defstate drawjames_rocketpunch

      set x 215
      sub x wepsway_x
      add x weapon_xoffset
      sub x looking_angSR1
      set y 240
      sub y wepsway_y
      add y looking_arc
      sub y gun_pos

	  state gunpushback_display

          ifl gunsmoke_disp 40 ife INVINC 0
         ifn weaponcount 2
            {
            add gunsmoke_disp 1
            guniqhudid 18
		    sub y 20
		    sub x 32
            rotatespritea x y 40000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
            add y 20
            add x 32
            guniqhudid 0
            }

      clamp y 156 320
guniqhudid 0
ifg kickbackpic_2 0
	switch kickbackpic_2
		case 1
		case 2
		case 9
		case 10
			guniqhudid 10
			rotatesprite x y 40960 0 33533 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
			break
		case 3
		case 4
		case 7
		case 8
			guniqhudid 10
			rotatesprite x y 40960 0 33534 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
			break
		case 5
		case 6
			guniqhudid 10
			rotatesprite x y 40960 0 33535 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
			break
	endswitch
else
  switch weaponcount
   case 0
   case 1
    getp[].ammo_amount 8 weap_disp_temp2
      ifg weap_disp_temp2 0
        {
        state wep_drawup
        guniqhudid 10
        rotatesprite x y 40960 weap_disp_temp2 29884 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        }
   break
   case 2
   case 3
   state gun_smoke_display
  sub y 20
  sub x 32
 displayrandvar rot_flash 2048
 guniqhudid 10
  rotatespritea x y 20000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
  add y 20
  add x 32
  guniqhudid 11
        rotatesprite x y 40960 0 29885 0 106 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 4
   case 5
	  set gun_pushb_disp 10
	  guniqhudid 10
	  rotatesprite x y 40960 0 29885 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 6
   case 7
   case 8
   case 9
   case 10
      add y weaponcount
	  guniqhudid 10
 	  rotatesprite x y 40960 0 11153 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
	  sub x 65
	  guniqhudid 11
	  rotatesprite x y 40960 -220 CHOLDING_3 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   case 11
   case 12
   case 13
   case 14
   case 15
   case 16
	  add y weaponcount
	  ife weaponcount 15 set gun_pushb_disp 20
	  guniqhudid 10
	  rotatesprite x y 40960 64 11152 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
	  sub x 45
	  add y 30
	  guniqhudid 11
	  rotatesprite x y 40960 -200 CHOLDING_3 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
   break
   endswitch

ends

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// SLOT 9 WEAPONS
//
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// JAMES' M4 + SHOTGUN=========================================================================================

defstate drawm16shotgun

  set x 245
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 247
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  state gunpushback_display
guniqhudid 0

	ifl gunsmoke_disp2 40 ife INVINC 0 // shotgun smoke
     ifn weaponcount 2
        {
        add gunsmoke_disp2 1
        guniqhudid 19
		sub x 55
		sub y 36
        rotatespritea x y 40000 0 29952 gunsmoke_disp2 wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
		add x 55
		add y 36
        guniqhudid 0
        }

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
		sub x 65
		sub y 60
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
		add x 65
		add y 60
        guniqhudid 0
        }

    ifg gl_countd 25 // RELOADING ANIMATION ========================================================================
    switch gl_countd
     case 32
     case 33
     case 34
        guniqhudid 10
        rotatesprite x y 45152 16 5172 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
             sub x 120
             add y 15
             guniqhudid 11
            rotatesprite x y 40960 0 C_UNIQUE_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        break
     case 35
     case 36
     case 37
        guniqhudid 10
        rotatesprite x y 45152 16 5172 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 120
        add y 40
        guniqhudid 11
        rotatesprite x y 40960 1024 7893 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
        guniqhudid 12
        ifand AMMO_TYPES[cur_weap] 1 ifg explosive_shells 0 rotatesprite x y 40960 1024 7903 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
        ifand AMMO_TYPES[cur_weap] 4 ifg flechete_shells 0 rotatesprite x y 40960 1024 7867 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
        ifand AMMO_TYPES[cur_weap] 64 ifg magnum_shells 0 rotatesprite x y 40960 1024 7868 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
        ifand AMMO_TYPES[cur_weap] 1024 ifg dragon_shells 0 rotatesprite x y 40960 1024 7866 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
        break
     default
        guniqhudid 10
        rotatesprite x y 45152 0 5172 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        break
     endswitch
    else
    ifg gl_countd 0 // FIRING ANIMATION ==================================================================================
    {
    ife weaponcount 2
		{
		state gun_smoke_display
		displayrandvar gun_pushb_disp 5
		add gun_pushb_disp 4
		  add x gun_pushb_disp
		  add y gun_pushb_disp
		  sub x 65
		  sub y 60
		  state random_AR_flash
		  guniqhudid 15
		  rotatespritea x y 20000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
		  add x 65
		  add y 60
		}

    switch gl_countd
      case 24
		state gun_smoke2_display
        set weap_disp_temp6 x
        sub weap_disp_temp6 66
        set weap_disp_temp7 y
        sub weap_disp_temp7 36
        guniqhudid 10
		state random_shotg_flash
        rotatespritea weap_disp_temp6 weap_disp_temp7 40960 rot_flash2 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        guniqhudid 11
        rotatesprite x y 45152 0 5167 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        guniqhudid 12
        rotatesprite x y 45152 0 5168 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2

        sub x 90
        add y 15
        guniqhudid 13
        rotatesprite x y 36864 0 C_ARM_2 shade 106 4096 windowx1 windowy1 windowx2 windowy2
        add x 90
        sub y 15
        guniqhudid 14
        ifand JAMES_UPGRADE 32 rotatesprite x y 45152 0 5174 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
       break
      case 25
      case 26
		state gun_smoke2_display
        set weap_disp_temp6 x
        sub weap_disp_temp6 66
        set weap_disp_temp7 y
        sub weap_disp_temp7 36
        displayrandvar rot_flash 2048
        guniqhudid 10
        ifand AMMO_TYPES[cur_weap] 1
        rotatespritea weap_disp_temp6 weap_disp_temp7 16000 rot_flash 16114 0 27 4096 -255 windowx1 windowy1 windowx2 windowy2
            else
        ifand AMMO_TYPES[cur_weap] 4 ife ARTIFACTS_LOADOUT[CHAR] 7
            {
            set artifact_used 60
            rotatespritea weap_disp_temp6 weap_disp_temp7 16000 rot_flash 16114 0 1 4096 -255 windowx1 windowy1 windowx2 windowy2
            }
            else
        ifand AMMO_TYPES[cur_weap] 64
        rotatespritea weap_disp_temp6 weap_disp_temp7 16000 rot_flash 16114 0 2 4096 -255 windowx1 windowy1 windowx2 windowy2
            else
        rotatespritea weap_disp_temp6 weap_disp_temp7 16000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        guniqhudid 11
        rotatesprite x y 45152 0 5167 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        guniqhudid 12
        rotatesprite x y 45152 0 5168 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2

        sub x 90
        add y 15
        guniqhudid 13
        rotatesprite x y 36864 0 C_ARM_2 shade 106 4096 windowx1 windowy1 windowx2 windowy2
        add x 90
        sub y 15
        guniqhudid 14
        ifand JAMES_UPGRADE 32 rotatesprite x y 45152 0 5174 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
       break
     default
        ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
  set rot_flash 0
  set rot_flash2 0
        state wep_drawup
        guniqhudid 10
        rotatesprite x y 45152 weap_disp_temp2 5167 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 90
        add y 15
        guniqhudid 11
        rotatesprite x y 36864 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 90
        sub y 15
        guniqhudid 12
        ifand JAMES_UPGRADE 32 rotatesprite x y 45152 weap_disp_temp2 5174 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        break
    case 16
    case 15
    case 11
    case 10
        set tilenum 5167
        guniqhudid 10
        rotatesprite x y 45152 0 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 87
        add y 18
        guniqhudid 11
        rotatesprite x y 36864 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 87
        sub y 18
        guniqhudid 12
        ifand JAMES_UPGRADE 32 rotatesprite x y 45152 0 5174 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 14
    case 12
        set tilenum 5173
        guniqhudid 10
        rotatesprite x y 45152 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 82
        add y 21
        guniqhudid 11
        rotatesprite x y 37864 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 82
        sub y 21
        guniqhudid 12
        ifand JAMES_UPGRADE 32 rotatesprite x y 45152 weap_disp_temp2 5174 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 13
    add x 2
    add y 2

        set tilenum 5173
        guniqhudid 10
        rotatesprite x y 45152 4 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 80
        add y 24
        guniqhudid 11
        rotatesprite x y 38864 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 80
        sub y 24
        guniqhudid 12
        ifand JAMES_UPGRADE 32 rotatesprite x y 45152 weap_disp_temp2 5174 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
     endswitch
    }
    else
    switch weaponcount // Normal firing ================================================================================`
    case 0
    case 1
    case 3
    case 4
        ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
        state wep_drawup
          set tilenum 5167
          guniqhudid 10
        rotatesprite x y 45152 weap_disp_temp2 tilenum shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 90
        add y 15
        guniqhudid 11
        rotatesprite x y 36864 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 90
        sub y 15
        guniqhudid 12
        ifand JAMES_UPGRADE 32 rotatesprite x y 45152 weap_disp_temp2 5174 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 2
	state gun_smoke_display
    displayrandvar gun_pushb_disp 5
	add gun_pushb_disp 4
      add x gun_pushb_disp
      add y gun_pushb_disp
      sub x 65
      sub y 60
      state random_AR_flash
      guniqhudid 10
      rotatespritea x y 20000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      add x 65
      add y 60
      guniqhudid 11
      rotatesprite x y 45152 0 5167 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      rotatesprite x y 45152 0 5168 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 90
        add y 15
        guniqhudid 13
        rotatesprite x y 36864 weap_disp_temp2 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
        add x 90
        sub y 15
        guniqhudid 14
      ifand JAMES_UPGRADE 32 rotatesprite x y 45152 weap_disp_temp2 5240 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 5
    case 6
    case 7
    case 8
    case 9
    case 10
    case 11
    case 36
    case 37
    case 38
    case 39
    case 40
    case 41
    case 42
     guniqhudid 10
      rotatesprite x y 40960 0 5169 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      ifand JAMES_UPGRADE 32 rotatesprite x y 45152 weap_disp_temp2 5241 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 14
    case 15
    case 16
    case 17
    case 30
    case 31
    case 32
    case 33
    case 34
    case 35
      sub y 15
      ife kickbackpic 30 sub y 5
      guniqhudid 10
      rotatesprite x y 40960 0 5170 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      ifand JAMES_UPGRADE 32
          {
		  guniqhudid 11
		  rotatesprite x y 40960 0 5242 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          sub x 150
          add y 40
          guniqhudid 12
		  rotatesprite x y 40960 96 C_UNIQUE_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          }
      else
          {
          sub x 75
          add y 50
          guniqhudid 11
          rotatesprite x y 40960 96 C_UNIQUE_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          }
      break
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    case 29
      sub y 15
      ife kickbackpic 18 add y 5
      guniqhudid 10
      rotatesprite x y 40960 0 5171 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    // PRESS BOLT CATCH RELOAD
    case 43
    case 61
      guniqhudid 10
      rotatesprite x y 40960 0 5169 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 44
    case 60
      guniqhudid 10
      rotatesprite x y 40960 16 5169 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 45
    case 59
      guniqhudid 10
      rotatesprite x y 40960 32 5169 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 46
    case 58
      guniqhudid 10
      rotatesprite x y 40960 32 5169 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 50
      add y 20
      break
    case 47
    case 57
      guniqhudid 10
      rotatesprite x y 40960 32 5169 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 55
      add y 20
      break
    case 48
    case 56
      add y 5
      guniqhudid 10
      rotatesprite x y 40960 48 5169 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 49
    case 55
      add y 10
      guniqhudid 10
      rotatesprite x y 40960 64 5169 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 50
    case 54
      add y 15
      guniqhudid 10
      rotatesprite x y 40960 76 5169 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 51
    case 53
      add y 20
      guniqhudid 10
      rotatesprite x y 40960 96 5169 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 72
      add y 65
      rotatesprite x y 52500 0 CHOLDING_3 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 52
      add y 25
      guniqhudid 10
      rotatesprite x y 40960 104 5169 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 72
      add y 65
      rotatesprite x y 40960 8 CHOLDING_3 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
guniqhudid 0
ends

// James' AN-94===============================================================================================================

defstate draw_an94

  set x 225
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 237
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  state gunpushback_display

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 60
        sub y 60
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 60
        add y 60
        guniqhudid 0
        }

 ifand gun_firemode 32768 // Using the GL?
{
    switch gl_countd
    case 0
    case 43
    case 42
    case 41
    state wep_drawup
     guniqhudid 10
     rotatesprite x y 40960 weap_disp_temp2 13356 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 1
    case 2
    case 3
    case 4
     guniqhudid 10
     rotatesprite x y 40960 0 13356 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 5
    case 6
    case 7
    case 8
     guniqhudid 10
     rotatesprite x y 40960 32 13356 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 9
    case 10
    case 11
    case 12
    case 13
     guniqhudid 10
     rotatesprite x y 40960 32 13363 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 14
    case 15
    case 16
        guniqhudid 10
        rotatesprite x y 40960 0 13355 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 20
        add y 20
        guniqhudid 11
        rotatesprite x y 40960 1024 C_UNIQUE_3 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
     break
    case 17
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    case 29
        guniqhudid 10
        rotatesprite x y 40960 64 13355 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        set weap_disp_temp7 gl_countd
        mulvar weap_disp_temp7 2
        sub weap_disp_temp7 20
        add y weap_disp_temp7
        sub x 20
        state fortymm_caseless_disp
     break
    case 30
    case 31
    case 32
     guniqhudid 10
     rotatesprite x y 40960 0 13363 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 33
    case 34
    case 35
    case 36
     guniqhudid 10
     rotatesprite x y 40960 32 13363 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 37
    case 38
    case 39
    case 40
     guniqhudid 10
     rotatesprite x y 40960 0 13363 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 44
    case 45
    case 46
    case 47
    case 48
			state gun_smoke_display
            set weap_disp_temp6 x
            sub weap_disp_temp6 48
            set weap_disp_temp7 y
            sub weap_disp_temp7 32
            displayrandvar rot_flash 2048
            guniqhudid 10
            rotatespritea weap_disp_temp6 weap_disp_temp7 14000 rot_flash 16114 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
            guniqhudid 11
            rotatesprite x y 40960 0 13357 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    endswitch
}
else
switch weaponcount
case 0
case 1
case 4
case 5
case 6
  ifand gun_firemode 16384 // Ironsight?
  {
      set x 160
      set weap_disp_temp2 wepsway_x
      divvar weap_disp_temp2 2
      sub x weap_disp_temp2
      set y 140
      set weap_disp_temp3 wepsway_y
      divvar weap_disp_temp3 2
      sub y weap_disp_temp3
      set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
      divvar weap_disp_temp4 2 // divide it by 2
      add x weap_disp_temp4 // add it to x
      sub x 5 // offset it by 5
      state gunpushback_sight_display
      guniqhudid 10
      rotatesprite x y weap_disp_temp8 0 13362 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // Barrel
      sub y 40
      guniqhudid 11
      rotatespritea x y QUARTERSIZE 0 11046 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // red dot
      set x 160
      sub x wepsway_x
      sub x 10
      add x weapon_xoffset
      set y 142
      sub y wepsway_y
      guniqhudid 12
      rotatesprite x y weap_disp_temp8 0 13361 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // holographic sight
        ifl player_shade_diff -5
            {
            set weap_disp_temp3 player_shade_diff
            mulvar weap_disp_temp3 2
            sub y 45
            guniqhudid 13
            rotatespritea x y 6096 0 2587 player_shade_diff wall_pal 33 weap_disp_temp3 windowx1 windowy1 windowx2 windowy2 // Glass in holosight
            }
  }
  else
      {
      guniqhudid 0
      state wep_drawup
      state gunpushback_display
      sub x 45
      add y 40
      guniqhudid 10
      rotatesprite x y 45152 weap_disp_temp2 C_ARM_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 45
      sub y 40
      guniqhudid 11
      rotatesprite x y 40960 weap_disp_temp2 13356 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 2
case 3
  ifand gun_firemode 16384
      {
      state random_AR_flash
      guniqhudid 10
      rotatespritea 160 120 22000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
      set gun_pushb_disp 10
      state gunpushback_sight_display
      guniqhudid 11
      rotatesprite 160 142 weap_disp_temp8 0 13362 0 106 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 12
      rotatespritea 160 100 QUARTERSIZE 0 11046 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // red dot
      guniqhudid 13
      rotatesprite 160 142 weap_disp_temp8 0 13361 0 108 4096 windowx1 windowy1 windowx2 windowy2
      }
  else
      {
	  state gun_smoke_display
      displayrandvar gun_pushb_disp 5
	  add gun_pushb_disp 4
      add x gun_pushb_disp
      add y gun_pushb_disp
        sub x 60
        sub y 60
        state random_AR_flash
        guniqhudid 10
        rotatespritea x y 20500 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 15
        add y 100
        guniqhudid 11
        rotatesprite x y 45152 weap_disp_temp2 C_ARM_1 0 107 4096 windowx1 windowy1 windowx2 windowy2
        add x 45
        sub y 40
        guniqhudid 12
      rotatesprite x y 40960 0 13357 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      }
  break
case 7
case 8
case 9
case 10
      sub x 45
      add y 40
      guniqhudid 10
      rotatesprite x y 45152 0 C_ARM_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 45
      sub y 40
      guniqhudid 11
  rotatesprite x y 40960 0 13356 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 11
case 12
case 13
    guniqhudid 10
  rotatesprite x y 40960 64 13356 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 14
case 15
case 16
case 36
case 37
  add y 5
  add x 5
  ife weaponcount 15 add y 15
  guniqhudid 10
  rotatesprite x y 40960 96 13358 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 17
case 18
case 19
case 20
case 34
case 35
  add y 5
  add x 5
  guniqhudid 10
  rotatesprite x y 40960 128 13359 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 21
case 22
case 23
case 24
case 32
case 33
  ife weaponcount 32 sub y 15
  sub y 5
  sub x 5
  guniqhudid 10
  rotatesprite x y 40960 96 13359 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 25
case 26
case 27
case 28
case 29
case 30
case 31
  sub y 5
  sub x 5
  guniqhudid 10
  rotatesprite x y 40960 64 13360 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 38 // start reloading
case 58
    guniqhudid 10
  rotatesprite x y 40960 0 13358 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 39
case 57
    guniqhudid 10
  rotatesprite x y 40960 16 13358 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 40
case 56
    guniqhudid 10
  rotatesprite x y 40960 32 13358 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 41
case 55
    guniqhudid 10
  rotatesprite x y 40960 32 13358 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 42
case 54
    guniqhudid 10
  rotatesprite x y 40960 32 13358 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 43
case 53
  add y 15
  guniqhudid 10
  rotatesprite x y 40960 48 13358 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 44
case 52
  add y 20
  guniqhudid 10
  rotatesprite x y 40960 64 13358 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 45
case 51
  add y 25
  guniqhudid 10
  rotatesprite x y 40960 76 13359 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 46
case 50
  add y 30
  guniqhudid 10
  rotatesprite x y 40960 96 13359 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
case 47
case 48
case 49
  add y 45
  guniqhudid 10
  rotatesprite x y 40960 104 13359 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
  break
endswitch
guniqhudid 0
ends

// James'S Gilboa =========================================================================================

defstate draw_gilboa
    set x 240
  sub x wepsway_x
  add x weapon_xoffset
  sub x looking_angSR1

  set y 247
  sub y wepsway_y
  add y looking_arc
  sub y gun_pos
  state gunpushback_display

	ifl gunsmoke_disp 40 ife INVINC 0
     ifn weaponcount 2
        {
        add gunsmoke_disp 1
        guniqhudid 18
        sub x 54
        sub y 57
        rotatespritea x y 30000 0 29952 gunsmoke_disp wep_pal 4096 -255 windowx1 windowy1 windowx2 windowy2
        add x 54
        add y 57
        guniqhudid 0
        }
guniqhudid 0
ifand gun_firemode 32768 // Using the M16's GL?
    {
    switch gl_countd
    case 0
    case 43
    case 42
    case 41
       state wep_drawup
        sub x 50
        add y 35
        guniqhudid 10
        rotatesprite x y 40960 weap_disp_temp2 C_ARM_1 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        add x 50
        sub y 35
        guniqhudid 11
        rotatesprite x y 40960 weap_disp_temp2 19848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        break
    case 9
    case 10
    case 11
    case 12
    case 13
        guniqhudid 10
         rotatesprite x y 40960 0 19855 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
         guniqhudid 11
         ifand AMMO_TYPES[cur_weap] 32 rotatesprite x y 40960 0 19856 shade 2 4096 windowx1 windowy1 windowx2 windowy2
         else ifand AMMO_TYPES[cur_weap] 128 rotatesprite x y 40960 0 19856 shade 7 4096 windowx1 windowy1 windowx2 windowy2
         else ifand AMMO_TYPES[cur_weap] 256 rotatesprite x y 40960 0 19856 shade 54 4096 windowx1 windowy1 windowx2 windowy2
         else rotatesprite x y 40960 0 19856 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 140
        add y 5
        guniqhudid 12
        rotatesprite x y 40960 -128 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 14
    case 15
    case 16
        add y 10
        guniqhudid 10
        rotatesprite x y 40960 0 19855 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 90
        add y 5
        guniqhudid 11
        rotatesprite x y 40960 1024 C_UNIQUE_3 shade wep_pal 4100 windowx1 windowy1 windowx2 windowy2
     break
    case 17
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    case 29
        add y 10
        guniqhudid 10
        rotatesprite x y 40960 0 19855 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        set weap_disp_temp7 gl_countd
        mulvar weap_disp_temp7 2
        sub weap_disp_temp7 20
        add y weap_disp_temp7
        sub x 105
        state fortymm_case_disp
     break
    case 30
    case 31
    case 32
        guniqhudid 10
        rotatesprite x y 40960 0 19855 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 140
        add y 5
        guniqhudid 11
        rotatesprite x y 40960 -128 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 5
    case 6
    case 7
    case 8
    case 33
    case 34
    case 35
    case 36
        guniqhudid 10
        rotatesprite x y 40960 0 19850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 90
        guniqhudid 11
        rotatesprite x y 32768 0 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 1
    case 2
    case 3
    case 4
    case 37
    case 38
    case 39
    case 40
        guniqhudid 10
        rotatesprite x y 40960 0 19848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 75
        add y 20
        guniqhudid 11
        rotatesprite x y 32768 32 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    case 44
    case 45
    case 46
    case 47
    case 48
		state gun_smoke_display
        set x2 x
        sub x2 70
        set y2 y
        sub y2 40
        displayrandvar rot_flash 2048
        guniqhudid 10
        rotatespritea x2 y2 14000 rot_flash 16115 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
        sub x 50
        add y 35
        guniqhudid 11
        rotatesprite x y 40960 weap_disp_temp2 C_ARM_1 0 106 4096 windowx1 windowy1 windowx2 windowy2
        add x 50
        sub y 35
        guniqhudid 12
        rotatesprite x y 40960 weap_disp_temp2 19848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        guniqhudid 13
        rotatesprite x y 40960 weap_disp_temp2 19849 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
     break
    endswitch
    guniqhudid 0
    }
else // using gilboa's mainfiring mode
    {
    guniqhudid 0
    switch weaponcount
    case 0
    case 1
    case 4
    ifand gun_firemode 16384 // Ironsight?
        {
          set x 160
          set weap_disp_temp2 wepsway_x
          divvar weap_disp_temp2 2
          sub x weap_disp_temp2
          set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
          divvar weap_disp_temp4 2 // divide it by 2
          add x weap_disp_temp4 // add it to x
          sub x 5 // offset it by 5
          set y 135
          set weap_disp_temp3 wepsway_y
          divvar weap_disp_temp3 2
          sub y weap_disp_temp3
          state gunpushback_sight_display
          guniqhudid 10
          rotatesprite x y weap_disp_temp8 0 19852 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // barrel part of ironsight
          sub y 35
          guniqhudid 11
          rotatespritea x y 4096 0 11047 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // holotech dot
          set x 160
          sub x wepsway_x
          add x weapon_xoffset // add weaponxsway to position
          sub x 10 // offset it by 10
          set y 132
          sub y wepsway_y
          guniqhudid 12
          rotatesprite x y weap_disp_temp8 0 19851 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2 // holotech sight
          ifl player_shade_diff -5
                {
                set weap_disp_temp3 player_shade_diff
                mulvar weap_disp_temp3 2
                sub y 30
                guniqhudid 13
                rotatespritea x y 12192 0 2587 player_shade_diff wall_pal 33 weap_disp_temp3 windowx1 windowy1 windowx2 windowy2 // Glass in holosight
                }
        }
    else
        {
        ife player[].weapon_pos 9 { set LOWER_WEAPON_SOUND SELECT_WEAPON state sound_lower_weapon }
        state wep_drawup
        state gunpushback_display
        guniqhudid 10
        rotatesprite x y 40960 weap_disp_temp2 19848 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        sub x 90
        guniqhudid 11
        rotatesprite x y 32768 weap_disp_temp2 C_ARM_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
        }
      break
    case 2
    case 3
     ifand gun_firemode 16384
          {
              set x 160
              set weap_disp_temp2 wepsway_x
              divvar weap_disp_temp2 2
              sub x weap_disp_temp2
              set weap_disp_temp4 weapon_xoffset // set the weapon x sway to displaytemp4
              divvar weap_disp_temp4 2 // divide it by 2
              add x weap_disp_temp4 // add it to x
              sub x 5 // offset it by 5
              set y 135
              set weap_disp_temp3 wepsway_y
              divvar weap_disp_temp3 2
              sub y weap_disp_temp3
          ifand gun_firemode 65536 nullop else
              {
              state random_AR_flash
              guniqhudid 10
              rotatespritea 160 120 20000 0 rot_flash 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2
              }
            set gun_pushb_disp 10
             state gunpushback_sight_display
             guniqhudid 11
          rotatesprite x y weap_disp_temp8 0 19852 0 106 4096 windowx1 windowy1 windowx2 windowy2
          guniqhudid 12
          rotatesprite x y weap_disp_temp8 0 19851 0 108 4096 windowx1 windowy1 windowx2 windowy2
          sub y 35
          guniqhudid 13
          rotatespritea x y 4096 0 11047 0 0 4096 -255 windowx1 windowy1 windowx2 windowy2 // holotech dot
          }
    else
        {
		state gun_smoke_display
        displayrandvar gun_pushb_disp 5
		add gun_pushb_disp 4
          add x gun_pushb_disp
          add y gun_pushb_disp
          set x2 x
          set y2 y
          state random_AR_flash
          sub x2 54
          sub y2 57
          guniqhudid 10
          rotatespritea x2 y2 20000 0 rot_flash 0 0 8 -255 windowx1 windowy1 windowx2 windowy2
          sub x2 10
          guniqhudid 11
          rotatespritea x2 y2 20000 1024 rot_flash 0 0 8 -255 windowx1 windowy1 windowx2 windowy2
          guniqhudid 12
          rotatesprite x y 40960 0 19848 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
          guniqhudid 13
          rotatesprite x y 40960 0 19849 0 wep_pal 4096 windowx1 windowy1 windowx2 windowy2
         sub x 90
         guniqhudid 14
          rotatesprite x y 32768 0 C_ARM_2 0 107 4096 windowx1 windowy1 windowx2 windowy2
        }
      break
    case 5
    case 6
    case 7
    case 8
    case 9
    case 10
    case 11
    case 36
    case 37
    case 38
    case 39
    case 40
    case 41
    case 42
      guniqhudid 10
      rotatesprite x y 40960 0 19850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 12
    case 13
    case 14
    case 15
    case 16
    case 17
    case 30
    case 31
    case 32
    case 33
    case 34
    case 35
      ife kickbackpic 32 sub y 10
      ife kickbackpic 33 sub y 10
      ife kickbackpic 34 sub y 10
      sub y 15
      guniqhudid 10
      rotatesprite x y 40960 0 19854 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      guniqhudid 11
      rotatesprite x y 40960 0 19853 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 60
      add y 50
      guniqhudid 12
	  rotatesprite x y 50000 200 C_UNIQUE_2 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 18
    case 19
    case 20
    case 21
    case 22
    case 23
    case 24
    case 25
    case 26
    case 27
    case 28
    case 29
      sub y 15
      ife kickbackpic 18 add y 10
      ife kickbackpic 19 add y 10
      ife kickbackpic 20 add y 10
      guniqhudid 10
      rotatesprite x y 40960 0 19854 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    // PRESS BOLT CATCH RELOAD
    case 43
    case 61
      guniqhudid 10
      rotatesprite x y 40960 0 19850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 44
    case 60
      guniqhudid 10
      rotatesprite x y 40960 16 19850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 45
    case 59
      guniqhudid 10
      rotatesprite x y 40960 32 19850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 46
    case 58
      guniqhudid 10
      rotatesprite x y 40960 32 19850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 50
      add y 20
      break
    case 47
    case 57
      guniqhudid 10
      rotatesprite x y 40960 32 19850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 55
      add y 20
      break
    case 48
    case 56
      add y 5
      guniqhudid 10
      rotatesprite x y 40960 48 19850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 49
    case 55
      add y 10
      guniqhudid 10
      rotatesprite x y 40960 64 19850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 50
    case 54
      add y 15
      guniqhudid 10
      rotatesprite x y 40960 76 19850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      add x 57
      add y 50
      break
    case 51
    case 53
      add y 20
      guniqhudid 10
      rotatesprite x y 40960 96 19850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 57
      add y 48
      guniqhudid 11
      rotatesprite x y M4A1_SIZE 0 CHOLDING_3 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    case 52
      add y 35
      guniqhudid 10
      rotatesprite x y 40960 104 19850 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      sub x 57
      add y 48
      guniqhudid 11
      rotatesprite x y M4A1_SIZE 104 CHOLDING_3 shade wep_pal 4096 windowx1 windowy1 windowx2 windowy2
      break
    endswitch
    }
guniqhudid 0
ends

