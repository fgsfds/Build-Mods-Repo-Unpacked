/*
-------------------------------------------------------------------------------
===============================================================================

         -ooo:             +oo-            `+oo.       ./+oooooooooo+/:
        /NMMMN+            NMMNo`         -dMMM/      .mMMNmmmmmmmmmMMNo
       /NMd:mMMo           NMMNMd:      `oNMNMM/      :MMM/.........mMMh
      oNMd. -mMMy`         NMN:mMNs`   -hMm/mMM/      :MMM:         ::-.
    `sMMh`   .dMMh`        NMN .sNMd:`oNMh. mMM/      :MMM:
   `yMMMdhhhhhmMMMd.       NMN   /mMNdMm+`  mMM/      :MMM:         ss+:
  `hMMdhhhhhhhhhmMMm-      NMN    .yMMh.    mMM/      :MMM/.........mMMh
 .dMMs`         .hMMm:     NMN      :/`     mMM/      .mMMNmmmmmmmmmMMNo
 :oo+            `+oo+     +o+              +oo.       ./++ooooooooo+/:

###############################################################################
+ The AMC Squad
+ CON code by James Stanfield, Cedric "Sangman" Haegeman, Dino Bollinger,
+              Mikko Sandt, Cedric "Zaxtor" Lutes and Dan "Danarama" Gaskill
-------------------------------------------------------------------------------
* See AMC_MAIN.CON for a full list of script authors.

Feel free to use any code in the game for your own uses; just make
sure to mention the authors and/or "The AMC Squad" in your credits.
--------------------------------------------------------------------------------
NOTES:

--------------------------------------------------------------------------------
*/

// =====================================================================================================================
// WEAPON SHOP SHOPKEEPER
// ======================================================================================================================

defstate WEAPON_SHOP_INTERFACE
rotatesprite 162 103 43690 0 13539 0 0 8 0 0 xdim ydim

		qputs 409 Budget: %ld
		qsprintf 409 409 AMC_BUDGET
 		screentext 2822 240 17 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

ife INFO_SEL 0 // James
	{
	rotatesprite 206 60 43690 0 3589 20 27 8 0 0 xdim ydim
	set gui_pos_x 35
	set gui_pos_y 45
	state CURSOR_OVER_ITEM
	qputs 409 FN-57 Pistol
	ife NEW_IN_STORE[2] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[2] 0
			{
			setarray NEW_IN_STORE[2] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim

		ifand BITS_PRESS 4
			{
				ifg SPECIALIST_EQUIPMENT[2] 0 soundonce COMP_INVALID
				else
				ifl AMC_BUDGET 15 soundonce COMP_INVALID
				else
					{
					sub AMC_BUDGET 15
					savegamevar AMC_BUDGET
					setarray SPECIALIST_EQUIPMENT[2] 1
					writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
					sound CASHREG
					}
			}

		ifg SPECIALIST_EQUIPMENT[2] 0 qstrcpy 409 3080
		else qputs 409 Cost: 15
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 64 18000 0 10391 0 0 8 0 0 xdim ydim

		qputs 409 A pistol with armour-piercing rounds;
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 it has a 20-round magazine and comes
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 with a laser-sight, activated with
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 alt-fire.
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		}

	add gui_pos_y 10
	state CURSOR_OVER_ITEM
	qputs 409 MP5
	ife NEW_IN_STORE[8] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[8] 0
			{
			setarray NEW_IN_STORE[8] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim

		ifg SPECIALIST_EQUIPMENT[8] 0 qstrcpy 409 3080
		else qputs 409 Cost: 20
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 212 61 17000 0 11887 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[8] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[8] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of James slot 2 bracket

		qputs 409 A suppressed submachine gun that
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 uses subsonic rounds; meaning it
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 makes very little noise, but has low
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 damage output. It also comes with a
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 red-dot sight for accuracy, and an
 		screentext 2822 163 147 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 underslung grenade launcher for
 		screentext 2822 163 153 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 those unsubtle moments.
 		screentext 2822 163 159 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		}

	ife SAVED_MATVEI 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM

		qputs 409 PP-19
		ife NEW_IN_STORE[15] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 8 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[15] 0
				{
				setarray NEW_IN_STORE[15] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim

			ifg SPECIALIST_EQUIPMENT[15] 0 qstrcpy 409 3080
			else qputs 409 Cost: 20
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 19000 0 12063 0 0 8 0 0 xdim ydim


			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[15] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[15] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of James slot 3 bracket

			qputs 409 A Russian-made SMG using armour-
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 piercing rounds. It comes with a
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 large helical-feed magazine
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 that holds 64 rounds.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

			}

		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 AN-94
		ife NEW_IN_STORE[22] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 8 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[22] 0
				{
				setarray NEW_IN_STORE[22] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[22] 0 qstrcpy 409 3080
			else qputs 409 Cost: 25
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 64 17500 0 13356 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[22] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 25 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 25
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[22] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of James' slot 4 bracket

			qputs 409 A Russian-made AR with an underslung
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 GL and a HoloSight. It's known for its
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 unique 2-round burst ability that is
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 almost perfectly accurate.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

			}

		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 OTs-33
		ife NEW_IN_STORE[28] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 8 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[28] 0
				{
				setarray NEW_IN_STORE[28] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim

			ifg SPECIALIST_EQUIPMENT[28] 0 qstrcpy 409 3080
			else qputs 409 Cost: 20
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 208 61 19500 0 13413 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[28] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[28] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of James' slot 5 bracket

			qputs 409 A Russian-made Machine-Pistol; it has
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 a large magazine of 27 rounds and is
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 a reliable sidearm.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

			}


		} // end of matvei weapons

	ife EP1_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM

		qputs 409 Gold Jericho
		ife NEW_IN_STORE[36] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[36] 0
				{
				setarray NEW_IN_STORE[36] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[36] 0 qstrcpy 409 3080
			else qputs 409 Cost: 70
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 208 61 19500 0 14612 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[36] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 70 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 70
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[36] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of James' slot 6 bracket

			qputs 409 A golden Jericho; fires gold rounds
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 effective against all enemies, and has
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 a mag capacity of 9 rounds.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

			}
		}

	ife NELSON_LICENSE 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM

		qputs 409 PPK
		ife NEW_IN_STORE[44] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
				ife NEW_IN_STORE[44] 0
					{
					setarray NEW_IN_STORE[44] 1
					sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
					}
 				screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
				ifg SPECIALIST_EQUIPMENT[44] 0 qstrcpy 409 3080
				else qputs 409 Cost: 15
 				screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				rotatesprite 208 61 20500 0 15872 0 0 8 0 0 xdim ydim

				ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[44] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 15 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 15
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[44] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of James' slot 7 bracket

				qputs 409 The PPK pistol fires .32-calibre
 				screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 rounds. It has a suppressor, and
 				screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 a mag capacity of 8 rounds.
 				screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}

		add gui_pos_y 10
		state CURSOR_OVER_ITEM

		qputs 409 LR300
		ife NEW_IN_STORE[45] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
				ife NEW_IN_STORE[45] 0
					{
					setarray NEW_IN_STORE[45] 1
					sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
					}
 				screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
				ifg SPECIALIST_EQUIPMENT[45] 0 qstrcpy 409 3080
				else qputs 409 Cost: 35
 				screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				rotatesprite 210 70 15500 0 15893 0 11 8 0 0 xdim ydim

				ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[45] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 35 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 35
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[45] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of James slot 8 bracket

				qputs 409 The LR300 comes with an M203, optics,
 				screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 laser-sight, and also has a
 				screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 hi-capacity mag of 60 rounds.
 				screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	ife EP2_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM

		qputs 409 Gold HK CAWS
		ife NEW_IN_STORE[61] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
				ife NEW_IN_STORE[61] 0
					{
					setarray NEW_IN_STORE[61] 1
					sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
					}
 				screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
				ifg SPECIALIST_EQUIPMENT[61] 0 qstrcpy 409 3080
				else qputs 409 Cost: 150
 				screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				rotatesprite 210 61 17000 0 19760 0 11 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[61] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 150 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 150
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[61] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of James slot 9 bracket

				qputs 409 A Golden HK CAWS; useful against all
 				screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 enemies but ammo is very limited.
 				screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 Has a magazine of 10 rounds.
 				screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	ifn FAITHFUL_LICENSE 0
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM

		qputs 409 Gilboa AR
		ife NEW_IN_STORE[72] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
				ife NEW_IN_STORE[72] 0
					{
					setarray NEW_IN_STORE[72] 1
					sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
					}
 				screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
				ifg SPECIALIST_EQUIPMENT[72] 0 qstrcpy 409 3080
				else
					{
					ifand FAITHFUL_LICENSE 4 // has cola cap discount
					qputs 409 Cost: 45
					else
					qputs 409 Cost: 150
					}
 				screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				rotatesprite 210 67 20000 0 19848 0 11 8 0 0 xdim ydim

				ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[72] 0 soundonce COMP_INVALID
					else
					ifand FAITHFUL_LICENSE 4 // has bottle cap discount?
						{
						ifl AMC_BUDGET 45 soundonce COMP_INVALID
						else
							{

							sub AMC_BUDGET 45
							savegamevar AMC_BUDGET
							setarray SPECIALIST_EQUIPMENT[72] 1
							writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
							sound CASHREG
							break
							}
						}
					else
						{
						ifl AMC_BUDGET 150 soundonce COMP_INVALID
						else
							{

							sub AMC_BUDGET 150
							savegamevar AMC_BUDGET
							setarray SPECIALIST_EQUIPMENT[72] 1
							writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
							sound CASHREG
							break
							}
						}
					} // End of James slot 10 bracket

				qputs 409 A dual-barreled assault rifle with
 				screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 2 mags totalling 60 rounds together.
 				screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 Also has a cased launcher and a sight.
 				screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	}
else
ife INFO_SEL 1 // Zaxtor
	{
	rotatesprite 206 60 43690 0 3590 20 27 8 0 0 xdim ydim
	set gui_pos_x 35
	set gui_pos_y 45
	state CURSOR_OVER_ITEM
	qputs 409 Leadgun
	ife NEW_IN_STORE[5] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim


	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[5] 0
			{
			setarray NEW_IN_STORE[5] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
		ifg SPECIALIST_EQUIPMENT[5] 0 qstrcpy 409 3080
		else qputs 409 Cost: 20
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 60 19000 0 8316 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[5] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[5] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Zaxtor slot 1 bracket

		qputs 409 A quad-barreled shotgun; what more
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 needs to be said? Apart from the fact
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 it has monstrous recoil and low
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 accuracy of course.
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		}

	add gui_pos_y 10
	state CURSOR_OVER_ITEM
	qputs 409 RC-APSMG
	ife NEW_IN_STORE[23] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[23] 0
			{
			setarray NEW_IN_STORE[23] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim

		ifg SPECIALIST_EQUIPMENT[23] 0 qstrcpy 409 3080
		else qputs 409 Cost: 15
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 60 15000 0 13366 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[23] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 15 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 15
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[23] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Zaxtor slot 2 bracket

		qputs 409 A compact submachine gun firing
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 Armour-piercing rounds. It's light
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 but has poor accuracy.
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		}

	ife EP1_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Autorifle
		ife NEW_IN_STORE[37] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[37] 0
				{
				setarray NEW_IN_STORE[37] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[37] 0 qstrcpy 409 3080
			else qputs 409 Cost: 50
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 60 15500 0 14626 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[37] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 50 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 50
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[37] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Zaxtor slot 3 bracket

			qputs 409 A Golden Autorifle that fires gold
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 rounds; effective against both
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 armoured and supernatural foes.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	ife EP2_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Shotgun
		ife NEW_IN_STORE[62] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[62] 0
				{
				setarray NEW_IN_STORE[62] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[62] 0 qstrcpy 409 3080
			else qputs 409 Cost: 125
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 60 19000 0 19767 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[62] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 125 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 125
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[62] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Zaxtor slot 4 bracket

			qputs 409 A golden shotgun that fires gold
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 shells; effective against armour
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 and supernatural enemies.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	}
else
ife INFO_SEL 2 // Merlijn
	{
	ifand CHAR_APP 4 rotatesprite 206 60 43690 0 25567 20 27 8 0 0 xdim ydim else
	rotatesprite 206 60 43690 0 3591 20 27 8 0 0 xdim ydim
	set gui_pos_x 35
	set gui_pos_y 45
	state CURSOR_OVER_ITEM
		qputs 409 Thunderbuss
		ife NEW_IN_STORE[102] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[102] 0
				{
				setarray NEW_IN_STORE[102] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[102] 0 qstrcpy 409 3080
			else qputs 409 Cost: 30
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 205 60 16000 0 29135 0 0 0 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[102] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 30 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 30
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[102] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Merlijn slot 1 bracket

			qputs 409 A strange lightning cannon; very
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 useful against armoured and super
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 natural enemies.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}

	ife EP1_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Dagger
		ife NEW_IN_STORE[38] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[38] 0
				{
				setarray NEW_IN_STORE[38] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[38] 0 qstrcpy 409 3080
			else qputs 409 Cost: 50
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 205 60 16000 0 4984 0 0 0 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[38] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 50 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 50
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[38] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Merlijn slot 1 bracket

			qputs 409 A golden dagger, not hugely damaging
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 but effective against supernatural
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 AND armoured enemies alike.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

ife NELSON_LICENSE 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM

		qputs 409 Scatter Bow
		ife NEW_IN_STORE[56] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
				ife NEW_IN_STORE[56] 0
					{
					setarray NEW_IN_STORE[56] 1
					sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
					}
 				screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
				ifg SPECIALIST_EQUIPMENT[56] 0 qstrcpy 409 3080
				else qputs 409 Cost: 25
 				screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				rotatesprite 205 60 8692 0 18091 0 0 8 0 0 xdim ydim

				ifand BITS_PRESS 4
						{
						ifg SPECIALIST_EQUIPMENT[56] 0 soundonce COMP_INVALID
						else
						ifl AMC_BUDGET 25 soundonce COMP_INVALID
						else
							{
							sub AMC_BUDGET 25
							savegamevar AMC_BUDGET
							setarray SPECIALIST_EQUIPMENT[56] 1
							writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
							sound CASHREG
							break
							}
						} // End of Merlijn's slot 2 bracket

				qputs 409 This bow fires unique arrows that
 				screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 split into 5 separate projectiles;
 				screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 whilst harder to hit all marks, it's
 				screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 also more forgiving of misses.
 				screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}

		}

		ife EP2_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Sword
		ife NEW_IN_STORE[63] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[63] 0
				{
				setarray NEW_IN_STORE[63] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim

			ifg SPECIALIST_EQUIPMENT[63] 0 qstrcpy 409 3080
			else qputs 409 Cost: 100
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 205 60 12192 0 19784 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[63] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 99 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 100
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[63] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Merlijn slot 3 bracket

			qputs 409 A golden sword - whilst expensive,
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 it's effective against supernatural
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 and armoured enemies.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	}
else
ife INFO_SEL 3 // Highwire
	{
	ifand CHAR_APP 16 rotatesprite 206 60 43690 0 25568 20 27 8 0 0 xdim ydim
	else rotatesprite 206 60 43690 0 3593 20 27 8 0 0 xdim ydim
	set gui_pos_x 35
	set gui_pos_y 45
	state CURSOR_OVER_ITEM
	qputs 409 M16A2
	ife NEW_IN_STORE[7] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim


	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[7] 0
			{
			setarray NEW_IN_STORE[7] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
		ifg SPECIALIST_EQUIPMENT[7] 0 qstrcpy 409 3080
		else qputs 409 Cost: 20
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 67 16000 0 11872 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[7] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[7] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Highwire slot 1 bracket

		qputs 409 An assault rifle with a grenade
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 launcher. It's weaker than the AKM,
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 but it's more accurate. Comes with
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 an M203 grenade launcher.
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		}

	add gui_pos_y 10
	state CURSOR_OVER_ITEM
	qputs 409 Automag
	ife NEW_IN_STORE[32] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim


	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[32] 0
			{
			setarray NEW_IN_STORE[32] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
		ifg SPECIALIST_EQUIPMENT[32] 0 qstrcpy 409 3080
		else qputs 409 Cost: 20
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 61 16000 0 13431 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[32] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[32] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Highwire slot 2 bracket

		qputs 409 A powerful semi-auto pistol firing a
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 .44-calibre bullet; has an 8-round mag.
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 Ammo is hard to come by however, but
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 it's a reliable weapon otherwise.
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		}

	ife SAVED_MATVEI 1
	{
	add gui_pos_y 10
	state CURSOR_OVER_ITEM
	qputs 409 RPKM
	ife NEW_IN_STORE[11] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 8 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[11] 0
			{
			setarray NEW_IN_STORE[11] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
		ifg SPECIALIST_EQUIPMENT[11] 0 qstrcpy 409 3080
		else qputs 409 Cost: 20
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 205 61 17000 0 11881 0 0 0 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[11] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[11] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Highwire slot 3 bracket

		qputs 409 A light machine gun; unlike the RPK
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 it doesn't have a large drum magazine
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 or a bipod - but it's more accurate
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 for running and gunning.
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		}

	add gui_pos_y 10
	state CURSOR_OVER_ITEM
	qputs 409 Saiga-12
	ife NEW_IN_STORE[13] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 8 16 0 5 8 1 1 0 0 0 xdim ydim


	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[13] 0
			{
			setarray NEW_IN_STORE[13] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim

		ifg SPECIALIST_EQUIPMENT[13] 0 qstrcpy 409 3080
		else qputs 409 Cost: 20
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 67 16000 0 12096 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[13] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[13] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Highwire slot 4 bracket

		qputs 409 A Semi-auto shotgun; has an 8-round
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 magazine, rather than the manual
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 shell-by-shell loading of a standard
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 shotgun.
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		}

	add gui_pos_y 10
	state CURSOR_OVER_ITEM
	qputs 409 Pribor-3B
	ife NEW_IN_STORE[14] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 8 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[14] 0
			{
			setarray NEW_IN_STORE[14] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim

		ifg SPECIALIST_EQUIPMENT[14] 0 qstrcpy 409 3080
		else qputs 409 Cost: 25
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 220 65 18000 0 11031 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[14] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 25 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 25
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[14] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Highwire slot 5 bracket

		qputs 409 A prototype 3-barrelled AR
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 that fires heavy armour-piercing
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 bullets. Has a Zilla missile
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 launcher module attached too!
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		}

	add gui_pos_y 10
	state CURSOR_OVER_ITEM
	qputs 409 PP-2000
	ife NEW_IN_STORE[10] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 8 16 0 5 8 1 1 0 0 0 xdim ydim


	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[10] 0
			{
			setarray NEW_IN_STORE[10] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
		ifg SPECIALIST_EQUIPMENT[10] 0 qstrcpy 409 3080
		else qputs 409 Cost: 15
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 61 19000 0 11860 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[10] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 15 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 15
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[10] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Highwire slot 6 bracket

		qputs 409 A submachine gun; fires a smaller-
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 calibre bullet than the Tokarev. It's
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 ideal for those who prefer volume of
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 fire over the semi-auto pistol.
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		}

	add gui_pos_y 10
	state CURSOR_OVER_ITEM
	qputs 409 PKM
	ife NEW_IN_STORE[35] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 8 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[35] 0
			{
			setarray NEW_IN_STORE[35] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
		ifg SPECIALIST_EQUIPMENT[35] 0 qstrcpy 409 3080
		else qputs 409 Cost: 25
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 61 15500 0 13452 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[35] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 25 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 25
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[35] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Highwire slot 7 bracket

		qputs 409 A machine gun with a 100-round tin
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 magazine. Very heavy, but can lay
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 down an impressive amount of fire-
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 power.
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		}

	} // End of Matvei guns

		ife EP1_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Skorpion
		ife NEW_IN_STORE[39] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[39] 0
				{
				setarray NEW_IN_STORE[39] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim

			ifg SPECIALIST_EQUIPMENT[39] 0 qstrcpy 409 3080
			else qputs 409 Cost: 75
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 17000 0 13509 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[39] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 75 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 75
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[39] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Highwire slot 8 bracket

			qputs 409 A small SMG firing gold standard
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 rounds. Has a high rate of fire, but
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 a small magazine capacity of 20
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 rounds.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

		ife EP2_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold T-Threat
		ife NEW_IN_STORE[65] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim


		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[65] 0
				{
				setarray NEW_IN_STORE[65] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim

			ifg SPECIALIST_EQUIPMENT[65] 0 qstrcpy 409 3080
			else qputs 409 Cost: 150
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 205 62 18000 0 19775 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[65] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 150 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 150
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[65] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Highwire slot 9 bracket

			qputs 409 A golden Chiappa Triple Threat - it
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 fires gold standard shells. Has little
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 ammo, but can damage armour and the
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 supernatural as well.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}
	}
else
ife INFO_SEL 4 // Sang
	{
	rotatesprite 206 60 43690 0 3598 20 27 8 0 0 xdim ydim
	set gui_pos_x 35
	set gui_pos_y 45
	state CURSOR_OVER_ITEM
	qputs 409 BAR Machine Gun
	ife NEW_IN_STORE[6] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[6] 0
			{
			setarray NEW_IN_STORE[6] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
		ifg SPECIALIST_EQUIPMENT[6] 0 qstrcpy 409 3080
		else qputs 409 Cost: 20
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 205 61 16000 0 11114 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[6] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[6] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Sang slot 1 bracket

		qputs 409 A vintage machine gun;
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 more powerful than the
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 Uzi but has limited ammo.
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 Has a mag of 20 rounds.
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		}


	ife SAVED_MATVEI 1
	{
	add gui_pos_y 10
	state CURSOR_OVER_ITEM

	qputs 409 PPSH41
	ife NEW_IN_STORE[16] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 8 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[16] 0
			{
			setarray NEW_IN_STORE[16] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
		ifg SPECIALIST_EQUIPMENT[16] 0 qstrcpy 409 3080
		else qputs 409 Cost: 15
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 61 18000 0 12056 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[16] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 15 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 15
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[16] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Sang slot 2 bracket

		qputs 409 A vintage SMG;
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 has a huge drum of 71 rounds,
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 but has little stopping power.
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		}

		set gui_pos_y 65
		state CURSOR_OVER_ITEM
		qputs 409 SR-2
		ife NEW_IN_STORE[34] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 8 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[34] 0
				{
				setarray NEW_IN_STORE[34] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[34] 0 qstrcpy 409 3080
			else qputs 409 Cost: 20
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 14000 0 13447 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[34] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[34] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Sang slot 3 bracket

			qputs 409 A Russian-made SMG using armour-
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 piercing rounds. It comes with an
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 optical sight activated with alt-fire
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 that allows for more accurate shots.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

			}

		ife EP1_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Ring
		ife NEW_IN_STORE[40] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[40] 0
				{
				setarray NEW_IN_STORE[40] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[40] 0 qstrcpy 409 3080
			else qputs 409 Cost: 60
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			ifand CHAR_APP 2 rotatesprite 205 60 22000 0 23843 0 0 0 0 0 xdim ydim
			else rotatesprite 205 60 22000 0 13490 0 0 0 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[40] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 60 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 60
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[40] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Sang slot 4 bracket

			qputs 409 A golden ring; fires magic that is
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 less powerful than the normal ring,
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 but does normal damage to both
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 supernatural and armoured enemies.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

			}
		}

	ife EP2_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Spell
		ife NEW_IN_STORE[64] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[64] 0
				{
				setarray NEW_IN_STORE[64] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[64] 0 qstrcpy 409 3080
			else qputs 409 Cost: 100
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 205 60 32000 0 19803 0 0 0 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[64] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 100 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 100
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[64] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Sang slot 5 bracket

			qputs 409 A golden spell; fires magic that
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 can damage armour and supernatural
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 enemies as well.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

			}
		}

ife NELSON_LICENSE 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 FN F2000
		ife NEW_IN_STORE[71] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[71] 0
				{
				setarray NEW_IN_STORE[71] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[71] 0 qstrcpy 409 3080
			else qputs 409 Cost: 35
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 16000 0 19837 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[71] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 35 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 35
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[71] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Sang slot 6 bracket

			qputs 409 An assault rifle with a scope
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 and an attached 40mm cased
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 grenade launcher.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 Holds a 30-round mag.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

			}
		}
ifn FAITHFUL_LICENSE 0
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 AK-47
		ife NEW_IN_STORE[74] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[74] 0
				{
				setarray NEW_IN_STORE[74] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[74] 0 qstrcpy 409 3080
			else
				{
				ifand FAITHFUL_LICENSE 2 qputs 409 Cost: 35
				else qputs 409 Cost: 125
				}
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 205 61 18000 0 19902 0 0 8 0 0 xdim ydim

				ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[74] 0 soundonce COMP_INVALID
					else
					ifand FAITHFUL_LICENSE 2 // has bottle cap discount?
						{
						ifl AMC_BUDGET 35 soundonce COMP_INVALID
						else
							{

							sub AMC_BUDGET 35
							savegamevar AMC_BUDGET
							setarray SPECIALIST_EQUIPMENT[74] 1
							writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
							sound CASHREG
							break
							}
						}
					else
						{
						ifl AMC_BUDGET 125 soundonce COMP_INVALID
						else
							{

							sub AMC_BUDGET 125
							savegamevar AMC_BUDGET
							setarray SPECIALIST_EQUIPMENT[74] 1
							writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
							sound CASHREG
							break
							}
						}
					} // End of Sang slot 7 bracket

			qputs 409 An assault rifle with a scope,
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 GP-30 caseless launcher, and
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 a battle scanner.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 Holds a 30-round mag.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	}


	}
else
ife INFO_SEL 5 // Rusty
	{
	rotatesprite 206 60 43690 0 3600 20 27 8 0 0 xdim ydim
	set gui_pos_x 35
	set gui_pos_y 45
	state CURSOR_OVER_ITEM
	qputs 409 Over-under shotgun
	ife NEW_IN_STORE[3] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[3] 0
			{
			setarray NEW_IN_STORE[3] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
		ifg SPECIALIST_EQUIPMENT[3] 0 qstrcpy 409 3080
		else qputs 409 Cost: 20
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 61 16500 0 11090 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[3] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[3] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Rusty slot 1 bracket

		qputs 409 A vintage Shotgun;
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 far more accurate than
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 the autoshotgun but can
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 only hold 2 shells.
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		}

	add gui_pos_y 10
	state CURSOR_OVER_ITEM
	qputs 409 M41C
	ife NEW_IN_STORE[9] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[9] 0
			{
			setarray NEW_IN_STORE[9] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
		ifg SPECIALIST_EQUIPMENT[9] 0 qstrcpy 409 3080
		else qputs 409 Cost: 20
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 61 20000 0 11866 0 13 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[9] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[9] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Rusty slot 2 bracket

		qputs 409 An assault rifle with
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 an underslung flamer that
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 uses pulse cells. Has a mag
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 capacity of 99.
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		}

	ife SAVED_MATVEI 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 AK-74
		ife NEW_IN_STORE[27] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 8 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[27] 0
				{
				setarray NEW_IN_STORE[27] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[27] 0 qstrcpy 409 3080
			else qputs 409 Cost: 30
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 17000 0 13405 0 13 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[27] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 30 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 30
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[27] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Highwire slot 3 bracket

			qputs 409 An assault rifle with an
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 underslung grenade launcher,
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 HP rounds, and Kobra sight. Has
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 a mag capacity of 30 rounds.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

			}
		}
	ife NELSON_LICENSE 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM

		qputs 409 Alofs Shotgun
		ife NEW_IN_STORE[116] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
				ife NEW_IN_STORE[116] 0
					{
					setarray NEW_IN_STORE[116] 1
					sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
					}
 				screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
				ifg SPECIALIST_EQUIPMENT[116] 0 qstrcpy 409 3080
				else qputs 409 Cost: 15
 				screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				rotatesprite 208 61 19000 0 33752 0 0 8 0 0 xdim ydim

				ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[116] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 15 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 15
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[116] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					}

				qputs 409 A single barrel shotgun with a
 				screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 unique contraption allowing it
 				screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 to hold 4 more shells.
 				screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}
	
	ife EP1_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Revolver
		ife NEW_IN_STORE[41] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[41] 0
				{
				setarray NEW_IN_STORE[41] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[41] 0 qstrcpy 409 3080
			else qputs 409 Cost: 50
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 205 61 18300 0 14618 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[41] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 50 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 50
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[41] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Rusty slot 4 bracket

			qputs 409 A golden revolver, firing gold rounds
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 effective against armour and magic.
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 Holds 6 shells (surprise surprise)
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

			}
		}

	ife EP2_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Lever Action
		ife NEW_IN_STORE[66] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[66] 0
				{
				setarray NEW_IN_STORE[66] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[66] 0 qstrcpy 409 3080
			else qputs 409 Cost: 100
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 205 61 20000 0 19813 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[66] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 100 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 100
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[66] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Rusty' slot 5 bracket

			qputs 409 A golden lever-action rifle, firing
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 gold shells effective against armour
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 and supernatural enemies.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

			}
		}

	ifn FAITHFUL_LICENSE 0
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM

		qputs 409 AutoM Shotgun
		ife NEW_IN_STORE[83] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
				ife NEW_IN_STORE[83] 0
					{
					setarray NEW_IN_STORE[83] 1
					sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
					}
 				screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
				ifg SPECIALIST_EQUIPMENT[83] 0 qstrcpy 409 3080
				else
					{
					ifand FAITHFUL_LICENSE 8 // has cola cap discount
					qputs 409 Cost: 30
					else
					qputs 409 Cost: 100
					}
 				screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				rotatesprite 210 61 16500 0 22672 0 0 8 0 0 xdim ydim

				ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[83] 0 soundonce COMP_INVALID
					else
					ifand FAITHFUL_LICENSE 8 // has bottle cap discount?
						{
						ifl AMC_BUDGET 30 soundonce COMP_INVALID
						else
							{

							sub AMC_BUDGET 30
							savegamevar AMC_BUDGET
							setarray SPECIALIST_EQUIPMENT[83] 1
							writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
							sound CASHREG
							break
							}
						}
					else
						{
						ifl AMC_BUDGET 100 soundonce COMP_INVALID
						else
							{

							sub AMC_BUDGET 100
							savegamevar AMC_BUDGET
							setarray SPECIALIST_EQUIPMENT[83] 1
							writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
							sound CASHREG
							break
							}
						}
					} // End of Rusty slot 6 bracket

				qputs 409 A fully-automatic shotgun, with
 				screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
				qputs 409 a 20-round detachable magazine.
 				screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}


	}
else
ife INFO_SEL 6 // Geoffrey
	{
	rotatesprite 206 60 43690 0 3603 20 27 8 0 0 xdim ydim
	set gui_pos_x 35
	set gui_pos_y 45
	state CURSOR_OVER_ITEM
	qputs 409 AP SMG
	ife NEW_IN_STORE[12] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[12] 0
			{
			setarray NEW_IN_STORE[12] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
		ifg SPECIALIST_EQUIPMENT[12] 0 qstrcpy 409 3080
		else qputs 409 Cost: 15
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 64 17000 0 6550 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[12] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 15 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 15
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[12] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Geoffrey slot 1 bracket

		qputs 409 An armour-piercing SMG;
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 Popular choice for Martian criminals.
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 Has a mag capacity of 80 rounds.
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		}

		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Plasma shotgun
		ife NEW_IN_STORE[20] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[20] 0
				{
				setarray NEW_IN_STORE[20] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[20] 0 qstrcpy 409 3080
			else qputs 409 Cost: 20
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 60 21000 0 6512 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[20] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 20 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 20
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[20] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Geoffrey slot 2 bracket

			qputs 409 A relatively new weapon, the plasma
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 shotgun fires a burst of deadly blue
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 wavelength plasma.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}

	ife EP1_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Magshot
		ife NEW_IN_STORE[42] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[42] 0
				{
				setarray NEW_IN_STORE[42] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[42] 0 qstrcpy 409 3080
			else qputs 409 Cost: 50
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 17500 0 14594 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[42] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 50 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 50
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[42] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Geoffrey slot 3 bracket

			qputs 409 A Golden Magshot; stronger than the
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 standard one but lacks upgradability
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 Has a 3-shot burst alt-fire.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	ife EP2_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Shotgun
		ife NEW_IN_STORE[67] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[67] 0
				{
				setarray NEW_IN_STORE[67] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[67] 0 qstrcpy 409 3080
			else qputs 409 Cost: 100
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 17000 0 19809 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[67] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 100 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 100
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[67] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Geoffrey slot 4 bracket

			qputs 409 A golden shotgun; fires gold
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 standard shells that damage both
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 armour and supernatural.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	}
else
ife INFO_SEL 7 // Mikko
	{
	rotatesprite 206 60 43690 0 3606 20 27 8 0 0 xdim ydim
	set gui_pos_x 35
	set gui_pos_y 45
	state CURSOR_OVER_ITEM
	qputs 409 MDF Magnum
	ife NEW_IN_STORE[4] 0 myospal 81 gui_pos_y 14606 0 0 0
 	screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

	ifl gui_pos_x_temp 50
	 ifg gui_pos_x_temp -50
	  ifl gui_pos_y_temp 5
	   ifg gui_pos_y_temp -5
		{
		ife NEW_IN_STORE[4] 0
			{
			setarray NEW_IN_STORE[4] 1
			sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
			}
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
		ifg SPECIALIST_EQUIPMENT[4] 0 qstrcpy 409 3080
		else qputs 409 Cost: 15
 		screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		rotatesprite 210 66 18500 0 11102 0 0 8 0 0 xdim ydim

		ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[4] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 15 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 15
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[4] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Mikko slot 1 bracket

		qputs 409 A Custom .44 Handcannon;
 		screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 more powerful than the pistol
 		screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 but is less accurate and has
 		screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		qputs 409 a smaller ammo count.
 		screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
		}

		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Nailgun
		ife NEW_IN_STORE[33] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[33] 0
				{
				setarray NEW_IN_STORE[33] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[33] 0 qstrcpy 409 3080
			else qputs 409 Cost: 15
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 60 18000 0 13440 0 0 0 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[33] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 15 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 15
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[33] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Mikko slot 2 bracket

			qputs 409 A construction nailgun, tweaked for
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 combat use. Fires armour-piercing
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 nails at rapid speeds.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}

	ifand FOUND_ADS 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 MDF Plasma gun
		ife NEW_IN_STORE[19] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 1 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[19] 0
				{
				setarray NEW_IN_STORE[19] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[19] 0 qstrcpy 409 3080
			else qputs 409 Cost: 15
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 23500 0 7031 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[19] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 15 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 15
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[19] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Mikko slot 3 bracket

			qputs 409 A plasma gun created by the Mars
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 Defence Force. Fires very fast, but
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 has a notorious overheating problem.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	ife EP1_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Rose
		ife NEW_IN_STORE[43] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[43] 0
				{
				setarray NEW_IN_STORE[43] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[43] 0 qstrcpy 409 3080
			else qputs 409 Cost: 75
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 207 65 19000 0 13484 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[43] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 75 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 75
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[43] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Mikko slot 4 bracket

			qputs 409 A Custom .44 Handcannon;
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 fires gold standard rounds
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 good against all enemy types,
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 but lacks ammo and accuracy.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	ife EP2_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Semi-auto Shotgun
		ife NEW_IN_STORE[68] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[68] 0
				{
				setarray NEW_IN_STORE[68] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[68] 0 qstrcpy 409 3080
			else qputs 409 Cost: 125
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 18500 0 19822 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[68] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 125 soundonce COMP_INVALID
					else
						{

						sub AMC_BUDGET 125
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[68] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Mikko's slot 5 bracket

			qputs 409 A golden shotgun; fires gold
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 standard shells that damage
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 armour and supernautral foes.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}


	}
else
ife INFO_SEL 13 // Micky
	{
	rotatesprite 206 60 43690 0 16600 20 27 8 0 0 xdim ydim
		set gui_pos_x 35
		set gui_pos_y 45
		state CURSOR_OVER_ITEM
		qputs 409 AR-73 Battle rifle
		ife NEW_IN_STORE[48] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[48] 0
				{
				setarray NEW_IN_STORE[48] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[48] 0 qstrcpy 409 3080
			else qputs 409 Cost: 40
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 18500 0 16566 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
						{
						ifg SPECIALIST_EQUIPMENT[48] 0 soundonce COMP_INVALID
						else
						ifl AMC_BUDGET 40 soundonce COMP_INVALID
						else
							{
							sub AMC_BUDGET 40
							savegamevar AMC_BUDGET
							setarray SPECIALIST_EQUIPMENT[48] 1
							writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
							sound CASHREG
							break
							}
						} // End of Micky slot 1 bracket

			qputs 409 A prototype Assault rifle, using
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 a new caseless ammunition type. Can
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 overheat if fired excessively, but
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 is powerful as well.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
	ife EP1_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Metal Storm
		ife NEW_IN_STORE[46] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[46] 0
				{
				setarray NEW_IN_STORE[46] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[46] 0 qstrcpy 409 3080
			else qputs 409 Cost: 75
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 208 61 20500 0 16554 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
						{
						ifg SPECIALIST_EQUIPMENT[46] 0 soundonce COMP_INVALID
						else
						ifl AMC_BUDGET 75 soundonce COMP_INVALID
						else
							{
							sub AMC_BUDGET 75
							savegamevar AMC_BUDGET
							setarray SPECIALIST_EQUIPMENT[46] 1
							writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
							sound CASHREG
							break
							}
						} // End of Micky slot 1 bracket

			qputs 409 A golden Metal storm pistol;
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 fires gold standard rounds
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 good against supernatural
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 and armour.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	ife NELSON_LICENSE 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Whiplash Shotgun
		ife NEW_IN_STORE[58] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[58] 0
				{
				setarray NEW_IN_STORE[58] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[58] 0 qstrcpy 409 3080
			else qputs 409 Cost: 35
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 17500 0 18020 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[58] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 35 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 35
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[58] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Micky slot 3 bracket

			qputs 409 A unique shotgun with a
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 custom handle for spin-
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 cocking. Can be dual
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 wielded as well.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	ife EP2_GOT_GOLD 1
		{
		add gui_pos_y 10
		state CURSOR_OVER_ITEM
		qputs 409 Gold Energy Shotgun
		ife NEW_IN_STORE[69] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 7 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[69] 0
				{
				setarray NEW_IN_STORE[69] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[69] 0 qstrcpy 409 3080
			else qputs 409 Cost: 125
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 23500 0 19831 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
					{
					ifg SPECIALIST_EQUIPMENT[69] 0 soundonce COMP_INVALID
					else
					ifl AMC_BUDGET 125 soundonce COMP_INVALID
					else
						{
						sub AMC_BUDGET 125
						savegamevar AMC_BUDGET
						setarray SPECIALIST_EQUIPMENT[69] 1
						writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
						sound CASHREG
						break
						}
					} // End of Micky slot 4 bracket

			qputs 409 An energy weapon that fires a
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 burst of gold energy, damaging
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 all enemy types.
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
		}

	}
else
ife INFO_SEL 14 // Snowfall
	{
	rotatesprite 206 60 43690 0 20984 20 27 8 0 0 xdim ydim
		set gui_pos_x 35
		set gui_pos_y 45
		state CURSOR_OVER_ITEM
		qputs 409 Spike Shotgun
		ife NEW_IN_STORE[100] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[100] 0
				{
				setarray NEW_IN_STORE[100] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[100] 0 qstrcpy 409 3080
			else qputs 409 Cost: 40
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 18500 0 29132 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
						{
						ifg SPECIALIST_EQUIPMENT[100] 0 soundonce COMP_INVALID
						else
						ifl AMC_BUDGET 40 soundonce COMP_INVALID
						else
							{
							sub AMC_BUDGET 40
							savegamevar AMC_BUDGET
							setarray SPECIALIST_EQUIPMENT[100] 1
							writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
							sound CASHREG
							break
							}
						} // End of Snowfall slot 1 bracket

			qputs 409 A spike shotgun, fires flechetes;
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 don't even attempt to use this
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 thing at any sort of range beyond
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 kissing distance.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
	}
else
ife INFO_SEL 17 // Kagura
	{
	rotatesprite 206 60 43690 0 27262 20 27 8 0 0 xdim ydim
		set gui_pos_x 35
		set gui_pos_y 45
		state CURSOR_OVER_ITEM
		qputs 409 Dragon Blades
		ife NEW_IN_STORE[103] 0 myospal 81 gui_pos_y 14606 0 0 0
 		screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim

		ifl gui_pos_x_temp 50
		 ifg gui_pos_x_temp -50
		  ifl gui_pos_y_temp 5
		   ifg gui_pos_y_temp -5
			{
			ife NEW_IN_STORE[103] 0
				{
				setarray NEW_IN_STORE[103] 1
				sound COMP_SELECT writearraytofile NEW_IN_STORE F_SHOP_NEW_AMCTC
				}
 			screentext 2822 gui_pos_x gui_pos_y 28672 0 0 409 disp_pulse 2 16 0 5 8 1 1 0 0 0 xdim ydim
			ifg SPECIALIST_EQUIPMENT[103] 0 qstrcpy 409 3080
			else qputs 409 Cost: 40
 			screentext 2822 163 95 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			rotatesprite 210 61 17500 0 29114 0 0 8 0 0 xdim ydim

			ifand BITS_PRESS 4
						{
						ifg SPECIALIST_EQUIPMENT[103] 0 soundonce COMP_INVALID
						else
						ifl AMC_BUDGET 40 soundonce COMP_INVALID
						else
							{
							sub AMC_BUDGET 40
							savegamevar AMC_BUDGET
							setarray SPECIALIST_EQUIPMENT[103] 1
							writearraytofile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
							sound CASHREG
							break
							}
						} // End of Kagura slot 1 bracket

			qputs 409 Two melee blades; you can swing
 			screentext 2822 163 123 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 each blade separately, or both
 			screentext 2822 163 129 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 at the same time for a powerful
 			screentext 2822 163 135 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			qputs 409 downward swing.
 			screentext 2822 163 141 28672 0 0 409 0 0 16 0 5 8 1 1 0 0 0 xdim ydim
			}
	}
else
ife INFO_SEL 9 // Cultist
	{
	rotatesprite 206 60 43690 0 7768 20 27 8 0 0 xdim ydim
	}
else
ife INFO_SEL 10 // Bombshell
	{
	rotatesprite 206 60 43690 0 5368 20 27 8 0 0 xdim ydim
	}
else
ife INFO_SEL 11 // Maarten
	{
	rotatesprite 206 60 43690 0 5488 20 27 8 0 0 xdim ydim
	}
else
ife INFO_SEL 12 // Jane
	{
	rotatesprite 206 60 43690 0 5366 20 27 8 0 0 xdim ydim
	}
rotatespritea 276 52 NNORMALSIZE 0 11231 disp_pulse 0 0 -255 0 0 xdim ydim
rotatespritea 208 60 NNORMALSIZE 0 11232 0 0 0 -255 0 0 xdim ydim
ends

spritenvg 13540

defstate wep_char_left
	ife ep4_new_char 1
		{
		ife INFO_SEL 17 set INFO_SEL 14 else
		ife INFO_SEL 14 set INFO_SEL 13 else
		ife INFO_SEL 13 set INFO_SEL 7 else
		ife INFO_SEL 0
		{
				ifand allow_temp_characters 8 set INFO_SEL 12 else
				ifand allow_temp_characters 4 set INFO_SEL 11 else
				ifand allow_temp_characters 2 set INFO_SEL 10 else
				ifand allow_temp_characters 1 set INFO_SEL 9 else
				set INFO_SEL 17
			}
		else
		ife INFO_SEL 12
			{
				ifand allow_temp_characters 4 set INFO_SEL 11 else
				ifand allow_temp_characters 2 set INFO_SEL 10 else
				ifand allow_temp_characters 1 set INFO_SEL 9 else
				set INFO_SEL 17
			}
		else
		ife INFO_SEL 11
			{
				ifand allow_temp_characters 2 set INFO_SEL 10 else
				ifand allow_temp_characters 1 set INFO_SEL 9 else
				set INFO_SEL 17
			}
		else
		ife INFO_SEL 10
			{
				ifand allow_temp_characters 1 set INFO_SEL 9 else
				set INFO_SEL 17
			}
		else
		ife INFO_SEL 9 set INFO_SEL 17 else
		ifg INFO_SEL 0 sub INFO_SEL 1 else set INFO_SEL 17
		}
	else
	ife ep3_new_char 1
		{
		ife INFO_SEL 14 set INFO_SEL 13 else
		ife INFO_SEL 13 set INFO_SEL 7 else
		ife INFO_SEL 0
		{
				ifand allow_temp_characters 8 set INFO_SEL 12 else
				ifand allow_temp_characters 2 set INFO_SEL 10 else
				ifand allow_temp_characters 1 set INFO_SEL 9 else
				set INFO_SEL 14
			}
		else
		ife INFO_SEL 12
			{
				ifand allow_temp_characters 2 set INFO_SEL 10 else
				ifand allow_temp_characters 1 set INFO_SEL 9 else
				set INFO_SEL 14
			}
		else
		ife INFO_SEL 10
			{
				ifand allow_temp_characters 1 set INFO_SEL 9 else
				set INFO_SEL 14
			}
		else
		ife INFO_SEL 9 set INFO_SEL 14 else
		ifg INFO_SEL 0 sub INFO_SEL 1 else set INFO_SEL 14
		}
	else
	ife ep2_new_char 1
		{
		ife INFO_SEL 0 set INFO_SEL 13 else
		ife INFO_SEL 13 set INFO_SEL 7 else
		ifg INFO_SEL 0 sub INFO_SEL 1 else set INFO_SEL 13
		}
	else
		{
		ifg INFO_SEL 0 sub INFO_SEL 1 else set INFO_SEL 7
		}
	soundonce COMP_SELECT
	resetcount
ends

defstate wep_char_right
	ife ep4_new_char 1
		{
		ife INFO_SEL 17
			{
				ifand allow_temp_characters 1 set INFO_SEL 9 else
				ifand allow_temp_characters 2 set INFO_SEL 10 else
				ifand allow_temp_characters 4 set INFO_SEL 11 else
				ifand allow_temp_characters 8 set INFO_SEL 12 else
				set INFO_SEL 0
			}
		else
		ife INFO_SEL 9
			{
				ifand allow_temp_characters 2 set INFO_SEL 10 else
				ifand allow_temp_characters 4 set INFO_SEL 11 else
				ifand allow_temp_characters 8 set INFO_SEL 12 else
				set INFO_SEL 0
			}
		else
		ife INFO_SEL 10
			{
				ifand allow_temp_characters 4 set INFO_SEL 11 else
				ifand allow_temp_characters 8 set INFO_SEL 12 else
				set INFO_SEL 0
			}
		else
		ife INFO_SEL 11
			{
				ifand allow_temp_characters 8 set INFO_SEL 12 else
				set INFO_SEL 0
			}
		else
		ife INFO_SEL 12 set INFO_SEL 0 else
		ife INFO_SEL 14 set INFO_SEL 17 else
		ife INFO_SEL 13 set INFO_SEL 14 else
		ife INFO_SEL 7 set INFO_SEL 13 else
		ifl INFO_SEL 7 add INFO_SEL 1 else set INFO_SEL 0
		}
	else
	ife ep3_new_char 1
		{
		ife INFO_SEL 14
			{
				ifand allow_temp_characters 1 set INFO_SEL 9 else
				ifand allow_temp_characters 2 set INFO_SEL 10 else
				ifand allow_temp_characters 8 set INFO_SEL 12 else
				set INFO_SEL 0
			}
		else
		ife INFO_SEL 9
			{
				ifand allow_temp_characters 2 set INFO_SEL 10 else
				ifand allow_temp_characters 8 set INFO_SEL 12 else
				set INFO_SEL 0
			}
		else
		ife INFO_SEL 10
			{
				ifand allow_temp_characters 8 set INFO_SEL 12 else
				set INFO_SEL 0
			}
		else
		ife INFO_SEL 12 set INFO_SEL 0 else
		ife INFO_SEL 13 set INFO_SEL 14 else
		ife INFO_SEL 7 set INFO_SEL 13 else
		ifl INFO_SEL 7 add INFO_SEL 1 else set INFO_SEL 0
		}
	else
	ife ep2_new_char 1
		{
		ife INFO_SEL 7 set INFO_SEL 13 else
		ife INFO_SEL 13 set INFO_SEL 0 else
		ifl INFO_SEL 7 add INFO_SEL 1 else set INFO_SEL 0
		}
	else
		{
		ifl INFO_SEL 7 add INFO_SEL 1 else set INFO_SEL 0
		}
	soundonce COMP_SELECT
	resetcount
ends

useractor notenemy 13540 // IW SHOPKEEPER

ifaction 0
{
strength 50
espawn 12263
seta[RETURN].owner THISACTOR
geta[RETURN].z temp
sub temp 16384
seta[RETURN].z temp
action ZERO
}

ifaction ZERO
{

ifp palive
 ife player[].newowner -1 // prevent viewscreen bugs
  ifp pfacing
   ifpdistl 1526
  {
  ife MOUSEUP 0 set player_use 0
   ifhitspace
	{
		ife MOUSEUP 0
		ifcount 13
			{
			soundonce CONVERSATION
			readarrayfromfile NEW_IN_STORE F_SHOP_NEW_AMCTC
			readarrayfromfile SPECIALIST_EQUIPMENT F_SPECIAL_LOADOUT_AMCTC
			resizearray SPECIALIST_EQUIPMENT MAX_SPECIAL_LOADOUT
			getp[].horiz PHORIZ
			readgamevar AMC_BUDGET
			readgamevar SAVED_MATVEI
			readgamevar NELSON_LICENSE
			readgamevar FAITHFUL_LICENSE
			readgamevar FOUND_ADS
			readgamevar EP1_GOT_GOLD
			readgamevar EP2_GOT_GOLD
			readgamevar EP3_GOT_GOLD
			getp[].ang PANG
			set PCINTER 11
			set INFO_SEL 20
			set MOUSEUP 1
			resetcount
			}
		else
		ife MOUSEUP 1
		ifcount 13
			{
			set PCINTER 0
			set MOUSEUP 0
			soundonce CONVERSATION
			resetcount
			}
	}

	ife PCINTER 11 // Talking to the shopkeeper?
		{
		ifcount 13
			{
			getinput[].bits temp
			shiftvarr temp 8
			andvar temp 0xF
			switch temp
				case 1:
					soundonce CONVERSATION
					ife INFO_SEL 20 { set INFO_SEL CHAR set PCINTER 12 }
					ife INFO_SEL 21 { set INFO_SEL CHAR set PCINTER 12 }
					resetcount
					break
				case 2:
					soundonce CONVERSATION
					ife INFO_SEL 20 set INFO_SEL 21
					resetcount
					break
				case 10:
					set PCINTER 0
					set MOUSEUP 0
					soundonce CONVERSATION
					resetcount
					break
			endswitch
			}
		}
	else
	ife PCINTER 12 // Browsing the shop?
		{
		ifand EXTBITS_PRESS 4
		 ifcount 13
			state wep_char_left

		ifand EXTBITS_PRESS 16
		 ifcount 13
			state wep_char_left

		ifand EXTBITS_PRESS 8
		 ifcount 13
			state wep_char_right

		ifand EXTBITS_PRESS 32
		 ifcount 13
			state wep_char_right
		}

   }

}
enda
