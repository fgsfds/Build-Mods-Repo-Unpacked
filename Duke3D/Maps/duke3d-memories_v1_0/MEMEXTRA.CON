action ZERO 0 0 0 0 0
action ZERO2 0 0 0 0 0
action ZERO3 0 0 0 0 2
action ZERO4 0 0 0 0 1
action ZERO5 0 0 0 0 2
action ZERO6 0 0 0 0 2
action ZERO7 0 0 0 0 2

spritenoshade 3694

state lookatme
getplayer[THISACTOR].posx lookx1
getplayer[THISACTOR].posy looky1
getactor[THISACTOR].x lookx2
subvarvar lookx1 lookx2
getactor[THISACTOR].y looky2
subvarvar looky1 looky2
getangle ang lookx1 looky1
subvar ang 1024
setplayer[THISACTOR].ang ang
ends

onevent EVENT_DISPLAYOVERHEADMAPTEXT
ifvare FORGET 1 ifvare KIDAGAIN 0 quote 168
endevent


onevent EVENT_QUICKKICK
ifvare MOTIONLESS 1 setvar RETURN -1
ifvare NOWEAPON 1 setvar RETURN -1 
ifvarg VHSFILTER 0 setvar RETURN -1
ifvare KIDAGAIN 1 setvar RETURN -1  
ifvare NEWGOD 17 setvar RETURN -1
ifvare NEWGOD 20 setvar RETURN -1
ifvarg NEWGOD 22 { setvar RETURN -1 palfrom 20 32 }
endevent

onevent EVENT_SELECTWEAPON 
ifvare MOTIONLESS 1 setvar RETURN -1
ifvare NOWEAPON 1 setvar RETURN -1 
ifvarg VHSFILTER 0 setvar RETURN -1 
ifvare NEWGOD 17 setvar RETURN -1
ifvare NEWGOD 20 setvar RETURN -1
ifvare KIDAGAIN 1 setvar RETURN -1
endevent

onevent EVENT_CHANGEWEAPON 
ifvare MOTIONLESS 1 setvar RETURN -1
ifvare NOWEAPON 1 setvar RETURN -1 
ifvarg VHSFILTER 0 setvar RETURN -1 
ifvare NEWGOD 17 setvar RETURN -1
ifvare NEWGOD 20 setvar RETURN -1
ifvare KIDAGAIN 1 setvar RETURN -1
endevent

onevent EVENT_DISPLAYSBAR
ifvare FORGET 1 setvar RETURN -1
ifvare NOWEAPON 1 setvar RETURN -1
ifvare KIDAGAIN 1 setvar RETURN -1
//ifvarg NEWGOD 4 setvar RETURN -1 
ifvarg NEWGOD 37 setvar RETURN -1
endevent

onevent EVENT_JUMP
ifvare MOTIONLESS 1 setvar RETURN -1
ifvarg EFFECT 0 setvar RETURN -1
ifvare KIDAGAIN 1 setvar RETURN -1
ifvare NOWEAPON 2 { quote 168 setvar RETURN -1 }
ifvare NEWGOD 17 { setvar RETURN -1 addphealth -200 }
ifvarg NEWGOD 22 { setvar RETURN -1 palfrom 20 32 }
endevent

onevent EVENT_PRESSEDFIRE
ifvare NEWGOD 17 setvar RETURN -1
ifvare NEWGOD 20 setvar RETURN -1
ifvare NEWGOD 21 { setvar NEWGOD 22 setvar RETURN -1 }

getplayer[THISACTOR].Ammo_amount 1 TEMP

ifvare NOWEAPON 2 ifvarg TEMP 0 { 
setvar IMSHOOTING 2
ifvare SHOOTWEAPON 0 ifvare WEAPONCOOLDOWN 0 {
setvar SHOOTANIMATION 5
setvar SHOOTWEAPON 1
setvar WEAPONCOOLDOWN 5
subvar TEMP 1
setplayer[THISACTOR].Ammo_amount 1 TEMP
} 
}
endevent

onevent EVENT_CROUCH
ifvare NOWEAPON 2 { quote 168 setvar RETURN -1 }
ifvare MOTIONLESS 1 setvar RETURN -1
ifvarg EFFECT 0 setvar RETURN -1
ifvare KIDAGAIN 1 setvar RETURN -1
ifvare NEWGOD 17 { setvar RETURN -1 addphealth -200 }
endevent

onevent EVENT_MOVEBACKWARD
ifvare EFFECT 1 setvar RETURN -1
endevent

onevent EVENT_MOVEFORWARD
ifvare EFFECT 1 setvar RETURN -1
endevent

onevent EVENT_STRAFELEFT
ifvare EFFECT 1 setvar RETURN -1
endevent

onevent EVENT_STRAFERIGHT
ifvare EFFECT 1 setvar RETURN -1
endevent

onevent EVENT_WEAPKEY1 
setvar PRESSINGONE 2
ifvare NOWEAPON 2 quote 168
endevent

onevent EVENT_WEAPKEY2 
setvar PRESSINGTWO 2
endevent

onevent EVENT_WEAPKEY3 

ifvarg VHSFILTER 0 quote 168
endevent

actor MUSIC_SPRITE 
ifspritepal 0 { } else

{
cstat 32768 sleeptime -1
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 { 
setvar FORGET 1
ifspritepal 1 { starttrack 1 killit } //none.ogg
ifspritepal 2 { starttrack 3 killit } //music01.ogg
ifspritepal 3 { starttrack 4 killit } //music02.ogg
ifspritepal 4 { starttrack 5 killit } //music03.ogg
ifspritepal 5 { starttrack 6 killit } //music04.ogg
ifspritepal 6 { starttrack 7 killit } //music05.ogg
ifspritepal 7 { starttrack 8 killit } //music06.ogg
ifspritepal 8 { setvar PUZZLESOLVED 3 starttrack 9 killit } //music07.ogg
}

}
enda

move MEFFECTOR1 0
action AEFFECTOR_SPRITE1 -2033 0 0 0 4
action AEFFECTOR_SPRITE2 -2005 0 0 0 4
action AEFFECTOR_SPRITE3 -2005 0 0 0 4
action AEFFECTOR_SPRITE4 -2005 0 0 0 4

action ABATHROOM1 0 0 0 0 4
action ABATHROOM2 0 0 0 0 4
action ABATHROOM3 0 0 0 0 5
action ABATHROOM4 0 0 0 0 4
action ABATHROOM5 0 0 0 0 4
action ABATHROOM6 0 0 0 0 4

action AOBELISK1 -355 0 0 0 4

action AFLOOR1 0 0 0 0 4
action AFLOOR2 0 0 0 0 4

action AHOLE1 0 0 0 0 4
action AHOLE2 0 0 0 0 4

action ATUNNEL1 0 0 0 0 6
action ATUNNEL2 0 0 0 0 2

action ABRIDGE1 0 0 0 0 2
action ABRIDGE2 0 0 0 0 2

actor EFFECTOR_SPRITE 
ifspritepal 0 { } else

{
cstat 32768 sleeptime -1

ifspritepal 1 ifvare ERROR 1 {
ifvare OPERATE 1028 { 

setvar ERROR 0
setvar OPERATE 0
setvar NOWEAPON 1
setvar MOTIONLESS 1
setvar TELEPORT 1
palfrom 0 0

setplayer[THISACTOR].gotweapon 2 0
setplayer[THISACTOR].gotweapon 3 0
setplayer[THISACTOR].gotweapon 4 0

getplayer[THISACTOR].ammo_amount RPG_WEAPON wp_temp
setvar wp_temp 0
setplayer[THISACTOR].ammo_amount RPG_WEAPON wp_temp

getplayer[THISACTOR].ammo_amount CHAINGUN_WEAPON wp_temp
setvar wp_temp 0
setplayer[THISACTOR].ammo_amount CHAINGUN_WEAPON wp_temp

getplayer[THISACTOR].ammo_amount HANDBOMB_WEAPON wp_temp
setvar wp_temp 0
setplayer[THISACTOR].ammo_amount HANDBOMB_WEAPON wp_temp

getplayer[THISACTOR].ammo_amount SHOTGUN_WEAPON wp_temp
setvar wp_temp 0
setplayer[THISACTOR].ammo_amount SHOTGUN_WEAPON wp_temp

getplayer[THISACTOR].ammo_amount PISTOL_WEAPON wp_temp
setvar wp_temp 48
setplayer[THISACTOR].ammo_amount PISTOL_WEAPON wp_temp

killit 

}
}

ifspritepal 2 ifvare TELEPORT 1 {
state holdme
addvar TEMP 1
ifvarg TEMP 20 ifvare PICTURESCREEN 0 setvar PICTURESCREEN 6
ifvarg TEMP 22 ifvare PICTURESCREEN 6 setvar PICTURESCREEN 7
ifvarg TEMP 24 ifvare PICTURESCREEN 7 setvar PICTURESCREEN 8

ifvarg TEMP 80 ifvare PICTURESCREEN 8 setvar PICTURESCREEN 9

ifvarg TEMP 160 ifvare PICTURESCREEN 9 { globalsound TVEYE1 setvar PICTURESCREEN 10 }

ifvarg TEMP 220 ifvare PICTURESCREEN 10 setvar PICTURESCREEN 6282

ifvarg TEMP 260 { setvar TEMP 0 setvar PICTURESCREEN 0 palfrom 60 0 setvar TELEPORT 3 killit }
}

ifspritepal 3 {
ifrnd 50 { move MEFFECTOR1 randomangle spawn SMALLSMOKE2 }
}

ifspritepal 4 {

ifvare ERROR 1 { 
getactor[THISACTOR].sectnum s
getsector[s].floorshade TEMP
ifvarg TEMP -10 subvar TEMP 80
setsector[s].floorshade TEMP
getsector[s].ceilingshade TEMP
ifvarg TEMP -10 subvar TEMP 80
setsector[s].ceilingshade TEMP

getsector[s].wallptr temp2
getsector[s].wallnum num
addvarvar num temp2
whilevarvarn temp2 num {
getwall[temp2].shade TEMP
ifvarg TEMP -10 subvar TEMP 80
setwall[temp2].shade TEMP
addvar temp2 1 }
}

ifvarg NEWGOD 3 ifvare ERROR 0 {
getactor[THISACTOR].sectnum s 
setsector[s].visibility TOTALVISIBILITY

getactor[THISACTOR].sectnum s
getsector[s].floorshade TEMP
ifvarl TEMP -10 addvar TEMP 80
setsector[s].floorshade TEMP
getsector[s].ceilingshade TEMP
ifvarl TEMP -10 addvar TEMP 80
setsector[s].ceilingshade TEMP

getsector[s].wallptr temp2
getsector[s].wallnum num
addvarvar num temp2
whilevarvarn temp2 num {
getwall[temp2].shade TEMP
ifvarl TEMP -10 addvar TEMP 80
setwall[temp2].shade TEMP
addvar temp2 1 }
}

}

ifspritepal 5 {
cstat 257
ifaction 0 action AEFFECTOR_SPRITE1
ifvare ERROR 1 killit
}

ifspritepal 6 {
ifvare LIGHTSOUT 1 { 
getactor[THISACTOR].sectnum s
setsector[s].floorshade 15
setsector[s].ceilingshade 19

getsector[s].wallptr temp2
getsector[s].wallnum num
addvarvar num temp2
whilevarvarn temp2 num {
setwall[temp2].shade 15
addvar temp2 1 }
}
}


ifspritepal 7 {

ifaction 0 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 ifvare GHOSTCARD 1 { lockplayer 10
setvar MOTIONLESS 1 setvar NOWEAPON 1 action ABATHROOM1
}
}

ifaction ABATHROOM1 {
setvar MOTIONLESS 1
ifactioncount 30 { globalsound MIRRORED setvar EFFECT 1 operateactivators 7770 myconnectindex action ABATHROOM2 }
}

ifaction ABATHROOM2 {
state lookatme
ifpdistl 500 { setplayer[THISACTOR].ang 1536 setvar MOTIONLESS 1 setvar EFFECT 2 action ABATHROOM3 }
}

ifaction ABATHROOM3 {
soundonce DUKE_HARTBEAT2
//setplayer[THISACTOR].ang 1536
ifvare MOTIONLESS 1 lockplayer LOCKING
setvar BEVERYSLOW 2
ifactioncount 20 ifvare EFFECT 2 { quake 4 stopsound EARTHQUAKE setvar MESSAGE 10 setvar MOTIONLESS 0 operateactivators 7771 myconnectindex setvar EFFECT 3 }
ifactioncount 40 ifvare EFFECT 3 { quake 4 stopsound EARTHQUAKE operateactivators 7772 myconnectindex setvar EFFECT 4 }
ifactioncount 60 ifvare EFFECT 4 { quake 4 stopsound EARTHQUAKE operateactivators 7773 myconnectindex setvar EFFECT 5 }
ifactioncount 80 ifvare EFFECT 5 { quake 4 stopsound EARTHQUAKE operateactivators 7774 myconnectindex setvar EFFECT 6 }
ifactioncount 100 ifvare EFFECT 6 { quake 4 stopsound EARTHQUAKE operateactivators 7775 myconnectindex setvar EFFECT 7 }
ifactioncount 120 ifvare EFFECT 7 { quake 4 stopsound EARTHQUAKE operateactivators 7776 myconnectindex setvar EFFECT 8 }

ifvare EFFECT 3 palfrom 4 24
ifvare EFFECT 4 palfrom 8 24
ifvare EFFECT 5 palfrom 12 24
ifvare EFFECT 6 palfrom 16 24
ifvare EFFECT 7 palfrom 20 24
ifvare EFFECT 8 palfrom 24 24

ifactioncount 140 ifcansee ifvare VHSFILTER 0 { quake 4 stopsound EARTHQUAKE palfrom 50 24 addphealth -200 setvar EFFECT 0 }

ifvare EFFECT 0 killit
}


}

ifspritepal 8 ifvarg EFFECT 0 ifvare GHOSTCARD 1 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 { stopsound MIRRORED setvar MESSAGE 0 setvar EFFECT 0 setvar NOWEAPON 0 setvar BEVERYSLOW 0 setvar TELEPORT 2 killit }

}

ifspritepal 9 {
cstat 257
ifaction 0 action AEFFECTOR_SPRITE2

ifaction AEFFECTOR_SPRITE2 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 action AEFFECTOR_SPRITE3
}

ifaction AEFFECTOR_SPRITE3 ifpdistg 3500 {
fall action AEFFECTOR_SPRITE4 }

ifaction AEFFECTOR_SPRITE4 {
fall
iffloordistl 3 { sound INTRO4_5 debris SCRAP2 5 setvar LIGHTSOUT 1 killit }
}
 
ifhitweapon { debris SCRAP2 5 sound GLASS_HEAVYBREAK setvar LIGHTSOUT 1 killit } else strength 1
}


ifspritepal 10 {
ifcansee { setvar VHSFILTER 1 setvar FORGET 1 killit }
}



ifspritepal 11 ifvare TELEPORT 2 {
setvar TELEPORT 0
palfrom 60 0
starttrack 1
state holdme
killit 
}

ifspritepal 12 ifvare TELEPORT 3 {
setvar TELEPORT 0
setvar MOTIONLESS 0
setvar NOWEAPON 0
setvar FORGET 1 
//addinventory GET_FIRSTAID 0
//addinventory GET_STEROIDS 0
//addinventory GET_HOLODUKE 0
setplayer[THISACTOR].steroids_amount 0
setplayer[THISACTOR].firstaid_amount 0
setplayer[THISACTOR].holoduke_amount 0
addphealth 99
setplayer[THISACTOR].shield_amount 0
setplayer[THISACTOR].knuckle_incs 10
globalsound DUKE_CRACK_FIRST
globalsound GENERIC_AMBIENCE13
setplayer[THISACTOR].reloading 1
setplayer[THISACTOR].kickback_pic 4
setplayer[THISACTOR].curr_weapon 1
starttrack 2
state holdme
killit 
}

ifspritepal 13 {

ifvare ROOMLIGHT 0 {
getactor[THISACTOR].sectnum s
setsector[s].floorshade 100
setsector[s].ceilingshade 100

getsector[s].wallptr temp2
getsector[s].wallnum num
addvarvar num temp2
whilevarvarn temp2 num {
setwall[temp2].shade 100
addvar temp2 1
}
}

ifvare ROOMLIGHT 1 {
getactor[THISACTOR].sectnum s
setsector[s].floorshade 13
setsector[s].ceilingshade 16

getsector[s].wallptr temp2
getsector[s].wallnum num
addvarvar num temp2
whilevarvarn temp2 num {
setwall[temp2].shade 13
addvar temp2 1
}
}

ifvare OPERATE 33 {
ifcount 1 setsector[s].visibility 15
ifcount 2 setsector[s].visibility 20
ifcount 4 resetcount
}

else setsector[s].visibility 0

}

ifspritepal 14 {
ifcansee ifvare OPERATE 1 ifpdistl 1500 { setvar OPERATE 0 operateactivators 4321 myconnectindex killit }
}

ifspritepal 15 {
ifaction 0 {
cstat 32768
ifrnd 64 spawn PAYATTENTION
ifcansee ifpdistl 1200 ifp pfacing ifhitspace {
ifvarg OBELISK 0 { subvar OBELISK 1 addvar OBELISKPLACED 1 sound SWITCH_ON spawn BADGUYICON action AOBELISK1 } else quote 173
}

ifcansee ifpdistl 1200 ifp pfacing setvar PRESSTEXT 2
}

ifaction AOBELISK1 cstat 0
}

ifspritepal 16 {
ifcansee { setvar VHSFILTER 2 setvar FORGET 1 setgamepalette 2 killit }
}

ifspritepal 17 {
ifcansee ifvarg VHSFILTER 0 { setgamepalette 0 setvar VHSFILTER 0 }
}

ifspritepal 18 {
ifvare TELEPORT 666 state holdme
}


ifspritepal 19 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 setvar MONKVAR 1
}


ifspritepal 20 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 setvar MONKVAR 0
}


ifspritepal 21 {
ifaction 0 ifvare REELVAR 1 {
getactor[THISACTOR].sectnum s
setsector[s].floorz 47104
setsector[s].floorpicnum 3026
action AFLOOR1
}

ifaction AFLOOR1 ifvare ROPEVAR 1 {
getactor[THISACTOR].sectnum s
setsector[s].floorz 8192
setsector[s].floorpicnum 899
action AFLOOR2
}
}



ifspritepal 22 {

ifvare GHOSTCARD 1 {
getactor[THISACTOR].sectnum s
setsector[s].floorshade 18
setsector[s].ceilingshade 20

getsector[s].wallptr temp2
getsector[s].wallnum num
addvarvar num temp2
whilevarvarn temp2 num {
setwall[temp2].shade 18
addvar temp2 1
}
}
}

ifspritepal 23 {
ifcansee { setvar PICTURESCREEN 11 palfrom 60 0 setvar FORGET 1 killit }
}


ifspritepal 24 ifvare TELEPORT 4 {
starttrack 1
palfrom 40 63 63 63
setvar PICTURESCREEN 0
setvar OPERATE 0
setvar TELEPORT 0
state holdme
killit 
}

ifspritepal 25 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 setvar GOAWAYFACELESS 2
}


ifspritepal 26 {

ifvare TEMP 0 { 
getactor[THISACTOR].sectnum s
getsector[s].floorz z setvar TEMP 1 }


ifaction 0 { 
setsector[s].floorz -11264
ifvare GHOSTCARD 1 { 
setsector[s].floorz z action AHOLE1 }
}

ifaction AHOLE1 {

ifvare OPERATE 10 {
setsector[s].floorz -11264
action AHOLE2
}

ifvare PUZZLESOLVED 2 {
setsector[s].floorz -11264
action AHOLE2
}

}

}


ifspritepal 27 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 { setvar OPERATE 7 killit }
}


ifspritepal 28 ifvare ROPEVAR 1 {
getactor[THISACTOR].sectnum s
setsector[s].floorshade 15
setsector[s].ceilingshade 15

getsector[s].wallptr temp2
getsector[s].wallnum num
addvarvar num temp2
whilevarvarn temp2 num {
setwall[temp2].shade 15
addvar temp2 1
}
}


ifspritepal 29 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 { setvar NOWEAPON 2 killit }
}

ifspritepal 30 ifpdistl 2000 ifvare GHOSTCARD 1 { globalsound KNOCKING killit }


ifspritepal 31 ifvare ROPEVAR 1 {
soundonce GAMEPLAY
ifcansee { stopsound GAMEPLAY starttrack 7 killit }
}

ifspritepal 32 ifvare OPERATE 1 {
getactor[THISACTOR].sectnum s
setsector[s].floorshade 100
}

ifspritepal 33 ifvare CODE1 1 ifvare CODE2 4 ifvare CODE3 0 ifvare CODE4 8 {
 operateactivators 6668 myconnectindex
 killit
}

ifspritepal 34 ifcansee { setvar MONKVAR 2 killit }

ifspritepal 35 ifvare MONKVAR 3 {

getactor[THISACTOR].sectnum s
setsector[s].floorpal 0
setsector[s].ceilingpal 0

getsector[s].wallptr temp2
getsector[s].wallnum num
addvarvar num temp2
whilevarvarn temp2 num {
setwall[temp2].pal 0
addvar temp2 1
}

ifcount 1 setsector[s].visibility 55
ifcount 4 setsector[s].visibility 50
ifcount 7 resetcount

}

ifspritepal 36 {

ifaction 0 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 action ATUNNEL1
}

ifaction ATUNNEL1 {
ifactioncount 60 setvar MESSAGE 12
ifactioncount 140 setvar MESSAGE 0 

ifactioncount 180 setvar MESSAGE 13
ifactioncount 240 setvar MESSAGE 0 

ifactioncount 280 setvar MESSAGE 14
ifactioncount 340 setvar MESSAGE 0 

ifactioncount 380 setvar MESSAGE 15
ifactioncount 440 setvar MESSAGE 0 

ifactioncount 480 setvar MESSAGE 16
ifactioncount 540 { setvar MESSAGE 0 setvar MONKVAR 4 killit }
}

}


ifspritepal 37 ifvare MONKVAR 3 { 
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 {
getplayer[THISACTOR].posx x
subvar x 9217
setplayer[THISACTOR].posx x
}
}

ifspritepal 38 { 
ifaction 0 { getactor[THISACTOR].hitag HITAGSAVED action ABRIDGE1 }
ifaction ABRIDGE1 ifcansee ifpdistl 1500 { quake 20 stopsound EARTHQUAKE setvar MOTIONLESS 1 operateactivators HITAGSAVED myconnectindex globalsound ROCKSFALL action ABRIDGE2 }
ifaction ABRIDGE2 { 
getactor[THISACTOR].sectnum s
getsector[s].floorshade TEMP
ifactioncount 2 ifvarl TEMP 80 { addvar TEMP 1 resetactioncount }
setsector[s].floorshade TEMP
ifvarg TEMP 30 { addphealth -200 setvar MOTIONLESS 0 killit } }
}

ifspritepal 39 { 
ifaction 0 { getactor[THISACTOR].hitag HITAGSAVED action ABRIDGE1 }
ifaction ABRIDGE1 ifcansee ifpdistl 3000 { quake 20 stopsound EARTHQUAKE operateactivators HITAGSAVED myconnectindex globalsound ROCKSFALL action ABRIDGE2 }
ifaction ABRIDGE2 { 
getactor[THISACTOR].sectnum s
getsector[s].floorshade TEMP
ifactioncount 2 ifvarl TEMP 80 { addvar TEMP 1 resetactioncount }
setsector[s].floorshade TEMP
 }
 
}


ifspritepal 40 {

ifaction 0 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 { userquote 243 action ATUNNEL1 } }

ifaction ATUNNEL1 {
ifactioncount 120 { globalsound BIGGLASS setvar OPERATE 666 action ATUNNEL2 }

}

ifaction ATUNNEL2 {
ifphealthl 10 { setuserdef[THISACTOR].god 1 addphealth 100 setvar TELEPORT 999 killit }
}


}


ifspritepal 41 ifvare TELEPORT 999 { stopsound BIGGLASS setgamepalette 0 setuserdef[THISACTOR].god 0 setvar NOWEAPON 0 
setplayer[THISACTOR].jetpack_amount 0
setvar MONKVAR 0 setvar VHSFILTER 0 setvar ROPEVAR 1 setvar OPERATE 0 setvar TELEPORT 0 
palfrom 50 0 state holdme globalsound TVEYE2 killit }

ifspritepal 42 {
ifpdistl 1100 ifcansee ifp pfacing setvar PRESSTEXT 2
ifpdistl 1100 ifcansee ifvare PRESS_VAR 0 ifp pfacing {
ifhitspace {
ifvare COINVAR 1 { 
operateactivators 1919 myconnectindex
operateactivators 4917 myconnectindex
operateactivators 999 myconnectindex
operateactivators 1234 myconnectindex
setvar NEWGOD 1
sound INSERTCOIN setvar PRESS_VAR 2 quote 254 killit } else
{ quote 251 setvar PRESS_VAR 2 }
}
}
}


ifspritepal 43 { 
getactor[THISACTOR].sectnum s
ifaction 0 {
ifvare NEWGOD 1 setsector[s].floorshade 6
ifpdistl 1500 ifcansee ifp pfacing setvar PRESSTEXT 2
ifpdistl 1500 ifcansee ifp pfacing ifvare PRESS_VAR 0 {
ifhitspace {
ifvare NEWGOD 1 { setvar TELEPORT 9111 starttrack 1 setvar FORGET 0 setvar NEWGOD 2 setvar PRESS_VAR 2 action ZERO } else
{ quote 252 setvar PRESS_VAR 2 }
}

}
}
ifaction ZERO ifvare MOLDYCARD 1 setsector[s].floorshade 20

}

ifspritepal 44 ifvare TELEPORT 9111 { setvar TELEPORT 0 state holdme killit }

ifspritepal 45 ifvarg NEWGOD 1 {

getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 { starttrack 0 setvar FORGET 0 globalsound DUKETALKTOBOSS setvar NEWGOD 3 killit }
 
}

ifspritepal 46 {
ifaction 0 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1
{ quote 9 action ZERO }
}

ifaction ZERO ifvare NEWGOD 1 action 0

}

ifspritepal 47 {
getactor[THISACTOR].sectnum s 
setsector[s].visibility TOTALVISIBILITY
}

ifspritepal 48 ifvare NEWGOD 1 {
getactor[THISACTOR].sectnum s
getsector[s].wallptr temp2
setwall[temp2].overpicnum 503
setwall[temp2].cstat 81
killit
}

ifspritepal 49 ifvare NEWGOD 5 {
getactor[THISACTOR].sectnum s
getsector[s].wallptr temp2
//setwall[temp2].overpicnum 503
setwall[temp2].cstat 0
killit
}

ifspritepal 50 ifvarg NEWGOD 0 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 { setvar NEWGOD 6 killit }
}

ifspritepal 51 ifvare OPERATE 203 ifp pdead {
soundonce WHITENOISE2 
stopsound DUKE_DEAD
stopsound SQUISHED
state holdme palfrom 0 0  }

ifspritepal 52 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 { setvar TELEPORT 4 killit }
}

ifspritepal 53 ifvare NEWGOD 6 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 { setvar NEWGOD 7 killit }
}

ifspritepal 54 ifvare NEWGOD 7 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 { setvar NEWGOD 8 killit }
}

ifspritepal 55 ifvare NEWGOD 10 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 { setvar NEWGOD 11 killit }
}


ifspritepal 56 ifvare NEWGOD 11 {
ifpdistl 1500 ifcansee setvar PRESSTEXT 2
ifpdistl 1500 ifcansee ifvare PRESS_VAR 0 ifhitspace { setvar NEWGOD 12 killit }
}


ifspritepal 57 ifvare NEWGOD 13 {
state holdme setvar NOWEAPON 1
ifvare NEWGOD 14 killit
}

ifspritepal 58 ifvare NEWGOD 14 {
state holdme setvar NOWEAPON 0
killit
}


ifspritepal 59 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 ifvare NEWGOD 14 {
setvar NEWGOD 15
killit }
}

ifspritepal 60 {
ifvare NEWGOD 16 {
getactor[THISACTOR].sectnum s
setsector[s].floorshade -5
}

getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1 ifvare NEWGOD 16
ifvarvare rr0 rr1 { 
setplayer[THISACTOR].ang 1024
getactor[THISACTOR].sectnum s
setsector[s].floorshade 6
lockplayer 15 setvar NEWGOD 17 killit }
}


ifspritepal 61 ifvare NEWGOD 13 { spawn ACCESSCARD killit }

ifspritepal 62 ifvare NEWGOD 17 {
state holdme
killit
}


ifspritepal 63 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 ifvare NEWGOD 18 {
stopsound FIDDLIN3
starttrack 11
setvar NEWGOD 19
killit }
}


ifspritepal 64 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 ifvare NEWGOD 19 {
setvar NEWGOD 20
killit }
}


ifspritepal 65 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 ifvare NEWGOD 25 {
setvar NEWGOD 26
killit }
}


ifspritepal 66 ifvare NEWGOD 26 {
ifpdistl 1500 ifcansee setvar PRESSTEXT 2
ifpdistl 1500 ifcansee ifvare PRESS_VAR 0 ifhitspace { setvar NEWGOD 27 killit }
}


ifspritepal 67 ifvare NEWGOD 28 {
state holdme setvar NOWEAPON 1
ifvare NEWGOD 29 killit
}

ifspritepal 68 ifvare NEWGOD 29 {
state holdme setvar NOWEAPON 0
killit
}

ifspritepal 69 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 ifvare NEWGOD 29 {
setvar NEWGOD 30
killit }
}

ifspritepal 70 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 ifvare NEWGOD 30 {
setvar NEWGOD 31
killit }
}


ifspritepal 71 ifcansee ifpdistl 3000 ifvare NEWGOD 31 {
setvar NEWGOD 32
killit
}

ifspritepal 72 ifvarg TOTALVISIBILITY 90 {
addvar DELETEME 1
ifvarg DELETEME 135 { sound FIDDLIN1 killit }
}

ifspritepal 73 ifvarg NEWGOD 4 ifpdistl 12000 {
sound FIDDLIN3
killit
}


ifspritepal 74 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 ifvare NEWGOD 32 {
setvar NEWGOD 33
starttrack 1
globalsound FIDDLIN4
killit }
}


ifspritepal 75 ifvare NEWGOD 38 {
state holdme setvar NOWEAPON 1
//soundonce BADHUM2
}


ifspritepal 76 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 {
//setvar FORGET 1
setplayer[THISACTOR].got_access 0
setvar OPERATE 0
setvar NEWGOD 0
killit }
}

ifspritepal 77 ifvare KEY2 1 {
getactor[THISACTOR].sectnum s
setsector[s].floorshade -1
}

ifspritepal 78 ifvare KEY2 1 {
getactor[THISACTOR].sectnum s
setsector[s].floorshade 3
}

ifspritepal 79 ifvare PUZZLESOLVED 5 {
spritepal 2
quake 30
debris SCRAP5 30
debris SCRAP4 30	
spawn EXPLOSION2
globalsound ROCKBOOM
killit
}

ifspritepal 80 ifvare PUZZLESOLVED 5 {
getactor[THISACTOR].sectnum s
setsector[s].floorpicnum 3026
setsector[s].ceilingpicnum 3026

getsector[s].wallptr temp2
getsector[s].wallnum num
addvarvar num temp2
whilevarvarn temp2 num {
setwall[temp2].picnum 3026
addvar temp2 1
}
}

ifspritepal 81 {
ifaction 0 ifvare PUZZLESOLVED 4 ifcansee ifpdistl 3500 { setvar PUZZLESOLVED 5 palfrom 30 63 63 63 operateactivators 1999 myconnectindex inittimer 60 action ZERO }
ifaction ZERO ifactioncount 40 { inittimer 120 killit }
}

ifspritepal 82 ifpdistl 20000 {
ifcount 280 { ifrnd 4 { soundonce FARSCREAM resetcount } }
}



ifspritepal 83 {

ifaction 0 ifvare ERROR 256 { setvar MOTIONLESS 1 setvar NOWEAPON 1 globalsound LETMESEE action ZERO }

ifaction ZERO {
state holdme

ifactioncount 150 ifvare ERROR 256 setvar ERROR 257 

ifactioncount 350 ifvare ERROR 257 setvar ERROR 258

ifactioncount 450 ifvare ERROR 258 setvar ERROR 259

ifactioncount 600 ifvare ERROR 259 setvar ERROR 260

ifactioncount 700 ifvare ERROR 260 setvar ERROR 261

ifactioncount 850 ifvare ERROR 261 setvar ERROR 262

ifactioncount 950 ifvare ERROR 262 setvar ERROR 263

ifactioncount 1100 ifvare ERROR 263 setvar ERROR 264

ifactioncount 1200 ifvare ERROR 264 setvar ERROR 265

ifactioncount 1350 ifvare ERROR 265 setvar ERROR 266

ifactioncount 1450 ifvare ERROR 266 setvar ERROR 267

ifactioncount 1650 ifvare ERROR 267 setvar ERROR 268

ifactioncount 1750 ifvare ERROR 268 setvar ERROR 269

ifactioncount 1850 ifvare ERROR 269 setvar ERROR 270

ifactioncount 1950 ifvare ERROR 270 setvar ERROR 271

ifactioncount 2350 ifvare ERROR 271 setvar ERROR 272

ifactioncount 2450 ifvare ERROR 272 setvar ERROR 273

ifactioncount 2600 ifvare ERROR 273 setvar ERROR 274

ifactioncount 2800 resetplayer
}

}


ifspritepal 84 ifvare PUZZLESOLVED 3 ifvare CODE1 1 ifvare CODE2 9 ifvare CODE3 9 ifvare CODE4 6 {
 operateactivators 849 myconnectindex
 killit
}

ifspritepal 85 ifvare PUZZLESOLVED 3 ifcansee {
setvar PUZZLESOLVED 4
starttrack 1
getplayer[THISACTOR].ang TEMP 
addvar TEMP 1024
setplayer[THISACTOR].ang TEMP 
killit
}

ifspritepal 86 ifvare ERROR 200 {
state holdme
starttrack 1
setuserdef[THISACTOR].clipping 0
killit
}

ifspritepal 87 ifpdistl 1500 ifcansee ifhitspace { setvar ERROR 256 killit }


ifspritepal 88 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 {
setvar COINVAR 0
setvar NEWGOD 0
setvar KEY1 0
setvar KEY2 0
setvar KEY3 0
setvar KEY4 0
setvar TOTALKEYS 0
setvar MOTIONLESS 0
setvar MOLDYCARD 0
setvar GHOSTCARD 0
setvar OPERATE 0
setvar KIDAGAIN 0
setvar MOVIE 0
setvar REELVAR 0
setvar ROPEVAR 0
setvar EFFECT 0
setvar MESSAGE 0
setvar CAUGHT 0
setvar VHSFILTER 0
setvar ERROR 200
setvar spawnspawner 0
setvar FORGET 1
setvar NOWEAPON 0
setvar CHECKHOWMANY 0
setvar TELEPORT 0
setvar PICTURESCREEN 0
setvar OBELISK 0
setvar OBELISKPLACED 0
setvar TOTALOBELISK 0
setgamepalette 0
starttrack 1
killit }
}



ifspritepal 89 {
ifaction 0 ifvare PUZZLESOLVED 4 action ZERO 

ifaction ZERO {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1
{ starttrack 1 setvar MOTIONLESS 1 globalsound TRANSFER setvar NOWEAPON 1 action ZERO2 }
}

ifaction ZERO2 {
tip
ifactioncount 9 palfrom 4 0
ifactioncount 18 palfrom 8 0
ifactioncount 27 palfrom 12 0
ifactioncount 36 palfrom 16 0
ifactioncount 45 palfrom 20 0
ifactioncount 54 palfrom 24 0
ifactioncount 63 palfrom 28 0
ifactioncount 72 palfrom 32 0
ifactioncount 81 palfrom 36 0
ifactioncount 90 palfrom 40 0
ifactioncount 99 palfrom 44 0
ifactioncount 108 palfrom 48 0
ifactioncount 117 palfrom 52 0
ifactioncount 126 palfrom 56 0
ifactioncount 135 { stopsound TRANSFER setvar TELEPORT 1337 palfrom 70 0 killit }
}
}

ifspritepal 90 {

ifaction 0 ifvare TELEPORT 1337 {
setvar TELEPORT 0 setvar MOTIONLESS 0
palfrom 70 0
state holdme 
action ZERO
}

ifaction ZERO ifactioncount 2 { palfrom 0 0 killit }
}



ifspritepal 91 ifvare TELEPORT 456 {
setuserdef[THISACTOR].crosshair 1
setvar TELEPORT 0 
state holdme killit
}

ifspritepal 92 ifvare MOVIE 3 {
getactor[THISACTOR].sectnum s 
setsector[s].visibility 128
setsector[s].floorshade 11
}

ifspritepal 93 ifcanseetarget ifpdistl 2500 ifvare PUZZLESOLVED 1 {
operateactivators 235 myconnectindex
killit
}

ifspritepal 94 ifvare MOVIE 3 {
getactor[THISACTOR].sectnum s

getsector[s].wallptr temp2
getsector[s].wallnum num
addvarvar num temp2
whilevarvarn temp2 num {
getwall[temp2].picnum TEMP
ifvare TEMP 3612
setwall[temp2].picnum 3667
addvar temp2 1
}

}

ifspritepal 95 {
ifaction 0 ifvare BLOODCARD 1 action ZERO
ifaction ZERO ifpdistl 12000 ifrnd 8 spawn SLIME
}

ifspritepal 96 ifpdistl 12000 ifrnd 8 spawn SLIME

ifspritepal 97 ifpdistl 12000 ifrnd 8 ifvarg NEWGOD 28 spawn SLIME


ifspritepal 98 {

ifaction 0 ifvare TELEPORT 1338 {
setvar TELEPORT 0 setvar MOTIONLESS 0
palfrom 70 63 63 63 
state holdme 
action ZERO
}

ifaction ZERO ifactioncount 2 { palfrom 0 0 killit }
}


ifspritepal 99 {
ifaction 0 ifvare PUZZLESOLVED 4 action ZERO 

ifaction ZERO {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1
{ starttrack 1 globalsound TRANSFER setvar MOTIONLESS 1 setvar NOWEAPON 1 action ZERO2 }
}

ifaction ZERO2 {
tip

ifactioncount 9 palfrom 4 63 63 63
ifactioncount 18 palfrom 8 63 63 63
ifactioncount 27 palfrom 12 63 63 63
ifactioncount 36 palfrom 16 63 63 63
ifactioncount 45 palfrom 20 63 63 63
ifactioncount 54 palfrom 24 63 63 63
ifactioncount 63 palfrom 28 63 63 63
ifactioncount 72 palfrom 32 63 63 63
ifactioncount 81 palfrom 36 63 63 63
ifactioncount 90 palfrom 40 63 63 63
ifactioncount 99 palfrom 44 63 63 63
ifactioncount 108 palfrom 48 63 63 63
ifactioncount 117 palfrom 52 63 63 63
ifactioncount 126 palfrom 56 63 63 63
ifactioncount 135 { setvar TELEPORT 1338 stopsound TRANSFER setvar KIDAGAIN 1 palfrom 70 63 63 63  killit }
}
}


ifspritepal 100 {


ifaction 0 ifvare KIDAGAIN 1 ifpdistl 5000 ifcansee action ZERO

ifaction ZERO ifactioncount 600 ifpdistg 4000 { ifp pfacing { } else { sound MAILBOX setvar OPERATE 1984 action ZERO2 } }

ifaction ZERO2 {
ifpdistl 1500 ifcansee ifp pfacing setvar PRESSTEXT 2
ifpdistl 1500 ifcansee ifvare PRESS_VAR 0 ifp pfacing ifhitspace { sound OPENBOX setvar PRESS_VAR 2 setvar OPERATE 1996 action ZERO3 }
}

ifaction ZERO3 { 
ifpdistl 1500 ifcansee ifp pfacing setvar PRESSTEXT 2
ifpdistl 1500 ifcansee ifvare PRESS_VAR 0 ifp pfacing ifhitspace { sound PICKBOX setvar PRESS_VAR 2 setvar OPERATE 2024 killit }
}

}


ifspritepal 101 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1
{ setvar TELEPORT 1339 killit }
}



ifspritepal 102 {

ifaction 0 ifvare TELEPORT 1339 {
setvar MOTIONLESS 1 setvar NOWEAPON 1
state holdme 
}

}



ifspritepal 103 {

ifaction 0 ifvare ERROR 1 action ZERO

ifaction ZERO ifactioncount 55 { sound COCOONROAM killit }

}


ifspritepal 104 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1
{ setvar OPERATE 1001 killit }
}

ifspritepal 105 {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1
{ setvar NONOCLIP 1 killit }
}


ifspritepal 106 {
ifvare OPERATE 1025 state holdme
ifvare OPERATE 1026 killit }

ifspritepal 107 {
ifvare OPERATE 1026 { palfrom 15 0 state holdme }
ifvare OPERATE 1027 killit }

ifspritepal 108 {
ifvare OPERATE 1027 { ifrnd 32 palfrom 30 0 else ifrnd 64 palfrom 40 0 else palfrom 0 0 sound STATUE1 state holdme }
 }


}
enda

move SLIMEMOVE 5 -100
actor SLIME clipdist 1
ifaction 0 { sizeat 43 68 ifrnd 128 cstat 128 else cstat 132 action ZERO }
ifaction ZERO {
sizeto 1 68 
ifvare PUZZLESOLVED 2 spritepal 21 else
ifvarg NEWGOD 28 spritepal 10 else
spritepal 13
move SLIMEMOVE geth getv randomangle
ifactioncount 40 killit
}
enda

action ACODELOCK0 0 0 0 0 2
action ACODELOCK1 -9 0 0 0 2
action ACODELOCK2 -8 0 0 0 2
action ACODELOCK3 -7 0 0 0 2
action ACODELOCK4 -6 0 0 0 2
action ACODELOCK5 -5 0 0 0 2
action ACODELOCK6 -4 0 0 0 2
action ACODELOCK7 -3 0 0 0 2
action ACODELOCK8 -2 0 0 0 2
action ACODELOCK9 -1 0 0 0 2
action ACODELOCK10 0 0 0 0 2
action ACODELOCK11 0 0 0 0 2

state finishcode
ifvare PUZZLESOLVED 0 ifpdistl 15000 { ifvare CODE1 1 ifvare CODE2 4 ifvare CODE3 0 ifvare CODE4 8 { setactor[THISACTOR].shade 20 action ACODELOCK10 } }
ifvare PUZZLESOLVED 3 ifpdistl 15000 { ifvare CODE1 1 ifvare CODE2 9 ifvare CODE3 9 ifvare CODE4 6 { setactor[THISACTOR].shade 20 action ACODELOCK10 } }
ends

actor CODELOCK sleeptime -1

ifaction ACODELOCK10 ifactioncount 2 { 
 setvar CODE1 0
 setvar CODE2 0
 setvar CODE3 0 
 setvar CODE4 0 
 action ACODELOCK11
 }


ifaction 0 {
ifspritepal 3 ifpdistl 15000 action ACODELOCK0
ifspritepal 5 ifpdistl 15000 action ACODELOCK0
ifspritepal 9 ifpdistl 15000 action ACODELOCK0
ifspritepal 10 ifpdistl 15000 action ACODELOCK0
}

ifaction ACODELOCK0 {
state finishcode
ifspritepal 3 setvar CODE1 0
ifspritepal 5 setvar CODE2 0
ifspritepal 9 setvar CODE3 0
ifspritepal 10 setvar CODE4 0
ifcount 10 ifcansee ifhitspace ifpdistl 1200 ifp pfacing { sound CODING action ACODELOCK1 resetcount }
}

ifaction ACODELOCK1 {
state finishcode
ifspritepal 3 setvar CODE1 1
ifspritepal 5 setvar CODE2 1
ifspritepal 9 setvar CODE3 1
ifspritepal 10 setvar CODE4 1
ifcount 10 ifcansee ifhitspace ifpdistl 1200 ifp pfacing { sound CODING action ACODELOCK2 resetcount }
}

ifaction ACODELOCK2 {
state finishcode
ifspritepal 3 setvar CODE1 2
ifspritepal 5 setvar CODE2 2
ifspritepal 9 setvar CODE3 2
ifspritepal 10 setvar CODE4 2
ifcount 10 ifcansee ifhitspace ifpdistl 1200 ifp pfacing { sound CODING action ACODELOCK3 resetcount }
}

ifaction ACODELOCK3 {
state finishcode
ifspritepal 3 setvar CODE1 3
ifspritepal 5 setvar CODE2 3
ifspritepal 9 setvar CODE3 3
ifspritepal 10 setvar CODE4 3
ifcount 10 ifcansee ifhitspace ifpdistl 1200 ifp pfacing { sound CODING action ACODELOCK4 resetcount }
}

ifaction ACODELOCK4 {
state finishcode
ifspritepal 3 setvar CODE1 4
ifspritepal 5 setvar CODE2 4
ifspritepal 9 setvar CODE3 4
ifspritepal 10 setvar CODE4 4
ifcount 10 ifcansee ifhitspace ifpdistl 1200 ifp pfacing { sound CODING action ACODELOCK5 resetcount }
}

ifaction ACODELOCK5 {
state finishcode
ifspritepal 3 setvar CODE1 5
ifspritepal 5 setvar CODE2 5
ifspritepal 9 setvar CODE3 5
ifspritepal 10 setvar CODE4 5
ifcount 10 ifcansee ifhitspace ifpdistl 1200 ifp pfacing { sound CODING action ACODELOCK6 resetcount }
}

ifaction ACODELOCK6 {
state finishcode
ifspritepal 3 setvar CODE1 6
ifspritepal 5 setvar CODE2 6
ifspritepal 9 setvar CODE3 6
ifspritepal 10 setvar CODE4 6
ifcount 10 ifcansee ifhitspace ifpdistl 1200 ifp pfacing { sound CODING action ACODELOCK7 resetcount }
}

ifaction ACODELOCK7 {
state finishcode
ifspritepal 3 setvar CODE1 7
ifspritepal 5 setvar CODE2 7
ifspritepal 9 setvar CODE3 7
ifspritepal 10 setvar CODE4 7
ifcount 10 ifcansee ifhitspace ifpdistl 1200 ifp pfacing { sound CODING action ACODELOCK8 resetcount }
}

ifaction ACODELOCK8 {
state finishcode
ifspritepal 3 setvar CODE1 8
ifspritepal 5 setvar CODE2 8
ifspritepal 9 setvar CODE3 8
ifspritepal 10 setvar CODE4 8
ifcount 10 ifcansee ifhitspace ifpdistl 1200 ifp pfacing { sound CODING action ACODELOCK9 resetcount }
}

ifaction ACODELOCK9 {
state finishcode
ifspritepal 3 setvar CODE1 9
ifspritepal 5 setvar CODE2 9
ifspritepal 9 setvar CODE3 9
ifspritepal 10 setvar CODE4 9
ifcount 10 ifcansee ifhitspace ifpdistl 1200 ifp pfacing { sound CODING action ACODELOCK0 resetcount }
}

enda

state lightup
//getactor[THISACTOR].x x
//subvar x 12
//setactor[THISACTOR].x x

getactor[THISACTOR].shade TEMP
subvar TEMP 1
setactor[THISACTOR].shade TEMP
ends

action ADARKFACE0 0 0 0 0 2
action ADARKFACE1 0 0 0 0 2
action ADARKFACE2 0 0 0 0 2
action ADARKFACE3 0 0 0 0 2
action ADARKFACE4 0 0 0 0 2
action ADARKFACE5 0 0 0 0 2
action ADARKFACE6 0 0 0 0 2
action ADARKFACE7 0 0 0 0 2
action ADARKFACE8 0 0 0 0 2
action ADARKFACE9 0 0 0 0 2
action ADARKFACE10 0 0 0 0 2
action ADARKFACE11 0 0 0 0 2
action ADARKFACE12 0 0 0 0 2
action ADARKFACE13 0 0 0 0 2
action ADARKFACE14 0 0 0 0 2
action ADARKFACE15 0 0 0 0 2
action ADARKFACE16 0 0 0 0 2
action ADARKFACE17 0 0 0 0 2
action ADARKFACE18 0 0 0 0 2
action ADARKFACE19 0 0 0 0 2
action ADARKFACE20 0 0 0 0 2
action ADARKFACE21 0 0 0 0 2
action ADARKFACE22 0 0 0 0 2
action ADARKFACE23 0 0 0 0 2
action ADARKFACE24 0 0 0 0 2
action ADARKFACE25 0 0 0 0 2
action ADARKFACE26 0 0 0 0 2
action ADARKFACE27 0 0 0 0 2
action ADARKFACE28 0 0 0 0 2
action ADARKFACE29 0 0 0 0 2
action ADARKFACE30 0 0 0 0 2
action ADARKFACE31 0 0 0 0 2
action ADARKFACE32 0 0 0 0 2
action ADARKFACE33 0 0 0 0 2
action ADARKFACE34 0 0 0 0 2
action ADARKFACE35 0 0 0 0 2
action ADARKFACE36 0 0 0 0 2
action ADARKFACE37 0 0 0 0 2
action ADARKFACE38 0 0 0 0 2
action ADARKFACE39 0 0 0 0 2
action ADARKFACE40 0 0 0 0 2
action ADARKFACE41 0 0 0 0 2
action ADARKFACE42 0 0 0 0 2
action ADARKFACE43 0 0 0 0 2
action ADARKFACE44 0 0 0 0 2
actor DARKFACE sleeptime -1
ifaction 0 {
ifpdistl 1300 ifcansee ifp pfacing setvar PRESSTEXT 2
ifpdistl 1300 ifcansee ifp pfacing ifhitspace { starttrack 1 action ADARKFACE0 }
}

//hello
ifaction ADARKFACE0 { 
setvar MOTIONLESS 1
setvar NOWEAPON 1
state lookatme
ifactioncount 40 { starttrack 4 globalsound FACEVOICE setvar PICTURESCREEN 40 action ADARKFACE1 }
}

ifaction ADARKFACE1 { 
state lookatme
ifactioncount 140 { setvar PICTURESCREEN 0 action ADARKFACE2 }
}

//question #1
ifaction ADARKFACE2 { 
state lookatme
ifactioncount 40 {
setvar PICTURESCREEN 41
ifvarg PRESSINGONE 0 { setvar pal1 2 action ADARKFACE3 } else
ifvarg PRESSINGTWO 0 { setvar pal2 2 action ADARKFACE3 }
}
}

//follow to bonus
ifaction ADARKFACE3 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { state lightup ifvare pal1 2 { setvar pal1 0 action ADARKFACE4 } else ifvare pal2 2 { setvar pal2 0 action ADARKFACE6 } } 
}

//question #1 (bonus)
ifaction ADARKFACE4 { 
state lookatme
ifactioncount 40 {
setvar PICTURESCREEN 42
ifvarg PRESSINGONE 0 { setvar pal1 2 action ADARKFACE5 } else
ifvarg PRESSINGTWO 0 { setvar pal2 2 action ADARKFACE5 }
}
}

//follow to question #2
ifaction ADARKFACE5 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { state lightup setvar pal1 0 setvar pal2 0 action ADARKFACE6  } 
}

//question #2
ifaction ADARKFACE6 { 
state lookatme
ifactioncount 40 {
setvar PICTURESCREEN 43
ifvarg PRESSINGONE 0 { setvar pal1 2 action ADARKFACE7 } else
ifvarg PRESSINGTWO 0 { setvar pal2 2 action ADARKFACE7 }
}
}

//follow to question #3
ifaction ADARKFACE7 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { state lightup setvar pal1 0 setvar pal2 0 action ADARKFACE8 } 
}

//question #3
ifaction ADARKFACE8 { 
state lookatme
ifactioncount 40 {
setvar PICTURESCREEN 44
ifvarg PRESSINGONE 0 { setvar pal1 2 action ADARKFACE9 } else
ifvarg PRESSINGTWO 0 { setvar pal2 2 action ADARKFACE9 }
}
}

//follow to question #4
ifaction ADARKFACE9 { 
//sound EJECT_CLIP2
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { state lightup setvar pal1 0 setvar pal2 0 action ADARKFACE11 } 
}

//question #4
ifaction ADARKFACE11 { 
state lookatme
ifactioncount 40 {
setvar PICTURESCREEN 45
ifvarg PRESSINGONE 0 { setvar pal1 2 action ADARKFACE12 } else
ifvarg PRESSINGTWO 0 { setvar pal2 2 action ADARKFACE12 }
}
}

//follow to bonus
ifaction ADARKFACE12 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { state lightup ifvare pal1 2 { setvar pal1 0 action ADARKFACE15 } else ifvare pal2 2 { setvar pal2 0 action ADARKFACE13 } } 
}

//question #4 (bonus)
ifaction ADARKFACE13 { 
state lookatme
ifactioncount 40 {
setvar PICTURESCREEN 46
ifvarg PRESSINGONE 0 { setvar pal1 2 action ADARKFACE14 } else
ifvarg PRESSINGTWO 0 { setvar pal2 2 action ADARKFACE14 }
}
}

//follow to question #5
ifaction ADARKFACE14 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { state lightup setvar pal1 0 setvar pal2 0 action ADARKFACE15 } 
}

//question #5
ifaction ADARKFACE15 { 
state lookatme
ifactioncount 40 {
setvar PICTURESCREEN 47
ifvarg PRESSINGONE 0 { setvar pal1 2 action ADARKFACE16 } else
ifvarg PRESSINGTWO 0 { setvar pal2 2 action ADARKFACE16 }
}
}

//follow to bonus
ifaction ADARKFACE16 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { state lightup ifvare pal1 2 { setvar pal1 0 action ADARKFACE17 } else ifvare pal2 2 { setvar pal2 0 action ADARKFACE19 } } 
}

//commentary for question #5 (bonus)
ifaction ADARKFACE17 { 
state lookatme
ifactioncount 10 setvar PICTURESCREEN 48

ifactioncount 120 { setvar PICTURESCREEN 0 setvar pal1 0 setvar pal2 0 action ADARKFACE19 } 
}

//follow to question #6
ifaction ADARKFACE18 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { state lightup setvar pal1 0 setvar pal2 0 action ADARKFACE19 } 
}

//question #6
ifaction ADARKFACE19 { 
state lookatme
ifactioncount 40 {
setvar PICTURESCREEN 49
ifvarg PRESSINGONE 0 { setvar pal1 2 action ADARKFACE20 } else
ifvarg PRESSINGTWO 0 { setvar pal2 2 action ADARKFACE20 }
}
}

//follow to question #7
ifaction ADARKFACE20 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { state lightup setvar pal1 0 setvar pal2 0 action ADARKFACE21 } 
}

//question #7
ifaction ADARKFACE21 { 
state lookatme
ifactioncount 40 {
setvar PICTURESCREEN 50
ifvarg PRESSINGONE 0 { setvar pal1 2 action ADARKFACE22 } else
ifvarg PRESSINGTWO 0 { setvar pal2 2 action ADARKFACE22 }
}
}

//follow to comments about #7
ifaction ADARKFACE22 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 action ADARKFACE23 
}

//commentary for question #7 (bonus)
ifaction ADARKFACE23 { 
state lookatme
ifactioncount 10 ifvare pal1 2 setvar PICTURESCREEN 51
ifactioncount 10 ifvare pal2 2 setvar PICTURESCREEN 52

ifactioncount 120 { setvar PICTURESCREEN 0 setvar pal1 0 setvar pal2 0 action ADARKFACE25 } 
}

//follow to question #8
ifaction ADARKFACE25 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { state lightup setvar pal1 0 setvar pal2 0 action ADARKFACE26 } 
}

//question #8
ifaction ADARKFACE26 { 
state lookatme
ifactioncount 40 {
setvar PICTURESCREEN 53
ifvarg PRESSINGONE 0 { setvar pal1 2 action ADARKFACE10 } else
ifvarg PRESSINGTWO 0 { setvar pal2 2 action ADARKFACE10 }
}
}

//follow to commentary for question #8
ifaction ADARKFACE10 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { setvar pal1 0 setvar pal2 0 action ADARKFACE27 } 
}

//commentary for question #8 (bonus)
ifaction ADARKFACE27 { 
state lookatme
ifactioncount 10 setvar PICTURESCREEN 54

ifactioncount 120 { setvar PICTURESCREEN 0 setvar pal1 0 setvar pal2 0 action ADARKFACE28 } 
}

//follow to question #9
ifaction ADARKFACE28 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { state lightup setvar pal1 0 setvar pal2 0 action ADARKFACE29 } 
}

//question #9
ifaction ADARKFACE29 { 
state lookatme
ifactioncount 40 {
setvar PICTURESCREEN 55
ifvarg PRESSINGONE 0 { setvar pal1 2 action ADARKFACE30 } else
ifvarg PRESSINGTWO 0 { setvar pal2 2 action ADARKFACE30 }
}
}

//follow to question #10
ifaction ADARKFACE30 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0
ifactioncount 40 { state lightup setvar pal1 0 setvar pal2 0 action ADARKFACE31 } 
}

//question #10
ifaction ADARKFACE31 { 
state lookatme
ifactioncount 40 {
setvar PICTURESCREEN 56
ifvarg PRESSINGONE 0 { setvar pal1 2 action ADARKFACE32 } else
ifvarg PRESSINGTWO 0 { setvar pal2 2 action ADARKFACE32 }
}
}

//follow to ending
ifaction ADARKFACE32 { 
state lookatme
ifactioncount 20 setvar PICTURESCREEN 0

ifactioncount 100 { 
ifvare ROPEVAR 1 starttrack 7 else starttrack 1
ifvare pal1 2 { setvar pal1 0 globalsound FACEVOICE2 setvar THANKS 1 action ADARKFACE33 } else 
ifvare pal2 2 { setvar pal2 0 action ADARKFACE34 } 
} 
}

//ending #1
ifaction ADARKFACE33 { 
ifactioncount 10 cstat 18
ifactioncount 12 cstat 530
ifactioncount 14 { setvar MOTIONLESS 0 setvar NOWEAPON 0 killit }
}

//ending #2
ifaction ADARKFACE34 { 
ifactioncount 10
{ setvar MOTIONLESS 0 setvar NOWEAPON 0 quake 10 setvar OPERATE 10 killit }
}
enda


move MSMALLSMOKE2 18 -54
move MSMALLSMOKE3 0 -20
action SMOKEFRAMES2 -1 4 1 1 20
actor SMALLSMOKE2 0 SMOKEFRAMES2
spritepal 4

ifspawnedby GROWSPARK {
ifmove 0 move MSMALLSMOKE3 geth getv
ifactioncount 0 { sizeat 55 55 cstat 2 }
ifactioncount 2 sizeat 60 60
ifactioncount 3 { sizeat 65 65 cstat 514 }
ifactioncount 4 killit
}

else {
ifmove 0 move MSMALLSMOKE2 geth getv
ifactioncount 0 { sizeat 145 145 cstat 2 }
ifactioncount 2 sizeat 150 150
ifactioncount 3 { sizeat 155 155 cstat 514 }
ifactioncount 4 killit
}
enda


actor DOOR_SPRITE 
ifspritepal 0 { } else

{

cstat 32768 sleeptime -1
ifaction 0 { setvar VIRTUALVAR 1 getactor[THISACTOR].hitag HITAGSAVED action ZERO }

ifaction ZERO {
ifspritepal 1 {
getsector[THISACTOR].ceilingz myz
ifvare HITAGSAVED 1 setvarvar myz doorz1 
ifvare HITAGSAVED 2 setvarvar myz doorz2 
ifvare HITAGSAVED 3 setvarvar myz doorz3 
ifvare HITAGSAVED 4 setvarvar myz doorz4 
ifvare HITAGSAVED 5 setvarvar myz doorz5 
ifvare HITAGSAVED 6 setvarvar myz doorz6 
ifvare HITAGSAVED 7 setvarvar myz doorz7 
ifvare HITAGSAVED 8 setvarvar myz doorz8 
ifvare HITAGSAVED 9 setvarvar myz doorz9 
ifvare HITAGSAVED 10 setvarvar myz doorz10 
setsector[THISACTOR].ceilingz myz

ifvare HITAGSAVED 1 ifvare GODOOR 1 { setvar GODOOR 0 action ZERO2 }
ifvare HITAGSAVED 2  ifvare GODOOR 2 { setvar GODOOR 0 action ZERO2 } 
ifvare HITAGSAVED 3  ifvare GODOOR 3 { setvar GODOOR 0 action ZERO2 } 
ifvare HITAGSAVED 4  ifvare GODOOR 4 { setvar GODOOR 0 action ZERO2 } 
ifvare HITAGSAVED 5  ifvare GODOOR 5 { setvar GODOOR 0 action ZERO2 } 
ifvare HITAGSAVED 6  ifvare GODOOR 6 { setvar GODOOR 0 action ZERO2 } 
ifvare HITAGSAVED 7  ifvare GODOOR 7 { setvar GODOOR 0 action ZERO2 } 
ifvare HITAGSAVED 8  ifvare GODOOR 8 { setvar GODOOR 0 action ZERO2 } 
ifvare HITAGSAVED 9  ifvare GODOOR 9 { setvar GODOOR 0 action ZERO2 } 
ifvare HITAGSAVED 10  ifvare GODOOR 10 { setvar GODOOR 0 action ZERO2 } 


}


ifspritepal 2 {
getactor[THISACTOR].z myz
ifvare HITAGSAVED 1 setvarvar doorz1 myz
ifvare HITAGSAVED 2 setvarvar doorz2 myz
ifvare HITAGSAVED 3 setvarvar doorz3 myz
ifvare HITAGSAVED 4 setvarvar doorz4 myz
ifvare HITAGSAVED 5 setvarvar doorz5 myz
ifvare HITAGSAVED 6 setvarvar doorz6 myz
ifvare HITAGSAVED 7 setvarvar doorz7 myz
ifvare HITAGSAVED 8 setvarvar doorz8 myz
ifvare HITAGSAVED 9 setvarvar doorz9 myz
ifvare HITAGSAVED 10 setvarvar doorz10 myz

getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 {
ifvare HITAGSAVED 1 ifvare VIRTUALVAR 1 { setvar GODOOR 1 action ZERO2 }
ifvare HITAGSAVED 2  ifvare VIRTUALVAR 2 { setvar GODOOR 2 action ZERO2 } 
ifvare HITAGSAVED 3  ifvare VIRTUALVAR 3 { setvar GODOOR 3 action ZERO2 } 
ifvare HITAGSAVED 4  ifvare VIRTUALVAR 4 { setvar GODOOR 4 action ZERO2 } 
ifvare HITAGSAVED 5  ifvare VIRTUALVAR 5 { setvar GODOOR 5 action ZERO2 } 
ifvare HITAGSAVED 6  ifvare VIRTUALVAR 6 { setvar GODOOR 6 action ZERO2 } 
ifvare HITAGSAVED 7  ifvare VIRTUALVAR 7 { setvar GODOOR 7 action ZERO2 } 
ifvare HITAGSAVED 8  ifvare VIRTUALVAR 8 { setvar GODOOR 8 action ZERO2 } 
ifvare HITAGSAVED 9  ifvare VIRTUALVAR 9 { setvar GODOOR 9 action ZERO2 } 
ifvare HITAGSAVED 10  ifvare VIRTUALVAR 10 { setvar GODOOR 10 action ZERO2 } 
}
}

}

ifaction ZERO2 {

ifspritepal 1 {
getsector[THISACTOR].ceilingz myz
ifvare HITAGSAVED 1 setvarvar myz doorz1 
ifvare HITAGSAVED 2 setvarvar myz doorz2 
ifvare HITAGSAVED 3 setvarvar myz doorz3 
ifvare HITAGSAVED 4 setvarvar myz doorz4 
ifvare HITAGSAVED 5 setvarvar myz doorz5 
ifvare HITAGSAVED 6 setvarvar myz doorz6 
ifvare HITAGSAVED 7 setvarvar myz doorz7 
ifvare HITAGSAVED 8 setvarvar myz doorz8 
ifvare HITAGSAVED 9 setvarvar myz doorz9 
ifvare HITAGSAVED 10 setvarvar myz doorz10 
setsector[THISACTOR].ceilingz myz
}

ifspritepal 2 {

ifvare COUNTER 0 {
//randvar ZVEL 1024
//addvar ZVEL 750
//setvar ZVEL 0
mulvar ZVEL -1
setvar COUNTER 3 }

getactor[THISACTOR].z myz
addvarvar myz ZVEL
setactor[THISACTOR].z myz
addvarvar ZVEL GRAVITY

getactor[THISACTOR].z myz
ifvare HITAGSAVED 1 setvarvar doorz1 myz
ifvare HITAGSAVED 2 setvarvar doorz2 myz
ifvare HITAGSAVED 3 setvarvar doorz3 myz
ifvare HITAGSAVED 4 setvarvar doorz4 myz
ifvare HITAGSAVED 5 setvarvar doorz5 myz
ifvare HITAGSAVED 6 setvarvar doorz6 myz
ifvare HITAGSAVED 7 setvarvar doorz7 myz
ifvare HITAGSAVED 8 setvarvar doorz8 myz
ifvare HITAGSAVED 9 setvarvar doorz9 myz
ifvare HITAGSAVED 10 setvarvar doorz10 myz

iffloordistl 1 { 
ifvare COUNTER 3 { fall
ifvarl ZVEL 512 { killit //setvar COUNTER 24 setvar ZVEL 0 
}
else { sound BIGDOORSLAM quake 3 mulvar ZVEL -1 divvar ZVEL 2 setvar COUNTER 21 } } }
ifvare COUNTER 21 setvar COUNTER 3

}

}

}
enda

action ATEXT_SPRITE1 0 0 0 0 4
action ATEXT_SPRITE2 0 0 0 0 4

actor TEXT_SPRITE 
ifspritepal 0 { } else

{
cstat 32768 
sleeptime -1

ifspritepal 1 ifaction 0 action ATEXT_SPRITE1 
ifspritepal 2 ifaction 0 action ATEXT_SPRITE1
ifspritepal 3 ifaction 0 action ATEXT_SPRITE1
ifspritepal 4 ifaction 0 action ATEXT_SPRITE1
ifspritepal 5 ifaction 0 action ATEXT_SPRITE1
ifspritepal 6 ifaction 0 action ATEXT_SPRITE1
ifspritepal 7 ifaction 0 action ATEXT_SPRITE1
ifspritepal 8 ifaction 0 action ATEXT_SPRITE1
ifspritepal 9 ifaction 0 ifvare ROPEVAR 1 action ATEXT_SPRITE1
ifspritepal 10 ifaction 0 action ATEXT_SPRITE1
ifspritepal 11 ifaction 0 action ATEXT_SPRITE1
ifspritepal 12 ifaction 0 ifvarg NEWGOD 0 action ATEXT_SPRITE1

ifaction ATEXT_SPRITE1 {

ifspritepal 12 { ifvarg NEWGOD 0 ifvare PICTURESCREEN 0 { ifpdistl 1300 ifcansee setvar PRESSTEXT 2 } } else
{ ifpdistl 1300 ifcansee setvar PRESSTEXT 2 }

ifvare PRESS_VAR 0 ifcansee ifpdistl 1300 ifhitspace ifvare PRESS_VAR 0 {
ifspritepal 1 { ifvare TEMP 0 { operateactivators 4567 myconnectindex setvar TEMP 1 } globalsound READNOTE setvar MESSAGE 1 }
ifspritepal 2 setvar MESSAGE 2
ifspritepal 3 { 
ifvare ROPEVAR 0 ifvare REELVAR 0 setvar MESSAGE 3
ifvare ROPEVAR 1 ifvare REELVAR 0 setvar MESSAGE 4
ifvare ROPEVAR 0 ifvare REELVAR 1 setvar MESSAGE 5
ifvare ROPEVAR 1 ifvare REELVAR 1 { operateactivators 217 myconnectindex setvar MOTIONLESS 1 setvar OPERATE 832 setvar PUZZLESOLVED 1 killit }
}

//ifspritepal 4 { 
//}

ifspritepal 5 { globalsound READNOTE setvar MESSAGE 7 }

ifspritepal 6 { globalsound READNOTE setvar MESSAGE 8 }

ifspritepal 7 { globalsound READNOTE setvar MESSAGE 9 }

ifspritepal 8 { ifvare TEMP 0 { setvar OPERATE 1 setvar TEMP 1 } globalsound READNOTE setvar MESSAGE 11 }

ifspritepal 9 quote 235

ifspritepal 10 { ifvare TEMP 0 { globalsound SCREAM4 operateactivators 6933 myconnectindex setvar TEMP 1 } setvar MESSAGE 17 }

ifspritepal 11 { globalsound READNOTE setvar MESSAGE 18 } 

ifspritepal 12 ifvare PICTURESCREEN 0 { globalsound READNOTE setvar MESSAGE 19 } 

ifspritepal 4 { 
ifvare PUZZLESOLVED 0 { setvar MESSAGE 6 action ATEXT_SPRITE2 } else
ifvare PUZZLESOLVED 1 { globalsound SWITCH_ON setvar PUZZLESOLVED 2 action ZERO }
} else action ATEXT_SPRITE2


}

}

ifaction ATEXT_SPRITE2 {
ifpdistg 1400 { setvar MESSAGE 0 action ATEXT_SPRITE1 }
ifvare MESSAGE 1 { } else ifvare MESSAGE 2 { } else ifvare MESSAGE 7 { } else ifvare MESSAGE 8 { } else ifvare MESSAGE 9 { } else 
ifvare MESSAGE 11 { } else ifvare MESSAGE 17 { } else ifvare MESSAGE 18 { } else ifvare MESSAGE 19 { } else ifactioncount 120 { setvar MESSAGE 0 action ATEXT_SPRITE1 }
}

ifaction ZERO ifpdistl 4000 {
getactor[THISACTOR].x GODX
getactor[THISACTOR].y GODY
}


}
enda

action AFILMREEL1 0 0 0 0 4
action AFILMREEL2 0 0 0 0 4
action AFILMREEL3 0 0 0 0 4
action AFILMREEL4 0 0 0 0 4
action AFILMREEL5 0 0 0 0 4
action AFILMREEL6 0 0 0 0 4

action AFILMREELACTIVE -1 0 0 0 4

move MFILMREEL1 0 20
move MFILMREEL2 0
move MFILMREEL3 0 -20


actor FILMREEL 

ifspritepal 0 { } else {
sleeptime -1
ifspritepal 5 { 

ifcansee ifpdistl 1300 ifp pfacing { 
setvar PRESSTEXT 2
ifhitspace { globalsound DUKE_GET palfrom 16 0 32 quote 165 
//state holdme
//setvar TELEPORT 4 
setvar OPERATE 201
setvar MOTIONLESS 1
starttrack 1
setvar REELVAR 1 killit } }
} 

ifspritepal 9 { cstat 32768 ifvare PUZZLESOLVED 1 ifaction 0 { action AFILMREEL1 } }

ifspritepal 4 ifvare PUZZLESOLVED 2 { action AFILMREELACTIVE spritepal 24 }

ifaction AFILMREEL1 { cstat 16 spritepal 3
move MFILMREEL2 geth getv 
ifactioncount 10 action AFILMREEL2 }

ifaction AFILMREEL2 {
move MFILMREEL1 geth getv 
ifactioncount 60 action AFILMREEL3 }

ifaction AFILMREEL3 {
move MFILMREEL2 geth getv 
ifactioncount 30 { spritepal 24 action AFILMREEL4 } }

ifaction AFILMREEL4 {
move MFILMREEL3 geth getv 
ifactioncount 60 action AFILMREEL5 }

ifaction AFILMREEL5 {
move MFILMREEL2 geth getv 
ifactioncount 20 { setvar MOTIONLESS 0 globalsound DUKE_GET killit } }

ifaction AFILMREELACTIVE ifvare MOVIE 3 action AFILMREEL6

}



enda

spritenoshade FILMLIGHT
actor FILMLIGHT sleeptime -1
ifvare PUZZLESOLVED 2 { ifvare TEMP 0 { setvar TEMP 1 operateactivators 135 myconnectindex cstat 530 } } else cstat 32768
ifvare MOVIE 3 killit
enda

actor ROPESPRITE

ifspritepal 0 { } else {

ifspritepal 5 
ifcansee ifpdistl 1300 ifp pfacing { 
setvar PRESSTEXT 2
ifhitspace  
{ globalsound DUKE_GET palfrom 16 0 32 quote 166 setvar ROPEVAR 1 operateactivators 1111 myconnectindex killit } 
}

}

enda


spriteshadow BADGUYICON
action ABADGUYICON 176 0 0 0 2
actor BADGUYICON

ifspawnedby EFFECTOR_SPRITE spritepal 9

ifspritepal 0 { } else {

ifaction 0 action ABADGUYICON 
sizeat 64 56
ifspritepal 5 
ifcansee ifpdistl 1300 ifp pfacing { 
setvar PRESSTEXT 2
ifhitspace  
{ 
ifvare TOTALOBELISK 0 starttrack 5
globalsound DUKE_GET palfrom 16 0 32 quote 174 addvar OBELISK 1 addvar TOTALOBELISK 1 killit } 
}

}

enda


actor TIEDROPESPRITE
sleeptime -1
ifaction 0 ifspritepal 9 {
ifvare PUZZLESOLVED 0 cstat 32768 else
ifvare PUZZLESOLVED 1 { globalsound ROPESOUND action AFILMREEL1 }
}

ifaction AFILMREEL1 { cstat 16
move MFILMREEL2 geth getv 
ifactioncount 10 action AFILMREEL2 }

ifaction AFILMREEL2 {
move MFILMREEL1 geth getv 
ifactioncount 60 action AFILMREEL3 }

ifaction AFILMREEL3 {
move MFILMREEL2 geth getv 
ifactioncount 30 action AFILMREEL4 }

ifaction AFILMREEL4 {
move MFILMREEL3 geth getv 
ifactioncount 60 action AFILMREEL5 }

ifaction AFILMREEL5 {
move MFILMREEL2 geth getv 
ifactioncount 20 killit }

enda


move MNEWSHIP 320 60
action ANEWSHIP 80 0 0 0 2
actor NEWSHIP sleeptime -1 ifcansee ifaction 0 { globalsound WAR_AMBIENCE2 action ANEWSHIP }
ifaction ANEWSHIP { ifrnd 128 spawn EXPLOSION2 move MNEWSHIP geth getv ifnotmoving { debris SCRAP1 10 quake 12 spawn EXPLOSION2 sound PIPEBOMB_EXPLODE killit } }
enda

actor BEERMUG sleeptime -1
ifaction 0 { strength WEAK ifrnd 128 cstat 257 else cstat 261 action ZERO }
fall 

ifaction ZERO {
  ifhitweapon
  {
    ifdead
    {
sound GLASS_BREAKING
lotsofglass 10
cstat 32768
strength WEAK
action ZERO2
	}
	}
}

ifaction ZERO2 { strength WEAK cstat 32768 ifvare NEWGOD 1 action 0 }

ifvare NEWGOD 29 killit
enda


action AITEMBAG0 0 0 0 0 4
action AITEMBAG1 0 0 0 0 4
action AITEMBAG2 0 0 0 0 4
action AITEMBAG3 0 0 0 0 4

action AITEMBAGSCREWYOUALL 0 0 0 0 4

actor ITEMBAG fall sizeat 64 64 sleeptime -1
ifaction 0 { cstat 0
ifspritepal 17 ifvarg NEWGOD 0 killit
ifcansee ifp pfacing ifpdistl 1200 { 
setvar PRESSTEXT 2
ifhitspace {
ifspritepal 0 { globalsound ENDSEQVOL2SND5 spawn ACCESSCARD spawn CHAINGUNSPRITE action AITEMBAG0 }
ifspritepal 9 { globalsound ENDSEQVOL2SND5 spawn ACCESSCARD spawn CHAINGUNSPRITE killit }
ifspritepal 17 { globalsound ENDSEQVOL2SND5 spawn FIRSTAID killit }
ifspritepal 25 { globalsound ENDSEQVOL2SND5 spawn SHOTGUNSPRITE action AITEMBAG0 }
ifspritepal 6 { 

ifvarg NEWGOD 29 { globalsound ENDSEQVOL2SND5 spawn HEAVYHBOMB killit }
else { globalsound ENDSEQVOL2SND5 cstat 32768 action AITEMBAG1 }


}
} } }

ifaction AITEMBAG1 {
spawn RPGSPRITE
ifactioncount 60 {
starttrack 1
operateactivators 1919 myconnectindex
setvar ERROR 1
setvar MOTIONLESS 1
setvar NOWEAPON 1
action AITEMBAG2
setvar PICTURESCREEN 1
}
}

ifaction AITEMBAG2 {
ifactioncount 1 setvar PICTURESCREEN 2
ifactioncount 2 setvar PICTURESCREEN 3
ifactioncount 45 { globalsound FINALERROR setvar PICTURESCREEN 0 action AITEMBAGSCREWYOUALL }
}

ifaction AITEMBAGSCREWYOUALL {
ifactioncount 1 ifvare OPERATE 0 setvar OPERATE 1025
ifactioncount 12 ifvare OPERATE 1025 setvar OPERATE 1026
ifactioncount 24 ifvare OPERATE 1026 setvar OPERATE 1027
ifactioncount 37 ifvare OPERATE 1027 { action AITEMBAG3 }
}

ifaction AITEMBAG3 {
ifactioncount 1 { stopsound FINALERROR stopsound STATUE1 setvar OPERATE 1028 action AITEMBAG0 }
}

ifaction AITEMBAG0 { cstat 32768 ifvare NEWGOD 1 action 0 }
enda

spritenoshade 3707
spritenoshade 3708

action AFACELESS1 0 4 1 1 14
action AFACELESS2 0 1 1 1 4
action AFACELESS3 28 1 1 1 4
move MFACELESS1 60
move MFACELESS2 0
actor FACELESS sleeptime -1 cstat 0 fall
ifvare TEMP 0 {
getactor[THISACTOR].x x
getactor[THISACTOR].y y
setvar TEMP 1
}

ifvarg GOAWAYFACELESS 0 {
setactor[THISACTOR].x x
setactor[THISACTOR].y y
}

ifaction 0 ifcansee action AFACELESS1
ifaction AFACELESS1 { 
sizeat 12 12
ifcansee ifpdistl 1400 action AFACELESS2
move MFACELESS1 faceplayer 
}

ifaction AFACELESS2 { 
state lookatme
setvar BESLOW 2
ifpdistg 1800 action AFACELESS1
move MFACELESS2 faceplayer 
ifactioncount 4 action AFACELESS3
}

ifaction AFACELESS3 ifp palive { 
setvar BESLOW 2
state lookatme
ifrnd 128 sizeat 11 12 else  sizeat 12 12
//ifpdistg 1500 { ifp pfacing { } else ifcansee { } else action AFACELESS1 }
ifpdistg 1800 action AFACELESS1
move MFACELESS2 faceplayer 
ifrnd 100 palfrom 15 0
ifactioncount 4 { addphealth -4 globalsound GLITCHSOUL resetactioncount }
}
enda


spriteshadow HUNTED
spritenoshade HUNTED

action AHUNTED1 0 5 1 1 4
action AHUNTED2 0 4 1 1 2
action AHUNTED3 0 1 1 1 4
action AHUNTED4 0 5 1 1 0
move MHUNTED1 200
move MHUNTED2 100
move MHUNTED1_2 300
move MHUNTED2_2 150
move MHUNTED3 0

actor HUNTED sleeptime -1

ifvare COUNTER 0 {
ifspritepal 17 setvar COUNTER 1
ifspritepal 6 setvar COUNTER 2 }

ifvare COUNTER 1 { ifpdistl 3500 spritepal 17 else spritepal 4 }
ifvare COUNTER 2 { ifpdistl 3500 spritepal 6 else spritepal 4 }

setactor[THISACTOR].shade 8

ifaction 0 ifcansee { 

ifspritepal 0 cstat 32768

ifvare OPERATE 666 ifvare COUNTER 0 setvar COUNTER 1

ifvare COUNTER 1 {
ifvare TEMP 0 { sizeat 35 48 cstat 257 ifvare OPERATE 666 strength 80 else strength 5 setvar TEMP 1 }
ifpdistl 6000 { action AHUNTED1 } }
 
ifvare COUNTER 2 {
ifvare TEMP 0 { sizeat 35 48 cstat 257 strength 5 setvar TEMP 1 }
ifpdistl 7000 { action AHUNTED1 } }
}

ifaction AHUNTED1 {
cstat 257 fall
ifvare COUNTER 1 sizeat 35 48
ifvare COUNTER 2 { ifrnd 128 sizeat 31 49 else ifrnd 128 sizeat 33 47 else sizeat 35 48 }
ifvare COUNTER 1 move MHUNTED1 faceplayer
ifvare COUNTER 2 move MHUNTED1_2 faceplayer
ifpdistl 1200 ifp palive ifcansee action AHUNTED2
ifp palive { } else action AHUNTED3
} 

ifaction AHUNTED2 {
ifvare COUNTER 1 move MHUNTED2 faceplayer
ifvare COUNTER 2 move MHUNTED2_2 faceplayer 

ifrnd 128 sizeat 34 49
ifrnd 128 sizeat 38 47
ifrnd 128 sizeat 31 50
ifrnd 128 sizeat 36 48
ifrnd 128 sizeat 35 49
ifrnd 128 sizeat 37 47
ifrnd 128 sizeat 33 46
ifrnd 128 sizeat 32 46

ifvare COUNTER 1 ifactioncount 10 {  ifvare OPERATE 666 addphealth -1 else addphealth -4 palfrom 20 0 globalsound HUNTEDBITE resetactioncount } else
ifvare COUNTER 2 ifactioncount 7 { addphealth -4 palfrom 20 0 globalsound HUNTEDBITE resetactioncount } 

ifpdistg 1200 action AHUNTED1
ifp palive { } else action AHUNTED3
}

ifaction AHUNTED3 {
move MHUNTED3 faceplayer 
ifp palive action AHUNTED1
}

ifaction AHUNTED4 {
move 0
ifrnd 200 sizeto 5 48
ifactioncount 10 cstat 2
ifactioncount 14 cstat 514
ifactioncount 18 killit
}

  ifhitweapon   
  {
//spritepal 4 guts JIBS6 4
    ifdead         
    {    
	cstat 0
//spritepal 4	
//guts JIBS6 30
globalsound HUNTEDDIE 
action AHUNTED4
    }
	
  }
  

enda


action ABLOCKER1 1 0 0 0 2
actor BLOCKER1 sleeptime -1 ifaction 0 action ABLOCKER1
ifaction ABLOCKER1 { 
ifspritepal 0 cstat 273
ifspritepal 1 { cstat 273 ifvare ERROR 1 killit }
ifspritepal 2 { { ifvarg EFFECT 2 cstat 273 else cstat 32768 } }
ifspritepal 4 { ifvare NEWGOD 0 cstat 32768 else ifvare NEWGOD 5 cstat 273 else ifvare NEWGOD 6 killit }
ifspritepal 5 { ifvare NEWGOD 0 cstat 32768 else ifvare NEWGOD 23 cstat 273 else ifvare NEWGOD 25 killit }
ifspritepal 6 { ifvare NEWGOD 0 cstat 32768 else ifvare NEWGOD 9 cstat 273 else ifvare PICTURESCREEN 106 killit }
ifspritepal 7 { ifvare NEWGOD 0 cstat 32785 ifvare NEWGOD 29 killit }
ifspritepal 8 { ifvare NEWGOD 0 cstat 32768 else ifvare NEWGOD 14 cstat 273 ifvare PICTURESCREEN 109 killit }
ifspritepal 9 { ifvare KEY2 1 killit }
ifspritepal 10 { ifvare KEY2 0 cstat 32768 else cstat 273 }
ifspritepal 11 { ifvare KEY1 1 killit }
ifspritepal 12 { ifvare PUZZLESOLVED 0 cstat 32768 else ifvare PUZZLESOLVED 2 cstat 273 ifvare MOVIE 3 killit }
}
enda

actor FAKEBODY sleeptime -1
ifspritepal 9 ifvare KEY2 1 { spawn WATCHER1 killit }
enda

useractor notenemy BROKENFIREEXT WEAK
ifhitweapon { debris SCRAP2 15 sound VENT_BUST killit }
ifspritepal 5 ifvarg NEWGOD 3 killit
enda

useractor notenemy BROKENBARREL WEAK
fall
ifhitweapon { debris SCRAP2 15 sound VENT_BUST killit }
enda

useractor notenemy BROKENBARREL2 WEAK
fall
ifhitweapon { debris SCRAP2 15 sound VENT_BUST killit }
enda

action ALIFELESS1 -5  4  5  1   34 
action ALIFELESS2 45  4  1  1   39 
action ALIFELESS3 49  1  1  1   18

spriteshadow LIFELESS
move MLIFELESS 30 0
move MLIFELESS2 -20 0
actor LIFELESS WEAK 
ifvare NEWGOD 4 killit 
sleeptime -1 sizeat 40 40 spritepal 4 fall
ifaction 0 { 
cstat 32768
ifcansee ifvare ROPEVAR 1 { cstat 257 move MLIFELESS geth getv randomangle action ALIFELESS1 } }

ifaction ALIFELESS1 { 
ifnotmoving move MLIFELESS geth getv randomangle else move MLIFELESS geth getv
ifrnd 4 move MLIFELESS geth getv randomangle

  ifhitweapon   
  {
spritepal 4 guts JIBS6 4
    ifdead         
    {    
spritepal 4	
guts JIBS6 30
cstat 0


//ifrnd 128 
sound BROKENBONES
 //else 
sound LIFELESSDIE

move MLIFELESS geth getv faceplayer
action ALIFELESS2 
    }
	// sound VOL4ENDSND2 
  }
}

ifaction ALIFELESS2 { 
move MLIFELESS2 geth getv faceplayer

ifactioncount 4 { move 0 action ALIFELESS3 }
}
enda




actor STALKERSPAWNER fall sleeptime -1 cstat 32768
ifvare OBELISKPLACED 4 { 
setvar CHECKHOWMANY 0
setvar STALKERACTION 0
killit
}

ifonwater ifcount 30 {
ifpdistg 8000 { ifp pfacing ifcansee { } else { spawn STALKER killit } } 
}
else {
ifpdistg 8000 { ifp pfacing ifcansee { } else { spawn STALKER killit } } 
}
enda

action ASTALKERSPAWNERTIMER1 0 0 0 0 2
actor STALKERSPAWNERTIMER sleeptime -1 cstat 32768

ifvare OBELISKPLACED 4 { 
setvar CHECKHOWMANY 0
setvar STALKERACTION 0
killit
}

getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1

ifaction 0 ifvarvare rr0 rr1 action ASTALKERSPAWNERTIMER1
ifaction ASTALKERSPAWNERTIMER1 { 


ifvarg OBELISK 0 { userquote 176 spawn STALKER killit } else
ifactioncount 700 { ifp pfacing { } else ifpdistg 4000 { userquote 176 spawn STALKER killit } }
}
enda

state tearplayer
//setvar MOTIONLESS 0 addphealth -200
setvar TELEPORT 666  
ends

state tearplayer2
ends

action ASTALKER1 2264 4 1 1 12
action ASTALKER2 2263 1 1 1 12
action ASTALKER3 2268 1 1 1 50
action ASTALKER4 2269 1 1 1 50
action ASTALKER5 2270 1 1 1 50
action ASTALKER6 2271 1 1 1 50
action ASTALKER7 2272 1 1 1 50
action ASTALKER8 2273 1 1 1 50
action ASTALKER9 2274 1 1 1 50
action ASTALKER10 2275 1 1 1 50
action ASTALKER11 2276 1 1 1 50
action ASTALKER12 2277 1 1 1 50
action ASTALKER13 2278 1 1 1 50
action ASTALKER14 2279 1 1 1 50

move STALKERM 0
move STALKERM2 8
//spriteshadow STALKER
actor STALKER sizeat 20 20 sleeptime -1

ifvare OPERATE 7 ifvare CAUGHT 0 {
ifp pfacing { } else {
setactor[THISACTOR].x 75400
setactor[THISACTOR].y 97800
setvar OPERATE 0
}
}

ifvare OBELISKPLACED 4 { 
ifp pfacing ifcansee palfrom 50 0
setvar CHECKHOWMANY 0
setvar STALKERACTION 0
spawn SMALLSMOKE2 spawn SMALLSMOKE2 spawn SMALLSMOKE2 spawn SMALLSMOKE2 
spawn SMALLSMOKE2 spawn SMALLSMOKE2 spawn SMALLSMOKE2 spawn SMALLSMOKE2 
killit
}

ifaction 0 ifvare STALKERACTION 0 { 
addvar CHECKHOWMANY 1
action ASTALKER1
resetactioncount
setvar STALKERACTION 1
}


ifvare STALKERACTION 1 {

ifcansee { } else { ifp pfacing { } else ifrnd 1 { ifrnd 85 soundonce STALKERSOUND else ifrnd 170 soundonce STALKERSOUND2 else soundonce STALKERSOUND3 } }

ifvarg CHECKHOWMANY 1 { subvar CHECKHOWMANY 1 killit }


state update_sector

ifvarg SECT 0 fall
getactor[THISACTOR].z z
getplayer[THISACTOR].posz pz
addvar pz 9544
getactor[THISACTOR].z mz
subvarvar mz pz
ifvarl mz 0 mulvar mz -1
ifp phigher {
ifvarl SECT 0 subvar z 100
setactor[THISACTOR].z z }

else 
 
ifvarl mz 21000 {
ifvarl SECT 0 subvar z 100
setactor[THISACTOR].z z }


ifp pdead { 
ifaction ASTALKER1 action ASTALKER2
resetactioncount
setvar STALKERACTION 3
}


getactor[THISACTOR].x mx
getactor[THISACTOR].y my
getplayer[THISACTOR].posx x
getplayer[THISACTOR].posy y
ifvare TOTALOBELISK 0 {
ifvarvarl mx x addvarvar mx 25
ifvarvarl my y addvarvar my 25
ifvarvarg mx x subvarvar mx 25
ifvarvarg my y subvarvar my 25
}
ifvare TOTALOBELISK 1 {
ifvarvarl mx x addvarvar mx 30
ifvarvarl my y addvarvar my 30
ifvarvarg mx x subvarvar mx 30
ifvarvarg my y subvarvar my 30
}
ifvare TOTALOBELISK 2 {
ifvarvarl mx x addvarvar mx 35
ifvarvarl my y addvarvar my 35
ifvarvarg mx x subvarvar mx 35
ifvarvarg my y subvarvar my 35
}
ifvare TOTALOBELISK 3 {
ifvarvarl mx x addvarvar mx 40
ifvarvarl my y addvarvar my 40
ifvarvarg mx x subvarvar mx 40
ifvarvarg my y subvarvar my 40
}
ifvare TOTALOBELISK 4 {
ifvarvarl mx x addvarvar mx 45
ifvarvarl my y addvarvar my 45
ifvarvarg mx x subvarvar mx 45
ifvarvarg my y subvarvar my 45
}

setactor[THISACTOR].x mx
setactor[THISACTOR].y my

move STALKERM faceplayer 

ifpdistl 1000 ifcansee { ifp pfacing { state lookatme starttrack 0 } 
else { setvar COUNTER 1 starttrack 1 } setvar CAUGHT 1 setvar MOTIONLESS 1 
ifaction ASTALKER1 action ASTALKER2
resetactioncount
resetcount
ifp pfacing { globalsound STALKERTEARING1 globalsound STALKERTEARING2 action ASTALKER2 setvar TEMP 0 setvar COUNTER2 0 setvar STALKERACTION 3 } else setvar STALKERACTION 2
}

ifactioncount 50 ifpdistg 16000 {
{ ifcansee { } else { setvar spawnspawner 1 subvar CHECKHOWMANY 1 killit } }
}

}

ifvare STALKERACTION 2 {
setvar NOWEAPON 1
fall
addvar COUNTER2 1
lockplayer LOCKPLAYER
move STALKERM faceplayer
ifvarg COUNTER2 40 { globalsound STALKERTEARING1 globalsound STALKERTEARING2 state lookatme action ASTALKER2 setvar TEMP 0 setvar COUNTER2 0 setvar STALKERACTION 3 }
}

ifvare STALKERACTION 3 {
ifvare TELEPORT 0 state lookatme
setvar NOWEAPON 1
fall
lockplayer LOCKPLAYER
//move STALKERM2 geth getv faceplayer
addvar COUNTER2 1

ifvarg COUNTER2 20 action ASTALKER3 
ifvarg COUNTER2 45 action ASTALKER4 
ifvarg COUNTER2 50 action ASTALKER5 
ifvarg COUNTER2 55 action ASTALKER6 
ifvarg COUNTER2 60 action ASTALKER7 
ifvarg COUNTER2 65 action ASTALKER8 
ifvarg COUNTER2 70 action ASTALKER9 
ifvarg COUNTER2 75 action ASTALKER10 
ifvarg COUNTER2 80 action ASTALKER11 
ifvarg COUNTER2 85 action ASTALKER12 
ifvarg COUNTER2 90 action ASTALKER13
ifvarg COUNTER2 95 action ASTALKER14

ifvarg COUNTER2 70 {
ifvare PICTURESCREEN 0 setvar PICTURESCREEN 3842
ifvarg PICTURESCREEN 3878 { setvar PICTURESCREEN 3879 } else addvar PICTURESCREEN 1
ifvare PICTURESCREEN 3879 { stopsound STALKERTEARING1 stopsound STALKERTEARING2 ifvare TEMP 0 { setvar TEMP 1 starttrack 1 } state tearplayer }
}
}
enda

action ANEWSWITCH1 -828 0 0 0 2
action ANEWSWITCH2 -827 0 0 0 2
action ANEWSWITCH3 -828 0 0 0 2
action ANEWSWITCH4 -827 0 0 0 2
actor NEWSWITCH sleeptime -1
ifaction 0 action ANEWSWITCH1
ifaction ANEWSWITCH1 {
ifcansee ifhitspace ifpdistg 1200 setvar PRESS_VAR 2
setactor[THISACTOR].shade 20
ifpdistl 1200 ifvare PRESS_VAR 0 ifcansee ifp pfacing ifhitspace {
ifvare SHOWYOURSELF 0 { setvar ROOMLIGHT 1 setvar PRESS_VAR 2 sound SWITCH_ON action ANEWSWITCH2 } else
ifvare SHOWYOURSELF 1 { starttrack 1 setactor[THISACTOR].shade 8 setvar ROOMLIGHT 1 setvar PRESS_VAR 2 sound SWITCH_ON action ANEWSWITCH4 }
}

}

ifaction ANEWSWITCH2 {
setactor[THISACTOR].shade 8
ifvare SHOWYOURSELF 1 { setvar ROOMLIGHT 0 action ANEWSWITCH1 }
}

enda

action ANEWACCESSSWITCH1 0 0 0 0 2
action ANEWACCESSSWITCH2 1 0 0 0 2
actor NEWACCESSSWITCH sleeptime -1
ifaction 0 action ANEWACCESSSWITCH1
ifaction ANEWACCESSSWITCH1 {
ifcansee ifhitspace ifpdistg 1500 setvar PRESS_VAR 2
ifpdistl 1500 ifvare PRESS_VAR 0 ifcansee ifp pfacing ifhitspace {
ifvare GHOSTCARD 0 { quote 178 setvar PRESS_VAR 2 } else
ifvare GHOSTCARD 1 { operateactivators 118 myconnectindex setvar PRESS_VAR 2 setvar GHOSTCARD 0 sound MONITOR_ACTIVE2 lockplayer 20 tip action ANEWACCESSSWITCH2 }
}

}

ifaction ANEWACCESSSWITCH2 {
ifrnd 128 setactor[THISACTOR].shade 15 else setactor[THISACTOR].shade 12
}

enda


action ANEWACCESSSWITCH20 0 0 0 0 2
action ANEWACCESSSWITCH21 0 0 0 0 2
action ANEWACCESSSWITCH22 0 0 0 0 2
actor NEWACCESSSWITCH2 sleeptime -1
ifaction 0 { cstat 32768 ifvare OPERATE 832 action ANEWACCESSSWITCH20 }

ifaction ANEWACCESSSWITCH20 {
cstat 80
ifcansee ifpdistl 1700 { setvar OPERATE 833 action ANEWACCESSSWITCH21 }
}

ifaction ANEWACCESSSWITCH21 {
cstat 80
ifcansee ifhitspace ifpdistg 1500 setvar PRESS_VAR 2
ifpdistl 1500 ifvare PRESS_VAR 0 ifcansee ifp pfacing ifhitspace {
ifvare MOLDYCARD 0 { quote 249 setvar PRESS_VAR 2 } else
ifvare MOLDYCARD 1 { tip operateactivators 2265 myconnectindex setvar PRESS_VAR 2 setvar MOLDYCARD 2 sound MONITOR_ACTIVE2 lockplayer 20 action ANEWACCESSSWITCH22 }
}

}

ifaction ANEWACCESSSWITCH22 {
ifrnd 128 setactor[THISACTOR].shade 15 else setactor[THISACTOR].shade 12
ifactioncount 4 cstat 82
ifactioncount 8 cstat 594
ifactioncount 12 killit
}

enda



action ABADSWITCH1 0 0 0 0 2
action ABADSWITCH2 1 0 0 0 2
actor BADSWITCH sleeptime -1
ifaction 0 action ABADSWITCH1
ifaction ABADSWITCH1 {
ifcansee ifhitspace ifpdistg 1500 setvar PRESS_VAR 2
ifpdistl 1500 ifvare PRESS_VAR 0 ifcansee ifp pfacing ifhitspace {
sound NEWBUTTON operateactivators 9892 myconnectindex setvar PRESS_VAR 2 action ABADSWITCH2
}

}

enda

action AVIDEOSWITCH1 26 0 0 0 2
action AVIDEOSWITCH2 27 0 0 0 2
actor VIDEOSWITCH sleeptime -1
ifaction 0 ifspritepal 9 action AVIDEOSWITCH1
ifaction AVIDEOSWITCH1 {
//ifcansee ifhitspace ifpdistg 1500 setvar PRESS_VAR 2
ifpdistl 1500 ifvare PRESS_VAR 0 ifcansee ifp pfacing ifhitspace {
ifvare PUZZLESOLVED 2 { setvar MOTIONLESS 1 sound SWITCH_ON setvar OPERATE 555 setvar PRESS_VAR 2 setvar MOVIE 1 action AVIDEOSWITCH2 } else
{ quote 319 setvar PRESS_VAR 2 }
}

}

enda

action AHANDSWITCH1 1 0 0 0 2
action AHANDSWITCH2 1 0 0 0 2
action AHANDSWITCH3 1 0 0 0 2
actor MYHANDSWITCH sleeptime -1
ifaction 0 ifspritepal 24 action AHANDSWITCH1
ifaction AHANDSWITCH1 ifpdistl 4000 action AHANDSWITCH2
ifaction AHANDSWITCH2 {
ifpdistg 4000 action AHANDSWITCH1
ifcansee ifhitspace ifpdistg 1500 setvar PRESS_VAR 2
ifpdistl 1500 ifvare PRESS_VAR 0 ifcansee ifp pfacing ifhitspace {
globalsound VOL4ENDSND2 operateactivators 837 myconnectindex setvar PRESS_VAR 2 action AHANDSWITCH3
}

}

ifaction AHANDSWITCH3 setactor[THISACTOR].shade 22

enda



actor NEWACCESSSWITCH3 sleeptime -1
ifaction 0 ifpdistl 4000 action ANEWACCESSSWITCH1
ifaction ANEWACCESSSWITCH1 {
ifpdistg 4000 action 0
ifcansee ifhitspace ifpdistg 1500 setvar PRESS_VAR 2
ifpdistl 1500 ifvare PRESS_VAR 0 ifcansee ifp pfacing ifhitspace {
ifvare BLOODCARD 0 { quote 296 setvar PRESS_VAR 2 } else
ifvare BLOODCARD 1 { operateactivators 838 myconnectindex setvar PRESS_VAR 2 setvar BLOODCARD 0 
tip globalsound BLOODSWITCH lockplayer 20 palfrom 24 63 action ANEWACCESSSWITCH2 }
}

}

enda



action AFAKESWITCH1 0 0 0 0 2
action AFAKESWITCH2 1 0 0 0 2
action AFAKESWITCH3 1 0 0 0 2
action AFAKESWITCH4 1 0 0 0 2

state pushme
addvar WEAPSIZE 1
sound SWITCH_ON2 setvar PRESS_VAR 2 action AFAKESWITCH2
ends

actor FAKESWITCH sleeptime -1
ifaction 0 action AFAKESWITCH1
ifaction AFAKESWITCH1 {
ifcansee ifhitspace ifpdistg 1800 setvar PRESS_VAR 2
ifpdistl 1800 ifvare PRESS_VAR 0 ifcansee ifp pfacing ifhitspace state pushme
ifhitweapon state pushme else strength 10
}

ifaction AFAKESWITCH2 { ifvare WEAPSIZE 5 { globalsound MONITOR_ACTIVE3 operateactivators 9003 myconnectindex action AFAKESWITCH4 } else action AFAKESWITCH3 }


enda

action AFAKEANGEL -1 0 0 0 2
actor FAKEANGEL sleeptime -1
ifaction 0 action AFAKEANGEL
ifaction AFAKEANGEL ifvare KEY3 1 { ifp pfacing { } else killit }
enda

action AANGELSTATUE1 0 0 0 0 2
action AANGELSTATUE2 0 0 0 0 2
action AANGELSTATUE3 0 0 0 0 2
action AANGELSTATUE4 0 0 0 0 2
action AANGELSTATUE5 1 0 0 0 2
action AANGELSTATUE6 1 0 0 0 2
action AANGELSTATUE7 0 0 0 0 2

move MANGELSTATUE1 10
move MANGELSTATUE2 0
move MANGELSTATUE3 25

spritenoshade ANGELSTATUE
actor ANGELSTATUE sleeptime -1
ifaction 0 { 
cstat 32768 
ifspritepal 0 ifvare SHOWYOURSELF 1 ifvare ROOMLIGHT 1 { sizeat 30 30 strength 250 operateactivators 9218 myconnectindex action AANGELSTATUE1 }
ifspritepal 24 ifvare SHOWYOURSELF 1 ifvare ROOMLIGHT 1 { sizeat 30 30 cstat 257 strength 250 action AANGELSTATUE5 }
ifspritepal 19 ifvare GHOSTCARD 1 { sizeat 30 30 cstat 257 strength 250 action AANGELSTATUE5 }

ifvare NEWGOD 34 {
ifspritepal 13 ifvare STATUEKILLED 0 { addvar COUNTER 1 ifvarg COUNTER 250 { ifp pfacing { } else { ifrnd 128 cstat 257 else cstat 261 strength 300 action AANGELSTATUE5 } } }
ifspritepal 14 ifvare STATUEKILLED 1 { addvar COUNTER 1 ifvarg COUNTER 100 { ifp pfacing { } else { ifrnd 128 cstat 257 else cstat 261 strength 300 action AANGELSTATUE5 } } }
ifspritepal 17 ifvare STATUEKILLED 2 { addvar COUNTER 1 ifvarg COUNTER 100 { ifp pfacing { } else { ifrnd 128 cstat 257 else cstat 261 strength 300 action AANGELSTATUE5 } } }
ifspritepal 16 ifvare STATUEKILLED 3 { addvar COUNTER 1 ifvarg COUNTER 100 { ifp pfacing { } else { ifrnd 128 cstat 257 else cstat 261 strength 300 action AANGELSTATUE5 } } }
ifspritepal 20 ifvare STATUEKILLED 4 { addvar COUNTER 1 ifvarg COUNTER 100 { ifp pfacing { } else { ifrnd 128 cstat 257 else cstat 261 strength 300 action AANGELSTATUE5 } } }
}

}

ifaction AANGELSTATUE1 {
spritepal 4
setvar MOTIONLESS 1
cstat 0
soundonce DUKE_HARTBEAT2 
ifp pfacing ifcansee action AANGELSTATUE2 }


ifaction AANGELSTATUE2 {
stopsound DUKE_HARTBEAT2
tip
state lookatme
ifactioncount 40 action AANGELSTATUE3
}

ifaction AANGELSTATUE3 {
tip
state lookatme
move MANGELSTATUE3 faceplayer geth getv
soundonce STATUE3
ifactioncount 110 action AANGELSTATUE4
}

ifaction AANGELSTATUE4 {
stopsound STATUE3
tip
state lookatme
move MANGELSTATUE2 faceplayer geth getv
ifactioncount 40 { setvar OPERATE 33 spritepal 0 setvar MOTIONLESS 0 cstat 257 action AANGELSTATUE5 }
}

ifaction AANGELSTATUE5 {
move MANGELSTATUE2 faceplayer geth getv
ifpdistl 8000 stopsound BADHUM
ifcanseetarget ifpdistl 8000 action AANGELSTATUE6
}

ifaction AANGELSTATUE6 {
move MANGELSTATUE1 faceplayer geth getv
soundonce BADHUM
ifcanseetarget { } else ifpdistl 6000 { } else action AANGELSTATUE5
ifactioncount 7 ifcanseetarget { palfrom 5 24 addphealth -1 resetactioncount }
ifp pdead { globalsound BROKENBONES action AANGELSTATUE7 }
}

ifaction AANGELSTATUE7 { stopsound BADHUM ifp palive action AANGELSTATUE5 }


  ifhitweapon   
  {
debris SCRAP5 5
    ifdead         
    {  
debris SCRAP5 15
debris SCRAP4 5	
globalsound STATUE2
ifspritepal 0 { setvar OPERATE 0 operateactivators 9218 myconnectindex }
stopsound BADHUM
ifvare NEWGOD 34 addvar STATUEKILLED 1
killit
    }
	else sound STATUE1
  }

enda

actor DARKWALL1 sleeptime -1 spritepal 4
ifvare ROOMLIGHT 1 cstat 32768 else cstat 17
ifvare SHOWYOURSELF 1 killit
enda


actor DARKWALL2 sleeptime -1 spritepal 4
ifvare ROOMLIGHT 1 cstat 32768 else cstat 17
ifvare SHOWYOURSELF 1 { ifvare ROOMLIGHT 1 cstat 32768 else cstat 17 }
ifvare SHOWYOURSELF 0 cstat 32768
enda

action ANEWGLASS1 83 0 0 0 2
actor NEWGLASS sleeptime -1
ifaction 0 action ANEWGLASS1
ifaction ANEWGLASS1 { 
cstat 787 
ifvare OPERATE 1 killit
}
enda

spritenoshade WATCHER1
action AWATCHER11 0 0 0 0 2
actor WATCHER1 sleeptime -1 
ifspawnedby FAKEBODY setactor[THISACTOR].shade -4 else setactor[THISACTOR].shade 12
ifaction 0 {
cstat 32768
ifvare OPERATE 1 action AWATCHER11

ifspawnedby FAKEBODY { cstat 0 sizeat 20 24 action ZERO }
}

ifaction ZERO {
cstat 0
ifrnd 128 sizeat 19 24 else sizeat 17 24
ifpdistl 7400 ifcansee { addvar TEMP 1 ifvarg TEMP 7 killit }
}

ifaction AWATCHER11 {
cstat 0
ifcansee { addvar TEMP 1 ifvarg TEMP 12 killit } else
ifp pfacing { ifcansee addvar STALKERACTION 1 ifvarg STALKERACTION 8 killit }
ifpdistl 1500 ifcansee killit
}

enda

action AWATCHER21 -1 0 0 0 2
actor WATCHER2 sleeptime -1 
ifaction 0 action AWATCHER21
ifaction AWATCHER21 { 
ifcansee { addvar TEMP 1 ifvarg TEMP 3 killit }
ifcanseetarget ifp pfacing killit
}
enda

spritenoshade WATCHER3
actor WATCHER3 sleeptime -1 
setactor[THISACTOR].shade -10
ifcansee ifpdistl 5500 killit
enda

spritenoshade WATCHER4
actor WATCHER4 sleeptime -1 
ifaction 0 ifcansee ifpdistl 10500 action ZERO
ifaction ZERO {
getactor[THISACTOR].shade TEMP
addvar TEMP 3
setactor[THISACTOR].shade TEMP
ifactioncount 8 killit
}
enda

action ANEWHATCH1 -234 0 0 0 2
action ANEWHATCH2 -234 0 0 0 2
action ANEWHATCH3 -234 0 0 0 2
move MNEWHATCH 0 -25
actor NEWHATCH
sleeptime -1
ifaction 0 action ANEWHATCH1

ifaction ANEWHATCH1 {

ifspritepal 0 ifvare OBELISKPLACED 4 {
starttrack 1
palfrom 30 63 63 63
quote 373
action ANEWHATCH2
}

ifspritepal 5 { ifvare KEY1 0 cstat 32768 ifvare KEY1 1 cstat 289 }
}

ifaction ANEWHATCH2 ifactioncount 100 { sound HATCHOPEN action ANEWHATCH3 }

ifaction ANEWHATCH3 {
move MNEWHATCH spin geth getv
ifactioncount 146 cstat 291
ifactioncount 148 cstat 803
ifactioncount 150 killit
}
enda



action ADUKESCREEN1 0 0 0 0 2
action ADUKESCREEN2 0 0 0 0 2
action ADUKESCREEN3 0 0 0 0 2
actor DUKESCREEN sleeptime -1
ifaction 0 action ADUKESCREEN1
ifaction ADUKESCREEN1 {
ifcansee ifhitspace ifpdistg 1200 setvar PRESS_VAR 2

ifpdistl 1200 ifvare PRESS_VAR 0 ifcansee ifp pfacing ifhitspace {
sound DONTHAVE action ADUKESCREEN2 }
}

ifaction ADUKESCREEN2 {
ifrnd 128 setactor[THISACTOR].shade 12 else setactor[THISACTOR].shade 0
ifactioncount 110 { stopsound DONTHAVE sound VENT_BUST action ADUKESCREEN3 }
}

ifaction ADUKESCREEN3 { 
spritepal 4
getactor[THISACTOR].sectnum s
setsector[s].floorshade 20
}
enda


actor SITTINGMONK sleeptime -1
ifvare MONKVAR 1 cstat 0 else cstat 32768
ifrnd 12 sizeat 9 8 else sizeat 8 8
enda


actor NEWACCESSCARD
  fall
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        setvar GHOSTCARD 1
        quote 177
        state getcode
      }
enda


actor NEWACCESSCARD2
  fall
ifaction 0 { cstat 32768
ifvarg NEWGOD 0 action ZERO }

ifaction ZERO {
cstat 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
stopsound WAR_AMBIENCE1 
stopsound WAR_AMBIENCE2  
stopsound WAR_AMBIENCE3
stopsound WAR_AMBIENCE4 
        setvar MOLDYCARD 1
		setvar NEWGOD 2
        quote 250
		setvar NEWGOD 4
        state getcode
      }
	  
	  }
enda


actor NEWACCESSCARD3
 // fall
  
    ifaction 0
	ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        setvar BLOODCARD 1
		operateactivators 1027 myconnectindex
        quote 295
        palfrom 18 63
	cstat 32768
	globalsound DUKE_GET
	action ZERO
      }
	  
	ifaction ZERO ifactioncount 35 { setvar OPERATE 182  killit }
enda

actor DREAMTROOP 
ifrnd 128 sizeat 42 40 else sizeat 40 40
enda

actor WALLBLOOD1 ifspritepal 9 ifvare BLOODCARD 1 killit enda

action ADECAYSPRITE1 5000 0 0 0 2
action ADECAYSPRITE2 0 0 0 0 2
action ADECAYSPRITE3 5000 0 0 0 2
action ADECAYSPRITE4 5000 0 0 0 2

state decaystate
ifspritepal 5 ifaction 0 action ADECAYSPRITE1
ifspritepal 9 ifaction 0 action ADECAYSPRITE3
ifspritepal 17 ifaction 0 action ADECAYSPRITE4
ifaction ADECAYSPRITE1 ifvare GHOSTCARD 1 action ADECAYSPRITE2
ifaction ADECAYSPRITE3 ifvare ROPEVAR 1 action ADECAYSPRITE2
ifaction ADECAYSPRITE4 ifvare MOLDYCARD 1 action ADECAYSPRITE2
ends

actor DECAYSPRITE1 sleeptime -1
state decaystate
enda

actor DECAYSPRITE2 sleeptime -1
state decaystate
enda

actor DECAYSPRITE3 sleeptime -1
state decaystate
enda

actor DECAYSPRITE4 sleeptime -1
state decaystate
enda

actor DECAYSPRITE5 sleeptime -1
state decaystate
enda

actor DECAYSPRITE6 sleeptime -1
state decaystate
enda

action ANEWTOILET1 -795 0 0 0 2
action ANEWTOILET2 -795 0 0 0 2
action ANEWTOILET3 -749 0 0 0 2
actor NEWTOILET sleeptime -1
ifaction 0 action ANEWTOILET1
ifaction ANEWTOILET1 { cstat 1 ifcansee ifpdistl 1200 ifp pfacing ifhitspace action ANEWTOILET2 }
ifaction ANEWTOILET2 {
soundonce GENERIC_AMBIENCE18
ifactioncount 40 { stopsound GENERIC_AMBIENCE18 cstat 0 action ANEWTOILET3 }
}
enda

action AFAKESCREEN1 -30 0 0 0 2
action AFAKESCREEN2 -30 0 0 0 2
actor FAKESCREEN sleeptime -1
ifaction 0 action AFAKESCREEN1
ifaction AFAKESCREEN1 { ifcansee ifpdistl 1200 ifp pfacing ifhitspace { stopsound DUKE_SEARCH stopsound DUKE_SEARCH2 action AFAKESCREEN2 } }
ifaction AFAKESCREEN2 {
soundonce GENERIC_AMBIENCE18
ifactioncount 40 { stopsound GENERIC_AMBIENCE18 killit }
}
enda



spritenoshade 3899
spritenoshade 3908
spritenoshade 3888
spritenoshade 3894
spritenoshade 3908
spritenoshade 3889

state deadcstat
ifrnd 128 cstat 0 else cstat 4
ends

action ADEADTREE1 0 0 0 0 2
action ADEADTREE2 1 0 0 0 2
action ADEADTREE3 2 0 0 0 2
actor DEADTREE
ifaction 0 {
ifrnd 85 { state deadcstat ifrnd 128 sizeat 112 112 else sizeat 92 102 action ADEADTREE1 }
else ifrnd 170 { state deadcstat ifrnd 128 sizeat 80 80 else sizeat 70 90 action ADEADTREE2 }
else { state deadcstat ifrnd 128 sizeat 72 96 else sizeat 62 100 action ADEADTREE3 }
}
enda


actor NEWHEALTH
  fall
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifphealthl MAXPLAYERHEALTH
              ifcanseetarget
      {
        addphealth 30
        quote 227
		globalsound NEWPICKUP
        killit
      }
enda


actor NEWAMMO
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifcount 6
          ifpdistl RETRIEVEDISTANCE
            ifcanseetarget
      {
        addammo PISTOL_WEAPON PISTOLAMMOAMOUNT
        quote 226
		globalsound NEWPICKUP
        killit
      }
enda

actor BLOODSPLASH sleeptime -1
ifpdistl 5000 { cstat 0 spritepal 0 } else { ifvare MONKVAR 2 cstat 32768 else { cstat 0 spritepal 4 } }
enda

actor BLOODSPLASH2 sleeptime -1
ifpdistl 5000 spritepal 0 else spritepal 4
enda

state fogpal
sleeptime -1
ifvare MONKVAR 2 spritepal 26 else spritepal 0
ends

actor 3966
state fogpal
enda

actor 3940
state fogpal
enda

actor 3954
state fogpal
enda

actor 3955
state fogpal
enda

actor 3956
state fogpal
enda


action ABADTROOPER1 -6  1  5  1   34 
action ABADTROOPER2 44  4  1  1   0 

spriteshadow BADTROOPER

actor BADTROOPER  
sleeptime -1 sizeat 40 40 cstat 0 fall
ifaction 0 action ABADTROOPER1

ifaction ABADTROOPER1 { 
setactor[THISACTOR].shade 17
ifcansee ifpdistl 2000 action ABADTROOPER2 
}

ifaction ABADTROOPER2 { 
ifrnd 128 cstat 514 else cstat 0
setactor[THISACTOR].shade 0
ifactioncount 5 { globalsound PRED_DYING resetactioncount }
addvar TEMP 1
ifvarg TEMP 30 { globalsound BADTROOPSOUND stopsound PRED_DYING killit }
}
enda

state badmeat
sleeptime -1
ifspritepal 26 ifvare MONKVAR 3 killit
ends

actor MEAT1
soundonce DEEPHUM
ifcansee ifpdistl 2000 { quake 8 stopsound EARTHQUAKE stopsound DEEPHUM globalsound CAVESPEAK starttrack 10 setvar MONKVAR 3 killit }
enda

actor MEAT2
state badmeat
enda

actor MEAT3
state badmeat
enda

actor MEAT4
state badmeat
enda


action AFACELESSDUKE1 0 0 0 0 0
actor FACELESSDUKE
ifaction 0 ifcanseetarget action AFACELESSDUKE1

ifaction AFACELESSDUKE1 {
ifspritepal 30 ifactioncount 5 killit
ifspritepal 31 ifactioncount 10 killit
ifspritepal 32 ifactioncount 15 killit
ifspritepal 33 ifactioncount 20 killit
ifspritepal 34 ifactioncount 25 killit
ifspritepal 35 ifactioncount 30 killit
ifspritepal 36 ifactioncount 35 killit
ifspritepal 37 ifactioncount 40 killit
ifspritepal 38 ifactioncount 45 killit
ifspritepal 39 ifactioncount 50 killit
ifspritepal 40 ifactioncount 55 { setvar MOTIONLESS 0 killit }
}
enda


action APOSTER1 0 0 0 0 2
action APOSTER2 1 0 0 0 2
action APOSTER3 2 0 0 0 2

state posters
sleeptime -1
ifaction 0 action APOSTER1
ifaction APOSTER1 ifvare GHOSTCARD 1 action APOSTER2
ifaction APOSTER2 ifvare ROPEVAR 1 action APOSTER3
ends

actor POSTER1
state posters
enda

actor POSTER2
state posters
enda

action ANEWGOD_SPRITE1 0 0 0 0 2
action ANEWGOD_SPRITE2 0 0 0 0 2
action ANEWGOD_SPRITE3 0 0 0 0 2
action ANEWGOD_SPRITE4 0 0 0 0 2
action ANEWGOD_SPRITE5 0 0 0 0 2
action ANEWGOD_SPRITE6 0 0 0 0 2
action ANEWGOD_SPRITE7 0 0 0 0 2
action ANEWGOD_SPRITE8 0 0 0 0 2
action ANEWGOD_SPRITE9 0 0 0 0 2
action ANEWGOD_SPRITE10 0 0 0 0 2
action ANEWGOD_SPRITE11 0 0 0 0 2
action ANEWGOD_SPRITE12 0 0 0 0 2
action ANEWGOD_SPRITE13 0 0 0 0 2
action ANEWGOD_SPRITE14 0 0 0 0 2
action ANEWGOD_SPRITE15 0 0 0 0 2
action ANEWGOD_SPRITE16 0 0 0 0 2
action ANEWGOD_SPRITE17 0 0 0 0 2
action ANEWGOD_SPRITE18 0 0 0 0 10
action ANEWGOD_SPRITE19 0 0 0 0 2
action ANEWGOD_SPRITE20 0 0 0 0 2
action ANEWGOD_SPRITE21 0 0 0 0 2
action ANEWGOD_SPRITE22 0 0 0 0 2
action ANEWGOD_SPRITE23 0 0 0 0 2
action ANEWGOD_SPRITE24 0 0 0 0 2
action ANEWGOD_SPRITE25 0 0 0 0 2
action ANEWGOD_SPRITE26 0 0 0 0 2
action ANEWGOD_SPRITE27 0 0 0 0 2
action ANEWGOD_SPRITE28 0 0 0 0 2
action ANEWGOD_SPRITE29 0 0 0 0 2
action ANEWGOD_SPRITE30 0 0 0 0 2
action ANEWGOD_SPRITE31 0 0 0 0 2
action ANEWGOD_SPRITE32 0 0 0 0 10
action ANEWGOD_SPRITE33 0 0 0 0 2
action ANEWGOD_SPRITE34 0 0 0 0 2
action ANEWGOD_SPRITE35 0 0 0 0 2
action ANEWGOD_SPRITE36 0 0 0 0 2
action ANEWGOD_SPRITE37 0 0 0 0 2
action ANEWGOD_SPRITE38 0 0 0 0 2
action ANEWGOD_SPRITE39 0 0 0 0 2
action ANEWGOD_SPRITE40 0 0 0 0 2
action ANEWGOD_SPRITE41 0 0 0 0 2
action ANEWGOD_SPRITE42 0 0 0 0 2
action ANEWGOD_SPRITE43 0 0 0 0 2
action ANEWGOD_SPRITE44 0 0 0 0 2
action ANEWGOD_SPRITE45 0 0 0 0 2
action ANEWGOD_SPRITE46 0 0 0 0 2
action ANEWGOD_SPRITE47 0 0 0 0 2
action ANEWGOD_SPRITE48 0 0 0 0 2
action ANEWGOD_SPRITE49 0 0 0 0 2

move GODMOVE 35 0

actor NEWGOD_SPRITE
ifspritepal 0 { } else
{
cstat 32768 
sleeptime -1

ifaction 0 ifvare NEWGOD 4 action ANEWGOD_SPRITE1

ifaction ANEWGOD_SPRITE1 {

setvar TEMP_SKYBOX2 0
	whilevarvarn TEMP_SKYBOX2 numsectors
	{
	// CHECK FLOORS
		getsector[TEMP_SKYBOX2].floorpicnum TEMP_SKYBOX1 
		ifvare TEMP_SKYBOX1 89
		{
		 setsector[TEMP_SKYBOX2].floorpicnum 3026
		}
	// CHECK CEILINGS
		getsector[TEMP_SKYBOX2].ceilingpicnum TEMP_SKYBOX1 
		ifvare TEMP_SKYBOX1 89
		{
		 setsector[TEMP_SKYBOX2].ceilingpicnum 3026
		}
	  addvar TEMP_SKYBOX2 1
	}

	setvar TEMP_SKYBOX3 0
	whilevarvarn TEMP_SKYBOX3 NUMWALLS
	{
	// CHECK WALLS
		getwall[TEMP_SKYBOX3].picnum TEMP_SKYBOX1 
		ifvare TEMP_SKYBOX1 89
		{
		 setwall[TEMP_SKYBOX3].picnum 3026
		}
	addvar TEMP_SKYBOX3 1
	}


ifactioncount 160 {
setplayer[THISACTOR].steroids_amount 0
setplayer[THISACTOR].firstaid_amount 0
setplayer[THISACTOR].holoduke_amount 0
setvar PICALPHA 255 setvar NEWGOD 5 starttrack 1 action ANEWGOD_SPRITE2 }
}

ifaction ANEWGOD_SPRITE2 {
ifactioncount 5 ifvarg PICALPHA 185 { subvar PICALPHA 1 resetactioncount }
ifvare PICALPHA 185 action ANEWGOD_SPRITE3 }

ifaction ANEWGOD_SPRITE3 {
ifactioncount 3 ifvarl DELETEME 100 { addvar DELETEME 1 addvar TOTALVISIBILITY 1 resetactioncount }
ifvare DELETEME 100 { action ANEWGOD_SPRITE4 }
}

ifaction ANEWGOD_SPRITE4 {
setvar DELETEME 0
ifactioncount 40 { starttrack 11 action ANEWGOD_SPRITE5 }
}


ifaction ANEWGOD_SPRITE5 {
ifactioncount 300 { setvar PICTURESCREEN 100 globalsound VOICE01 action ANEWGOD_SPRITE6 }
}

ifaction ANEWGOD_SPRITE6 {
ifactioncount 180 { setvar PICTURESCREEN 0 action ANEWGOD_SPRITE7 }
}


ifaction ANEWGOD_SPRITE7 {
ifactioncount 180 { setvar OPERATE 194 setvar PICTURESCREEN 101 globalsound VOICE02 action ANEWGOD_SPRITE8 }
}

ifaction ANEWGOD_SPRITE8 {
ifactioncount 120 ifvare PICTURESCREEN 101 setvar PICTURESCREEN 0

ifactioncount 420 ifp palive ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99 }
ifactioncount 620 ifp palive ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 840 ifp palive ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare NEWGOD 6 { operateactivators 4919 myconnectindex stopsound VOICE02 stopsound VOICE00 setvar DELETEME 0 setvar PICTURESCREEN 102 globalsound VOICE03 action ANEWGOD_SPRITE9 }
}

ifaction ANEWGOD_SPRITE9 {
ifactioncount 180 ifvare PICTURESCREEN 102 setvar PICTURESCREEN 0

ifactioncount 500 ifp palive ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99  }
ifactioncount 680 ifp palive ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 900 ifp palive ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare TOTALGLASS 3 { stopsound VOICE00 setvar PICTURESCREEN 0 setvar DELETEME 0 action ANEWGOD_SPRITE11 }
}


ifaction ANEWGOD_SPRITE11 {
ifactioncount 120 { setvar PICTURESCREEN 103 stopsound VOICE03 globalsound VOICE04 action ANEWGOD_SPRITE12 }
}

ifaction ANEWGOD_SPRITE12 {
ifactioncount 140 ifvare PICTURESCREEN 103 setvar PICTURESCREEN 0

ifactioncount 420 ifp palive ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99 }
ifactioncount 620 ifp palive ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 840 ifp palive ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare NEWGOD 7 { operateactivators 4918 myconnectindex stopsound VOICE04 stopsound VOICE00 setvar DELETEME 0 setvar PICTURESCREEN 104 globalsound VOICE05 action ANEWGOD_SPRITE13 }
}


ifaction ANEWGOD_SPRITE13 {
ifactioncount 160 ifvare PICTURESCREEN 104 setvar PICTURESCREEN 0

ifactioncount 420 ifp palive ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99 }
ifactioncount 620 ifp palive ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 840 ifp palive ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare NEWGOD 8 { stopsound VOICE05 stopsound VOICE00 setvar DELETEME 0 setvar PICTURESCREEN 105 globalsound VOICE06 action ANEWGOD_SPRITE14 }
}

ifaction ANEWGOD_SPRITE14 {
ifactioncount 140 ifvare PICTURESCREEN 105 setvar PICTURESCREEN 0

ifactioncount 420 ifp palive ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99 }
ifactioncount 620 ifp palive ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 840 ifp palive ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare NEWGOD 9 { stopsound VOICE06 stopsound VOICE00 setvar PICTURESCREEN 0 setvar DELETEME 0 action ANEWGOD_SPRITE15 }
}

ifaction ANEWGOD_SPRITE15 {
ifactioncount 180 { setvar PICTURESCREEN 106 stopsound VOICE19 globalsound VOICE07 action ANEWGOD_SPRITE16 }
}

ifaction ANEWGOD_SPRITE16 {
ifactioncount 130 ifvare PICTURESCREEN 106 setvar PICTURESCREEN 0

ifactioncount 520 ifp palive ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99 }
ifactioncount 720 ifp palive ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 940 ifp palive ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare NEWGOD 11 { stopsound VOICE07 stopsound VOICE00 setvar DELETEME 0 setvar PICTURESCREEN 107 globalsound VOICE08 action ANEWGOD_SPRITE17 }
}


ifaction ANEWGOD_SPRITE17 {
ifactioncount 100 ifvare PICTURESCREEN 107 setvar PICTURESCREEN 0

ifactioncount 420 ifp palive ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99 }
ifactioncount 620 ifp palive ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 840 ifp palive ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare NEWGOD 12 { stopsound VOICE08 stopsound VOICE00 setvar DELETEME 0 setvar PICTURESCREEN 0 setvar MOTIONLESS 1 action ANEWGOD_SPRITE18 }
}


ifaction ANEWGOD_SPRITE18 {
ifactioncount 1 palfrom 4 0
ifactioncount 2 palfrom 8 0
ifactioncount 3 palfrom 12 0
ifactioncount 4 palfrom 16 0
ifactioncount 5 palfrom 20 0
ifactioncount 6 palfrom 24 0
ifactioncount 7 palfrom 28 0
ifactioncount 8 palfrom 32 0
ifactioncount 9 palfrom 36 0
ifactioncount 10 palfrom 40 0
ifactioncount 11 palfrom 44 0
ifactioncount 12 palfrom 48 0
ifactioncount 13 palfrom 52 0
ifactioncount 14 palfrom 56 0
ifactioncount 15 { setvar NEWGOD 13 palfrom 70 0 action ANEWGOD_SPRITE19 }
}


ifaction ANEWGOD_SPRITE19 {
ifactioncount 2 palfrom 0 0
ifactioncount 80 ifvare PICTURESCREEN 0 setvar PICTURESCREEN 108
ifactioncount 200 ifvare PICTURESCREEN 108 setvar PICTURESCREEN 222
ifactioncount 280 { setvar PICTURESCREEN 0 palfrom 70 00 setvar MOTIONLESS 0 setvar NEWGOD 14 action ANEWGOD_SPRITE43 }
}


ifaction ANEWGOD_SPRITE43 {
ifactioncount 230 { setvar PICTURESCREEN 122 globalsound VOICE19 action ANEWGOD_SPRITE44 }
}

ifaction ANEWGOD_SPRITE44 {
ifactioncount 140 { setvar PICTURESCREEN 0 action ANEWGOD_SPRITE20 }
}


ifaction ANEWGOD_SPRITE20 {
ifactioncount 180 { setvar PICTURESCREEN 109 stopsound VOICE19 globalsound VOICE09 action ANEWGOD_SPRITE21 }
}

ifaction ANEWGOD_SPRITE21 {
ifactioncount 130 ifvare PICTURESCREEN 109 setvar PICTURESCREEN 0

ifactioncount 720 ifp palive ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99 }
ifactioncount 920 ifp palive ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 1140 ifp palive ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare NEWGOD 15 { setvar NEWGOD 16 stopsound VOICE09 stopsound VOICE00 setvar DELETEME 0 setvar PICTURESCREEN 110 globalsound VOICE10 action ANEWGOD_SPRITE22 }
}

ifaction ANEWGOD_SPRITE22 {
ifactioncount 130 ifvare PICTURESCREEN 110 setvar PICTURESCREEN 0

ifactioncount 620 ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99 }
ifactioncount 920 ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 1140 ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare NEWGOD 17 { stopsound VOICE10 stopsound VOICE00 setvar DELETEME 0 setvar PICTURESCREEN 111 globalsound VOICE11 action ANEWGOD_SPRITE23 }
}

ifaction ANEWGOD_SPRITE23 {

getplayer[THISACTOR].ang TEMP 
ifvarl TEMP 700 addphealth -200
ifvarg TEMP 1330 addphealth -200

ifactioncount 230 ifvare PICTURESCREEN 111 setvar PICTURESCREEN 0

ifactioncount 300 ifvarl TOTALVISIBILITY 200 addvar TOTALVISIBILITY 1

ifactioncount 1530 { starttrack 1 setvar TOTALVISIBILITY 100 setvar NEWGOD 18 action ANEWGOD_SPRITE24 }
}

ifaction ANEWGOD_SPRITE24 ifvare NEWGOD 19 { setvar PICTURESCREEN 112 globalsound VOICE12 action ANEWGOD_SPRITE25 }

ifaction ANEWGOD_SPRITE25 {
ifactioncount 130 ifvare PICTURESCREEN 112 setvar PICTURESCREEN 0

ifactioncount 620 ifp palive ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99 }
ifactioncount 920 ifp palive ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 1140 ifp palive ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare NEWGOD 20 { setvar MOTIONLESS 1 stopsound VOICE12 stopsound VOICE00 setvar DELETEME 0 action ANEWGOD_SPRITE26 }
}

ifaction ANEWGOD_SPRITE26 ifactioncount 100 { setvar PICTURESCREEN 113 globalsound VOICE13 addammo PISTOL_WEAPON PISTOLAMMOAMOUNT action ANEWGOD_SPRITE27 }

ifaction ANEWGOD_SPRITE27 {

setplayer[THISACTOR].curr_weapon 1
ifactioncount 220 ifvare PICTURESCREEN 113 setvar PICTURESCREEN 0

ifactioncount 260 { 
ifvare COUNTER2 0 { setvar COUNTER2 1 setplayer[THISACTOR].weapon_pos -1 }
}

ifactioncount 270 { 
setplayer[THISACTOR].weapon_pos -9
ifvare NEWGOD 20 setvar NEWGOD 21
}

ifvare NEWGOD 22 { quake 90 globalsound PISTOLLEG globalsound LEGGORE globalsound SHOCKED palfrom 100 32 wackplayer stopsound VOICE13 stopsound VOICE00 setvar MOTIONLESS 0 setvar NEWGOD 23 action ANEWGOD_SPRITE28 }
}

ifaction ANEWGOD_SPRITE28 { 
stopsound EARTHQUAKE
ifactioncount 300 { setvar NEWGOD 24 action ANEWGOD_SPRITE29 } }

ifaction ANEWGOD_SPRITE29 ifactioncount 100 { setvar PICTURESCREEN 114 globalsound VOICE14 setvar NEWGOD 25 action ANEWGOD_SPRITE30 } 

ifaction ANEWGOD_SPRITE30 {
ifactioncount 130 ifvare PICTURESCREEN 114 setvar PICTURESCREEN 0

ifactioncount 520 ifp palive ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99 }
ifactioncount 720 ifp palive ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 940 ifp palive ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare NEWGOD 26 { stopsound VOICE14 stopsound VOICE00 setvar PICTURESCREEN 115 globalsound VOICE08 setvar DELETEME 0 action ANEWGOD_SPRITE31 }
}


ifaction ANEWGOD_SPRITE31 {
ifactioncount 100 ifvare PICTURESCREEN 115 setvar PICTURESCREEN 0

ifactioncount 420 ifp palive ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99 }
ifactioncount 620 ifp palive ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 840 ifp palive ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare NEWGOD 27 { stopsound VOICE08 stopsound VOICE00 setvar DELETEME 0 setvar PICTURESCREEN 0 setvar MOTIONLESS 1 action ANEWGOD_SPRITE32 }
}



ifaction ANEWGOD_SPRITE32 {
ifactioncount 1 palfrom 4 0
ifactioncount 2 palfrom 8 0
ifactioncount 3 palfrom 12 0
ifactioncount 4 palfrom 16 0
ifactioncount 5 palfrom 20 0
ifactioncount 6 palfrom 24 0
ifactioncount 7 palfrom 28 0
ifactioncount 8 palfrom 32 0
ifactioncount 9 palfrom 36 0
ifactioncount 10 palfrom 40 0
ifactioncount 11 palfrom 44 0
ifactioncount 12 palfrom 48 0
ifactioncount 13 palfrom 52 0
ifactioncount 14 palfrom 56 0
ifactioncount 15 { setvar NEWGOD 28 palfrom 70 0 action ANEWGOD_SPRITE33 }
}


ifaction ANEWGOD_SPRITE33 {
ifactioncount 2 palfrom 0 0
ifactioncount 180 ifvare PICTURESCREEN 0 setvar PICTURESCREEN 116
ifactioncount 320 ifvare PICTURESCREEN 116 setvar PICTURESCREEN 222
ifactioncount 420 { setvar PICTURESCREEN 0 palfrom 70 00 setvar MOTIONLESS 0 starttrack 12 setvar NEWGOD 29 action ANEWGOD_SPRITE34 }
}


ifaction ANEWGOD_SPRITE34 ifvare NEWGOD 30 { setvar PICTURESCREEN 117 globalsound VOICE15 setvar DELETEME 0 action ANEWGOD_SPRITE35 }

ifaction ANEWGOD_SPRITE35 {
ifactioncount 140 ifvare PICTURESCREEN 117 setvar PICTURESCREEN 0

ifvare NEWGOD 31 { stopsound VOICE15 stopsound VOICE00 setvar DELETEME 0 setvar PICTURESCREEN 118 globalsound VOICE16 action ANEWGOD_SPRITE36 }
}


ifaction ANEWGOD_SPRITE36 {
ifactioncount 180 ifvare PICTURESCREEN 118 setvar PICTURESCREEN 0

ifactioncount 620 ifp palive ifvare DELETEME 0 { setvar DELETEME 1 globalsound VOICE00 setvar PICTURESCREEN 99 }
ifactioncount 920 ifp palive ifvare PICTURESCREEN 99 setvar PICTURESCREEN 0
ifactioncount 1140 ifp palive ifvare DELETEME 1 { setvar DELETEME 2 addphealth -200 }

ifvare NEWGOD 32 { operateactivators 1234 myconnectindex stopsound VOICE16 stopsound VOICE00 setvar PICTURESCREEN 0 setvar DELETEME 0 action ANEWGOD_SPRITE37 }
}

ifaction ANEWGOD_SPRITE37 ifvare NEWGOD 33 { stopsound VOICE00 setvar PICTURESCREEN 0 operateactivators 1920 myconnectindex action ANEWGOD_SPRITE38 }

ifaction ANEWGOD_SPRITE38 ifactioncount 200 { setvar PICTURESCREEN 119 globalsound VOICE17 setvar NEWGOD 34 action ANEWGOD_SPRITE39 }


ifaction ANEWGOD_SPRITE39 {
getactor[THISACTOR].x GODX
getactor[THISACTOR].y GODY

ifactioncount 140 ifvare PICTURESCREEN 119 setvar PICTURESCREEN 0

ifvare STATUEKILLED 5 { palfrom 60 0 setvar PICTURESCREEN 0 setvar STATUEKILLED 0 setvar NEWGOD 35 action ANEWGOD_SPRITE40 }
}


ifaction ANEWGOD_SPRITE40 ifactioncount 200 { setvar PICTURESCREEN 120 globalsound VOICE18 setvar NEWGOD 36 action ANEWGOD_SPRITE41 }


ifaction ANEWGOD_SPRITE41 {
spawn SMALLSMOKE
getactor[THISACTOR].x GODX
getactor[THISACTOR].y GODY
move GODMOVE geth getv
ifactioncount 200 ifvare PICTURESCREEN 120 setvar PICTURESCREEN 0

ifnotmoving { globalsound IMHERE setvar MOTIONLESS 1 setvar NEWGOD 37 action ANEWGOD_SPRITE42 }

ifvare NEWGOD 0 killit
}

ifaction ANEWGOD_SPRITE42 {
ifactioncount 100 { setvar NOWEAPON 1 setvar NEWGOD 38 }
ifactioncount 200 setvar PICTURESCREEN 121
ifactioncount 220 ifhitspace resetplayer
}

}
enda






actor ERROR1 sleeptime -1
ifaction 0 { cstat 32768 ifvare NEWGOD 36 action ZERO }

ifaction ZERO { cstat 209
ifpdistl 1600 { ifhitspace { } else action ZERO2 } }

ifaction ZERO2 { 
ifpdistl 1600 setvar PRESSTEXT 2
ifcanseetarget ifhitspace ifpdistl 2500 ifhitspace { operateactivators 1925 myconnectindex cstat 208 sound VANISH action ZERO3 }
ifpdistg 1600 action ZERO
}

ifaction ZERO3 {
//getactor[THISACTOR].shade TEMP
//addvar TEMP 2
//setactor[THISACTOR].shade TEMP
sizeto 12 25
ifactioncount 4 cstat 210
ifactioncount 8 cstat 722
ifactioncount 12 killit
} 
enda


state errors
sleeptime -1

ifaction 0 { cstat 32768 ifvare NEWGOD 36 action ZERO }

ifaction ZERO { cstat 209
ifpdistl 1600 { ifhitspace { } else action ZERO2 } }

ifaction ZERO2 { 
ifpdistl 1600 setvar PRESSTEXT 2
ifcanseetarget ifhitspace ifpdistl 2500 ifhitspace { cstat 208 sound VANISH action ZERO3 }
ifpdistg 1600 action ZERO
}

ifaction ZERO3 {
//getactor[THISACTOR].shade TEMP
//addvar TEMP 2
//setactor[THISACTOR].shade TEMP
sizeto 12 25
ifactioncount 4 cstat 210
ifactioncount 8 cstat 722
ifactioncount 12 killit
} 
ends

actor ERROR2
state errors
enda

actor ERROR3
state errors
enda

actor ERROR4
state errors
enda

actor ERROR5
state errors
enda

actor ERROR6
state errors
enda

actor ERROR7
state errors
enda


action AFAKECRACK1 50 0 0 0 2
actor FAKECRACK sleeptime -1
ifaction 0 ifspritepal 5 action AFAKECRACK1
ifaction AFAKECRACK1 ifvarg NEWGOD 30 {
cstat 272
    ifhitweapon
      ifwasweapon RADIUSEXPLOSION
{
quake 25
setvar OPERATE 321
killit
}
else strength 10

}
enda

actor FAKEPIC1 sleeptime -1
ifvare NEWGOD 23 ifspritepal 5 killit
enda

actor FAKEPIC2 sleeptime -1
ifvare NEWGOD 23 ifspritepal 5 killit
enda

state dieplayer
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 addphealth -200
ends

spritenoshade FAKESTATUE
move MFAKESTATUE1 0
move MFAKESTATUE2 15
actor FAKESTATUE sleeptime -1 // fall 
clipdist 1
ifaction 0 { cstat 32768 
ifvare NEWGOD 17 action ZERO }

ifaction ZERO {
state dieplayer
ifactioncount 700 { ifspritepal 10 cstat 0 ifspritepal 13 cstat 4 action ZERO2 }
}

ifaction ZERO2 {
state dieplayer
addvar DELETEME 1
ifvarg DELETEME 2 { move MFAKESTATUE2 faceplayer geth getv setvar DELETEME 0 } else move MFAKESTATUE1 faceplayer geth getv
}


ifvare NEWGOD 18 killit
enda

spritenoshade FAKEFACE1
actor FAKEFACE1 sleeptime -1
ifaction 0 { cstat 32768 
ifvare NEWGOD 17 action ZERO }

ifaction ZERO {
ifactioncount 450 cstat 514
ifactioncount 550 cstat 2
ifactioncount 650 cstat 0
}

ifvare NEWGOD 18 killit
enda

actor 4439
ifspritepal 5 { ifvare NEWGOD 0 cstat 32768 else cstat 32 }
enda

actor MIRRORBROKE sleeptime -1
ifaction 0 ifspritepal 5 { cstat 32768 ifvare NEWGOD 18 { cstat 16 action ZERO } } 
enda

move MFAKEOCTA 25
action AFAKEOCTA  0  3   1   1   10
spriteshadow FAKEOCTA
actor FAKEOCTA sleeptime -1 fall clipdist 1
ifaction 0 { cstat 32768 
ifvare NEWGOD 17 action ZERO }

ifaction ZERO {
ifactioncount 1500 { sound OCTA_RECOG cstat 514 action AFAKEOCTA }
}

ifaction AFAKEOCTA {
ifactioncount 2 cstat 2
ifactioncount 4 cstat 0
move MFAKEOCTA faceplayer geth getv
}

ifvare NEWGOD 18 { stopsound OCTA_RECOG killit }
enda

action ACREATURE1 0 0 0 0 2
action ACREATURE2 -2 0 0 0 2
action ACREATURE3 0 0 0 0 2
spriteshadow CREATURE
actor CREATURE sleeptime -1
ifaction 0 { cstat 32768 ifvare NEWGOD 8 { strength 120 action ACREATURE1 } }

ifaction ACREATURE1 {
soundonce DUKE_HARTBEAT2
cstat 257
spritepal 11
ifactioncount 2 { addvar DELETEME 1 resetactioncount }
ifvare DELETEME 1 sizeat 41 40
ifvare DELETEME 2 sizeat 42 39
ifvare DELETEME 3 sizeat 43 39
ifvare DELETEME 4 sizeat 44 38
ifvare DELETEME 5 sizeat 44 37
ifvare DELETEME 6 sizeat 43 36
ifvare DELETEME 7 sizeat 42 36
ifvare DELETEME 8 sizeat 41 37
ifvare DELETEME 9 sizeat 40 38
ifvare DELETEME 10 sizeat 39 39
ifvare DELETEME 11 sizeat 38 40
ifvare DELETEME 12 sizeat 37 41
ifvare DELETEME 13 sizeat 36 42
ifvare DELETEME 14 sizeat 35 43
ifvare DELETEME 15 sizeat 36 43
ifvare DELETEME 16 sizeat 37 42
ifvare DELETEME 17 sizeat 38 41
ifvare DELETEME 18 sizeat 39 40
ifvare DELETEME 19 { sizeat 40 40 setvar DELETEME 0 }

  ifhitweapon   
  {
  spritepal 2
  sound BROKENBONES
  sizeto 100 100  sizeto 100 100  sizeto 100 100  sizeto 100 100  sizeto 100 100  sizeto 100 100
guts JIBS6 4
    ifdead         
    {   
stopsound DUKE_HARTBEAT2	
	stopsound BROKENBONES
	cstat 0
	setvar NEWGOD 9
//guts JIBS6 30
globalsound HUNTEDDIE 
action ACREATURE2
    }
	
  }
}


ifaction ACREATURE2 {
ifrnd 128 spritepal 2 else spritepal 11
ifrnd 128 sizeat 50 36 else sizeat 44 46 
cstat 0
guts JIBS6 20
sound PRED_DYING
ifactioncount 80 { stopsound PRED_DYING setvar NEWGOD 10 killit } 
}

enda

action AGLASS 0 0 0 0 2
action AGLASS2 0 4 1 1 2
actor GLASS2 
ifspritepal 9 sleeptime -1
ifspritepal 5 sleeptime -1

ifaction 0 {
ifspritepal 5 { cstat 32768 ifvare NEWGOD 5 { strength WEAK action AGLASS } } 
ifspritepal 9 ifvare OPERATE 182 { sound DREAMGLASS action AGLASS2 }
}

ifaction AGLASS cstat 787

ifhitweapon ifspritepal 5 { addvar TOTALGLASS 1 sound GLASS_BREAKING action AGLASS2 }

ifaction AGLASS2 {
cstat 786
ifactioncount 4 { lotsofglass 20 killit }
}

enda

action AFAKEACCESS1 -3495 0 0 0 2
action AFAKEACCESS2 -3495 0 0 0 2
action AFAKEACCESS3 -3494 0 0 0 2
actor FAKEACCESS sleeptime -1
ifaction 0 { cstat 32768 ifvare NEWGOD 1 action AFAKEACCESS1 }


ifaction AFAKEACCESS1 { cstat 80

//ifvare NEWGOD 13 ifspritepal 0 killit
getplayer[THISACTOR].got_access TEMP

ifcanseetarget ifhitspace ifpdistg 1700 setvar PRESS_VAR 2
ifpdistl 1700 ifvare PRESS_VAR 0 ifcansee ifp pfacing ifhitspace { 
ifvarand TEMP 1 ifspritepal 0 { stopsound DUKE_SEARCH stopsound DUKE_SEARCH2 setplayer[THISACTOR].got_access 0 action AFAKEACCESS2 } else
ifvarand TEMP 2 ifspritepal 21 { stopsound DUKE_SEARCH stopsound DUKE_SEARCH2 tip lockplayer 15 setplayer[THISACTOR].got_access 0 sound MONITOR_ACTIVE operateactivators 999 myconnectindex action AFAKEACCESS3 } else
{ stopsound DUKE_SEARCH stopsound DUKE_SEARCH2 ifspritepal 0 quote 70 ifspritepal 21 quote 71 ifspritepal 23 quote 72 setvar PRESS_VAR 2 }
}
}

ifaction AFAKEACCESS2 {
soundonce GENERIC_AMBIENCE18
ifactioncount 40 { stopsound GENERIC_AMBIENCE18 setvar OPERATE 187 killit }
}

ifspritepal 23 ifvare NEWGOD 29 killit 
ifspritepal 21 ifvare NEWGOD 29 killit
ifspritepal 0 ifvare NEWGOD 29 killit 
enda



action ASPAWNEDTROOPER -1308  1  5  1  1
action ASPAWNEDTROOPERDUCK -1244  1  5  1  1
action ASPAWNEDTROOPERFLY -1263  1  5  1  1
action ASPAWNEDPIG -988  1  5  1  1

actor SPAWNER_SPRITE
ifaction 0 cstat 32768
sleeptime -1
ifspritepal 0 ifvare NEWGOD 2 { spawn 981 killit }
ifspritepal 1 ifvare FORGET 1 { spawn 55 killit }  
ifspritepal 2 ifvare FORGET 1 { spawn 40 killit }  
ifspritepal 3 ifvare FORGET 1 { spawn 52 killit }  
ifspritepal 4 ifvare FORGET 1 { spawn 21 killit }  
ifspritepal 5 ifvare FORGET 1 { spawn 49 killit }  
ifspritepal 6 ifvare FORGET 1 { spawn 1348 killit }  
ifspritepal 7 ifvare FORGET 1 { spawn 51 killit } 
ifspritepal 10 ifvare FORGET 1 { spawn 60 killit } 
ifspritepal 12 ifvare FORGET 1 { spawn 2360 killit } 
ifspritepal 13 ifvarg NEWGOD 0 ifcanseetarget { spawn 2370 killit } 
ifspritepal 15 ifvare FORGET 1 { spawn CANWITHSOMETHING killit } 
ifspritepal 16 ifvare FORGET 1 { spawn 1240 killit } 

ifspritepal 8 ifvarg NEWGOD 0 ifpdistl 4000 { spawn TRANSPORTERSTAR spawn LIZTROOPJETPACK killit } 

ifspritepal 11 {
ifaction 0 ifvare FORGET 1 action ASPAWNEDTROOPER
ifaction ASPAWNEDTROOPER { cstat 0 ifcanseetarget { spawn LIZTROOP killit } }
}

ifspritepal 9 {
ifaction 0 ifvare FORGET 1 action ASPAWNEDPIG
ifaction ASPAWNEDPIG { cstat 0 ifcanseetarget { spawn PIGCOP killit } }
}

ifspritepal 14 {
ifaction 0 ifvare FORGET 1 action ASPAWNEDTROOPERFLY
ifaction ASPAWNEDTROOPERFLY { cstat 0 ifcanseetarget { spawn LIZTROOPJETPACK killit } }
}

ifspritepal 21 {
ifaction 0 ifvare FORGET 1 action ASPAWNEDTROOPERDUCK
ifaction ASPAWNEDTROOPERDUCK { cstat 0 ifcanseetarget { spawn LIZTROOPDUCKING killit } }
}
enda


onevent EVENT_GAME

ifactor 914 ifspritepal 5 ifvare KEY1 1 killit
ifactor 3613 ifspritepal 5 ifvare KEY1 1 killit

ifactor COOLEXPLOSION1 ifspawnedby OCTABRAIN spritepal 12

ifvarg NEWGOD 32 ifactor MUSICANDSFX {
getactor[THISACTOR].lotag LOTAGSAVED
ifvare LOTAGSAVED 495 {
setactor[THISACTOR].x GODX
setactor[THISACTOR].y GODY
ifvare NEWGOD 37 killit
}
} 

ifvare PUZZLESOLVED 2 ifactor MUSICANDSFX {
getactor[THISACTOR].lotag LOTAGSAVED
ifvare LOTAGSAVED 187 {
setactor[THISACTOR].x GODX
setactor[THISACTOR].y GODY
}
} 

ifvare MOVIE 3 ifactor MUSICANDSFX {
getactor[THISACTOR].lotag LOTAGSAVED
ifvare LOTAGSAVED 187 {
killit
}
} 

ifvare NEWGOD 29 ifactor 1025 ifspritepal 9 killit
ifvare NEWGOD 29 ifactor 962 ifspritepal 9 killit
ifvare NEWGOD 29 ifactor 592 ifspritepal 9 killit
ifvare NEWGOD 29 ifactor 908 ifspritepal 5 killit
ifvare NEWGOD 29 ifactor 909 ifspritepal 5 killit
ifvare NEWGOD 29 ifactor 900 ifspritepal 5 killit
ifvare NEWGOD 29 ifactor 956 ifspritepal 5 killit
ifvare NEWGOD 29 ifactor 955 ifspritepal 5 killit
ifvare NEWGOD 29 ifactor 935 ifspritepal 5 killit
ifvare NEWGOD 29 ifactor 934 ifspritepal 5 killit
ifvare NEWGOD 29 ifactor 931 ifspritepal 5 killit
ifvare NEWGOD 29 ifactor 951 ifspritepal 5 killit
ifvare NEWGOD 29 ifactor 990 ifspritepal 5 killit
ifvare NEWGOD 29 ifactor 745 ifspritepal 5 killit
ifvare NEWGOD 1 ifactor 571 ifspritepal 5 killit
ifvare NEWGOD 29 ifactor 3589 setactor[THISACTOR].picnum 2295
ifvare NEWGOD 29 ifactor 3586 killit

ifvare NEWGOD 29 ifactor SECTOREFFECTOR {
getactor[THISACTOR].lotag LOTAGSAVED
getactor[THISACTOR].hitag HITAGSAVED
ifvare HITAGSAVED 666 ifvare LOTAGSAVED 11 killit
}

ifvare NEWGOD 10 ifactor JIBS6 killit

ifvare MOLDYCARD 2 {
ifactor JIBS1 { ifspawnedby OCTABRAIN { } else ifspawnedby APLAYER { } else ifspawnedby COCOON { } else ifspawnedby COCOONLADY { } else spritepal 24 } 
ifactor JIBS2 { ifspawnedby OCTABRAIN { } else ifspawnedby APLAYER { } else ifspawnedby COCOON { } else ifspawnedby COCOONLADY { } else spritepal 24 } 
ifactor JIBS3 { ifspawnedby OCTABRAIN { } else ifspawnedby APLAYER { } else ifspawnedby COCOON { } else ifspawnedby COCOONLADY { } else spritepal 24 } 
ifactor JIBS4 { ifspawnedby OCTABRAIN { } else ifspawnedby APLAYER { } else ifspawnedby COCOON { } else ifspawnedby COCOONLADY { } else spritepal 24 } 
ifactor JIBS5 { ifspawnedby OCTABRAIN { } else ifspawnedby APLAYER { } else ifspawnedby COCOON { } else ifspawnedby COCOONLADY { } else spritepal 24 } 
ifactor JIBS6 { ifspawnedby OCTABRAIN { } else ifspawnedby APLAYER { } else ifspawnedby COCOON { } else ifspawnedby COCOONLADY { } else spritepal 24 } 
ifactor BLOODPOOL { ifspawnedby OCTABRAIN { } else ifspawnedby APLAYER { } else ifspawnedby COCOON { } else ifspawnedby COCOONLADY { } else spritepal 4 }
ifactor BLOODSPLAT1 { ifspawnedby OCTABRAIN { } else ifspawnedby APLAYER { } else ifspawnedby COCOON { } else ifspawnedby COCOONLADY { } else spritepal 24 } 
ifactor BLOODSPLAT2 { ifspawnedby OCTABRAIN { } else ifspawnedby APLAYER { } else ifspawnedby COCOON { } else ifspawnedby COCOONLADY { } else spritepal 24 } 
ifactor BLOODSPLAT3 { ifspawnedby OCTABRAIN { } else ifspawnedby APLAYER { } else ifspawnedby COCOON { } else ifspawnedby COCOONLADY { } else spritepal 24 } 
ifactor BLOODSPLAT4 { ifspawnedby OCTABRAIN { } else ifspawnedby APLAYER { } else ifspawnedby COCOON { } else ifspawnedby COCOONLADY { } else spritepal 24 } 
}

ifactor FIRELASER ifspawnedby LIZMAN spritepal 13

ifactor CANWITHSOMETHING ifspawnedby SPAWNER_SPRITE sizeat 48 48

ifvare GHOSTCARD 1 ifactor SECTOREFFECTOR {
getactor[THISACTOR].hitag HITAGSAVED
ifvare HITAGSAVED 168 killit
}

ifvare FORGET 1 {
ifactor 981 killit
ifactor 950 killit
ifactor 921 { ifspawnedby 921 { } else killit }
}


ifvarg NEWGOD 1 {

ifactor 40 { ifspawnedby SPAWNER_SPRITE { } else ifcansee killit }
ifactor 52 { ifspawnedby SPAWNER_SPRITE { } else ifcansee killit }
ifactor 51 { ifspawnedby SPAWNER_SPRITE { } else ifcansee killit }
ifactor 55 { ifspawnedby SPAWNER_SPRITE { } else ifcansee killit }
ifactor 21 { ifspawnedby SPAWNER_SPRITE { } else ifcansee killit }
ifactor 49 { ifspawnedby SPAWNER_SPRITE { } else ifcansee killit }
ifactor 1348 { ifspawnedby SPAWNER_SPRITE { } else ifcansee killit }
ifactor 60 { ifspawnedby SPAWNER_SPRITE { } else ifspawnedby EFFECTOR_SPRITE { } else ifspawnedby APLAYER { } else ifcansee killit }
ifactor 2000 { ifspawnedby SPAWNER_SPRITE { } else ifspritepal 0 killit }
ifactor 1725 { ifspawnedby SPAWNER_SPRITE { } else killit }
ifactor 2045 { ifspawnedby SPAWNER_SPRITE { } else killit }
ifactor 2360 { ifspawnedby SPAWNER_SPRITE { } else ifspritepal 0 killit }
ifactor 2370 { ifspawnedby SPAWNER_SPRITE { } else { stopsound SLIM_RECOG killit } }
ifactor 1232 { ifspawnedby SPAWNER_SPRITE { } else ifcansee killit }
ifactor 1240 { ifspawnedby SPAWNER_SPRITE { } else ifcansee killit }

ifactor RESPAWN {
getactor[THISACTOR].lotag LOTAGSAVED
ifvare LOTAGSAVED 59 killit 
ifvare LOTAGSAVED 56 killit 
ifvare LOTAGSAVED 55 killit 
ifvare LOTAGSAVED 57 killit 
}



}

ifvare NEWGOD 2 {

ifactor FOOTPRINTS2 killit
ifactor FOOTPRINTS3 killit
ifactor FOOTPRINTS4 killit

ifactor BLOODPOOL killit

ifactor BLOODSPLAT1 killit
ifactor BLOODSPLAT2 killit
ifactor BLOODSPLAT3 killit
ifactor BLOODSPLAT4 killit

ifactor 1680 killit
ifactor 1744 killit
ifactor 1741 killit

ifactor 981 {
setactor[THISACTOR].xrepeat 40
setactor[THISACTOR].yrepeat 40 
}

ifactor 130 { 
getactor[THISACTOR].lotag LOTAGSAVED
ifvare LOTAGSAVED 4917 killit 
ifvare LOTAGSAVED 999 killit 
ifvare LOTAGSAVED 1234 killit 
}

ifactor 131 { 
getactor[THISACTOR].lotag LOTAGSAVED
ifvare LOTAGSAVED 4917 killit 
ifvare LOTAGSAVED 999 killit 
ifvare LOTAGSAVED 1234 killit 
}

}

ifvarg NEWGOD 3 { 
ifactor MUSICANDSFX {
getactor[THISACTOR].lotag LOTAGSAVED
ifvare LOTAGSAVED 194 killit 
ifvare LOTAGSAVED 231 killit 
}

ifactor FIRELASER killit
ifactor 2311 killit
ifactor 2271 killit
ifactor 1680 { stopsound PRED_RECOG killit }
ifactor 1744 killit
ifactor 1741 killit
//ifactor 40 ifcansee killit 
//ifactor 52 ifcansee   killit 
//ifactor 51 ifcansee   killit 
ifactor 54 ifcansee   killit 
ifactor 55 ifcansee   killit 
ifactor 21 ifcansee   killit
//ifactor 49 ifcansee   killit 
ifactor 1348  killit 
ifactor 60 { ifspawnedby EFFECTOR_SPRITE { } else ifspawnedby APLAYER { } else ifcansee killit } 
ifactor 2000 killit 
ifactor 1725  killit 
ifactor 2045  killit 
ifactor 2360  killit 
ifactor 2370  { stopsound SLIM_RECOG killit } 
ifactor 1232  killit 
ifactor 1240  killit 
ifactor ITEMBAG { ifspritepal 6 { } else ifspritepal 9 { } else killit }
ifactor 921 ifcansee { stopsound WATER_GURGLE killit }
}

endevent


action AKEYHOLE1 0 0 0 0 2
action AKEYHOLE2 0 0 0 0 2
actor KEYHOLE sleeptime -1
ifaction 0 { cstat 32768 ifvare PUZZLESOLVED 2 action AKEYHOLE1 }
ifaction AKEYHOLE1 {
cstat 80
ifpdistl 1100 ifcansee ifp pfacing ifvare PRESS_VAR 0 {
setvar PRESSTEXT 2

ifhitspace {
ifspritepal 0 { ifvare KEY1 1 { globalsound UNLOCK setvar PRESS_VAR 2 setvar KEY1 2 action AKEYHOLE2 } else { quote 244 setvar PRESS_VAR 2 } }
ifspritepal 21 { ifvare KEY2 1 { globalsound UNLOCK setvar PRESS_VAR 2 setvar KEY2 2 action AKEYHOLE2 } else { quote 244 setvar PRESS_VAR 2 } }
ifspritepal 17 { ifvare KEY3 1 { globalsound UNLOCK setvar PRESS_VAR 2 setvar KEY3 2 action AKEYHOLE2 } else { quote 244 setvar PRESS_VAR 2 } }
ifspritepal 23 { ifvare KEY4 1 { globalsound UNLOCK setvar PRESS_VAR 2 setvar KEY4 2 action AKEYHOLE2 } else { quote 244 setvar PRESS_VAR 2 } }  
}


}
}



enda

state keyamount
ifvare TOTALKEYS 0 { quote 245 addvar TOTALKEYS 1 } else 
ifvare TOTALKEYS 1 { quote 246 addvar TOTALKEYS 1 } else 
ifvare TOTALKEYS 2 { quote 247 addvar TOTALKEYS 1 } else 
ifvare TOTALKEYS 3 { quote 248 addvar TOTALKEYS 1 }
ends

action AKEY1 0 0 0 0 2
action AKEY2 -1003 0 0 0 2

state pickupkey
ifaction 0 { cstat 0 ifspritepal 21 action AKEY2 else action AKEY1 }

ifaction AKEY1 {

ifcansee ifpdistl 1300 ifp pfacing { 
setvar PRESSTEXT 2
ifhitspace  
{ 
ifspritepal 0 { state keyamount setvar KEY1 1 }
//ifspritepal 21  { state keyamount setvar KEY2 1 }
ifspritepal 17 { state keyamount setvar KEY3 1 }
ifspritepal 23 { state keyamount setvar KEY4 1 } 
globalsound DUKE_GET palfrom 16 0 32  killit } 
}

}


ifaction AKEY2 {
ifcansee ifpdistl 1300 ifp pfacing { 
setvar PRESSTEXT 2
ifhitspace  
{ state keyamount setvar KEY2 1 globalsound NEWPICKUP palfrom 16 0 32  killit } 
}

ifpdistl 5000 spritepal 21 else spritepal 4
}

ends

state visualkey
ifspritepal 1 { ifvare KEY1 2 cstat 16 else cstat 32768 }
ifspritepal 2 { ifvare KEY2 2 cstat 16 else cstat 32768 }
ifspritepal 8 { ifvare KEY3 2 cstat 16 else cstat 32768 }
ifspritepal 7 { ifvare KEY4 2 cstat 16 else cstat 32768 }
ends

actor FAKECHOKE sleeptime -1
ifaction 0 ifspritepal 5 ifcansee action ZERO
ifaction ZERO { ifpdistl 15000 { } else killit }
enda

spritenoshade 336

spritenoshade KEYSPRITE

actor KEYSPRITE

ifspritepal 9 ifvare KEY1 1 killit

ifspritepal 0 state pickupkey
ifspritepal 21 state pickupkey ifspritepal 4 state pickupkey 
ifspritepal 17 state pickupkey
ifspritepal 23 state pickupkey

ifspritepal 1 state visualkey
ifspritepal 2 state visualkey
ifspritepal 8 state visualkey
ifspritepal 7 state visualkey

enda

action ACOLAMACHINE 2 0 0 0 2
actor COLAMACHINE sleeptime -1
ifaction 0 ifvare OPERATE 833 { sound VENT_BUST action ACOLAMACHINE }
ifaction ACOLAMACHINE { ifrnd 6 setactor[THISACTOR].shade 13 else setactor[THISACTOR].shade 15 }

enda

action ACOIN 0 0 0 0 2
move COINMOVE1 0
move COINMOVE2 -400 0
actor COIN sleeptime -1 clipdist 2
ifaction 0 { cstat 32768 ifvare OPERATE 833 action ACOIN ifspritepal 9 action ACOIN }
ifaction ACOIN {
cstat 32
ifspritepal 9 move COINMOVE1 faceplayer
ifcansee ifpdistl 1300 ifp pfacing { 
ifspritepal 0 setvar PRESSTEXT 2
ifspritepal 9 setvar PRESSTEXT 2
ifhitspace ifspritepal 0 { setvar COINVAR 1 quote 253 globalsound DUKE_GET palfrom 16 0 32 killit }
ifhitspace ifspritepal 9 { globalsound DREAMON action ZERO }
}

}

ifaction ZERO {
move COINMOVE2 faceplayer
ifnotmoving killit
}



enda

actor FAKEGRAFFITI
sleeptime -1
ifvarg NEWGOD 0 killit
enda

actor FAKEPANEL
sleeptime -1
ifvarg NEWGOD 0 ifspritepal 5 killit
enda

actor SODACAN sleeptime -1
ifaction 0 { cstat 32768 ifvare OPERATE 833 action ACOIN }
ifaction ACOIN cstat 0
enda


state changefloor
getactor[THISACTOR].sectnum s
setsector[s].floorz ZSAVED
setsector[s].floorpicnum HITAGSAVED
ifspritepal 12 setsector[s].floorslope 0
ends

actor FLOOR_SPRITE 
ifspritepal 0 { } else
{
cstat 32768 
sleeptime -1


ifaction 0 {
getactor[THISACTOR].hitag HITAGSAVED
getactor[THISACTOR].z ZSAVED
action ZERO }

ifaction ZERO {

ifspritepal 1 ifvare OPERATE 832 state changefloor

ifspritepal 2 ifvare GHOSTCARD 1 state changefloor

ifspritepal 3 ifvarg NEWGOD 0 state changefloor

ifspritepal 4 ifvare NEWGOD 9 state changefloor

ifspritepal 5 ifvare NEWGOD 13 state changefloor

ifspritepal 6 ifvare OPERATE 187 { state changefloor setvar OPERATE 0 }

ifspritepal 7 ifvare NEWGOD 18 state changefloor

ifspritepal 8 ifvare NEWGOD 19 state changefloor

ifspritepal 9 ifvare NEWGOD 29 state changefloor

ifspritepal 10 ifvare OPERATE 321 state changefloor

ifspritepal 11 ifvare KEY4 1 state changefloor

ifspritepal 12 ifvare PUZZLESOLVED 2 state changefloor

ifspritepal 13 ifvare KEY1 2 ifvare KEY2 2 ifvare KEY3 2 ifvare KEY4 2 { 
ifvare DELETEME 0 { quake 12 stopsound EARTHQUAKE sound WOODSLAM sound RIPIT debris SCRAP3 15 setvar DELETEME 1 }
state changefloor }

}


}
enda

move MFLESHTREE 0
spritenoshade FLESHTREE
actor FLESHTREE sleeptime -1 fall
ifaction 0 { cstat 32768 ifvare NEWGOD 9 { ifrnd 128 cstat 4 else cstat 0 action ZERO } }
ifaction ZERO ifcansee {
move MFLESHTREE faceplayer geth getv
ifpdistl 3000 ifp palive { getactor[THISACTOR].ang goplayerang ifactioncount 4 { setvar JOINUS 2 resetactioncount } }
ifpdistl 800 ifp palive { globalsound BROKENBONES addphealth -200 }

ifpdistl 3200 { soundonce SLUDGE ifvare TEMP 0 setvar TEMP 1 }
ifpdistg 3200 ifvare TEMP 1 { stopsound SLUDGE setvar TEMP 0 }
}
enda

action AFAKEDUKE1 2 1 5 1 2
spriteshadow FAKEDUKE
spritenoshade FAKEDUKE
actor FAKEDUKE sleeptime -1
setactor[THISACTOR].shade -128
ifaction 0 { cstat 32768 ifvare CUTSCENEVAR 1 action AFAKEDUKE1 }
ifaction AFAKEDUKE1 { cstat 0 ifactioncount 500 killit }
enda

action AVORTEX_EFFECT1 1 0 0 0 2
spritenoshade VORTEX_EFFECT
actor VORTEX_EFFECT sizeat 16 16
setactor[THISACTOR].shade -120

ifaction 0 { cstat 32768 action AVORTEX_EFFECT1 }

ifaction AVORTEX_EFFECT1 {
//ifactioncount 1 cstat 2
ifactioncount 1 cstat 514
ifactioncount 4 spritepal 4
ifactioncount 6 killit
}
enda

state spawneffect
addvar DELETEME 1
ifvarg DELETEME 1 { spawn VORTEX_EFFECT setvar DELETEME 0 }
ends

state killplayer
ifpdistl 10000 ifp palive palfrom 5 63 63 63
ifpdistl 9500 ifp palive palfrom 10 63 63 63
ifpdistl 9000 ifp palive palfrom 15 63 63 63
ifpdistl 8500 ifp palive palfrom 20 63 63 63
ifpdistl 8000 ifp palive palfrom 25 63 63 63
ifpdistl 7500 ifp palive palfrom 30 63 63 63
ifpdistl 7000 ifp palive palfrom 35 63 63 63 
ifpdistl 6500 ifp palive palfrom 40 63 63 63
ifpdistl 6000 ifp palive palfrom 45 63 63 63
ifpdistl 5500 ifp palive palfrom 50 63 63 63
ifpdistl 5000 ifp palive palfrom 55 63 63 63 
ifpdistl 4500 ifp palive palfrom 60 63 63 63 
ifpdistl 4000 { setvar OPERATE 203 addphealth -200 }
ends

move VORTEXMOVE1 150 0
move VORTEXMOVE2 170 -112
move VORTEXMOVE3 330

action AVORTEX1 0 0 0 0 2
action AVORTEX2 0 0 0 0 2
action AVORTEX3 0 0 0 0 2
action AVORTEX4 0 0 0 0 2
action AVORTEX5 0 0 0 0 2
action AVORTEX6 0 0 0 0 2
action AVORTEX7 0 0 0 0 2
action AVORTEX8 0 0 0 0 2
spritenoshade VORTEX
actor VORTEX sleeptime -1 sizeat 16 16
setactor[THISACTOR].shade -120
ifaction 0 { cstat 32768 ifvare OPERATE 201 action AVORTEX1 }
ifaction AVORTEX1 {
setvar MOTIONLESS 1 
ifactioncount 80 { operateactivators 5700 myconnectindex setvar NOWEAPON 1 setvar CUTSCENEVAR 1 action AVORTEX2 }
}

ifaction AVORTEX2 ifvare OPERATE 202 { globalsound HECOMES cstat 0 action AVORTEX3 }

ifaction AVORTEX3 {
ifcanseetarget ifp palive state killplayer
state spawneffect
ifactioncount 1 move VORTEXMOVE1 geth getv
ifactioncount 100 { ifvare TEMP 0 { palfrom 60 63 63 63 setvar TEMP 1 } move VORTEXMOVE2 geth getv }

ifactioncount 300 soundonce WHITENOISE

ifactioncount 400 ifvare TEMP 1 { operateactivators 5701 myconnectindex setvar TEMP 2 }

ifactioncount 474 { move VORTEXMOVE1 geth getv setvar TEMP 0 action AVORTEX4 }
}

ifaction AVORTEX4 {
state update_sector
state spawneffect
soundonce WHITENOISE
ifcanseetarget ifp palive state killplayer
move VORTEXMOVE3 geth getv

findnearactor WAY_SPRITE 180 TEMP
ifvarn TEMP -1 
{
getactor[TEMP].ang ANGVAR
setactor[THISACTOR].ang ANGVAR

getactor[TEMP].x mx
setactor[THISACTOR].x mx

getactor[TEMP].y my
setactor[THISACTOR].y my
action AVORTEX5
} 
}


ifaction AVORTEX5 {
state update_sector
state spawneffect
soundonce WHITENOISE
ifcanseetarget ifp palive state killplayer
move VORTEXMOVE3 geth getv
ifactioncount 3 action AVORTEX4 }
enda

actor WAY_SPRITE ifspritepal 1 cstat 32768
enda

move CAMERAMOVE0 0
move CAMERAMOVE1 -40 25
move CAMERAMOVE2 -80 50
move CAMERAMOVE3 -120 75

actor CAMERA_SPRITE cstat 32768 sleeptime -1

ifaction 0 {
ifspritepal 1 ifvare CUTSCENEVAR 1 action ZERO 
}

ifaction ZERO ifactioncount 60 action ZERO2

ifaction ZERO2 {
ifactioncount 1 move CAMERAMOVE1 geth getv
ifactioncount 7 move CAMERAMOVE2 geth getv
ifactioncount 14 move CAMERAMOVE3 geth getv

ifactioncount 551 move CAMERAMOVE2 geth getv
ifactioncount 557 move CAMERAMOVE1 geth getv
ifactioncount 564 { setvar OPERATE 202 move 0 action ZERO3 }
}

ifaction ZERO3 ifactioncount 180 { setvar CUTSCENEVAR 0 setvar MOTIONLESS 0 setvar NOWEAPON 0 killit }

ifspritepal 1 ifvare CUTSCENEVAR 1 {
setvarvar camerasprite THISACTOR
}

enda

action ACOCOON1 0 0 0 0 3
action ACOCOON2 1 13 1 1 9
action ACOCOON3 14 0 0 0 2
actor COCOON sizeat 34 34
ifaction 0 { strength 90 cstat 257 
ifspritepal 0 ifcanseetarget action ACOCOON1 
ifspritepal 9 ifcanseetarget ifvare OPERATE 182 action ACOCOON1 
}

ifaction ACOCOON1 {
ifactioncount 32 { ifrnd 169 resetactioncount else { sound COCOONOPEN action ACOCOON2 } }
ifspritepal 9 ifrnd 64 { sound COCOONOPEN action ACOCOON2 }
}

ifaction ACOCOON2 ifactioncount 13 { spawn COCOONLADY action ACOCOON3 }

ifhitweapon {
ifdead { 
stopsound COCOONOPEN
      guts JIBS6 15 
      sound SQUISHED
      state standard_jibs
      killit
}
else { guts JIBS6 3 ifrnd 128 spawn BLOOD }
}
enda

action ACOCOONLADYWALK  0 4 1 1 8
action ACOCOONLADYBITE 0 4 1 1 4
action ACOCOONLADYJUMP 0 1 1 1 4

move COCOONLADYWALK 200
move COCOONLADYCLIMB 130 -100
move COCOONLADYJUMP 920 -120
move COCOONLADYSTOP 130

ai AICOCOONLADYWALK ACOCOONLADYWALK COCOONLADYWALK faceplayersmart seekplayer
ai AICOCOONLADYCLIMB ACOCOONLADYWALK COCOONLADYCLIMB faceplayer
ai AICOCOONLADYBITE ACOCOONLADYBITE COCOONLADYSTOP faceplayer 
ai AICOCOONLADYJUMP ACOCOONLADYJUMP COCOONLADYJUMP faceplayer 

state ladyattack
addphealth -8 sound NEWBEAST_ATTACK
palfrom 32 32 globalsound DUKE_LONGTERM_PAIN
ends

useractor enemy COCOONLADY fall 
ifspawnedby COCOON {
addvar DELETEME 1
ifvarg DELETEME 0 cstat 771
ifvarg DELETEME 2 cstat 259
ifvarg DELETEME 4 cstat 257
}
else cstat 257

ifai NO {
ifspawnedby COCOON { sound COCOONKILLME strength 200 sizeat 44 44 ai AICOCOONLADYWALK }
else ifcanseetarget { sound COCOONKILLME strength 200 sizeat 44 44 ai AICOCOONLADYWALK }
}

ifhitweapon { 
ifdead { addkills 1 guts JIBS6 10 state standard_jibs addkills 1 spawn BLOODPOOL stopsound COCOONROAM sound COCOONDEAD sound SQUISHED sound COCOONDYING killit } 
else { ifrnd 128 spawn BLOOD guts JIBS6 3 ifrnd 128 sound COCOONROAM ifrnd 64 ai AICOCOONLADYJUMP } }

ifai AICOCOONLADYWALK { addvar DELETEME 1 ifvarg DELETEME 30 ifrnd 4 { soundonce COCOONROAM setvar DELETEME 0 } 
ifpdistl 1500 ifp palive ai AICOCOONLADYBITE 
ifnotmoving ifrnd 64 ifcount 20 ai AICOCOONLADYCLIMB
ifcount 30 ifrnd 12 ifcansee { sound COCOONJUMP ai AICOCOONLADYJUMP }

ifnotmoving ifrnd 32 operate
ifp pdead ai AICOCOONLADYWALK
} 

ifai AICOCOONLADYCLIMB ifcount 10 { ifp phigher resetcount else ai AICOCOONLADYWALK }

ifai AICOCOONLADYJUMP { ifcount 7 ai AICOCOONLADYWALK
ifpdistl 1500 ifp palive { state ladyattack ai AICOCOONLADYBITE }
}

ifai AICOCOONLADYBITE { ifactioncount 4 { ifpdistl 1600 ifcansee state ladyattack resetactioncount } else ifcount 15 ai AICOCOONLADYWALK }
enda

move DREAMWALLMOVE -50 -40
actor DREAMWALL 
ifspritepal 5 ifaction 0 ifcansee ifpdistl 5000 { sound DISSAPEAR action ZERO }
ifaction ZERO {
move DREAMWALLMOVE geth getv
ifactioncount 16 cstat 82
ifactioncount 18 cstat 594
ifactioncount 20 killit
}
enda

move DREAMPANELMOVE 0 -50
actor DREAMPANEL 
ifspritepal 5 ifaction 0 ifcansee ifpdistl 6500 { sound DISSAPEAR action ZERO }
ifaction ZERO {
move DREAMPANELMOVE geth getv
ifactioncount 16 cstat 34
ifactioncount 18 cstat 546
ifactioncount 20 killit
}
enda

action ADREAMDUKE0 0 0 0 0 2
action ADREAMDUKE1 -1 0 0 0 0
action ADREAMDUKE2 0 0 0 0 0
action ADREAMDUKE3 1 0 0 0 0
action ADREAMDUKE4 2 0 0 0 0
action ADREAMDUKE5 3 0 0 0 0
action ADREAMDUKE6 4 0 0 0 0
action ADREAMDUKE7 5 0 0 0 0
action ADREAMDUKE8 6 0 0 0 0

state dukedream
ifactioncount 2 { addvar DELETEME 1 resetactioncount }
ifvare DELETEME 1 sizeat 51 50
ifvare DELETEME 2 sizeat 52 49
ifvare DELETEME 3 sizeat 53 49
ifvare DELETEME 4 sizeat 54 48
ifvare DELETEME 5 sizeat 54 47
ifvare DELETEME 6 sizeat 53 46
ifvare DELETEME 7 sizeat 52 46
ifvare DELETEME 8 sizeat 51 47
ifvare DELETEME 9 sizeat 50 48
ifvare DELETEME 10 sizeat 49 49
ifvare DELETEME 11 sizeat 48 50
ifvare DELETEME 12 sizeat 47 51
ifvare DELETEME 13 sizeat 46 52
ifvare DELETEME 14 sizeat 45 53
ifvare DELETEME 15 sizeat 46 53
ifvare DELETEME 16 sizeat 47 52
ifvare DELETEME 17 sizeat 48 51
ifvare DELETEME 18 sizeat 49 50
ifvare DELETEME 19 { sizeat 50 50 setvar DELETEME 0 }

ifrnd 4 { ifrnd 128 sizeat 80 40 else sizeat 32 76 ifcanseetarget ifrnd 128 guts JIBS6 1 } 
ends

spritenoshade DREAMDUKE
actor DREAMDUKE sleeptime -1
ifaction 0 { cstat 128 ifrnd 5 action ADREAMDUKE0 }

ifaction ADREAMDUKE0 {
ifrnd 32 action ADREAMDUKE1 else
ifrnd 64 action ADREAMDUKE2 else
ifrnd 96 action ADREAMDUKE3 else
ifrnd 128 action ADREAMDUKE4 else
ifrnd 156 action ADREAMDUKE5 else
ifrnd 188 action ADREAMDUKE6 else
ifrnd 220 action ADREAMDUKE7 else
action ADREAMDUKE8
}

ifaction ADREAMDUKE1 state dukedream 
ifaction ADREAMDUKE2 state dukedream 
ifaction ADREAMDUKE3 state dukedream 
ifaction ADREAMDUKE4 state dukedream 
ifaction ADREAMDUKE5 state dukedream 
ifaction ADREAMDUKE6 state dukedream 
ifaction ADREAMDUKE7 state dukedream 
ifaction ADREAMDUKE8 state dukedream 

enda

action ADREAMDOOR0 0 0 0 0 2
action ADREAMDOOR1 -741 0 0 0 2
action ADREAMDOOR2 -647 0 0 0 2
action ADREAMDOOR3 -175 0 0 0 2
action ADREAMDOOR4 -173 0 0 0 2
action ADREAMDOOR5 -157 0 0 0 2
action ADREAMDOOR6 -71 0 0 0 2
move DREAMDOORMOVE 0 
actor DREAMDOOR
ifaction 0 ifrnd 1 action ADREAMDOOR0

ifaction ADREAMDOOR0 {
ifspritepal 10 action ADREAMDOOR1
ifspritepal 11 action ADREAMDOOR2
ifspritepal 12 action ADREAMDOOR3
ifspritepal 13 action ADREAMDOOR4
ifspritepal 14 action ADREAMDOOR5
ifspritepal 15 action ADREAMDOOR6
}

ifaction ADREAMDOOR1 move DREAMDOORMOVE spin
ifaction ADREAMDOOR2 move DREAMDOORMOVE spin
ifaction ADREAMDOOR3 move DREAMDOORMOVE spin
ifaction ADREAMDOOR4 move DREAMDOORMOVE spin
ifaction ADREAMDOOR5 move DREAMDOORMOVE spin
ifaction ADREAMDOOR6 move DREAMDOORMOVE spin

enda

action ADREAMBRIDGE21 0 9 1 1 20
action ADREAMBRIDGE22 8 0 0 0 2
actor DREAMBRIDGE2
ifaction 0 ifvare OPERATE 98 { globalsound WOODFALL action ADREAMBRIDGE21 }
ifaction ADREAMBRIDGE21 ifactioncount 8 { stopsound WOODFALL globalsound WOODSLAM quake 22 
globalsound BIGDOORSLAM2 setvar OPERATE 99 action ADREAMBRIDGE22 }
enda

actor DREAMBRIDGE1 
ifaction 0 { cstat 32768 ifvare OPERATE 99 { cstat 289 sound BIGDOORSLAM2 action ZERO } }
enda

actor DREAMBEAM ifaction 0 { strength 5 action ZERO }
ifpdistl 1300 ifhitspace ifcansee ifvare PRESS_VAR 0 { setvar PRESS_VAR 2 quote 374 }
ifhitweapon { ifdead { debris SCRAP2 15 setvar OPERATE 98 sound VENT_BUST killit } else debris SCRAP2 5 }
enda

actor HELPFACE
ifaction 0 { cstat 32768 ifvare THANKS 1 action ZERO }

ifaction ZERO {
cstat 16
addvar COUNTER2 1 
ifvarg COUNTER2 1 setactor[THISACTOR].shade 0
ifvarg COUNTER2 2 setactor[THISACTOR].shade 1
ifvarg COUNTER2 3 setactor[THISACTOR].shade 2
ifvarg COUNTER2 4 setactor[THISACTOR].shade 3
ifvarg COUNTER2 5 setactor[THISACTOR].shade 4
ifvarg COUNTER2 6 setactor[THISACTOR].shade 5
ifvarg COUNTER2 7 setactor[THISACTOR].shade 6
ifvarg COUNTER2 8 setactor[THISACTOR].shade 7
ifvarg COUNTER2 9 setactor[THISACTOR].shade 8
ifvarg COUNTER2 10 setactor[THISACTOR].shade 9
ifvarg COUNTER2 11 setactor[THISACTOR].shade 10
ifvarg COUNTER2 12 setactor[THISACTOR].shade 11
ifvarg COUNTER2 13 setactor[THISACTOR].shade 12
ifvarg COUNTER2 14 setactor[THISACTOR].shade 13
ifvarg COUNTER2 15 setactor[THISACTOR].shade 14
ifvarg COUNTER2 16 setactor[THISACTOR].shade 15
ifvarg COUNTER2 17 setactor[THISACTOR].shade 16
ifvarg COUNTER2 18 setactor[THISACTOR].shade 15
ifvarg COUNTER2 19 setactor[THISACTOR].shade 14
ifvarg COUNTER2 20 setactor[THISACTOR].shade 13
ifvarg COUNTER2 21 setactor[THISACTOR].shade 12
ifvarg COUNTER2 22 setactor[THISACTOR].shade 11
ifvarg COUNTER2 23 setactor[THISACTOR].shade 10
ifvarg COUNTER2 24 setactor[THISACTOR].shade 9
ifvarg COUNTER2 25 setactor[THISACTOR].shade 8
ifvarg COUNTER2 26 setactor[THISACTOR].shade 7
ifvarg COUNTER2 27 setactor[THISACTOR].shade 6
ifvarg COUNTER2 28 setactor[THISACTOR].shade 5
ifvarg COUNTER2 29 setactor[THISACTOR].shade 4
ifvarg COUNTER2 30 setactor[THISACTOR].shade 3
ifvarg COUNTER2 31 setactor[THISACTOR].shade 2
ifvarg COUNTER2 32 setactor[THISACTOR].shade 1
ifvarg COUNTER2 33 setvar COUNTER2 0

ifpdistl 2500 ifcansee { operateactivators 239 myconnectindex palfrom 30 63 63 63 killit }
}
enda

state fakeitems
ifaction 0 ifspritepal 5 action ZERO

ifaction ZERO {
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 action ZERO2
}

ifaction ZERO2 {
ifrnd 8 { sound VANISH cstat 2 action ZERO3 }
ifpdistl 2500 ifcansee { sound VANISH cstat 2 action ZERO3 }
}

ifaction ZERO3 {
ifactioncount 3 cstat 514
ifactioncount 6 killit
}
ends

actor FAKEITEM1
state fakeitems
enda

actor FAKEITEM2
state fakeitems
enda

actor FAKEITEM3
state fakeitems
enda

actor FAKEITEM4
state fakeitems
enda

actor FAKEITEM5
state fakeitems
enda

action AFAKEOCTO1 -10 1 5 1 15
action AFAKEOCTO2 -10 3 5 1 4
action AFAKEOCTO3 -10 1 5 1 2
action AFAKEOCTO4 -10 3 5 1 4
action AFAKEOCTO5 -10 1 5 1 2
action AFAKEOCTO6 -10 3 5 1 4
action AFAKEOCTO7 -10 1 5 1 2
action AFAKEOCTO8 -10 3 5 1 4
action AFAKEOCTO9 -10 1 5 1 2

action AFAKEOCTO10 -10 3 5 1 15
action AFAKEOCTO11 -10 3 5 1 8

move FAKEOCTOMOVE1 50
move FAKEOCTOMOVE2 0

spriteshadow FAKEOCTO
actor FAKEOCTO
ifaction 0 action AFAKEOCTO1
ifaction AFAKEOCTO1 ifcansee ifpdistl 2600 { strength 50 setvar MOTIONLESS 1 action AFAKEOCTO2 }

ifaction AFAKEOCTO2 {
tip
setvar ERROR 201
ifactioncount 3 { sound OCTOSPEAK resetactioncount }
addvar DELETEME 1
ifvarg DELETEME 100 action AFAKEOCTO3
}

ifaction AFAKEOCTO3 {
setvar DELETEME 0
tip stopsound OCTOSPEAK
ifactioncount 50 setvar ERROR 200
ifactioncount 120 action AFAKEOCTO4
}

ifaction AFAKEOCTO4 {
tip
setvar ERROR 203
ifactioncount 3 { sound OCTOSPEAK resetactioncount }
addvar DELETEME 1
ifvarg DELETEME 80 action AFAKEOCTO5
}

ifaction AFAKEOCTO5 {
setvar DELETEME 0
tip stopsound OCTOSPEAK
ifactioncount 50 setvar ERROR 200
ifactioncount 120 action AFAKEOCTO6
}

ifaction AFAKEOCTO6 {
tip
setvar ERROR 205
ifactioncount 3 { sound OCTOSPEAK resetactioncount }
addvar DELETEME 1
ifvarg DELETEME 120 action AFAKEOCTO7
}

ifaction AFAKEOCTO7 {
setvar DELETEME 0
tip stopsound OCTOSPEAK
ifactioncount 50 setvar ERROR 200
ifactioncount 120 action AFAKEOCTO8
}

ifaction AFAKEOCTO8 {
tip
setvar ERROR 207
ifactioncount 3 { sound OCTOSPEAK resetactioncount }
addvar DELETEME 1
ifvarg DELETEME 100 action AFAKEOCTO9
}

ifaction AFAKEOCTO9 {
setvar DELETEME 0
tip stopsound OCTOSPEAK
ifactioncount 50 setvar ERROR 200
ifactioncount 120 { cstat 257 setvar MOTIONLESS 0 action AFAKEOCTO10 }
}

ifaction AFAKEOCTO10 {
move FAKEOCTOMOVE1 faceplayersmart geth getv
ifpdistl 1000 ifcansee action AFAKEOCTO11 }

ifaction AFAKEOCTO11 {
move FAKEOCTOMOVE2 faceplayer geth getv

ifactioncount 6 {
sound OCTOBITE
palfrom 8 32
addphealth OCTASCRATCHINGPLAYER
resetactioncount }

ifpdistg 1100 action AFAKEOCTO10
}


 ifhitweapon   
  {
guts JIBS6 4
    ifdead         
    {    
guts JIBS6 10
        sound SQUISHED
        state standard_jibs
        killit
    }
  }

enda

actor DEATHSTATUE

ifaction 0 { cstat 32768 
getplayer[THISACTOR].cursectnum rr0
getactor[THISACTOR].sectnum rr1
ifvarvare rr0 rr1 { cstat 0 action AANGELSTATUE1 }
}

ifaction AANGELSTATUE1 {
move MANGELSTATUE2 faceplayer geth getv
ifpdistl 8000 stopsound BADHUM2
ifcanseetarget ifpdistl 8000 action AANGELSTATUE2
}

ifaction AANGELSTATUE2 {
move MANGELSTATUE1 faceplayer geth getv
soundonce BADHUM2
ifcanseetarget { } else ifpdistl 6000 { } else action AANGELSTATUE1
ifactioncount 5 ifcanseetarget { palfrom 5 24 addphealth -3 resetactioncount }
ifp pdead { globalsound STATUESPEAK action AANGELSTATUE3 }
}

ifaction AANGELSTATUE3 { move 0 stopsound BADHUM2 ifp palive action AANGELSTATUE1 }

enda

state badsteps
ifrnd 64 sound BADSTEP1 else
ifrnd 128 sound BADSTEP2 else
ifrnd 192 sound BADSTEP3 else
sound BADSTEP4
ends

action AVIDEO_SPRITE0 0 0 0 0 4
action AVIDEO_SPRITE1 0 0 0 0 0
action AVIDEO_SPRITE2 0 0 0 0 2
action AVIDEO_SPRITE3 0 0 0 0 2
action AVIDEO_SPRITE4 0 0 0 0 2
action AVIDEO_SPRITE5 0 0 0 0 2
action AVIDEO_SPRITE6 0 0 0 0 2
action AVIDEO_SPRITE7 0 0 0 0 2
action AVIDEO_SPRITE8 0 0 0 0 2
action AVIDEO_SPRITE9 0 0 0 0 2
action AVIDEO_SPRITE10 0 0 0 0 2
action AVIDEO_SPRITE11 0 0 0 0 2
action AVIDEO_SPRITE12 0 0 0 0 2
action AVIDEO_SPRITE13 0 0 0 0 2
action AVIDEO_SPRITE14 0 0 0 0 2
action AVIDEO_SPRITE15 0 0 0 0 2
action AVIDEO_SPRITE16 0 0 0 0 2
action AVIDEO_SPRITE17 0 0 0 0 2
action AVIDEO_SPRITE18 0 0 0 0 2
action AVIDEO_SPRITE19 0 0 0 0 2
action AVIDEO_SPRITE20 0 0 0 0 2
action AVIDEO_SPRITE21 0 0 0 0 2
action AVIDEO_SPRITE22 0 0 0 0 2
action AVIDEO_SPRITE23 0 0 0 0 2
action AVIDEO_SPRITE24 0 0 0 0 2
action AVIDEO_SPRITE25 0 0 0 0 2
action AVIDEO_SPRITE26 0 0 0 0 2
action AVIDEO_SPRITE27 0 0 0 0 2
action AVIDEO_SPRITE28 0 0 0 0 2
action AVIDEO_SPRITE29 0 0 0 0 2
action AVIDEO_SPRITE30 0 0 0 0 2
action AVIDEO_SPRITE31 0 0 0 0 2
action AVIDEO_SPRITE32 0 0 0 0 2
action AVIDEO_SPRITE33 0 0 0 0 2
action AVIDEO_SPRITE34 0 0 0 0 2
action AVIDEO_SPRITE35 0 0 0 0 2
action AVIDEO_SPRITE36 0 0 0 0 2
action AVIDEO_SPRITE37 0 0 0 0 2
action AVIDEO_SPRITE38 0 0 0 0 2
action AVIDEO_SPRITE39 0 0 0 0 2
action AVIDEO_SPRITE40 0 0 0 0 2
action AVIDEO_SPRITE41 0 0 0 0 2
action AVIDEO_SPRITE42 0 0 0 0 2
action AVIDEO_SPRITE43 0 0 0 0 2
action AVIDEO_SPRITE44 0 0 0 0 2
action AVIDEO_SPRITE45 0 0 0 0 2
action AVIDEO_SPRITE46 0 0 0 0 2
action AVIDEO_SPRITE47 0 0 0 0 2
action AVIDEO_SPRITE48 0 0 0 0 2
action AVIDEO_SPRITE49 0 0 0 0 2

state stopthemovie
ifhitspace {
sound TVEYE1 sound TVEYE2
setvar MOVIE 61
setvar PICTURESCREEN 0
action AVIDEO_SPRITE49 }
ends

actor VIDEO_SPRITE
ifspritepal 9 {
sleeptime -1
ifaction 0 ifvare MOVIE 1 action AVIDEO_SPRITE1

ifaction AVIDEO_SPRITE1 {
ifactioncount 8 palfrom 4 0
ifactioncount 16 palfrom 8 0
ifactioncount 24 palfrom 12 0
ifactioncount 32 palfrom 16 0
ifactioncount 40 palfrom 20 0
ifactioncount 48 palfrom 24 0
ifactioncount 56 palfrom 28 0
ifactioncount 64 palfrom 32 0
ifactioncount 72 palfrom 36 0
ifactioncount 80 palfrom 40 0
ifactioncount 88 palfrom 44 0
ifactioncount 96 palfrom 48 0
ifactioncount 104 palfrom 52 0
ifactioncount 112 palfrom 56 0
ifactioncount 120 { palfrom 60 0 starttrack 1 setvar NOWEAPON 1 setvar MOVIE 2 setvar PICTURESCREEN 0 action AVIDEO_SPRITE0 }
}

ifaction AVIDEO_SPRITE0 {
state holdme
ifactioncount 2 palfrom 0 0

ifactioncount 30 ifvare PICTURESCREEN 0 setvar PICTURESCREEN 300
ifactioncount 40 ifvare PICTURESCREEN 300 setvar PICTURESCREEN 301
ifactioncount 50 ifvare PICTURESCREEN 301 setvar PICTURESCREEN 302
ifactioncount 60 ifvare PICTURESCREEN 302 setvar PICTURESCREEN 303
ifactioncount 70 ifvare PICTURESCREEN 303 setvar PICTURESCREEN 304
ifactioncount 80 ifvare PICTURESCREEN 304 setvar PICTURESCREEN 305
ifactioncount 90 ifvare PICTURESCREEN 305 setvar PICTURESCREEN 306
ifactioncount 100 ifvare PICTURESCREEN 306 setvar PICTURESCREEN 307
ifactioncount 110 ifvare PICTURESCREEN 307 setvar PICTURESCREEN 400

ifactioncount 130 { palfrom 70 0 setvar PICTURESCREEN 0 setvar MOVIE 300 action AVIDEO_SPRITE2 }
}

ifaction AVIDEO_SPRITE2 {
ifactioncount 2 palfrom 0 0
soundonce VIDEO1
state holdme
ifactioncount 150 state stopthemovie
ifactioncount 100 ifvare MOVIE 300 setvar MOVIE 301
ifactioncount 150 ifvare MOVIE 301 setvar MOVIE 3
ifactioncount 260 { setvar MOVIE 3 action AVIDEO_SPRITE3 } 
}

//company
ifaction AVIDEO_SPRITE3 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 150 { setvar MOVIE 4 action AVIDEO_SPRITE4 } 
}

ifaction AVIDEO_SPRITE4 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 100 { setvar MOVIE 5 action AVIDEO_SPRITE5 } 
}

//title
ifaction AVIDEO_SPRITE5 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 250 { setvar MOVIE 6 action AVIDEO_SPRITE6 } 
}

ifaction AVIDEO_SPRITE6 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 60 { setvar MOVIE 7 action AVIDEO_SPRITE7 } 
}

//first communication
ifaction AVIDEO_SPRITE7 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 250 { setvar MOVIE 8 action AVIDEO_SPRITE8 } 
}


ifaction AVIDEO_SPRITE8 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 50 { setvar MOVIE 9 action AVIDEO_SPRITE9 } 
}

//second communication
ifaction AVIDEO_SPRITE9 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 250 { setvar MOVIE 10 action AVIDEO_SPRITE10 } 
}


ifaction AVIDEO_SPRITE10 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 50 { setvar MOVIE 11 action AVIDEO_SPRITE11 } 
}

//list
ifaction AVIDEO_SPRITE11 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 30 ifvare MOVIE 11 setvar MOVIE 12 
ifactioncount 60 ifvare MOVIE 12 setvar MOVIE 13
ifactioncount 90 ifvare MOVIE 13 setvar MOVIE 14
ifactioncount 120 ifvare MOVIE 14 setvar MOVIE 15
ifactioncount 150 ifvare MOVIE 15 setvar MOVIE 16
ifactioncount 180 ifvare MOVIE 16 setvar MOVIE 17
ifactioncount 210 ifvare MOVIE 17 setvar MOVIE 18

ifactioncount 350 { setvar MOVIE 19 action AVIDEO_SPRITE12 } 
}

ifaction AVIDEO_SPRITE12 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 50 { setvar MOVIE 20 action AVIDEO_SPRITE13 } 
}

//third communication
ifaction AVIDEO_SPRITE13 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 250 { setvar MOVIE 21 action AVIDEO_SPRITE14 } 
}


ifaction AVIDEO_SPRITE14 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 50 { setvar MOVIE 22 action AVIDEO_SPRITE15 } 
}

//fourth communication
ifaction AVIDEO_SPRITE15 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 250 { setvar MOVIE 23 action AVIDEO_SPRITE16 } 
}


ifaction AVIDEO_SPRITE16 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 100 { setvar MOVIE 24 action AVIDEO_SPRITE17 } 
}

ifaction AVIDEO_SPRITE17 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 180 { setvar MOVIE 25 action AVIDEO_SPRITE18 } 
}

ifaction AVIDEO_SPRITE18 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 180 { setvar MOVIE 26 action AVIDEO_SPRITE19 } 
}

ifaction AVIDEO_SPRITE19 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 180 { setvar MOVIE 27 action AVIDEO_SPRITE20 } 
}

ifaction AVIDEO_SPRITE20 {
state stopthemovie
soundonce VIDEO1
soundonce VIDEO2
state holdme
ifactioncount 150 { setvar MOVIE 28 action AVIDEO_SPRITE21 } 
}

ifaction AVIDEO_SPRITE21 {
state stopthemovie
soundonce VIDEO1
stopsound VIDEO2
state holdme
ifactioncount 100 { sound PRED_RECOG setvar MOVIE 29 action AVIDEO_SPRITE22 } 
}

ifaction AVIDEO_SPRITE22 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 20 { stopsound PRED_RECOG setvar MOVIE 30 action AVIDEO_SPRITE23 } 
}

ifaction AVIDEO_SPRITE23 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 100 { setvar MOVIE 31 action AVIDEO_SPRITE24 } 
}

ifaction AVIDEO_SPRITE24 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 100 { setvar MOVIE 32 action AVIDEO_SPRITE25 } 
}

ifaction AVIDEO_SPRITE25 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 180 { setvar MOVIE 33 action AVIDEO_SPRITE26 } 
}

ifaction AVIDEO_SPRITE26 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 180 { setvar MOVIE 35 action AVIDEO_SPRITE28 } 
}

ifaction AVIDEO_SPRITE27 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 180 { setvar MOVIE 35 action AVIDEO_SPRITE28 } 
}

ifaction AVIDEO_SPRITE28 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 180 { setvar MOVIE 36 action AVIDEO_SPRITE29 } 
}

ifaction AVIDEO_SPRITE29 {
state stopthemovie
soundonce VIDEO1
soundonce VIDEO2
state holdme
ifactioncount 140 { setvar MOVIE 37 action AVIDEO_SPRITE30 } 
}

ifaction AVIDEO_SPRITE30 {
state stopthemovie
soundonce VIDEO1
stopsound VIDEO2
state holdme
ifactioncount 100 { sound CAPT_RECOG2 setvar MOVIE 38 action AVIDEO_SPRITE31 } 
}

ifaction AVIDEO_SPRITE31 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 20 { stopsound CAPT_RECOG2 setvar MOVIE 39 action AVIDEO_SPRITE32 } 
}

ifaction AVIDEO_SPRITE32 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 100 { setvar MOVIE 40 action AVIDEO_SPRITE33 } 
}

ifaction AVIDEO_SPRITE33 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 100 { setvar MOVIE 41 action AVIDEO_SPRITE34 } 
}

ifaction AVIDEO_SPRITE34 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 50 { setvar MOVIE 42 action AVIDEO_SPRITE35 } 
}

ifaction AVIDEO_SPRITE35 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 300 { setvar MOVIE 43 action AVIDEO_SPRITE36 } 
}

ifaction AVIDEO_SPRITE36 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 50 { setvar MOVIE 44 action AVIDEO_SPRITE37 } 
}

ifaction AVIDEO_SPRITE37 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 350 { setvar MOVIE 45 action AVIDEO_SPRITE38 } 
}

ifaction AVIDEO_SPRITE38 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 50 { setvar MOVIE 46 action AVIDEO_SPRITE39 } 
}

ifaction AVIDEO_SPRITE39 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 300 { setvar MOVIE 47 action AVIDEO_SPRITE40 } 
}

ifaction AVIDEO_SPRITE40 {
state stopthemovie
soundonce VIDEO1
state holdme
ifactioncount 50 { setvar MOVIE 48 action AVIDEO_SPRITE41 } 
}

ifaction AVIDEO_SPRITE41 {
state stopthemovie
soundonce VIDEO1
soundonce VIDEO3
state holdme
ifactioncount 300 { setvar MOVIE 49 action AVIDEO_SPRITE42 } 
}

ifaction AVIDEO_SPRITE42 {
state stopthemovie
soundonce VIDEO1
soundonce VIDEO3
state holdme
ifactioncount 100 { setvar MOVIE 50 action AVIDEO_SPRITE43 } 
}

ifaction AVIDEO_SPRITE43 {
state stopthemovie
soundonce VIDEO1
soundonce VIDEO3
state holdme
ifactioncount 300 { setvar MOVIE 51 action AVIDEO_SPRITE44 } 
}

ifaction AVIDEO_SPRITE44 {
state stopthemovie
stopsound VIDEO3
soundonce VIDEO1
soundonce VIDEO2
state holdme
ifactioncount 130 { setvar MOVIE 52 action AVIDEO_SPRITE45 } 
}

ifaction AVIDEO_SPRITE45 {
state stopthemovie
soundonce VIDEO1
stopsound VIDEO2
state holdme
ifactioncount 50 action AVIDEO_SPRITE46 
}

ifaction AVIDEO_SPRITE46 {
state stopthemovie
stopsound VIDEO1
state holdme
ifactioncount 40 { setvar MOVIE 53 action AVIDEO_SPRITE48 } 
}

ifaction AVIDEO_SPRITE48 {
state stopthemovie
state holdme
ifactioncount 80 ifvare MOVIE 53 { state badsteps setvar MOVIE 54 } 
ifactioncount 140 ifvare MOVIE 54 { state badsteps setvar MOVIE 55 } 
ifactioncount 200 ifvare MOVIE 55 { state badsteps setvar MOVIE 56 } 
ifactioncount 260 ifvare MOVIE 56 { state badsteps setvar MOVIE 57 } 
ifactioncount 320 ifvare MOVIE 57 { state badsteps setvar MOVIE 58 } 
ifactioncount 380 ifvare MOVIE 58 { state badsteps setvar MOVIE 59 } 
ifactioncount 440 ifvare MOVIE 59 { state badsteps setvar MOVIE 60 } 
ifactioncount 500 ifvare MOVIE 60 { state badsteps setvar MOVIE 61 } 
ifactioncount 600 ifvare MOVIE 61 { sound TVEYE1 sound TVEYE2 setvar MOVIE 61 action AVIDEO_SPRITE49 } 
}

ifaction AVIDEO_SPRITE49 {
palfrom 70 0
stopsound VIDEO1
stopsound VIDEO2
stopsound VIDEO3
stopsound PRED_RECOG
stopsound CAPT_RECOG2
stopsound BADSTEP1
stopsound BADSTEP2
stopsound BADSTEP3
stopsound BADSTEP4
state holdme
ifactioncount 60 { palfrom 70 0 setvar MOVIE 0 setvar NOWEAPON 0 setvar TELEPORT 456 killit } 
}


}
enda

spritenoshade FRIEND
actor FRIEND sleeptime -1
ifaction 0 { cstat 32768 ifvare MOVIE 3 action ZERO }

ifaction ZERO {  
//ifrnd 32 cstat 2 else 
cstat 0
ifcansee ifpdistl 10000 ifp pfacing { globalsound FRIENDSOUND action ZERO2 }
}

ifaction ZERO2 {
soundonce VIDEO3
cstat 0
ifrnd 32 palfrom 5 0 else palfrom 0 0
state lookatme tip
ifactioncount 60 action ZERO3
}

ifaction ZERO3 {
soundonce VIDEO3
ifrnd 12 cstat 2 else cstat 0
ifrnd 64 palfrom 10 0 else palfrom 0 0
state lookatme tip
ifactioncount 60 action ZERO4
}

ifaction ZERO4 {
soundonce VIDEO3
ifrnd 24 cstat 2 else cstat 0
ifrnd 6 sizeat 6 4 else sizeat 5 4
ifrnd 1 sizeat 9 4
ifrnd 96 palfrom 15 0 else palfrom 0 0
state lookatme tip
ifactioncount 60 { setvar PICTURESCREEN 332 globalsound VOICE20 action ZERO5 }
}

ifaction ZERO5 {
soundonce VIDEO3
ifrnd 8 quake 5
stopsound EARTHQUAKE
ifrnd 36 cstat 2 else cstat 0
ifrnd 9 sizeat 6 4 else sizeat 5 4
ifrnd 2 sizeat 9 4
ifrnd 128 palfrom 20 0 else palfrom 0 0
state lookatme tip
ifactioncount 140 ifvare PICTURESCREEN 332 setvar PICTURESCREEN 0

ifactioncount 220 { stopsound VIDEO3 stopsound FRIENDSOUND palfrom 0 0 setvar MOTIONLESS 0 killit }
}


enda

action ADUKEBOX0 500 0 0 0 2
action ADUKEBOX1 -1 0 0 0 2
action ADUKEBOX2 0 0 0 0 2

state dukeboxes
ifaction 0 action ADUKEBOX0
ifaction ADUKEBOX0 ifvare OPERATE 1984 action ADUKEBOX1
ifaction ADUKEBOX1 ifvare OPERATE 1996 action ADUKEBOX2
ifaction ADUKEBOX2 ifvare OPERATE 2024 killit 
ends

actor DUKEBOX1
state dukeboxes
enda

actor DUKEBOX2
state dukeboxes
enda

actor DUKEBOX3
state dukeboxes
enda

action AOLDPC1 0 0 0 0 2
action AOLDPC2 1 0 0 0 2

actor DUKEMONITOR 
ifaction 0 ifvare OPERATE 1985 action AOLDPC1
ifaction AOLDPC1 ifactioncount 50 action AOLDPC2
enda

actor DUKEPC 
ifaction 0 ifvare OPERATE 1985 action AOLDPC2
enda

action ADUKEGAME1 0 0 0 0 2
action ADUKEGAME2 1 0 0 0 2
action ADUKEGAME3 2 0 0 0 2
action ADUKEGAME4 2 0 0 0 2
action ADUKEGAME5 3 32 1 1 9
action ADUKEGAME6 35 0 0 0 2
action ADUKEGAME7 36 0 0 0 2
action ADUKEGAME8 36 0 0 0 2
action ADUKEGAME9 37 0 0 0 2
actor DUKEGAME

ifaction 0 {
spritepal 4
ifpdistl 1200 ifcansee ifp pfacing setvar PRESSTEXT 2
ifaction 0 ifpdistl 1200 ifcansee ifhitspace ifp pfacing ifvare PRESS_VAR 0 
{ ifvare OPERATE 2024 { setvar OPERATE 1985 setvar MOTIONLESS 1 sound TURNONPC action ADUKEGAME1 } else { setvar PRESS_VAR 2 quote 371 } } 
}

ifaction ADUKEGAME1 { 
ifactioncount 15 soundonce PCON
ifactioncount 150 spritepal 0 
ifactioncount 190 { ifrnd 6 action ADUKEGAME2 }
}

ifaction ADUKEGAME2 { 
soundonce PCON
ifactioncount 40 { ifrnd 6 action ADUKEGAME3 } }

ifaction ADUKEGAME3 { 
soundonce PCON
ifactioncount 40 { ifrnd 6 action ADUKEGAME4 } }

ifaction ADUKEGAME4 { 
spritepal 4
soundonce PCON
ifactioncount 30 { sound FLY_BY action ADUKEGAME5 }
}

ifaction ADUKEGAME5 {
spritepal 0
soundonce PCON
ifactioncount 13 ifvare s 0 { sound LASERTRIP_EXPLODE setvar s 1 }
ifactioncount 32 action ADUKEGAME6
}

ifaction ADUKEGAME6 {
soundonce PCON
ifactioncount 70 { setactor[THISACTOR].shade 30 action ADUKEGAME7 }
}

ifaction ADUKEGAME7 {
getactor[THISACTOR].shade DELETEME
ifvarg DELETEME 0 subvar DELETEME 2
setactor[THISACTOR].shade DELETEME
soundonce ENDSEQVOL3SND4
soundonce PCON

ifactioncount 150 action ADUKEGAME8 }

ifaction ADUKEGAME8 {
getactor[THISACTOR].shade DELETEME
ifvarl DELETEME 31 addvar DELETEME 2
setactor[THISACTOR].shade DELETEME
soundonce ENDSEQVOL3SND4
soundonce PCON
ifvare DELETEME 30 action ADUKEGAME9 }

ifaction ADUKEGAME9 {
getactor[THISACTOR].shade DELETEME
ifvarg DELETEME 0 subvar DELETEME 2
setactor[THISACTOR].shade DELETEME
soundonce ENDSEQVOL3SND4
soundonce PCON
ifactioncount 70 ifvare s 1 { sound LASERTRIP_EXPLODE setvar OPERATE 1986 setvar s 2 }
ifactioncount 100 ifvare s 2 { sound LASERTRIP_EXPLODE setvar OPERATE 1987 setvar s 3 }
}


enda

actor DUKETITLE1
ifaction 0 { cstat 32768 ifvare OPERATE 1987 action ZERO }
ifaction ZERO {
cstat 208
ifactioncount 2 sizeat 4 5
ifactioncount 4 sizeat 5 7
ifactioncount 6 sizeat 6 8
ifactioncount 8 sizeat 7 10
ifactioncount 10 sizeat 8 11
ifactioncount 12 sizeat 9 12
ifactioncount 14 sizeat 10 14
 }
enda

actor DUKETITLE2
ifaction 0 { cstat 32768 ifvare OPERATE 1986 action ZERO }
ifaction ZERO {
cstat 208
ifactioncount 2 sizeat 4 5
ifactioncount 4 sizeat 4 7
ifactioncount 6 sizeat 5 8
ifactioncount 8 sizeat 6 10
ifactioncount 10 sizeat 6 11
ifactioncount 12 sizeat 7 12
ifactioncount 14 sizeat 8 14
}
enda

state holdingplayer
getactor[THISACTOR].x TEMPORARY
setplayer[THISACTOR].posx TEMPORARY

getactor[THISACTOR].y TEMPORARY
setplayer[THISACTOR].posy TEMPORARY

getactor[THISACTOR].sectnum TEMPORARY
setplayer[THISACTOR].cursectnum TEMPORARY

//setvar TEMPORARY 1
//setplayer[THISACTOR].on_ground TEMPORARY

getactor[THISACTOR].z TEMPORARY
addvar TEMPORARY -9720
setplayer[THISACTOR].posz TEMPORARY
ends

actor ANGLE_SPRITE cstat 32768 clipdist 1
stopsound DUKE_LAND
setplayer[THISACTOR].falling_counter 0
setplayer[THISACTOR].on_ground 0
ifspawnedby APLAYER spritepal 9

ifaction 0 ifspritepal 9 { 
state holdingplayer
setactor[THISACTOR].ang 0
ifvare OPERATE 1987 action ZERO
}

ifaction ZERO {
state holdingplayer
ifactioncount 100 {
getactor[THISACTOR].x COUNTER
subvar COUNTER 16
setactor[THISACTOR].x COUNTER
}

ifactioncount 100 {
getactor[THISACTOR].z COUNTER2
subvar COUNTER2 22
setactor[THISACTOR].z COUNTER2
}

ifactioncount 420 action ZERO2
}

ifaction ZERO2 {
state holdingplayer

getactor[THISACTOR].x COUNTER
subvar COUNTER 20
setactor[THISACTOR].x COUNTER

getactor[THISACTOR].z COUNTER2
subvar COUNTER2 22
setactor[THISACTOR].z COUNTER2

ifactioncount 10 palfrom 4 63 63 63 
ifactioncount 20 palfrom 8 63 63 63 
ifactioncount 30 palfrom 12 63 63 63 
ifactioncount 40 palfrom 16 63 63 63 
ifactioncount 50 palfrom 20 63 63 63 
ifactioncount 60 palfrom 24 63 63 63 
ifactioncount 70 palfrom 28 63 63 63 
ifactioncount 80 palfrom 32 63 63 63 
ifactioncount 90 palfrom 36 63 63 63 
ifactioncount 100 palfrom 40 63 63 63 
ifactioncount 110 palfrom 44 63 63 63 
ifactioncount 120 palfrom 48 63 63 63 
ifactioncount 130 palfrom 52 63 63 63 
ifactioncount 140 palfrom 56 63 63 63 
ifactioncount 150 { setvar TELEPORT 1339 palfrom 70 63 63 63 killit }
}


enda

action AERRORSTEP1 906 0 0 0 2
action AERRORSTEP2 0 0 0 0 2
actor ERRORSTEP
//spritepal 24
ifaction 0 action AERRORSTEP1 
ifaction AERRORSTEP1 { ifvare ERROR 1 action AERRORSTEP2 }
ifaction AERRORSTEP2 ifvarg NEWGOD 3 killit
enda

actor PAYATTENTION
cstat 130
ifaction 0 { ifrnd 128 sizeat 6 12 else sizeat 4 11 action ZERO }
ifaction ZERO ifactioncount 2 killit
enda

spritenoshade PAYATTENTION
spritenoshade 5172
spritenoshade 5171
spritenoshade 5177

onevent EVENT_ENTERLEVEL
setvar COINVAR 0
setvar NEWGOD 0
setvar KEY1 0
setvar KEY2 0
setvar KEY3 0
setvar KEY4 0
setvar TOTALKEYS 0
setvar KIDAGAIN 0
setvar MOTIONLESS 0
setvar MOLDYCARD 0
setvar GHOSTCARD 0
setvar OPERATE 0
setvar REELVAR 0
setvar ROPEVAR 0
setvar EFFECT 0
setvar MESSAGE 0
setvar CAUGHT 0
setvar VHSFILTER 0
setvar ERROR 0
setvar spawnspawner 0
setvar NOWEAPON 0
setvar FORGET 0
setvar MOTIONLESS 0
setvar CHECKHOWMANY 0
setvar TELEPORT 0
setvar PICTURESCREEN 0
setvar OBELISK 0
setvar OBELISKPLACED 0
setvar TOTALOBELISK 0
setgamepalette 0
endevent


onevent EVENT_ACTIVATECHEAT 
ifvare RETURN 11 {
setvar COINVAR 0
setvar NEWGOD 0
setvar KIDAGAIN 0
setvar KEY1 0
setvar KEY2 0
setvar KEY3 0
setvar KEY4 0
setvar TOTALKEYS 0
setvar MOTIONLESS 0
setvar MOLDYCARD 0
setvar GHOSTCARD 0
setvar OPERATE 0
setvar MOVIE 0
setvar REELVAR 0
setvar ROPEVAR 0
setvar EFFECT 0
setvar MESSAGE 0
setvar CAUGHT 0
setvar VHSFILTER 0
setvar ERROR 200
setvar spawnspawner 0
setvar FORGET 1
setvar NOWEAPON 0
setvar CHECKHOWMANY 0
setvar TELEPORT 0
setvar PICTURESCREEN 0
setvar OBELISK 0
setvar OBELISKPLACED 0
setvar TOTALOBELISK 0
setgamepalette 0
starttrack 1
}
endevent

